(self.webpackChunkgetstream_chat=self.webpackChunkgetstream_chat||[]).push([[440],{5440:(Z,K,_)=>{"use strict";_.r(K),_.d(K,{ChatPageComponent:()=>Mf});var g=_(5861),p=_(4942),E=_(3900),b=_(4004),D=_(262),k=_(9646),O=_(2340),w=_(655),t=_(4650),y=_(1135),L=_(4707),S=_(9841),ee=_(7579),H=_(5963),W=_(5343);function X(){return X=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},X.apply(this,arguments)}var se=_(1002);function ae(i,a){if(null==i)return{};var n,s,e=function ce(i,a){if(null==i)return{};var s,r,e={},n=Object.keys(i);for(r=0;r<n.length;r++)!(a.indexOf(s=n[r])>=0)&&(e[s]=i[s]);return e}(i,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)!(a.indexOf(n=r[s])>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function le(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function re(i,a){if(i){if("string"==typeof i)return le(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return le(i,a)}}function I(i){return function $(i){if(Array.isArray(i))return le(i)}(i)||function J(i){if(typeof Symbol<"u"&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||re(i)||function Pe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}var F=_(3997);function U(i,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,(0,F.Z)(n.key),n)}}function j(i,a,e){return a&&U(i.prototype,a),e&&U(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}var N=_(4687),h=_.n(N),T=_(3014),M=_.n(T);function de(i,a){return function z(i){if(Array.isArray(i))return i}(i)||function V(i,a){var e=null==i?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(null!=e){var n,s,r,o,l=[],c=!0,u=!1;try{if(r=(e=e.call(i)).next,0===a){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=r.call(e)).done)&&(l.push(n.value),l.length!==a);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}(i,a)||re(i,a)||function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var me=_(593),we=_.n(me),Fe=_(9151),Ae=_.n(Fe);function fe(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ze(i,a){return(Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n})(i,a)}function Lt(i){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(i)}function Kt(i,a,e){return(Kt=function Hs(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(s,r,o){var l=[null];l.push.apply(l,r);var u=new(Function.bind.apply(s,l));return o&&Ze(u,o.prototype),u}).apply(null,arguments)}function _n(i){var a="function"==typeof Map?new Map:void 0;return _n=function(n){if(null===n||!function Ns(i){return-1!==Function.toString.call(i).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(n))return a.get(n);a.set(n,s)}function s(){return Kt(n,arguments,Lt(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Ze(s,n)},_n(i)}function vn(i){return"string"==typeof i}function ti(i,a){return!!a&&vn(i)}var $s=function(a){return(0,W.JQ)(new Uint8Array(function js(i,a){var e=[];if(vn(i)&&ti(i,a)){for(var n=0,s=i.length;n<s;n++)if(i.charAt(n)){var o=a(i.charAt(n),n,i);e[n]=o}}else if(!vn(i)&&!ti(i,a))for(var l=0,c=i.length;l<c;l++)if(l in i){var d=a(i[l],l,i);e[l]=d}return e}(a,function(e){return e.charCodeAt(0)})))},qs=null;function ni(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function qe(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?ni(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ni(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var zs=function(){function i(a){var n,e=this;q(this,i),(0,p.Z)(this,"_channel",void 0),(0,p.Z)(this,"watcher_count",void 0),(0,p.Z)(this,"typing",void 0),(0,p.Z)(this,"read",void 0),(0,p.Z)(this,"pinnedMessages",void 0),(0,p.Z)(this,"pending_messages",void 0),(0,p.Z)(this,"threads",void 0),(0,p.Z)(this,"mutedUsers",void 0),(0,p.Z)(this,"watchers",void 0),(0,p.Z)(this,"members",void 0),(0,p.Z)(this,"unreadCount",void 0),(0,p.Z)(this,"membership",void 0),(0,p.Z)(this,"last_message_at",void 0),(0,p.Z)(this,"isUpToDate",void 0),(0,p.Z)(this,"messageSets",[]),(0,p.Z)(this,"setIsUpToDate",function(s){e.isUpToDate=s}),(0,p.Z)(this,"removeMessageFromArray",function(s,r){var o=s.filter(function(l){return!(l.id&&r.id&&l.id===r.id)});return{removed:o.length<s.length,result:o}}),(0,p.Z)(this,"updateUserMessages",function(s){var r=function(c,u){for(var d=0;d<c.length;d++){var m,f=c[d];(null===(m=f.user)||void 0===m?void 0:m.id)===u.id&&(c[d]=qe(qe({},f),{},{user:u}))}};for(var o in e.messageSets.forEach(function(l){return r(l.messages,s)}),e.threads)r(e.threads[o],s);r(e.pinnedMessages,s)}),(0,p.Z)(this,"deleteUserMessages",function(s){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=function(u,d){for(var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=0;f<u.length;f++){var v,C=u[f];(null===(v=C.user)||void 0===v?void 0:v.id)===d.id&&(u[f]=m?{cid:C.cid,created_at:C.created_at,deleted_at:d.deleted_at,id:C.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:C.parent_id,reply_count:C.reply_count,status:C.status,thread_participants:C.thread_participants,type:"deleted",updated_at:C.updated_at,user:C.user}:qe(qe({},C),{},{type:"deleted",deleted_at:d.deleted_at}))}};for(var l in e.messageSets.forEach(function(c){return o(c.messages,s,r)}),e.threads)o(e.threads[l],s,r);o(e.pinnedMessages,s,r)}),this._channel=a,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=null!=(null==a||null===(n=a.state)||void 0===n?void 0:n.last_message_at)?new Date(a.state.last_message_at):null}return j(i,[{key:"messages",get:function(){var e;return(null===(e=this.messageSets.find(function(n){return n.isCurrent}))||void 0===e?void 0:e.messages)||[]},set:function(e){var n=this.messageSets.findIndex(function(s){return s.isCurrent});this.messageSets[n].messages=e}},{key:"latestMessages",get:function(){var e;return(null===(e=this.messageSets.find(function(n){return n.isLatest}))||void 0===e?void 0:e.messages)||[]},set:function(e){var n=this.messageSets.findIndex(function(s){return s.isLatest});this.messageSets[n].messages=e}},{key:"addMessageSorted",value:function(e){return this.addMessagesSorted([e],arguments.length>1&&void 0!==arguments[1]&&arguments[1],!1,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest")}},{key:"formatMessage",value:function(e){return qe(qe({},e),{},{__html:e.html,pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"})}},{key:"addMessagesSorted",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=this.findTargetMessageSet(e,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:"current"),c=l.messagesToAdd,u=l.targetMessageSetIndex,d=0;d<c.length;d+=1)if(!c[d].shadowed){var C,v=void 0;c[d].created_at instanceof Date?v=c[d]:((v=this.formatMessage(c[d])).user&&null!==(C=this._channel)&&void 0!==C&&C.cid&&this._channel.getClient().state.updateUserReference(v.user,this._channel.cid),s&&v.id&&this.threads[v.id]&&delete this.threads[v.id],this.last_message_at||(this.last_message_at=new Date(v.created_at.getTime())),v.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(v.created_at.getTime())));var R=v.parent_id;if((!R||v.show_in_channel)&&-1!==u&&(this.messageSets[u].messages=this._addToMessageList(this.messageSets[u].messages,v,n,"created_at",r)),R&&!s){var Q=this._addToMessageList(this.threads[R]||[],v,n,"created_at",r);this.threads[R]=Q}}return{messageSet:this.messageSets[u]}}},{key:"addPinnedMessages",value:function(e){for(var n=0;n<e.length;n+=1)this.addPinnedMessage(e[n])}},{key:"addPinnedMessage",value:function(e){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(e),!1,"pinned_at")}},{key:"removePinnedMessage",value:function(e){var n=this.removeMessageFromArray(this.pinnedMessages,e);this.pinnedMessages=n.result}},{key:"addReaction",value:function(e,n,s){var r=this;if(n){var o=n;return this._updateMessage(n,function(l){return o.own_reactions=r._addOwnReactionToMessage(l.own_reactions,e,s),r.formatMessage(o)}),o}}},{key:"_addOwnReactionToMessage",value:function(e,n,s){return e=(e=s?[]:this._removeOwnReactionFromMessage(e,n))||[],this._channel.getClient().userID===n.user_id&&e.push(n),e}},{key:"_removeOwnReactionFromMessage",value:function(e,n){return e&&e.filter(function(s){return s.user_id!==n.user_id||s.type!==n.type})}},{key:"removeReaction",value:function(e,n){var s=this;if(n){var r=n;return this._updateMessage(n,function(o){return r.own_reactions=s._removeOwnReactionFromMessage(o.own_reactions,e),s.formatMessage(r)}),r}}},{key:"removeQuotedMessageReferences",value:function(e){var n=this,s=function(o){var l,c;return qe(qe({},o),{},{created_at:o.created_at.toString(),pinned_at:null===(l=o.pinned_at)||void 0===l?void 0:l.toString(),updated_at:null===(c=o.updated_at)||void 0===c?void 0:c.toString()})};this.messageSets.forEach(function(r){var o=r.messages.filter(function(l){return l.quoted_message_id===e.id}).map(s).map(function(l){return qe(qe({},l),{},{quoted_message:qe(qe({},e),{},{attachments:[]})})});n.addMessagesSorted(o,!0)})}},{key:"_updateMessage",value:function(e,n){var s=e.parent_id,r=e.show_in_channel,o=e.pinned;if(s&&this.threads[s]){var l=this.threads[s],c=l.findIndex(function(f){return f.id===e.id});-1!==c&&(l[c]=n(l[c]),this.threads[s]=l)}if(!r&&!s||r){var u=this.findMessageSetIndex(e);if(-1!==u){var d=this.messageSets[u].messages.findIndex(function(f){return f.id===e.id});-1!==d&&(this.messageSets[u].messages[d]=n(this.messageSets[u].messages[d]))}}if(o){var m=this.pinnedMessages.findIndex(function(f){return f.id===e.id});-1!==m&&(this.pinnedMessages[m]=n(this.pinnedMessages[m]))}}},{key:"_addToMessageList",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"created_at",l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4]||s,c=e;s&&(c=c.filter(function(R){return!(R.id&&n.id===R.id)}));var u=c.length;if(0===u&&l)return c.concat(n);if(0===u)return I(c);var d=n[r].getTime(),m=c[u-1][r].getTime()<d;if(m&&l)return c.concat(n);if(m)return I(c);for(var f=0,v=0,C=u-1;f<=C;)c[v=Math.floor((C+f)/2)][r].getTime()<=d?f=v+1:C=v-1;if(!s&&n.id){if(c[f]&&n.id===c[f].id)return c[f]=n,I(c);if(c[f-1]&&n.id===c[f-1].id)return c[f-1]=n,I(c)}return l&&c.splice(f,0,n),I(c)}},{key:"removeMessage",value:function(e){var n=!1;if(e.parent_id&&this.threads[e.parent_id]){var s=this.removeMessageFromArray(this.threads[e.parent_id],e),r=s.removed;this.threads[e.parent_id]=s.result,n=r}else{var l,c=null!==(l=e.messageSetIndex)&&void 0!==l?l:this.findMessageSetIndex(e);if(-1!==c){var u=this.removeMessageFromArray(this.messageSets[c].messages,e),d=u.removed;this.messageSets[c].messages=u.result,n=d}}return n}},{key:"filterErrorMessages",value:function(){var e=this.latestMessages.filter(function(n){return"error"!==n.type});this.latestMessages=e}},{key:"clean",value:function(){for(var e=new Date,n=0,s=Object.entries(this.typing);n<s.length;n++){var r=de(s[n],2),o=r[0],l=r[1],c="string"==typeof l.received_at?new Date(l.received_at):l.received_at||new Date;e.getTime()-c.getTime()>7e3&&(delete this.typing[o],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:o}}))}}},{key:"clearMessages",value:function(){this.initMessages(),this.pinnedMessages=[]}},{key:"initMessages",value:function(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0}]}},{key:"loadMessageIntoState",value:(a=(0,g.Z)(h().mark(function n(s,r){var o,l,c,u,d,m,f=arguments;return h().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(l=f.length>2&&void 0!==f[2]?f[2]:25,u=!1,d=!1,m=r||s,"latest"!==s){C.next=10;break}if(this.messages!==this.latestMessages){C.next=7;break}return C.abrupt("return");case 7:c=this.messageSets.findIndex(function(R){return R.isLatest}),C.next=11;break;case 10:c=this.findMessageSetIndex({id:m});case 11:if(-1!==c&&(this.switchToMessageSet(c),u=!0),d=!r||!(null===(o=this.threads[r])||void 0===o||!o.find(function(R){return R.id===s})),!u||!d){C.next=15;break}return C.abrupt("return");case 15:if(u){C.next=18;break}return C.next=18,this._channel.query({messages:{id_around:m,limit:l}},"new");case 18:if(d||!r){C.next=21;break}return C.next=21,this._channel.getReplies(r,{id_around:s,limit:l});case 21:-1!==(c=this.findMessageSetIndex({id:m}))&&this.switchToMessageSet(c);case 23:case"end":return C.stop()}},n,this)})),function e(n,s){return a.apply(this,arguments)})},{key:"findMessage",value:function(e,n){if(n){var s=this.threads[n];return s?s.find(function(o){return o.id===e}):void 0}var r=this.findMessageSetIndex({id:e});if(-1!==r)return this.messageSets[r].messages.find(function(o){return o.id===e})}},{key:"switchToMessageSet",value:function(e){var n=this.messageSets.find(function(s){return s.isCurrent});n&&(n.isCurrent=!1,this.messageSets[e].isCurrent=!0)}},{key:"areMessageSetsOverlap",value:function(e,n){return e.some(function(s){return n.find(function(r){return s.id===r.id})})}},{key:"findMessageSetIndex",value:function(e){return this.messageSets.findIndex(function(n){return!!n.messages.find(function(s){return s.id===e.id})})}},{key:"findTargetMessageSet",value:function(e){var l,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"current",o=e;if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1])l=this.findMessageSetIndex(e[0]);else{var c=this.messageSets.map(function(C,R){return R}).filter(function(C){return n.areMessageSetsOverlap(n.messageSets[C].messages,e)});switch(r){case"new":c.length>0?l=c[0]:e.some(function(C){return!C.parent_id})&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1}),l=this.messageSets.length-1);break;case"current":l=this.messageSets.findIndex(function(C){return C.isCurrent});break;case"latest":l=this.messageSets.findIndex(function(C){return C.isLatest});break;default:l=-1}var u=c.splice(0,1)[0],d=I(c);if(void 0!==u&&u!==l&&d.push(l),d.length>0){var m=this.messageSets[u],f=this.messageSets.filter(function(C,R){return-1!==d.indexOf(R)});f.forEach(function(C){m.isLatest=m.isLatest||C.isLatest,m.isCurrent=m.isCurrent||C.isCurrent,o=[].concat(I(o),I(C.messages))}),f.forEach(function(C){return n.messageSets.splice(n.messageSets.indexOf(C),1)}),l=this.messageSets.findIndex(function(C){return n.areMessageSetsOverlap(C.messages,e)})}}return{targetMessageSetIndex:l,messagesToAdd:o}}}]),i;var a}();function ii(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}var mt=function(a){return new Promise(function(e){return setTimeout(e,a)})};function Cn(i){return i&&("[object Function]"===Object.prototype.toString.call(i)||"function"==typeof i||i instanceof Function)}var Zt={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function ea(i){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,invisible:!0,roles:!0}[i]}function ft(i){var s,a=[],n=function Js(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Vs(i,a){if(i){if("string"==typeof i)return ii(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ii(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(c){function u(d){return c.apply(this,arguments)}return u.toString=function(){return c.toString()},u}(function(c){throw c}),f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(c){function u(d){return c.apply(this,arguments)}return u.toString=function(){return c.toString()},u}(function(c){o=!0,l=c}),f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}(Array.isArray(i)?i:[i]);try{for(n.s();!(s=n.n()).done;){var o=Object.entries(s.value);o.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(var l=0,c=o;l<c.length;l++){var u=de(c[l],2);a.push({field:u[0],direction:u[1]})}}}catch(f){n.e(f)}finally{n.f()}return a}function Xt(i){var a=Math.min(500+2e3*i,25e3),e=Math.min(Math.max(250,2e3*(i-1)),25e3);return Math.floor(Math.random()*(a-e)+e)}function xt(){return function na(){var i=function aa(i){var a=new Uint8Array(i);return sa(a),a}(16);return i[6]=15&i[6]|64,i[8]=191&i[8]|128,Ut(i.subarray(0,4))+"-"+Ut(i.subarray(4,6))+"-"+Ut(i.subarray(6,8))+"-"+Ut(i.subarray(8,10))+"-"+Ut(i.subarray(10,16))}()}function Ut(i){for(var a="",e=0;e<i.length;e++)a+=i[e].toString(16).padStart(2,"0");return a}var i,sa=typeof crypto<"u"&&typeof(null===(i=crypto)||void 0===i?void 0:i.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):function ia(i){for(var a=Math.pow(2,8*i.byteLength/i.length),e=0;e<i.length;e++)i[e]=Math.random()*a};function ra(i){var a={};if(!i)return a;try{Object.getOwnPropertyNames(i).forEach(function(e){a[e]=Object.getOwnPropertyDescriptor(i,e)})}catch{return{error:"failed to serialize the error"}}return a}function oa(){var i=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return i?"boolean"!=typeof i.onLine||i.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function si(i){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",i),window.addEventListener("online",i))}function ai(i){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",i),window.removeEventListener("online",i))}function yn(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function la(i,a){if(i){if("string"==typeof i)return ri(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ri(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}function ri(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function oi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function he(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?oi(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):oi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var bn=function(){function i(a,e,n,s){var r=this;if(q(this,i),(0,p.Z)(this,"_client",void 0),(0,p.Z)(this,"type",void 0),(0,p.Z)(this,"id",void 0),(0,p.Z)(this,"data",void 0),(0,p.Z)(this,"_data",void 0),(0,p.Z)(this,"cid",void 0),(0,p.Z)(this,"listeners",void 0),(0,p.Z)(this,"state",void 0),(0,p.Z)(this,"initialized",void 0),(0,p.Z)(this,"offlineMode",void 0),(0,p.Z)(this,"lastKeyStroke",void 0),(0,p.Z)(this,"lastTypingEvent",void 0),(0,p.Z)(this,"isTyping",void 0),(0,p.Z)(this,"disconnected",void 0),(0,p.Z)(this,"create",(0,g.Z)(h().mark(function c(){var u;return h().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return u={watch:!1,state:!1,presence:!1},m.next=3,r.query(u,"latest");case 3:return m.abrupt("return",m.sent);case 4:case"end":return m.stop()}},c)}))),(0,p.Z)(this,"_callChannelListeners",function(c){var u=r,d=[];u.listeners.all&&d.push.apply(d,I(u.listeners.all)),u.listeners[c.type]&&d.push.apply(d,I(u.listeners[c.type]));for(var m=0,f=d;m<f.length;m++){var v=f[m];"string"!=typeof v&&v(c)}}),(0,p.Z)(this,"_channelURL",function(){if(!r.id)throw new Error("channel id is not defined");return"".concat(r.getClient().baseURL,"/channels/").concat(r.type,"/").concat(r.id)}),!/^[\w_-]+$/.test(e))throw new Error("Invalid chat type ".concat(e,', letters, numbers and "_-" are allowed'));if("string"==typeof n&&!/^[\w!_-]+$/.test(n))throw new Error("Invalid chat id ".concat(n,', letters, numbers and "!-_" are allowed'));this._client=a,this.type=e,this.id=n,this.data=s,this._data=he({},s),this.cid="".concat(e,":").concat(n),this.listeners={},this.state=new zs(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1}return j(i,[{key:"getClient",value:function(){if(!0===this.disconnected)throw Error("You can't use a channel after client.disconnect() was called");return this._client}},{key:"getConfig",value:function(){return this.getClient().configs[this.cid]}},{key:"sendMessage",value:(a=(0,g.Z)(h().mark(function n(s,r){var o;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.getClient().post(this._channelURL()+"/message",he({message:s},r));case 2:return o=c.sent,this.state.unreadCount=0,c.abrupt("return",o);case 5:case"end":return c.stop()}},n,this)})),function e(n,s){return a.apply(this,arguments)})},{key:"sendFile",value:function(e,n,s,r){return this.getClient().sendFile("".concat(this._channelURL(),"/file"),e,n,s,r)}},{key:"sendImage",value:function(e,n,s,r){return this.getClient().sendFile("".concat(this._channelURL(),"/image"),e,n,s,r)}},{key:"deleteFile",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/file"),{url:e})}},{key:"deleteImage",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/image"),{url:e})}},{key:"sendEvent",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().post(this._channelURL()+"/event",{event:s});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"search",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(r=l.length>1&&void 0!==l[1]?l[1]:{}).offset||!r.sort&&!r.next){u.next=3;break}throw Error("Cannot specify offset with sort or next parameters");case 3:if(o=he(he({filter_conditions:{cid:this.cid}},r),{},{sort:r.sort?ft(r.sort):void 0}),"string"!=typeof s){u.next=8;break}o.query=s,u.next=13;break;case 8:if("object"!==(0,se.Z)(s)){u.next=12;break}o.message_filter_conditions=s,u.next=13;break;case 12:throw Error("Invalid type ".concat((0,se.Z)(s)," for query parameter"));case 13:return u.next=15,this.getClient().wsPromise;case 15:return u.next=17,this.getClient().get(this.getClient().baseURL+"/search",{payload:o});case 17:return u.abrupt("return",u.sent);case 18:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryMembers",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l,c,u,d,m=arguments;return h().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=m.length>1&&void 0!==m[1]?m[1]:[],l=m.length>2&&void 0!==m[2]?m[2]:{},u=this.type,this.id?c=this.id:null!==(r=this.data)&&void 0!==r&&r.members&&Array.isArray(this.data.members)&&(d=this.data.members),v.next=6,this.getClient().get(this.getClient().baseURL+"/members",{payload:he({type:u,id:c,members:d,sort:ft(o),filter_conditions:s},l)});case 6:return v.abrupt("return",v.sent);case 7:case"end":return v.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"sendReaction",value:function(){var a=(0,g.Z)(h().mark(function n(s,r,o){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s){c.next=2;break}throw Error("Message id is missing");case 2:if(r&&0!==Object.keys(r).length){c.next=4;break}throw Error("Reaction object is missing");case 4:return c.next=6,this.getClient().post(this.getClient().baseURL+"/messages/".concat(s,"/reaction"),he({reaction:r},o));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));return function e(n,s,r){return a.apply(this,arguments)}}()},{key:"deleteReaction",value:function(e,n,s){if(this._checkInitialized(),!n||!e)throw Error("Deleting a reaction requires specifying both the message and reaction type");var r=this.getClient().baseURL+"/messages/".concat(e,"/reaction/").concat(n);return s?this.getClient().delete(r,{user_id:s}):this.getClient().delete(r,{})}},{key:"update",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o,c=arguments;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1?c[1]:void 0,o=c.length>2?c[2]:void 0,["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(function(m){delete s[m]}),d.next=7,this._update(he({message:r,data:s},o));case 7:return d.abrupt("return",d.sent);case 8:case"end":return d.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"updatePartial",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().patch(this._channelURL(),s);case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"enableSlowMode",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),{cooldown:s});case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"disableSlowMode",value:function(){var a=(0,g.Z)(h().mark(function n(){var s;return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL(),{cooldown:0});case 2:return this.data=(s=o.sent).channel,o.abrupt("return",s);case 5:case"end":return o.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"delete",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().delete(this._channelURL(),he({},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"truncate",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this._channelURL()+"/truncate",s);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"acceptInvite",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this._update(he({accept_invite:!0},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"rejectInvite",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this._update(he({reject_invite:!0},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"addMembers",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({add_members:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"addModerators",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({add_moderators:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"assignRoles",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({assign_roles:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"inviteMembers",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({invites:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeMembers",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({remove_members:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"demoteModerators",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({demote_moderators:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_update",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),s);case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"mute",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",he({channel_cid:this.cid},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"unmute",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",he({channel_cid:this.cid},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"muteStatus",value:function(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}},{key:"sendAction",value:function(e,n){if(this._checkInitialized(),!e)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+"/messages/".concat(e,"/action"),{message_id:e,form_data:n,id:this.id,type:this.type})}},{key:"keystroke",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(null!==(r=this.getConfig())&&void 0!==r&&r.typing_events){u.next=2;break}return u.abrupt("return");case 2:if(o=new Date,l=this.lastTypingEvent&&o.getTime()-this.lastTypingEvent.getTime(),this.lastKeyStroke=o,this.isTyping=!0,!(null===l||l>2e3)){u.next=10;break}return this.lastTypingEvent=new Date,u.next=10,this.sendEvent({type:"typing.start",parent_id:s});case 10:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"stopTyping",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(null!==(r=this.getConfig())&&void 0!==r&&r.typing_events){l.next=2;break}return l.abrupt("return");case 2:return this.lastTypingEvent=null,this.isTyping=!1,l.next=6,this.sendEvent({type:"typing.stop",parent_id:s});case 6:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"lastMessage",value:function(){var e=this.state.latestMessages.length-5;e<0&&(e=0);var s=this.state.latestMessages.slice(e,this.state.latestMessages.length+1);return s.sort(function(r,o){return o.created_at.getTime()-r.created_at.getTime()}),s[0]}},{key:"markRead",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=o.length>0&&void 0!==o[0]?o[0]:{},this._checkInitialized(),null!==(s=this.getConfig())&&void 0!==s&&s.read_events){c.next=4;break}return c.abrupt("return",Promise.resolve(null));case 4:return c.next=6,this.getClient().post(this._channelURL()+"/read",he({},r));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"markUnread",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._checkInitialized(),null!==(r=this.getConfig())&&void 0!==r&&r.read_events){l.next=3;break}return l.abrupt("return",Promise.resolve(null));case 3:return l.next=5,this.getClient().post(this._channelURL()+"/unread",he({},s));case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"clean",value:function(){this.lastKeyStroke&&(new Date).getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&function Qs(i,a){i.then().catch(function(e){console.warn("failed to do ".concat(a,", ran into error: "),e)})}(this.stopTyping(),"stop typing event"),this.state.clean()}},{key:"watch",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r={state:!0,watch:!0,presence:!1},u.next=3,this.getClient().wsPromise;case 3:return this.getClient()._hasConnectionID()||(r.watch=!1),o=he(he({},r),s),u.next=7,this.query(o,"latest");case 7:return l=u.sent,this.initialized=!0,this.data=l.channel,this._client.logger("info","channel:watch() - started watching channel ".concat(this.cid),{tags:["channel"],channel:this}),u.abrupt("return",l);case 12:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"stopWatching",value:function(){var a=(0,g.Z)(h().mark(function n(){var s;return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL()+"/stop-watching",{});case 2:return s=o.sent,this._client.logger("info","channel:watch() - stopped watching channel ".concat(this.cid),{tags:["channel"],channel:this}),o.abrupt("return",s);case 5:case"end":return o.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"getReplies",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.getClient().get(this.getClient().baseURL+"/messages/".concat(s,"/replies"),he({},r));case 2:return(o=c.sent).messages&&this.state.addMessagesSorted(o.messages),c.abrupt("return",o);case 5:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getPinnedMessages",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:[],c.next=3,this.getClient().get(this.getClient().baseURL+"/channels/".concat(this.type,"/").concat(this.id,"/pinned_messages"),{payload:he(he({},s),{},{sort:ft(r)})});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getReactions",value:function(e,n){return this.getClient().get(this.getClient().baseURL+"/messages/".concat(e,"/reactions"),he({},n))}},{key:"getMessagesById",value:function(e){return this.getClient().get(this._channelURL()+"/messages",{ids:e.join(",")})}},{key:"lastRead",value:function(){this._checkInitialized();var n=this.getClient().userID;if(n)return this.state.read[n]?this.state.read[n].last_read:null}},{key:"_countMessageAsUnread",value:function(e){var n,s,r,o;return!(e.shadowed||e.silent||e.parent_id&&!e.show_in_channel||(null===(n=e.user)||void 0===n?void 0:n.id)===this.getClient().userID||null!==(s=e.user)&&void 0!==s&&s.id&&this.getClient().userMuteStatus(e.user.id)||"system"===e.type||Array.isArray(null===(r=this.data)||void 0===r?void 0:r.own_capabilities)&&(null===(o=this.data)||void 0===o||!o.own_capabilities.includes("read-events"))||this.muteStatus().muted)}},{key:"countUnread",value:function(e){if(!e)return this.state.unreadCount;for(var n=0,s=0;s<this.state.latestMessages.length;s+=1){var r=this.state.latestMessages[s];r.created_at>e&&this._countMessageAsUnread(r)&&n++}return n}},{key:"countUnreadMentions",value:function(){for(var e=this.lastRead(),n=this.getClient().userID,s=0,r=0;r<this.state.latestMessages.length;r+=1){var o,l=this.state.latestMessages[r];this._countMessageAsUnread(l)&&(!e||l.created_at>e)&&null!==(o=l.mentioned_users)&&void 0!==o&&o.some(function(c){return c.id===n})&&s++}return s}},{key:"query",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l,c,u,d,m,f=arguments;return h().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"current",C.next=3,this.getClient().wsPromise;case 3:return o="".concat(this.getClient().baseURL,"/channels/").concat(this.type),this.id&&(o+="/".concat(this.id)),C.next=7,this.getClient().post(o+"/query",he({data:this._data,state:!0},s));case 7:return l=C.sent,this.id||(this.id=l.channel.id,this.cid=l.channel.cid,c=l.members.map(function(R){var B;return R.user_id||(null===(B=R.user)||void 0===B?void 0:B.id)}).sort().join(","),(u="".concat(this.type,":!members-").concat(c))in this.getClient().activeChannels&&delete this.getClient().activeChannels[u],this.cid in this.getClient().activeChannels||(this.getClient().activeChannels[this.cid]=this)),this.getClient()._addChannelConfig(l.channel),d=this._initializeState(l,r),m=d.messageSet,this.data=l.channel,this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[l],isLatestMessageSet:m.isLatest}}),C.abrupt("return",l);case 14:case"end":return C.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"banUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().banUser(s,he(he({},r),{},{type:this.type,id:this.id}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"hide",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:null,r=o.length>1&&void 0!==o[1]&&o[1],this._checkInitialized(),c.next=5,this.getClient().post("".concat(this._channelURL(),"/hide"),{user_id:s,clear_history:r});case 5:return c.abrupt("return",c.sent);case 6:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"show",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:null,this._checkInitialized(),l.next=4,this.getClient().post("".concat(this._channelURL(),"/show"),{user_id:s});case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"unbanUser",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().unbanUser(s,{type:this.type,id:this.id});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"shadowBan",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().shadowBan(s,he(he({},r),{},{type:this.type,id:this.id}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeShadowBan",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().removeShadowBan(s,{type:this.type,id:this.id});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"createCall",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL()+"/call",s);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"on",value:function(e,n){var s=this,r=n?e:"all",o=n||e;return r in this.listeners||(this.listeners[r]=[]),this._client.logger("info","Attaching listener for ".concat(r," event on channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[r].push(o),{unsubscribe:function(){s._client.logger("info","Removing listener for ".concat(r," event from channel ").concat(s.cid),{tags:["event","channel"],channel:s}),s.listeners[r]=s.listeners[r].filter(function(c){return c!==o})}}}},{key:"off",value:function(e,n){var s=n?e:"all",r=n||e;s in this.listeners||(this.listeners[s]=[]),this._client.logger("info","Removing listener for ".concat(s," event from channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[s]=this.listeners[s].filter(function(o){return o!==r})}},{key:"_handleChannelEvent",value:function(e){var n,s,r,o,l,c,u,d,m=this;this._client.logger("info","channel:_handleChannelEvent - Received event of type { ".concat(e.type," } on ").concat(this.cid),{tags:["event","channel"],channel:this});var f=m.state;switch(e.type){case"typing.start":null!==(n=e.user)&&void 0!==n&&n.id&&(f.typing[e.user.id]=e);break;case"typing.stop":null!==(s=e.user)&&void 0!==s&&s.id&&delete f.typing[e.user.id];break;case"message.read":var v,C;null!==(r=e.user)&&void 0!==r&&r.id&&e.created_at&&(f.read[e.user.id]={last_read:new Date(e.created_at),user:e.user,unread_messages:0},(null===(v=e.user)||void 0===v?void 0:v.id)===(null===(C=this.getClient().user)||void 0===C?void 0:C.id)&&(f.unreadCount=0));break;case"user.watching.start":case"user.updated":null!==(o=e.user)&&void 0!==o&&o.id&&(f.watchers[e.user.id]=e.user);break;case"user.watching.stop":null!==(l=e.user)&&void 0!==l&&l.id&&delete f.watchers[e.user.id];break;case"message.deleted":e.message&&(this._extendEventWithOwnReactions(e),e.hard_delete?f.removeMessage(e.message):f.addMessageSorted(e.message,!1,!1),f.removeQuotedMessageReferences(e.message),e.message.pinned&&f.removePinnedMessage(e.message));break;case"message.new":if(e.message){var R,B,Q,A=(null===(R=e.user)||void 0===R?void 0:R.id)===(null===(B=this.getClient().user)||void 0===B?void 0:B.id);if((this.state.isUpToDate||e.message.parent_id&&!e.message.show_in_channel)&&f.addMessageSorted(e.message,A),e.message.pinned&&f.addPinnedMessage(e.message),null!==(Q=e.user)&&void 0!==Q&&Q.id)for(var te in f.read)te===e.user.id?f.read[e.user.id]={last_read:new Date(e.created_at),user:e.user,unread_messages:0}:f.read[te].unread_messages+=1;A?f.unreadCount=0:this._countMessageAsUnread(e.message)&&(f.unreadCount=f.unreadCount+1)}break;case"message.updated":e.message&&(this._extendEventWithOwnReactions(e),f.addMessageSorted(e.message,!1,!1),e.message.pinned?f.addPinnedMessage(e.message):f.removePinnedMessage(e.message));break;case"channel.truncated":if(null!==(c=e.channel)&&void 0!==c&&c.truncated_at){var ne=+new Date(e.channel.truncated_at);f.messageSets.forEach(function(xe,be){xe.messages.forEach(function(Ie){ne>+Ie.created_at&&f.removeMessage({id:Ie.id,messageSetIndex:be})})}),f.pinnedMessages.forEach(function(xe){ne>+xe.created_at&&f.removePinnedMessage({id:xe.id})})}else f.clearMessages();f.unreadCount=0,e.message&&(f.addMessageSorted(e.message),e.message.pinned&&f.addPinnedMessage(e.message));break;case"member.added":case"member.updated":null!==(u=e.member)&&void 0!==u&&u.user_id&&(f.members[e.member.user_id]=e.member);break;case"member.removed":null!==(d=e.user)&&void 0!==d&&d.id&&delete f.members[e.user.id];break;case"channel.updated":var ie,ue,_e,ve,Ce,ge;e.channel&&(m.data=he(he({},e.channel),{},{hidden:null!==(ie=null===(ue=e.channel)||void 0===ue?void 0:ue.hidden)&&void 0!==ie?ie:null===(_e=m.data)||void 0===_e?void 0:_e.hidden,own_capabilities:null!==(ve=null===(Ce=e.channel)||void 0===Ce?void 0:Ce.own_capabilities)&&void 0!==ve?ve:null===(ge=m.data)||void 0===ge?void 0:ge.own_capabilities}));break;case"reaction.new":e.message&&e.reaction&&(e.message=f.addReaction(e.reaction,e.message));break;case"reaction.deleted":e.reaction&&(e.message=f.removeReaction(e.reaction,e.message));break;case"reaction.updated":e.reaction&&(e.message=f.addReaction(e.reaction,e.message,!0));break;case"channel.hidden":e.clear_history&&f.clearMessages()}void 0!==e.watcher_count&&(m.state.watcher_count=e.watcher_count)}},{key:"_checkInitialized",value:function(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error("Channel ".concat(this.cid," hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve"))}},{key:"_initializeState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest",s=this.getClient(),r=s.state,o=s.user,l=s.userID;if(e.members){var u,c=yn(e.members);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.user&&r.updateUserReference(d.user,this.cid)}}catch(ie){c.e(ie)}finally{c.f()}}this.state.membership=e.membership||{};var m=e.messages||[];this.state.messages||this.state.initMessages();var v=this.state.addMessagesSorted(m,!1,!0,!0,n).messageSet;if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(e.pinned_messages||[]),e.pending_messages&&(this.state.pending_messages=e.pending_messages),this.state.watcher_count=e.watcher_count||0,e.watchers){var R,C=yn(e.watchers);try{for(C.s();!(R=C.n()).done;){var B=R.value;B&&(r.updateUserReference(B,this.cid),this.state.watchers[B.id]=B)}}catch(ie){C.e(ie)}finally{C.f()}}if(null!=l&&o&&(this.state.read[o.id]={user:o,last_read:this.state.last_message_at||new Date,unread_messages:0}),e.read){var oe,A=yn(e.read);try{for(A.s();!(oe=A.n()).done;){var te,ne=oe.value;this.state.read[ne.user.id]={last_read:new Date(ne.last_read),unread_messages:null!==(te=ne.unread_messages)&&void 0!==te?te:0,user:ne.user},ne.user.id===o?.id&&(this.state.unreadCount=this.state.read[ne.user.id].unread_messages)}}catch(ie){A.e(ie)}finally{A.f()}}return e.members&&(this.state.members=e.members.reduce(function(ie,ue){return ue.user&&(ie[ue.user.id]=ue),ie},{})),{messageSet:v}}},{key:"_extendEventWithOwnReactions",value:function(e){if(e.message){var n=this.state.findMessage(e.message.id,e.message.parent_id);n&&(e.message.own_reactions=n.own_reactions)}}},{key:"_disconnect",value:function(){this._client.logger("info","channel:disconnect() - Disconnecting the channel ".concat(this.cid),{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}}]),i;var a}();function li(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}var ci=function(){function i(){q(this,i),(0,p.Z)(this,"users",void 0),(0,p.Z)(this,"userChannelReferences",void 0),this.users={},this.userChannelReferences={}}return j(i,[{key:"updateUsers",value:function(e){var s,n=function ca(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function ua(i,a){if(i){if("string"==typeof i)return li(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return li(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}(e);try{for(n.s();!(s=n.n()).done;)this.updateUser(s.value)}catch(o){n.e(o)}finally{n.f()}}},{key:"updateUser",value:function(e){null!=e&&(this.users[e.id]=e)}},{key:"updateUserReference",value:function(e,n){null!=e&&(this.updateUser(e),this.userChannelReferences[e.id]||(this.userChannelReferences[e.id]={}),this.userChannelReferences[e.id][n]=!0)}},{key:"deleteAllChannelReference",value:function(e){for(var n in this.userChannelReferences)delete this.userChannelReferences[n][e]}}]),i}();function ui(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function di(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?ui(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ui(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var da=function i(){q(this,i),(0,p.Z)(this,"connectionStartTimestamp",void 0),(0,p.Z)(this,"wsConsecutiveFailures",void 0),(0,p.Z)(this,"wsTotalFailures",void 0),(0,p.Z)(this,"instanceClientId",void 0),this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=xt()},Rt=function(){var i=(0,g.Z)(h().mark(function a(e,n){var s,r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:s=3,r=0;case 2:if(!(r<s)){l.next=17;break}return l.prev=3,l.next=6,M().post("https://chat-insights.getstream.io/insights/".concat(e),n);case 6:l.next=13;break;case 8:return l.prev=8,l.t0=l.catch(3),l.next=12,mt(3e3*(r+1));case 12:return l.abrupt("continue",14);case 13:return l.abrupt("break",17);case 14:r++,l.next=2;break;case 17:case"end":return l.stop()}},a,null,[[3,8]])}));return function(e,n){return i.apply(this,arguments)}}();function ha(i,a){return di(di({},a),hi(i))}function hi(i){var a,e,n,s=i.client;return{ready_state:null===(a=i.ws)||void 0===a?void 0:a.readyState,url:i._buildUrl(),api_key:s.key,start_ts:s.insightMetrics.connectionStartTimestamp,end_ts:(new Date).getTime(),auth_type:s.getAuthType(),token:s.tokenManager.token,user_id:s.userID,user_details:s._user,device:s.options.device,client_id:i.connectionID,ws_details:i.ws,ws_consecutive_failures:s.insightMetrics.wsConsecutiveFailures,ws_total_failures:s.insightMetrics.wsTotalFailures,request_id:i.requestID,online:typeof navigator<"u"?null===(e=navigator)||void 0===e?void 0:e.onLine:null,user_agent:typeof navigator<"u"?null===(n=navigator)||void 0===n?void 0:n.userAgent:null,instance_client_id:s.insightMetrics.instanceClientId}}function pa(i){return hi(i)}function pi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}var ma=function(a){return void 0!==a.code},fa=function(a){return void 0!==a.error},_a=function(){function i(a){var e=this,n=a.client;q(this,i),(0,p.Z)(this,"client",void 0),(0,p.Z)(this,"connectionID",void 0),(0,p.Z)(this,"connectionOpen",void 0),(0,p.Z)(this,"consecutiveFailures",void 0),(0,p.Z)(this,"pingInterval",void 0),(0,p.Z)(this,"healthCheckTimeoutRef",void 0),(0,p.Z)(this,"isConnecting",void 0),(0,p.Z)(this,"isDisconnected",void 0),(0,p.Z)(this,"isHealthy",void 0),(0,p.Z)(this,"isResolved",void 0),(0,p.Z)(this,"lastEvent",void 0),(0,p.Z)(this,"connectionCheckTimeout",void 0),(0,p.Z)(this,"connectionCheckTimeoutRef",void 0),(0,p.Z)(this,"rejectPromise",void 0),(0,p.Z)(this,"requestID",void 0),(0,p.Z)(this,"resolvePromise",void 0),(0,p.Z)(this,"totalFailures",void 0),(0,p.Z)(this,"ws",void 0),(0,p.Z)(this,"wsID",void 0),(0,p.Z)(this,"_buildUrl",function(){var s=encodeURIComponent(e.client._buildWSPayload(e.requestID)),r=e.client.tokenManager.getToken();return"".concat(e.client.wsBaseURL,"/connect?json=").concat(s,"&api_key=").concat(e.client.key,"&authorization=").concat(r,"&stream-auth-type=").concat(e.client.getAuthType(),"&X-Stream-Client=").concat(e.client.getUserAgent())}),(0,p.Z)(this,"onlineStatusChanged",function(s){"offline"===s.type?(e._log("onlineStatusChanged() - Status changing to offline"),e._setHealth(!1)):"online"===s.type&&(e._log("onlineStatusChanged() - Status changing to online. isHealthy: ".concat(e.isHealthy)),e.isHealthy||e._reconnect({interval:10}))}),(0,p.Z)(this,"onopen",function(s){e.wsID===s&&e._log("onopen() - onopen callback",{wsID:s})}),(0,p.Z)(this,"onmessage",function(s,r){if(e.wsID===s){e._log("onmessage() - onmessage callback",{event:r,wsID:s});var o="string"==typeof r.data?JSON.parse(r.data):null;if(!e.isResolved&&o){var l,c;if(e.isResolved=!0,o.error)return void(null===(c=e.rejectPromise)||void 0===c||c.call(e,e._errorFromWSEvent(o,!1)));null===(l=e.resolvePromise)||void 0===l||l.call(e,o),e._setHealth(!0)}e.lastEvent=new Date,o&&"health.check"===o.type&&e.scheduleNextPing(),e.client.handleEvent(r),e.scheduleConnectionCheck()}}),(0,p.Z)(this,"onclose",function(s,r){if(e.wsID===s)if(e._log("onclose() - onclose callback - "+r.code,{event:r,wsID:s}),r.code===Zt.WS_CLOSED_SUCCESS){var o,l=new Error("WS connection reject with error ".concat(r.reason));l.reason=r.reason,l.code=r.code,l.wasClean=r.wasClean,l.target=r.target,null===(o=e.rejectPromise)||void 0===o||o.call(e,l),e._log("onclose() - WS connection reject with error ".concat(r.reason),{event:r})}else{var c;e.consecutiveFailures+=1,e.totalFailures+=1,e._setHealth(!1),e.isConnecting=!1,null===(c=e.rejectPromise)||void 0===c||c.call(e,e._errorFromWSEvent(r)),e._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),e._reconnect()}}),(0,p.Z)(this,"onerror",function(s,r){var o;e.wsID===s&&(e.consecutiveFailures+=1,e.totalFailures+=1,e._setHealth(!1),e.isConnecting=!1,null===(o=e.rejectPromise)||void 0===o||o.call(e,e._errorFromWSEvent(r)),e._log("onerror() - WS connection resulted into error",{event:r}),e._reconnect())}),(0,p.Z)(this,"_setHealth",function(s){if(s!==e.isHealthy){if(e.isHealthy=s,e.isHealthy)return void e.client.dispatchEvent({type:"connection.changed",online:e.isHealthy});setTimeout(function(){e.isHealthy||e.client.dispatchEvent({type:"connection.changed",online:e.isHealthy})},5e3)}}),(0,p.Z)(this,"_errorFromWSEvent",function(s){var o,l,c,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ma(s)&&(o=s.code,l="unknown",c=s.reason),fa(s)&&(o=s.error.code,l=s.error.StatusCode,c=s.error.message),e._log("_errorFromWSEvent() - WS failed with code ".concat(o),{event:s},"warn");var u=new Error("WS failed with code ".concat(o," and reason - ").concat(c));return u.code=o,u.StatusCode=l,u.isWSFailure=r,u}),(0,p.Z)(this,"_setupConnectionPromise",function(){e.isResolved=!1,e.connectionOpen=new Promise(function(s,r){e.resolvePromise=s,e.rejectPromise=r})}),(0,p.Z)(this,"scheduleNextPing",function(){e.healthCheckTimeoutRef&&clearTimeout(e.healthCheckTimeoutRef),e.healthCheckTimeoutRef=setTimeout(function(){var s=[{type:"health.check",client_id:e.client.clientID}];try{var r;null===(r=e.ws)||void 0===r||r.send(JSON.stringify(s))}catch{}},e.pingInterval)}),(0,p.Z)(this,"scheduleConnectionCheck",function(){e.connectionCheckTimeoutRef&&clearTimeout(e.connectionCheckTimeoutRef),e.connectionCheckTimeoutRef=setTimeout(function(){e.lastEvent&&(new Date).getTime()-e.lastEvent.getTime()>e.connectionCheckTimeout&&(e._log("scheduleConnectionCheck - going to reconnect"),e._setHealth(!1),e._reconnect())},e.connectionCheckTimeout)}),this.client=n,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25e3,this.connectionCheckTimeout=this.pingInterval+1e4,si(this.onlineStatusChanged)}return j(i,[{key:"_log",value:function(e){this.client.logger(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info","connection:"+e,function ga(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?pi(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):pi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}({tags:["connection"]},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"setClient",value:function(e){this.client=e}},{key:"connect",value:(a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=o.length>0&&void 0!==o[0]?o[0]:15e3,!this.isConnecting){c.next=3;break}throw Error("You've called connect twice, can only attempt 1 connection at the time");case 3:return this.isDisconnected=!1,c.prev=4,c.next=7,this._connect();case 7:r=c.sent,this.consecutiveFailures=0,this._log("connect() - Established ws connection with healthcheck: ".concat(r)),c.next=23;break;case 12:if(c.prev=12,c.t0=c.catch(4),this.isHealthy=!1,this.consecutiveFailures+=1,c.t0.code!==Zt.TOKEN_EXPIRED||this.client.tokenManager.isStatic()){c.next=21;break}this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}),c.next=23;break;case 21:if(c.t0.isWSFailure){c.next=23;break}throw new Error(JSON.stringify({code:c.t0.code,StatusCode:c.t0.StatusCode,message:c.t0.message,isWSFailure:c.t0.isWSFailure}));case 23:return c.next=25,this._waitForHealthy(s);case 25:return c.abrupt("return",c.sent);case 26:case"end":return c.stop()}},n,this,[[4,12]])})),function e(){return a.apply(this,arguments)})},{key:"_waitForHealthy",value:function(){var a=(0,g.Z)(h().mark(function n(){var r,s=this,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:15e3,c.abrupt("return",Promise.race([(0,g.Z)(h().mark(function u(){var d,m;return h().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:d=50,m=0;case 2:if(!(m<=r)){v.next=18;break}return v.prev=3,v.next=6,s.connectionOpen;case 6:return v.abrupt("return",v.sent);case 9:if(v.prev=9,v.t0=v.catch(3),m!==r){v.next=13;break}throw new Error(JSON.stringify({code:v.t0.code,StatusCode:v.t0.StatusCode,message:v.t0.message,isWSFailure:v.t0.isWSFailure}));case 13:return v.next=15,mt(d);case 15:m+=d,v.next=2;break;case 18:case"end":return v.stop()}},u,null,[[3,9]])}))(),(0,g.Z)(h().mark(function u(){return h().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,mt(r);case 2:throw s.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}));case 4:case"end":return m.stop()}},u)}))()]));case 2:case"end":return c.stop()}},n)}));return function e(){return a.apply(this,arguments)}}()},{key:"disconnect",value:function(e){var n=this;this._log("disconnect() - Closing the websocket connection for wsID ".concat(this.wsID)),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),ai(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();var s,r=this.ws;return r&&r.close&&r.readyState===r.OPEN?(s=new Promise(function(o){var l=function(u){n._log("disconnect() - resolving isClosedPromise ".concat(u?"with":"without"," close frame"),{event:u}),o()};r.onclose=l,setTimeout(l,e??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(Zt.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),s=Promise.resolve()),delete this.ws,s}},{key:"_connect",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o,l;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)){u.next=2;break}return u.abrupt("return");case 2:return this.isConnecting=!0,this.requestID=xt(),this.client.insightMetrics.connectionStartTimestamp=(new Date).getTime(),s=!1,u.prev=6,this._log("_connect() - waiting for token"),u.next=10,this.client.tokenManager.tokenReady();case 10:s=!0,u.next=15;break;case 13:u.prev=13,u.t0=u.catch(6);case 15:if(u.prev=15,s){u.next=20;break}return this._log("_connect() - tokenProvider failed before, so going to retry"),u.next=20,this.client.tokenManager.loadToken();case 20:return this._setupConnectionPromise(),r=this._buildUrl(),this._log("_connect() - Connecting to ".concat(r),{wsURL:r,requestID:this.requestID}),this.ws=new(Ae())(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID),u.next=30,this.connectionOpen;case 30:if(o=u.sent,this.isConnecting=!1,!o){u.next=36;break}return this.connectionID=o.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Rt("ws_success_after_failure",pa(this)),this.client.insightMetrics.wsConsecutiveFailures=0),u.abrupt("return",o);case 36:u.next=44;break;case 38:throw u.prev=38,u.t1=u.catch(15),this.isConnecting=!1,this._log("_connect() - Error - ",u.t1),this.client.options.enableInsights&&(this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++,l=ha(this,ra(u.t1)),Rt?.("ws_fatal",l)),u.t1;case 44:case"end":return u.stop()}},n,this,[[6,13],[15,38]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_reconnect",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=o.length>0&&void 0!==o[0]?o[0]:{},this._log("_reconnect() - Initiating the reconnect"),!this.isConnecting&&!this.isHealthy){c.next=5;break}return this._log("_reconnect() - Abort (1) since already connecting or healthy"),c.abrupt("return");case 5:return(r=s.interval)||(r=Xt(this.consecutiveFailures)),c.next=9,mt(r);case 9:if(!this.isConnecting&&!this.isHealthy){c.next=12;break}return this._log("_reconnect() - Abort (2) since already connecting or healthy"),c.abrupt("return");case 12:if(!this.isDisconnected||!this.client.options.enableWSFallback){c.next=15;break}return this._log("_reconnect() - Abort (3) since disconnect() is called"),c.abrupt("return");case 15:if(this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),!s.refreshToken){c.next=20;break}return c.next=20,this.client.tokenManager.loadToken();case 20:return c.prev=20,c.next=23,this._connect();case 23:return this._log("_reconnect() - Waiting for recoverCallBack"),c.next=26,this.client.recoverState();case 26:this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0,c.next=38;break;case 30:if(c.prev=30,c.t0=c.catch(20),this.isHealthy=!1,this.consecutiveFailures+=1,c.t0.code!==Zt.TOKEN_EXPIRED||this.client.tokenManager.isStatic()){c.next=37;break}return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),c.abrupt("return",this._reconnect({refreshToken:!0}));case 37:c.t0.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect());case 38:this._log("_reconnect() - == END ==");case 39:case"end":return c.stop()}},n,this,[[20,30]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_destroyCurrentWSConnection",value:function(){this.wsID+=1;try{var e,n;null==this||null===(e=this.ws)||void 0===e||e.removeAllListeners(),null==this||null===(n=this.ws)||void 0===n||n.close()}catch{}}}]),i;var a}(),va=null;function gi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function mi(i,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof a)throw new TypeError("userId should be a string");throw function ya(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?gi(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):gi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}}({user_id:a},e),Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.")}function fi(i){var n=X({algorithm:"HS256",noTimestamp:!0},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return va.sign({server:!0},i,n)}var Ta=function i(a){var e=this;q(this,i),(0,p.Z)(this,"loadTokenPromise",void 0),(0,p.Z)(this,"type",void 0),(0,p.Z)(this,"secret",void 0),(0,p.Z)(this,"token",void 0),(0,p.Z)(this,"tokenProvider",void 0),(0,p.Z)(this,"user",void 0),(0,p.Z)(this,"setTokenOrProvider",function(){var n=(0,g.Z)(h().mark(function s(r,o){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e.validateToken(r,o),e.user=o,Cn(r)&&(e.tokenProvider=r,e.type="provider"),"string"==typeof r&&(e.token=r,e.type="static"),!r&&e.user&&e.secret&&(e.token=mi(e.secret,o.id,{},{}),e.type="static"),c.next=7,e.loadToken();case 7:case"end":return c.stop()}},s)}));return function(s,r){return n.apply(this,arguments)}}()),(0,p.Z)(this,"reset",function(){e.token=void 0,e.user=void 0,e.loadTokenPromise=null}),(0,p.Z)(this,"validateToken",function(n,s){if(!s||!s.anon||n){if(!e.secret&&!n)throw new Error("User token can not be empty");if(n&&"string"!=typeof n&&!Cn(n))throw new Error("user token should either be a string or a function");if("string"==typeof n){if(s.anon&&""===n)return;var r=function ba(i){var a=i.split(".");if(3!==a.length)return"";var n=function(a){var r,c,d,e={},n=String.fromCharCode,s=a.length,o=0,u=0,m="";for(r=0;r<64;r++)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r)]=r;for(c=0;c<s;c++)for(o=(o<<6)+e[a.charAt(c)],u+=6;u>=8;)((d=o>>>(u-=8)&255)||c<s-2)&&(m+=n(d));return m}(a[1]);return JSON.parse(n).user_id}(n);if(null!=n&&(null==r||""===r||r!==s.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}}),(0,p.Z)(this,"tokenReady",function(){return e.loadTokenPromise}),(0,p.Z)(this,"loadToken",function(){return e.loadTokenPromise=new Promise(function(){var n=(0,g.Z)(h().mark(function s(r,o){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("static"!==e.type){c.next=2;break}return c.abrupt("return",r(e.token));case 2:if(!e.tokenProvider||"string"==typeof e.tokenProvider){c.next=13;break}return c.prev=3,c.next=6,e.tokenProvider();case 6:e.token=c.sent,c.next=12;break;case 9:return c.prev=9,c.t0=c.catch(3),c.abrupt("return",o(new Error("Call to tokenProvider failed with message: ".concat(c.t0))));case 12:r(e.token);case 13:case"end":return c.stop()}},s,null,[[3,9]])}));return function(s,r){return n.apply(this,arguments)}}()),e.loadTokenPromise}),(0,p.Z)(this,"getToken",function(){if(e.token||e.user&&e.user.anon&&!e.token)return e.token;if(e.secret)return fi(e.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")}),(0,p.Z)(this,"isStatic",function(){return"static"===e.type}),this.loadTokenPromise=null,a&&(this.secret=a),this.type="static",this.secret&&(this.token=fi(this.secret))},xa={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function Sa(i){return void 0!==i.code}function _i(i){if(!i.code)return!1;var a=xa["".concat(i.code)];return!!a&&a.retryable}function Ma(i){return 46===i.code}function ka(i){if("boolean"==typeof i.isWSFailure)return i.isWSFailure;try{return JSON.parse(i.message).isWSFailure}catch{return!1}}function vi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function wn(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?vi(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):vi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var Te=(()=>(function(i){i.Closed="CLOSED",i.Connected="CONNECTED",i.Connecting="CONNECTING",i.Disconnected="DISCONNECTED",i.Init="INIT"}(Te||(Te={})),Te))(),Oa=function(){function i(a){var e=this,n=a.client;q(this,i),(0,p.Z)(this,"client",void 0),(0,p.Z)(this,"state",void 0),(0,p.Z)(this,"consecutiveFailures",void 0),(0,p.Z)(this,"connectionID",void 0),(0,p.Z)(this,"cancelToken",void 0),(0,p.Z)(this,"_onlineStatusChanged",function(s){var r;if(e._log("_onlineStatusChanged() - ".concat(s.type)),"offline"===s.type)return e._setState(Te.Closed),null===(r=e.cancelToken)||void 0===r||r.cancel("disconnect() is called"),void(e.cancelToken=void 0);"online"===s.type&&e.state===Te.Closed&&e.connect(!0)}),(0,p.Z)(this,"_req",function(){var s=(0,g.Z)(h().mark(function r(o,l,c){var u,d;return h().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return!e.cancelToken&&!o.close&&(e.cancelToken=M().CancelToken.source()),f.prev=1,f.next=4,e.client.doAxiosRequest("get",e.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:wn(wn({},l),{},{cancelToken:null===(u=e.cancelToken)||void 0===u?void 0:u.token}),params:o});case 4:return d=f.sent,e.consecutiveFailures=0,f.abrupt("return",d);case 9:if(f.prev=9,f.t0=f.catch(1),e.consecutiveFailures+=1,!c||!_i(f.t0)){f.next=17;break}return e._log("_req() - Retryable error, retrying request"),f.next=16,mt(Xt(e.consecutiveFailures));case 16:return f.abrupt("return",e._req(o,l,c));case 17:throw f.t0;case 18:case"end":return f.stop()}},r,null,[[1,9]])}));return function(r,o,l){return s.apply(this,arguments)}}()),(0,p.Z)(this,"_poll",(0,g.Z)(h().mark(function s(){var r,o,l;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e.state!==Te.Connected){u.next=25;break}return u.prev=1,u.next=4,e._req({},{timeout:3e4},!0);case 4:if(null!==(r=(o=u.sent).events)&&void 0!==r&&r.length)for(l=0;l<o.events.length;l++)e.client.dispatchEvent(o.events[l]);u.next=23;break;case 8:if(u.prev=8,u.t0=u.catch(1),!M().isCancel(u.t0)){u.next=13;break}return e._log("_poll() - axios canceled request"),u.abrupt("return");case 13:if(!Ma(u.t0)){u.next=18;break}return e._log("_poll() - ConnectionID error, connecting without ID..."),e._setState(Te.Disconnected),e.connect(!0),u.abrupt("return");case 18:if(!Sa(u.t0)||_i(u.t0)){u.next=21;break}return e._setState(Te.Closed),u.abrupt("return");case 21:return u.next=23,mt(Xt(e.consecutiveFailures));case 23:u.next=0;break;case 25:case"end":return u.stop()}},s,null,[[1,8]])}))),(0,p.Z)(this,"connect",(0,g.Z)(h().mark(function s(){var r,l,c=arguments;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r=c.length>0&&void 0!==c[0]&&c[0],e.state!==Te.Connecting){d.next=4;break}return e._log("connect() - connecting already in progress",{reconnect:r},"warn"),d.abrupt("return");case 4:if(e.state!==Te.Connected){d.next=7;break}return e._log("connect() - already connected and polling",{reconnect:r},"warn"),d.abrupt("return");case 7:return e._setState(Te.Connecting),e.connectionID=void 0,d.prev=9,d.next=12,e._req({json:e.client._buildWSPayload()},{timeout:8e3},r);case 12:return l=d.sent.event,e._setState(Te.Connected),e.connectionID=l.connection_id,e.client.dispatchEvent(l),e._poll(),r&&e.client.recoverState(),d.abrupt("return",l);case 22:throw d.prev=22,d.t0=d.catch(9),e._setState(Te.Closed),d.t0;case 26:case"end":return d.stop()}},s,null,[[9,22]])}))),(0,p.Z)(this,"isHealthy",function(){return!!e.connectionID&&e.state===Te.Connected}),(0,p.Z)(this,"disconnect",(0,g.Z)(h().mark(function s(){var r,o,l,c=arguments;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=c.length>0&&void 0!==c[0]?c[0]:2e3,ai(e._onlineStatusChanged),e._setState(Te.Disconnected),null===(r=e.cancelToken)||void 0===r||r.cancel("disconnect() is called"),e.cancelToken=void 0,l=e.connectionID,e.connectionID=void 0,d.prev=7,d.next=10,e._req({close:!0,connection_id:l},{timeout:o},!1);case 10:e._log("disconnect() - Closed connectionID"),d.next=16;break;case 13:d.prev=13,d.t0=d.catch(7),e._log("disconnect() - Failed",{err:d.t0},"error");case 16:case"end":return d.stop()}},s,null,[[7,13]])}))),this.client=n,this.state=Te.Init,this.consecutiveFailures=0,si(this._onlineStatusChanged)}return j(i,[{key:"_log",value:function(e){this.client.logger(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info","WSConnectionFallback:"+e,wn({tags:["connection_fallback","connection"]},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"_setState",value:function(e){this._log("_setState() - ".concat(e)),this.state===Te.Connecting&&e===Te.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(e===Te.Closed||e===Te.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=e}}]),i}();var Fa=function(i){!function Ft(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),a&&Ze(i,a)}(e,i);var a=function Ea(i){var a=function Ia(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var s,n=Lt(i);if(a){var r=Lt(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return function Tt(i,a){if(a&&("object"===(0,se.Z)(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return fe(i)}(this,s)}}(e);function e(){var n;q(this,e);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=a.call.apply(a,[this].concat(r)),(0,p.Z)(fe(n),"code",void 0),(0,p.Z)(fe(n),"response",void 0),(0,p.Z)(fe(n),"status",void 0),n}return e}(_n(Error)),La=["created_at","updated_at","last_active","online"],Za=["params","headers"];function Bt(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Ua(i,a){if(i){if("string"==typeof i)return Ci(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ci(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}function Ci(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function yi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Y(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?yi(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):yi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function St(i){return"string"==typeof i||i instanceof String}var bi=function(){function i(a,e,n){var r,s=this;q(this,i),(0,p.Z)(this,"_user",void 0),(0,p.Z)(this,"activeChannels",void 0),(0,p.Z)(this,"anonymous",void 0),(0,p.Z)(this,"persistUserOnConnectionFailure",void 0),(0,p.Z)(this,"axiosInstance",void 0),(0,p.Z)(this,"baseURL",void 0),(0,p.Z)(this,"browser",void 0),(0,p.Z)(this,"cleaningIntervalRef",void 0),(0,p.Z)(this,"clientID",void 0),(0,p.Z)(this,"configs",void 0),(0,p.Z)(this,"key",void 0),(0,p.Z)(this,"listeners",void 0),(0,p.Z)(this,"logger",void 0),(0,p.Z)(this,"recoverStateOnReconnect",void 0),(0,p.Z)(this,"mutedChannels",void 0),(0,p.Z)(this,"mutedUsers",void 0),(0,p.Z)(this,"node",void 0),(0,p.Z)(this,"options",void 0),(0,p.Z)(this,"secret",void 0),(0,p.Z)(this,"setUserPromise",void 0),(0,p.Z)(this,"state",void 0),(0,p.Z)(this,"tokenManager",void 0),(0,p.Z)(this,"user",void 0),(0,p.Z)(this,"userAgent",void 0),(0,p.Z)(this,"userID",void 0),(0,p.Z)(this,"wsBaseURL",void 0),(0,p.Z)(this,"wsConnection",void 0),(0,p.Z)(this,"wsFallback",void 0),(0,p.Z)(this,"wsPromise",void 0),(0,p.Z)(this,"consecutiveFailures",void 0),(0,p.Z)(this,"insightMetrics",void 0),(0,p.Z)(this,"defaultWSTimeoutWithFallback",void 0),(0,p.Z)(this,"defaultWSTimeout",void 0),(0,p.Z)(this,"nextRequestAbortController",null),(0,p.Z)(this,"_getConnectionID",function(){var l,c;return(null===(l=s.wsConnection)||void 0===l?void 0:l.connectionID)||(null===(c=s.wsFallback)||void 0===c?void 0:c.connectionID)}),(0,p.Z)(this,"_hasConnectionID",function(){return Boolean(s._getConnectionID())}),(0,p.Z)(this,"connectUser",function(){var l=(0,g.Z)(h().mark(function c(u,d){var m,f;return h().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(u.id){C.next=2;break}throw new Error('The "id" field on the user is missing');case 2:if(s.userID!==u.id||!s.setUserPromise){C.next=5;break}return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),C.abrupt("return",s.setUserPromise);case 5:if(!s.userID){C.next=7;break}throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");case 7:return(s._isUsingServerAuth()||s.node)&&!s.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.userID=u.id,s.anonymous=!1,m=s._setToken(u,d),s._setUser(u),f=s.openConnection(),s.setUserPromise=Promise.all([m,f]).then(function(R){return R[1]}),C.prev=14,C.next=17,s.setUserPromise;case 17:return C.abrupt("return",C.sent);case 20:throw C.prev=20,C.t0=C.catch(14),s.persistUserOnConnectionFailure?s.closeConnection():s.disconnectUser(),C.t0;case 24:case"end":return C.stop()}},c,null,[[14,20]])}));return function(c,u){return l.apply(this,arguments)}}()),(0,p.Z)(this,"setUser",this.connectUser),(0,p.Z)(this,"_setToken",function(l,c){return s.tokenManager.setTokenOrProvider(c,l)}),(0,p.Z)(this,"closeConnection",function(){var l=(0,g.Z)(h().mark(function c(u){var d,m;return h().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return null!=s.cleaningIntervalRef&&(clearInterval(s.cleaningIntervalRef),s.cleaningIntervalRef=void 0),v.next=3,Promise.all([null===(d=s.wsConnection)||void 0===d?void 0:d.disconnect(u),null===(m=s.wsFallback)||void 0===m?void 0:m.disconnect(u)]);case 3:return v.abrupt("return",Promise.resolve());case 4:case"end":return v.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),(0,p.Z)(this,"openConnection",(0,g.Z)(h().mark(function l(){var c,u,d;return h().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s.userID){f.next=2;break}throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");case 2:if(null===(c=s.wsConnection)||void 0===c||!c.isConnecting||!s.wsPromise){f.next=5;break}return s.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),f.abrupt("return",s.wsPromise);case 5:if(!(null!==(u=s.wsConnection)&&void 0!==u&&u.isHealthy||null!==(d=s.wsFallback)&&void 0!==d&&d.isHealthy())||!s._hasConnectionID()){f.next=8;break}return s.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]}),f.abrupt("return",Promise.resolve());case 8:return s.clientID="".concat(s.userID,"--").concat(xt()),s.wsPromise=s.connect(),s._startCleaning(),f.abrupt("return",s.wsPromise);case 12:case"end":return f.stop()}},l)}))),(0,p.Z)(this,"_setupConnection",this.openConnection),(0,p.Z)(this,"_normalizeDate",function(l){if(l instanceof Date&&(l=l.toISOString()),""===l)throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return l}),(0,p.Z)(this,"disconnectUser",function(){var l=(0,g.Z)(h().mark(function c(u){var d,m,f;return h().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:for(s.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete s.user,delete s._user,delete s.userID,s.anonymous=!1,d=s.closeConnection(u),m=0,f=Object.values(s.activeChannels);m<f.length;m++)f[m]._disconnect();return s.activeChannels={},s.state=new ci,setTimeout(s.tokenManager.reset),R.abrupt("return",d);case 11:case"end":return R.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),(0,p.Z)(this,"disconnect",this.disconnectUser),(0,p.Z)(this,"connectAnonymousUser",function(){(s._isUsingServerAuth()||s.node)&&!s.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.anonymous=!0,s.userID=xt();var l={id:s.userID,anon:!0};return s._setToken(l,""),s._setUser(l),s._setupConnection()}),(0,p.Z)(this,"setAnonymousUser",this.connectAnonymousUser),(0,p.Z)(this,"doAxiosRequest",function(){var l=(0,g.Z)(h().mark(function c(u,d,m){var f,v,C,R,B=arguments;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return f=B.length>3&&void 0!==B[3]?B[3]:{},A.next=3,s.tokenManager.tokenReady();case 3:v=s._enrichAxiosOptions(f),A.prev=4,s._logApiRequest(u,d,m,v),A.t0=u,A.next="get"===A.t0?9:"delete"===A.t0?13:"post"===A.t0?17:"put"===A.t0?21:"patch"===A.t0?25:"options"===A.t0?29:33;break;case 9:return A.next=11,s.axiosInstance.get(d,v);case 11:case 15:case 19:case 23:case 27:case 31:return C=A.sent,A.abrupt("break",34);case 13:return A.next=15,s.axiosInstance.delete(d,v);case 17:return A.next=19,s.axiosInstance.post(d,m,v);case 21:return A.next=23,s.axiosInstance.put(d,m,v);case 25:return A.next=27,s.axiosInstance.patch(d,m,v);case 29:return A.next=31,s.axiosInstance.options(d,v);case 33:throw new Error("Invalid request type");case 34:return s._logApiResponse(u,d,C),s.consecutiveFailures=0,A.abrupt("return",s.handleResponse(C));case 39:if(A.prev=39,A.t1=A.catch(4),A.t1.client_request_id=null===(R=v.headers)||void 0===R?void 0:R["x-client-request-id"],s._logApiError(u,d,A.t1),s.consecutiveFailures+=1,!A.t1.response){A.next=56;break}if(A.t1.response.data.code!==Zt.TOKEN_EXPIRED||s.tokenManager.isStatic()){A.next=53;break}if(!(s.consecutiveFailures>1)){A.next=49;break}return A.next=49,mt(Xt(s.consecutiveFailures));case 49:return s.tokenManager.loadToken(),A.next=52,s.doAxiosRequest(u,d,m,f);case 52:return A.abrupt("return",A.sent);case 53:return A.abrupt("return",s.handleResponse(A.t1.response));case 56:throw A.t1;case 57:case"end":return A.stop()}},c,null,[[4,39]])}));return function(c,u,d){return l.apply(this,arguments)}}()),(0,p.Z)(this,"dispatchEvent",function(l){l.received_at||(l.received_at=new Date);var c=s._handleClientEvent(l),u=l.cid,d=u?s.activeChannels[u]:void 0;d&&d._handleChannelEvent(l),s._callClientListeners(l),d&&d._callChannelListeners(l),c.forEach(function(m){return m()})}),(0,p.Z)(this,"handleEvent",function(l){var u=JSON.parse(l.data);s.dispatchEvent(u)}),(0,p.Z)(this,"_updateMemberWatcherReferences",function(l){var c=s.state.userChannelReferences[l.id]||{};for(var u in c){var d=s.activeChannels[u];null!=d&&d.state&&(d.state.members[l.id]&&(d.state.members[l.id].user=l),d.state.watchers[l.id]&&(d.state.watchers[l.id]=l))}}),(0,p.Z)(this,"_updateUserReferences",this._updateMemberWatcherReferences),(0,p.Z)(this,"_updateUserMessageReferences",function(l){var c=s.state.userChannelReferences[l.id]||{};for(var u in c)s.activeChannels[u].state?.updateUserMessages(l)}),(0,p.Z)(this,"_deleteUserMessageReference",function(l){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=s.state.userChannelReferences[l.id]||{};for(var d in u)s.activeChannels[d].state?.deleteUserMessages(l,c)}),(0,p.Z)(this,"_handleUserEvent",function(l){if(l.user){if("user.presence.changed"===l.type||"user.updated"===l.type){if(l.user.id===s.userID){var c=Y({},s.user||{}),u=Y({},s._user||{});for(var d in s.user)d in l.user||ea(d)||(delete c[d],delete u[d]);for(var m in l.user)u&&m in u&&(u[m]=l.user[m]);s._user=Y({},u),s.user=Y(Y({},c),l.user)}s.state.updateUser(l.user),s._updateMemberWatcherReferences(l.user)}"user.updated"===l.type&&s._updateUserMessageReferences(l.user),"user.deleted"===l.type&&l.user.deleted_at&&(l.mark_messages_deleted||l.hard_delete)&&s._deleteUserMessageReference(l.user,l.hard_delete)}}),(0,p.Z)(this,"_callClientListeners",function(l){var c=s,u=[];c.listeners.all&&u.push.apply(u,I(c.listeners.all)),c.listeners[l.type]&&u.push.apply(u,I(c.listeners[l.type]));for(var d=0,m=u;d<m.length;d++)(0,m[d])(l)}),(0,p.Z)(this,"recoverState",(0,g.Z)(h().mark(function l(){var c;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s.logger("info","client:recoverState() - Start of recoverState with connectionID ".concat(s._getConnectionID()),{tags:["connection"]}),!(c=Object.keys(s.activeChannels)).length||!s.recoverStateOnReconnect){d.next=10;break}return s.logger("info","client:recoverState() - Start the querying of ".concat(c.length," channels"),{tags:["connection","client"]}),d.next=6,s.queryChannels({cid:{$in:c}},{last_message_at:-1},{limit:30});case 6:s.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),s.dispatchEvent({type:"connection.recovered"}),d.next=11;break;case 10:s.dispatchEvent({type:"connection.recovered"});case 11:s.wsPromise=Promise.resolve(),s.setUserPromise=Promise.resolve();case 13:case"end":return d.stop()}},l)}))),(0,p.Z)(this,"getChannelByMembers",function(l,c){var u=I(c.members||[]).sort().join(","),d="".concat(l,":!members-").concat(u);if(!u)throw Error("Please specify atleast one member when creating unique conversation");for(var m in s.activeChannels){var f=s.activeChannels[m];if(!f.disconnected){if(m===d)return f;if(0===m.indexOf("".concat(l,":!members-"))&&Object.keys(f.state.members).sort().join(",")===u)return f}}var C=new bn(s,l,void 0,c);return s.activeChannels[d]=C,C}),(0,p.Z)(this,"getChannelById",function(l,c,u){if("string"==typeof c&&~c.indexOf(":"))throw Error("Invalid channel id ".concat(c,", can't contain the : character"));var d="".concat(l,":").concat(c);if(d in s.activeChannels&&!s.activeChannels[d].disconnected){var m=s.activeChannels[d];return Object.keys(u).length>0&&(m.data=u,m._data=u),m}var f=new bn(s,l,c,u);return s.activeChannels[f.cid]=f,f}),(0,p.Z)(this,"updateUsers",this.upsertUsers),(0,p.Z)(this,"updateUser",this.upsertUser),(0,p.Z)(this,"markAllRead",this.markChannelsRead),(0,p.Z)(this,"_isUsingServerAuth",function(){return!!s.secret}),(0,p.Z)(this,"_buildWSPayload",function(l){return JSON.stringify({user_id:s.userID,user_details:s._user,device:s.options.device,client_request_id:l})}),this.key=a,this.listeners={},this.state=new ci,this.mutedChannels=[],this.mutedUsers=[],e&&St(e)&&(this.secret=e);var o=n||(e&&!St(e)?e:{});this.browser=typeof o.browser<"u"?o.browser:typeof window<"u",this.node=!this.browser,this.options=Y({timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0},o),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new qs.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=M().create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+process.env.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=null===(r=this.options)||void 0===r?void 0:r.persistUserOnConnectionFailure,this.tokenManager=new Ta(this.secret),this.consecutiveFailures=0,this.insightMetrics=new da,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.logger=Cn(o.logger)?o.logger:function(){return null},this.recoverStateOnReconnect=this.options.recoverStateOnReconnect}return j(i,[{key:"devToken",value:function(e){return function wa(i){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",$s(JSON.stringify({user_id:i})),"devtoken"].join(".")}(e)}},{key:"getAuthType",value:function(){return this.anonymous?"anonymous":"jwt"}},{key:"setBaseURL",value:function(e){this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}},{key:"_setUser",value:function(e){this.user=e,this.userID=e.id,this._user=Y({},e)}},{key:"updateAppSettings",value:(a=(0,g.Z)(h().mark(function n(s){var r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return null!=(r=s.apn_config)&&r.p12_cert&&(s=Y(Y({},s),{},{apn_config:Y(Y({},r),{},{p12_cert:Buffer.from(r.p12_cert).toString("base64")})})),l.next=4,this.patch(this.baseURL+"/app",s);case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}},n,this)})),function e(n){return a.apply(this,arguments)})},{key:"revokeTokens",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(s)});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"revokeUserToken",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.revokeUsersToken([s],r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"revokeUsersToken",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l,c;return h().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:r=void 0===r?(new Date).toISOString():this._normalizeDate(r),o=[],l=Bt(s);try{for(l.s();!(c=l.n()).done;)o.push({id:c.value,set:{revoke_tokens_issued_before:r}})}catch(f){l.e(f)}finally{l.f()}return m.next=6,this.partialUpdateUsers(o);case 6:return m.abrupt("return",m.sent);case 7:case"end":return m.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getAppSettings",value:function(){var a=(0,g.Z)(h().mark(function n(){return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(this.baseURL+"/app");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"testPushSettings",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/check_push",Y(Y(Y(Y(Y(Y(Y({user_id:s},r.messageID?{message_id:r.messageID}:{}),r.apnTemplate?{apn_template:r.apnTemplate}:{}),r.firebaseTemplate?{firebase_template:r.firebaseTemplate}:{}),r.firebaseDataTemplate?{firebase_data_template:r.firebaseDataTemplate}:{}),r.skipDevices?{skip_devices:!0}:{}),r.pushProviderName?{push_provider_name:r.pushProviderName}:{}),r.pushProviderType?{push_provider_type:r.pushProviderType}:{}));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"testSQSSettings",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.post(this.baseURL+"/check_sqs",s);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"setGuestUser",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,l;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.anonymous=!0,u.prev=1,u.next=4,this.post(this.baseURL+"/guest",{user:s});case 4:r=u.sent,u.next=11;break;case 7:throw u.prev=7,u.t0=u.catch(1),this.anonymous=!1,u.t0;case 11:return this.anonymous=!1,l=ae(r.user,La),u.next=15,this.connectUser(l,r.access_token);case 15:return u.abrupt("return",u.sent);case 16:case"end":return u.stop()}},n,this,[[1,7]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"createToken",value:function(e,n,s){if(null==this.secret)throw Error("tokens can only be created server-side using the API Secret");var r={};return n&&(r.exp=n),s&&(r.iat=s),mi(this.secret,e,r,{})}},{key:"on",value:function(e,n){var s=this,r=n?e:"all",o=n||e;return r in this.listeners||(this.listeners[r]=[]),this.logger("info","Attaching listener for ".concat(r," event"),{tags:["event","client"]}),this.listeners[r].push(o),{unsubscribe:function(){s.logger("info","Removing listener for ".concat(r," event"),{tags:["event","client"]}),s.listeners[r]=s.listeners[r].filter(function(c){return c!==o})}}}},{key:"off",value:function(e,n){var s=n?e:"all",r=n||e;s in this.listeners||(this.listeners[s]=[]),this.logger("info","Removing listener for ".concat(s," event"),{tags:["event","client"]}),this.listeners[s]=this.listeners[s].filter(function(o){return o!==r})}},{key:"_logApiRequest",value:function(e,n,s,r){this.logger("info","client: ".concat(e," - Request - ").concat(n),{tags:["api","api_request","client"],url:n,payload:s,config:r})}},{key:"_logApiResponse",value:function(e,n,s){this.logger("info","client:".concat(e," - Response - url: ").concat(n," > status ").concat(s.status),{tags:["api","api_response","client"],url:n,response:s})}},{key:"_logApiError",value:function(e,n,s){this.logger("error","client:".concat(e," - Error - url: ").concat(n),{tags:["api","api_response","client"],url:n,error:s})}},{key:"get",value:function(e,n){return this.doAxiosRequest("get",e,null,{params:n})}},{key:"put",value:function(e,n){return this.doAxiosRequest("put",e,n)}},{key:"post",value:function(e,n){return this.doAxiosRequest("post",e,n)}},{key:"patch",value:function(e,n){return this.doAxiosRequest("patch",e,n)}},{key:"delete",value:function(e,n){return this.doAxiosRequest("delete",e,null,{params:n})}},{key:"sendFile",value:function(e,n,s,r,o){var l=function ta(i,a,e){var n=new(we());return function Gs(i){return null!==i&&"object"===(0,se.Z)(i)&&(i.readable||"function"==typeof i._read)}(i)||function Ws(i){return null!=i&&null!=i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}(i)||function Ks(i){return typeof window<"u"&&"File"in window&&i instanceof File}(i)||function Xs(i){return typeof window<"u"&&"Blob"in window&&i instanceof Blob}(i)?a?n.append("file",i,a):n.append("file",i):n.append("file",{uri:i,name:a||i.split("/").reverse()[0],contentType:e||void 0,type:e||void 0}),n}(n,s,r);return null!=o&&l.append("user",JSON.stringify(o)),this.doAxiosRequest("post",e,l,{headers:l.getHeaders?l.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}},{key:"errorFromResponse",value:function(e){var n;return n=new Fa("StreamChat error HTTP code: ".concat(e.status)),e.data&&e.data.code&&((n=new Error("StreamChat error code ".concat(e.data.code,": ").concat(e.data.message))).code=e.data.code),n.response=e,n.status=e.status,n}},{key:"handleResponse",value:function(e){var n=e.data;if(function Aa(i){return!i.status||i.status<200||300<=i.status}(e))throw this.errorFromResponse(e);return n}},{key:"_handleClientEvent",value:function(e){var n,r,m,s=this,o=this,l=[];if(this.logger("info","client:_handleClientEvent - Received event of type { ".concat(e.type," }"),{tags:["event","client"],event:e}),("user.presence.changed"===e.type||"user.updated"===e.type||"user.deleted"===e.type)&&this._handleUserEvent(e),"health.check"===e.type&&e.me&&(o.user=e.me,o.state.updateUser(e.me),o.mutedChannels=e.me.channel_mutes,o.mutedUsers=e.me.mutes),e.channel&&"notification.message_new"===e.type&&this._addChannelConfig(e.channel),"notification.channel_mutes_updated"===e.type&&null!==(n=e.me)&&void 0!==n&&n.channel_mutes){var c=[],u=[];this.mutedChannels.forEach(function(f){return f.channel&&c.push(f.channel.cid)}),e.me.channel_mutes.forEach(function(f){return f.channel&&u.push(f.channel.cid)}),c.forEach(function(f){!u.includes(f)&&s.activeChannels[f]&&(s.activeChannels[f].state.unreadCount=0)}),this.mutedChannels=e.me.channel_mutes}return"notification.mutes_updated"===e.type&&null!==(r=e.me)&&void 0!==r&&r.mutes&&(this.mutedUsers=e.me.mutes),"notification.mark_read"===e.type&&0===e.unread_channels&&Object.keys(this.activeChannels).forEach(function(f){return s.activeChannels[f].state.unreadCount=0}),"channel.deleted"!==e.type&&"notification.channel_deleted"!==e.type||!e.cid||(o.state.deleteAllChannelReference(e.cid),null===(m=this.activeChannels[e.cid])||void 0===m||m._disconnect(),l.push(function(){e.cid&&delete s.activeChannels[e.cid]})),l}},{key:"_muteStatus",value:function(e){for(var n,s=0;s<this.mutedChannels.length;s++){var r,o=this.mutedChannels[s];if((null===(r=o.channel)||void 0===r?void 0:r.cid)===e){n={muted:!o.expires||new Date(o.expires).getTime()>(new Date).getTime(),createdAt:o.created_at?new Date(o.created_at):new Date,expiresAt:o.expires?new Date(o.expires):null};break}}return n||{muted:!1,createdAt:null,expiresAt:null}}},{key:"connect",value:function(){var a=(0,g.Z)(h().mark(function n(){return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.userID&&this._user){r.next=2;break}throw Error("Call connectUser or connectAnonymousUser before starting the connection");case 2:if(this.wsBaseURL){r.next=4;break}throw Error("Websocket base url not set");case 4:if(this.clientID){r.next=6;break}throw Error("clientID is not set");case 6:if(!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new _a({client:this}),r.prev=8,!this.wsFallback){r.next=13;break}return r.next=12,this.wsFallback.connect();case 12:case 15:case 28:return r.abrupt("return",r.sent);case 13:return r.next=15,this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout);case 18:if(r.prev=18,r.t0=r.catch(8),!(this.options.enableWSFallback&&ka(r.t0)&&oa())){r.next=29;break}return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new Oa({client:this}),r.next=28,this.wsFallback.connect();case 29:throw r.t0;case 30:case"end":return r.stop()}},n,this,[[8,18]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_sayHi",value:function(){var e=this,n=xt();this.doAxiosRequest("get",this.baseURL+"/hi",null,{headers:{"x-client-request-id":n}}).catch(function(r){e.options.enableInsights&&Rt("http_hi_failed",{api_key:e.key,err:r,client_request_id:n})})}},{key:"queryUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l,c,u=arguments;return h().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:[],o=u.length>2&&void 0!==u[2]?u[2]:{},l={presence:!1},m.next=5,this.wsPromise;case 5:return this._hasConnectionID()||(l.presence=!1),m.next=8,this.get(this.baseURL+"/users",{payload:Y(Y({filter_conditions:s,sort:ft(r)},l),o)});case 8:return this.state.updateUsers((c=m.sent).users),m.abrupt("return",c);case 11:case"end":return m.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryBannedUsers",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=l.length>0&&void 0!==l[0]?l[0]:{},r=l.length>1&&void 0!==l[1]?l[1]:[],o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=5,this.get(this.baseURL+"/query_banned_users",{payload:Y({filter_conditions:s,sort:ft(r)},o)});case 5:return u.abrupt("return",u.sent);case 6:case"end":return u.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"queryMessageFlags",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.get(this.baseURL+"/moderation/flags/message",{payload:Y({filter_conditions:s},r)});case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"queryChannels",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l,c,u,d,m=arguments;return h().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:[],o=m.length>2&&void 0!==m[2]?m[2]:{},l=m.length>3&&void 0!==m[3]?m[3]:{},c={state:!0,watch:!0,presence:!1},v.next=6,this.wsPromise;case 6:return this._hasConnectionID()||(c.watch=!1),u=Y(Y({filter_conditions:s,sort:ft(r)},c),o),v.next=10,this.post(this.baseURL+"/channels",u);case 10:return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:(d=v.sent).channels,isLatestMessageSet:!0}}),v.abrupt("return",this.hydrateActiveChannels(d.channels,l));case 13:case"end":return v.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"hydrateActiveChannels",value:function(){var c,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.skipInitialization,r=n.offlineMode,o=void 0!==r&&r,l=Bt(e);try{for(l.s();!(c=l.n()).done;)this._addChannelConfig(c.value.channel)}catch(Q){l.e(Q)}finally{l.f()}var f,d=[],m=Bt(e);try{for(m.s();!(f=m.n()).done;){var v=f.value,C=this.channel(v.channel.type,v.channel.id);C.data=v.channel,C.offlineMode=o,C.initialized=!o,void 0===s?C._initializeState(v,"latest"):s.includes(v.channel.id)||(C.state.clearMessages(),C._initializeState(v,"latest")),d.push(C)}}catch(Q){m.e(Q)}finally{m.f()}if(!o)for(var R in this.activeChannels)this.activeChannels[R].offlineMode&&delete this.activeChannels[R];return d}},{key:"search",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l,c=arguments;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(o=c.length>2&&void 0!==c[2]?c[2]:{}).offset||!o.sort&&!o.next){d.next=3;break}throw Error("Cannot specify offset with sort or next parameters");case 3:if(l=Y(Y({filter_conditions:s},o),{},{sort:o.sort?ft(o.sort):void 0}),"string"!=typeof r){d.next=8;break}l.query=r,d.next=13;break;case 8:if("object"!==(0,se.Z)(r)){d.next=12;break}l.message_filter_conditions=r,d.next=13;break;case 12:throw Error("Invalid type ".concat((0,se.Z)(r)," for query parameter"));case 13:return d.next=15,this.wsPromise;case 15:return d.next=17,this.get(this.baseURL+"/search",{payload:l});case 17:return d.abrupt("return",d.sent);case 18:case"end":return d.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"setLocalDevice",value:function(e){var n,s,r;if(null!==(n=this.wsConnection)&&void 0!==n&&n.isConnecting&&this.wsPromise||(null!==(s=this.wsConnection)&&void 0!==s&&s.isHealthy||null!==(r=this.wsFallback)&&void 0!==r&&r.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=e}},{key:"addDevice",value:function(){var a=(0,g.Z)(h().mark(function n(s,r,o,l){return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.post(this.baseURL+"/devices",Y(Y({id:s,push_provider:r},null!=o?{user_id:o}:{}),null!=l?{push_provider_name:l}:{}));case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},n,this)}));return function e(n,s,r,o){return a.apply(this,arguments)}}()},{key:"getDevices",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/devices",s?{user_id:s}:{});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"removeDevice",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/devices",Y({id:s},r?{user_id:r}:{}));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getRateLimits",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,d;return h().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.get(this.baseURL+"/rate_limits",{server_side:(r=s||{}).serverSide,web:r.web,android:r.android,ios:r.ios,endpoints:(d=r.endpoints)?d.join(","):void 0}));case 2:case"end":return f.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_addChannelConfig",value:function(e){this.configs[e.cid]=e.config}},{key:"channel",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~e.indexOf(":"))throw Error("Invalid channel group ".concat(e,", can't contain the : character"));return null==n||""===n?new bn(this,e,void 0,s):"object"===(0,se.Z)(n)?this.getChannelByMembers(e,n):this.getChannelById(e,n,s)}},{key:"partialUpdateUser",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.partialUpdateUsers([s]);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o,l,c;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r={},o=Bt(s),d.prev=2,o.s();case 4:if((l=o.n()).done){d.next=11;break}if((c=l.value).id){d.next=8;break}throw Error("User ID is required when updating a user");case 8:r[c.id]=c;case 9:d.next=4;break;case 11:d.next=16;break;case 13:d.prev=13,d.t0=d.catch(2),o.e(d.t0);case 16:return d.prev=16,o.f(),d.finish(16);case 19:return d.next=21,this.post(this.baseURL+"/users",{users:r});case 21:return d.abrupt("return",d.sent);case 22:case"end":return d.stop()}},n,this,[[2,13,16,19]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertUser",value:function(e){return this.upsertUsers([e])}},{key:"partialUpdateUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=Bt(s),u.prev=1,r.s();case 3:if((o=r.n()).done){u.next=9;break}if(o.value.id){u.next=7;break}throw Error("User ID is required when updating a user");case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),r.e(u.t0);case 14:return u.prev=14,r.f(),u.finish(14);case 17:return u.next=19,this.patch(this.baseURL+"/users",{users:s});case 19:return u.abrupt("return",u.sent);case 20:case"end":return u.stop()}},n,this,[[1,11,14,17]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/users/".concat(s),r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"restoreUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/users/restore",{user_ids:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"reactivateUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/".concat(s,"/reactivate"),Y({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"reactivateUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/reactivate",Y({user_ids:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deactivateUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/".concat(s,"/deactivate"),Y({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deactivateUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/deactivate",Y({user_ids:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"exportUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/users/".concat(s,"/export"),Y({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"banUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/moderation/ban",Y({target_user_id:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"unbanUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/moderation/ban",Y({target_user_id:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"shadowBan",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.banUser(s,Y({shadow:!0},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeShadowBan",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.unbanUser(s,Y({shadow:!0},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"muteUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this.post(this.baseURL+"/moderation/mute",Y(Y({target_id:s},r?{user_id:r}:{}),o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"unmuteUser",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/moderation/unmute",Y({target_id:s},r?{user_id:r}:{}));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"userMuteStatus",value:function(e){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(var n=0;n<this.mutedUsers.length;n+=1)if(this.mutedUsers[n].target.id===e)return!0;return!1}},{key:"flagMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/flag",Y({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"flagUser",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/flag",Y({target_user_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"unflagMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unflag",Y({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"unflagUser",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unflag",Y({target_user_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getCallToken",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/calls/".concat(s),Y({},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_queryFlags",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.post(this.baseURL+"/moderation/flags",Y({filter_conditions:s},r));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"_queryFlagReports",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.post(this.baseURL+"/moderation/reports",Y({filter_conditions:s},r));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"_reviewFlagReport",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o,l=arguments;return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this.patch(this.baseURL+"/moderation/reports/".concat(s),Y({review_result:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_unblockMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unblock_message",Y({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"markChannelsRead",value:function(){var a=(0,g.Z)(h().mark(function n(){var s,r=arguments;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.post(this.baseURL+"/channels/read",Y({},s));case 3:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"createCommand",value:function(e){return this.post(this.baseURL+"/commands",e)}},{key:"getCommand",value:function(e){return this.get(this.baseURL+"/commands/".concat(e))}},{key:"updateCommand",value:function(e,n){return this.put(this.baseURL+"/commands/".concat(e),n)}},{key:"deleteCommand",value:function(e){return this.delete(this.baseURL+"/commands/".concat(e))}},{key:"listCommands",value:function(){return this.get(this.baseURL+"/commands")}},{key:"createChannelType",value:function(e){var n=X({},{commands:["all"]},e);return this.post(this.baseURL+"/channeltypes",n)}},{key:"getChannelType",value:function(e){return this.get(this.baseURL+"/channeltypes/".concat(e))}},{key:"updateChannelType",value:function(e,n){return this.put(this.baseURL+"/channeltypes/".concat(e),n)}},{key:"deleteChannelType",value:function(e){return this.delete(this.baseURL+"/channeltypes/".concat(e))}},{key:"listChannelTypes",value:function(){return this.get(this.baseURL+"/channeltypes")}},{key:"translateMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/messages/".concat(s,"/translate"),{language:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_normalizeExpiration",value:function(e){var n=null;if("number"==typeof e){var s=new Date;s.setSeconds(s.getSeconds()+e),n=s.toISOString()}else St(e)?n=e:e instanceof Date&&(n=e.toISOString());return n}},{key:"_validateAndGetMessageId",value:function(e,n){var s;if("string"==typeof e)s=e;else{if(!e.id)throw Error(n);s=e.id}return s}},{key:"pinMessage",value:function(e,n,s,r){var o=this._validateAndGetMessageId(e,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(o,{set:{pinned:!0,pin_expires:this._normalizeExpiration(n),pinned_at:this._normalizeExpiration(r)}},s)}},{key:"unpinMessage",value:function(e,n){var s=this._validateAndGetMessageId(e,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(s,{set:{pinned:!1}},n)}},{key:"updateMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s,r,o){var l;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s.id){d.next=2;break}throw Error("Please specify the message id when calling updateMessage");case 2:return delete(l=X({},s)).id,["command","created_at","html","latest_reactions","own_reactions","quoted_message","reaction_counts","reply_count","type","updated_at","user","__html"].forEach(function(m){null!=l[m]&&delete l[m]}),null!=r&&(St(r)?l.user_id=r:l.user={id:r.id}),Array.isArray(l.mentioned_users)&&!St(l.mentioned_users[0])&&(l.mentioned_users=l.mentioned_users.map(function(m){return m.id})),d.next=10,this.post(this.baseURL+"/messages/".concat(s.id),Y({message:l},o));case 10:return d.abrupt("return",d.sent);case 11:case"end":return d.stop()}},n,this)}));return function e(n,s,r){return a.apply(this,arguments)}}()},{key:"partialUpdateMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s,r,o,l){var c;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s){d.next=2;break}throw Error("Please specify the message id when calling partialUpdateMessage");case 2:return c=o,null!=o&&St(o)&&(c={id:o}),d.next=6,this.put(this.baseURL+"/messages/".concat(s),Y(Y(Y({},r),l),{},{user:c}));case 6:return d.abrupt("return",d.sent);case 7:case"end":return d.stop()}},n,this)}));return function e(n,s,r,o){return a.apply(this,arguments)}}()},{key:"deleteMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o={},r&&(o={hard:!0}),c.next=4,this.delete(this.baseURL+"/messages/".concat(s),o);case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/messages/".concat(s));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getUserAgent",value:function(){return this.userAgent||"stream-chat-javascript-client-".concat(this.node?"node":"browser","-","8.4.1")}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"_enrichAxiosOptions",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}},s=this._getToken(),r=s?{Authorization:s}:void 0,o=null;null!==this.nextRequestAbortController&&(o=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),null!==(e=n.headers)&&void 0!==e&&e["x-client-request-id"]||(n.headers=Y(Y({},n.headers),{},{"x-client-request-id":xt()}));var l=this.options.axiosRequestConfig||{},c=l.params,u=l.headers,d=ae(l,Za);return Y(Y(Y({params:Y(Y({user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key},n.params),c||{}),headers:Y(Y(Y({},r),{},{"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent()},n.headers),u||{})},o?{signal:o}:{}),n.config),d||{})}},{key:"_getToken",value:function(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}},{key:"_startCleaning",value:function(){var e=this;null==this.cleaningIntervalRef&&(this.cleaningIntervalRef=setInterval(function(){for(var n=0,s=Object.values(e.activeChannels);n<s.length;n++)s[n].clean()},500))}},{key:"verifyWebhook",value:function(e,n){return!!this.secret&&function Da(i,a,e){var n=Buffer.from(a,"ascii");return null.createHmac("sha256",n).update(i).digest("hex")===e}(e,this.secret,n)}},{key:"getPermission",value:function(e){return this.get("".concat(this.baseURL,"/permissions/").concat(e))}},{key:"createPermission",value:function(e){return this.post("".concat(this.baseURL,"/permissions"),Y({},e))}},{key:"updatePermission",value:function(e,n){return this.put("".concat(this.baseURL,"/permissions/").concat(e),Y({},n))}},{key:"deletePermission",value:function(e){return this.delete("".concat(this.baseURL,"/permissions/").concat(e))}},{key:"listPermissions",value:function(){return this.get("".concat(this.baseURL,"/permissions"))}},{key:"createRole",value:function(e){return this.post("".concat(this.baseURL,"/roles"),{name:e})}},{key:"listRoles",value:function(){return this.get("".concat(this.baseURL,"/roles"))}},{key:"deleteRole",value:function(e){return this.delete("".concat(this.baseURL,"/roles/").concat(e))}},{key:"sync",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.post("".concat(this.baseURL,"/sync"),Y({channel_cids:e,last_sync_at:n},s))}},{key:"sendUserCustomEvent",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post("".concat(this.baseURL,"/users/").concat(s,"/event"),{event:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"createBlockList",value:function(e){return this.post("".concat(this.baseURL,"/blocklists"),e)}},{key:"listBlockLists",value:function(){return this.get("".concat(this.baseURL,"/blocklists"))}},{key:"getBlockList",value:function(e){return this.get("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"updateBlockList",value:function(e,n){return this.put("".concat(this.baseURL,"/blocklists/").concat(e),n)}},{key:"deleteBlockList",value:function(e){return this.delete("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"exportChannels",value:function(e){var s=Y({channels:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return this.post("".concat(this.baseURL,"/export_channels"),s)}},{key:"exportUsers",value:function(e){return this.post("".concat(this.baseURL,"/export/users"),e)}},{key:"exportChannel",value:function(e,n){return this.exportChannels([e],n)}},{key:"getExportChannelStatus",value:function(e){return this.get("".concat(this.baseURL,"/export_channels/").concat(e))}},{key:"createSegment",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post(this.baseURL+"/segments",{segment:s});case 2:return c.abrupt("return",c.sent.segment);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"querySegments",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/segments",{payload:Y({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"updateSegment",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.put(this.baseURL+"/segments/".concat(s),{segment:r});case 2:return u.abrupt("return",u.sent.segment);case 5:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deleteSegment",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.delete(this.baseURL+"/segments/".concat(s)));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"createCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post(this.baseURL+"/campaigns",{campaign:s});case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryCampaigns",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/campaigns",{payload:Y({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"updateCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.put(this.baseURL+"/campaigns/".concat(s),{campaign:r});case 2:return u.abrupt("return",u.sent.campaign);case 5:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deleteCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.abrupt("return",this.delete(this.baseURL+"/campaigns/".concat(s),r));case 2:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"scheduleCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o;return h().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=r.scheduledFor,d.next=3,this.patch(this.baseURL+"/campaigns/".concat(s,"/schedule"),{scheduled_for:o});case 3:return d.abrupt("return",d.sent.campaign);case 6:case"end":return d.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"stopCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.patch(this.baseURL+"/campaigns/".concat(s,"/stop"));case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"resumeCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.patch(this.baseURL+"/campaigns/".concat(s,"/resume"));case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"testCampaign",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){var o;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=r.users,c.next=3,this.post(this.baseURL+"/campaigns/".concat(s,"/test"),{users:o});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"queryRecipients",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/recipients",{payload:Y({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"enrichURL",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.get(this.baseURL+"/og",{url:s}));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getTask",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.get("".concat(this.baseURL,"/tasks/").concat(s)));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteChannels",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/channels/delete",Y({cids:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteUsers",value:function(){var a=(0,g.Z)(h().mark(function n(s,r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if("soft"===r?.user||"hard"===r?.user){l.next=2;break}throw new Error("Invalid delete user options. user must be one of [soft hard]");case 2:if(void 0===r.messages||"soft"===r.messages||"hard"===r.messages){l.next=4;break}throw new Error("Invalid delete user options. messages must be one of [soft hard]");case 4:if(void 0===r.conversations||"soft"===r.conversations||"hard"===r.conversations){l.next=6;break}throw new Error("Invalid delete user options. conversations must be one of [soft hard]");case 6:return l.next=8,this.post(this.baseURL+"/users/delete",Y({user_ids:s},r));case 8:return l.abrupt("return",l.sent);case 9:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_createImportURL",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/import_urls",{filename:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_createImport",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o=arguments;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{mode:"upsert"},c.next=3,this.post(this.baseURL+"/imports",Y({path:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_getImport",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/imports/".concat(s));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_listImports",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/imports",s);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertPushProvider",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/push_providers",{push_provider:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deletePushProvider",value:function(){var a=(0,g.Z)(h().mark(function n(s){var r,o;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=s.type,o=s.name,c.next=3,this.delete(this.baseURL+"/push_providers/".concat(r,"/").concat(o));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"listPushProviders",value:function(){var a=(0,g.Z)(h().mark(function n(){return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(this.baseURL+"/push_providers");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"createAbortControllerForNextRequest",value:function(){return this.nextRequestAbortController=new AbortController}},{key:"commitMessage",value:function(){var a=(0,g.Z)(h().mark(function n(s){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/messages/".concat(s,"/commit"));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e,n,s){return i._instance||(i._instance="string"==typeof n?new i(e,n,s):new i(e,n)),i._instance}}]),i;var a}();(0,p.Z)(bi,"_instance",void 0);var en,wi="Allow",Dn=["*"],Tn=["*"],Di=function i(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tn,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wi;q(this,i),(0,p.Z)(this,"name",void 0),(0,p.Z)(this,"action",void 0),(0,p.Z)(this,"owner",void 0),(0,p.Z)(this,"priority",void 0),(0,p.Z)(this,"resources",void 0),(0,p.Z)(this,"roles",void 0),this.name=a,this.action=o,this.owner=r,this.priority=e,this.resources=n,this.roles=s},Na=(new Di("Allow all",999,Dn,Tn,!1,wi),new Di("Deny all",1,Dn,Tn,!1,"Deny"),_(4782)),Mt=_(590),Pt=_(9300),Ha=_(5698),Nt=_(8505),Ti=_(8675),xi=_(1884),ja=_(8372),$a=new Uint8Array(16);function Ya(){if(!en&&!(en=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return en($a)}const qa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ja=function za(i){return"string"==typeof i&&qa.test(i)};for(var Oe=[],xn=0;xn<256;++xn)Oe.push((xn+256).toString(16).substr(1));const Sn=function Ga(i,a,e){var n=(i=i||{}).random||(i.rng||Ya)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,a){e=e||0;for(var s=0;s<16;++s)a[e+s]=n[s];return a}return function Va(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Oe[i[a+0]]+Oe[i[a+1]]+Oe[i[a+2]]+Oe[i[a+3]]+"-"+Oe[i[a+4]]+Oe[i[a+5]]+"-"+Oe[i[a+6]]+Oe[i[a+7]]+"-"+Oe[i[a+8]]+Oe[i[a+9]]+"-"+Oe[i[a+10]]+Oe[i[a+11]]+Oe[i[a+12]]+Oe[i[a+13]]+Oe[i[a+14]]+Oe[i[a+15]]).toLowerCase();if(!Ja(e))throw TypeError("Stringified UUID is invalid");return e}(n)};var Se=_(6188),x=_(6895),Wa=_(3431),Ka=_.n(Wa),Xa=_(1764),Si=_.n(Xa),er=_(563),tr=_.n(er);function Ne(i){if(null==i)return window;if("[object Window]"!==i.toString()){var a=i.ownerDocument;return a&&a.defaultView||window}return i}function _t(i){return i instanceof Ne(i).Element||i instanceof Element}function ze(i){return i instanceof Ne(i).HTMLElement||i instanceof HTMLElement}function Mn(i){return!(typeof ShadowRoot>"u")&&(i instanceof Ne(i).ShadowRoot||i instanceof ShadowRoot)}var vt=Math.max,tn=Math.min,kt=Math.round;function kn(){var i=navigator.userAgentData;return null!=i&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function Mi(){return!/^((?!chrome|android).)*safari/i.test(kn())}function At(i,a,e){void 0===a&&(a=!1),void 0===e&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;a&&ze(i)&&(s=i.offsetWidth>0&&kt(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&kt(n.height)/i.offsetHeight||1);var l=(_t(i)?Ne(i):window).visualViewport,c=!Mi()&&e,u=(n.left+(c&&l?l.offsetLeft:0))/s,d=(n.top+(c&&l?l.offsetTop:0))/r,m=n.width/s,f=n.height/r;return{width:m,height:f,top:d,right:u+m,bottom:d+f,left:u,x:u,y:d}}function An(i){var a=Ne(i);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function et(i){return i?(i.nodeName||"").toLowerCase():null}function ot(i){return((_t(i)?i.ownerDocument:i.document)||window.document).documentElement}function On(i){return At(ot(i)).left+An(i).scrollLeft}function st(i){return Ne(i).getComputedStyle(i)}function En(i){var a=st(i);return/auto|scroll|overlay|hidden/.test(a.overflow+a.overflowY+a.overflowX)}function rr(i,a,e){void 0===e&&(e=!1);var n=ze(a),s=ze(a)&&function ar(i){var a=i.getBoundingClientRect(),e=kt(a.width)/i.offsetWidth||1,n=kt(a.height)/i.offsetHeight||1;return 1!==e||1!==n}(a),r=ot(a),o=At(i,s,e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!e)&&(("body"!==et(a)||En(r))&&(l=function sr(i){return i!==Ne(i)&&ze(i)?function ir(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}(i):An(i)}(a)),ze(a)?((c=At(a,!0)).x+=a.clientLeft,c.y+=a.clientTop):r&&(c.x=On(r))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function In(i){var a=At(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(a.width-e)<=1&&(e=a.width),Math.abs(a.height-n)<=1&&(n=a.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function nn(i){return"html"===et(i)?i:i.assignedSlot||i.parentNode||(Mn(i)?i.host:null)||ot(i)}function ki(i){return["html","body","#document"].indexOf(et(i))>=0?i.ownerDocument.body:ze(i)&&En(i)?i:ki(nn(i))}function Ht(i,a){var e;void 0===a&&(a=[]);var n=ki(i),s=n===(null==(e=i.ownerDocument)?void 0:e.body),r=Ne(n),o=s?[r].concat(r.visualViewport||[],En(n)?n:[]):n,l=a.concat(o);return s?l:l.concat(Ht(nn(o)))}function or(i){return["table","td","th"].indexOf(et(i))>=0}function Ai(i){return ze(i)&&"fixed"!==st(i).position?i.offsetParent:null}function jt(i){for(var a=Ne(i),e=Ai(i);e&&or(e)&&"static"===st(e).position;)e=Ai(e);return e&&("html"===et(e)||"body"===et(e)&&"static"===st(e).position)?a:e||function lr(i){var a=/firefox/i.test(kn());if(/Trident/i.test(kn())&&ze(i)&&"fixed"===st(i).position)return null;var s=nn(i);for(Mn(s)&&(s=s.host);ze(s)&&["html","body"].indexOf(et(s))<0;){var r=st(s);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||a&&"filter"===r.willChange||a&&r.filter&&"none"!==r.filter)return s;s=s.parentNode}return null}(i)||a}var Ue="top",Je="bottom",Ve="right",Re="left",Fn="auto",$t=[Ue,Je,Ve,Re],Ot="start",Yt="end",cr="clippingParents",Oi="viewport",qt="popper",ur="reference",Ei=$t.reduce(function(i,a){return i.concat([a+"-"+Ot,a+"-"+Yt])},[]),Ii=[].concat($t,[Fn]).reduce(function(i,a){return i.concat([a,a+"-"+Ot,a+"-"+Yt])},[]),yr=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function br(i){var a=new Map,e=new Set,n=[];function s(r){e.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach(function(l){if(!e.has(l)){var c=a.get(l);c&&s(c)}}),n.push(r)}return i.forEach(function(r){a.set(r.name,r)}),i.forEach(function(r){e.has(r.name)||s(r)}),n}function Dr(i){var a;return function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}}var Fi={placement:"bottom",modifiers:[],strategy:"absolute"};function Li(){for(var i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return!a.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function xr(i){void 0===i&&(i={});var e=i.defaultModifiers,n=void 0===e?[]:e,s=i.defaultOptions,r=void 0===s?Fi:s;return function(l,c,u){void 0===u&&(u=r);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fi,r),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],f=!1,v={state:d,setOptions:function(Q){var A="function"==typeof Q?Q(d.options):Q;R(),d.options=Object.assign({},r,d.options,A),d.scrollParents={reference:_t(l)?Ht(l):l.contextElement?Ht(l.contextElement):[],popper:Ht(c)};var oe=function wr(i){var a=br(i);return yr.reduce(function(e,n){return e.concat(a.filter(function(s){return s.phase===n}))},[])}(function Tr(i){var a=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(a).map(function(e){return a[e]})}([].concat(n,d.options.modifiers)));return d.orderedModifiers=oe.filter(function(ge){return ge.enabled}),function C(){d.orderedModifiers.forEach(function(B){var A=B.options,te=B.effect;if("function"==typeof te){var ne=te({state:d,name:B.name,instance:v,options:void 0===A?{}:A});m.push(ne||function(){})}})}(),v.update()},forceUpdate:function(){if(!f){var Q=d.elements,A=Q.reference,oe=Q.popper;if(Li(A,oe)){d.rects={reference:rr(A,jt(oe),"fixed"===d.options.strategy),popper:In(oe)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(ge){return d.modifiersData[ge.name]=Object.assign({},ge.data)});for(var ne=0;ne<d.orderedModifiers.length;ne++)if(!0!==d.reset){var ie=d.orderedModifiers[ne],ue=ie.fn,_e=ie.options;"function"==typeof ue&&(d=ue({state:d,options:void 0===_e?{}:_e,name:ie.name,instance:v})||d)}else d.reset=!1,ne=-1}}},update:Dr(function(){return new Promise(function(B){v.forceUpdate(),B(d)})}),destroy:function(){R(),f=!0}};if(!Li(l,c))return v;function R(){m.forEach(function(B){return B()}),m=[]}return v.setOptions(u).then(function(B){!f&&u.onFirstUpdate&&u.onFirstUpdate(B)}),v}}var sn={passive:!0};const Mr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Sr(i){var a=i.state,e=i.instance,n=i.options,s=n.scroll,r=void 0===s||s,o=n.resize,l=void 0===o||o,c=Ne(a.elements.popper),u=[].concat(a.scrollParents.reference,a.scrollParents.popper);return r&&u.forEach(function(d){d.addEventListener("scroll",e.update,sn)}),l&&c.addEventListener("resize",e.update,sn),function(){r&&u.forEach(function(d){d.removeEventListener("scroll",e.update,sn)}),l&&c.removeEventListener("resize",e.update,sn)}},data:{}};function tt(i){return i.split("-")[0]}function Et(i){return i.split("-")[1]}function Ln(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Zi(i){var c,a=i.reference,e=i.element,n=i.placement,s=n?tt(n):null,r=n?Et(n):null,o=a.x+a.width/2-e.width/2,l=a.y+a.height/2-e.height/2;switch(s){case Ue:c={x:o,y:a.y-e.height};break;case Je:c={x:o,y:a.y+a.height};break;case Ve:c={x:a.x+a.width,y:l};break;case Re:c={x:a.x-e.width,y:l};break;default:c={x:a.x,y:a.y}}var u=s?Ln(s):null;if(null!=u){var d="y"===u?"height":"width";switch(r){case Ot:c[u]=c[u]-(a[d]/2-e[d]/2);break;case Yt:c[u]=c[u]+(a[d]/2-e[d]/2)}}return c}const Ar={name:"popperOffsets",enabled:!0,phase:"read",fn:function kr(i){var a=i.state;a.modifiersData[i.name]=Zi({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})},data:{}};var Or={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ui(i){var a,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,l=i.position,c=i.gpuAcceleration,u=i.adaptive,d=i.roundOffsets,m=i.isFixed,f=o.x,v=void 0===f?0:f,C=o.y,R=void 0===C?0:C,B="function"==typeof d?d({x:v,y:R}):{x:v,y:R};v=B.x,R=B.y;var Q=o.hasOwnProperty("x"),A=o.hasOwnProperty("y"),oe=Re,te=Ue,ne=window;if(u){var ie=jt(e),ue="clientHeight",_e="clientWidth";ie===Ne(e)&&"static"!==st(ie=ot(e)).position&&"absolute"===l&&(ue="scrollHeight",_e="scrollWidth"),(s===Ue||(s===Re||s===Ve)&&r===Yt)&&(te=Je,R-=(m&&ie===ne&&ne.visualViewport?ne.visualViewport.height:ie[ue])-n.height,R*=c?1:-1),s!==Re&&(s!==Ue&&s!==Je||r!==Yt)||(oe=Ve,v-=(m&&ie===ne&&ne.visualViewport?ne.visualViewport.width:ie[_e])-n.width,v*=c?1:-1)}var be,ge=Object.assign({position:l},u&&Or),xe=!0===d?function Er(i,a){var n=i.y,s=a.devicePixelRatio||1;return{x:kt(i.x*s)/s||0,y:kt(n*s)/s||0}}({x:v,y:R},Ne(e)):{x:v,y:R};return v=xe.x,R=xe.y,Object.assign({},ge,c?((be={})[te]=A?"0":"",be[oe]=Q?"0":"",be.transform=(ne.devicePixelRatio||1)<=1?"translate("+v+"px, "+R+"px)":"translate3d("+v+"px, "+R+"px, 0)",be):((a={})[te]=A?R+"px":"",a[oe]=Q?v+"px":"",a.transform="",a))}const Fr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Ir(i){var a=i.state,e=i.options,n=e.gpuAcceleration,s=void 0===n||n,r=e.adaptive,o=void 0===r||r,l=e.roundOffsets,c=void 0===l||l,d={placement:tt(a.placement),variation:Et(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:s,isFixed:"fixed"===a.options.strategy};null!=a.modifiersData.popperOffsets&&(a.styles.popper=Object.assign({},a.styles.popper,Ui(Object.assign({},d,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:o,roundOffsets:c})))),null!=a.modifiersData.arrow&&(a.styles.arrow=Object.assign({},a.styles.arrow,Ui(Object.assign({},d,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}},Ur={name:"applyStyles",enabled:!0,phase:"write",fn:function Lr(i){var a=i.state;Object.keys(a.elements).forEach(function(e){var n=a.styles[e]||{},s=a.attributes[e]||{},r=a.elements[e];!ze(r)||!et(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var l=s[o];!1===l?r.removeAttribute(o):r.setAttribute(o,!0===l?"":l)}))})},effect:function Zr(i){var a=i.state,e={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,e.popper),a.styles=e,a.elements.arrow&&Object.assign(a.elements.arrow.style,e.arrow),function(){Object.keys(a.elements).forEach(function(n){var s=a.elements[n],r=a.attributes[n]||{},l=Object.keys(a.styles.hasOwnProperty(n)?a.styles[n]:e[n]).reduce(function(c,u){return c[u]="",c},{});!ze(s)||!et(s)||(Object.assign(s.style,l),Object.keys(r).forEach(function(c){s.removeAttribute(c)}))})}},requires:["computeStyles"]},Pr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Br(i){var a=i.state,n=i.name,s=i.options.offset,r=void 0===s?[0,0]:s,o=Ii.reduce(function(d,m){return d[m]=function Rr(i,a,e){var n=tt(i),s=[Re,Ue].indexOf(n)>=0?-1:1,r="function"==typeof e?e(Object.assign({},a,{placement:i})):e,o=r[0],l=r[1];return o=o||0,l=(l||0)*s,[Re,Ve].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}(m,a.rects,r),d},{}),l=o[a.placement],u=l.y;null!=a.modifiersData.popperOffsets&&(a.modifiersData.popperOffsets.x+=l.x,a.modifiersData.popperOffsets.y+=u),a.modifiersData[n]=o}};var Nr={left:"right",right:"left",bottom:"top",top:"bottom"};function an(i){return i.replace(/left|right|bottom|top/g,function(a){return Nr[a]})}var Hr={start:"end",end:"start"};function Ri(i){return i.replace(/start|end/g,function(a){return Hr[a]})}function Bi(i,a){var e=a.getRootNode&&a.getRootNode();if(i.contains(a))return!0;if(e&&Mn(e)){var n=a;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Zn(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Pi(i,a,e){return a===Oi?Zn(function jr(i,a){var e=Ne(i),n=ot(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){r=s.width,o=s.height;var u=Mi();(u||!u&&"fixed"===a)&&(l=s.offsetLeft,c=s.offsetTop)}return{width:r,height:o,x:l+On(i),y:c}}(i,e)):_t(a)?function Yr(i,a){var e=At(i,!1,"fixed"===a);return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}(a,e):Zn(function $r(i){var a,e=ot(i),n=An(i),s=null==(a=i.ownerDocument)?void 0:a.body,r=vt(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=vt(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-n.scrollLeft+On(i),c=-n.scrollTop;return"rtl"===st(s||e).direction&&(l+=vt(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:l,y:c}}(ot(i)))}function Hi(i){return Object.assign({},{top:0,right:0,bottom:0,left:0},i)}function ji(i,a){return a.reduce(function(e,n){return e[n]=i,e},{})}function zt(i,a){void 0===a&&(a={});var n=a.placement,s=void 0===n?i.placement:n,r=a.strategy,o=void 0===r?i.strategy:r,l=a.boundary,c=void 0===l?cr:l,u=a.rootBoundary,d=void 0===u?Oi:u,m=a.elementContext,f=void 0===m?qt:m,v=a.altBoundary,C=void 0!==v&&v,R=a.padding,B=void 0===R?0:R,Q=Hi("number"!=typeof B?B:ji(B,$t)),oe=i.rects.popper,te=i.elements[C?f===qt?ur:qt:f],ne=function zr(i,a,e,n){var s="clippingParents"===a?function qr(i){var a=Ht(nn(i)),n=["absolute","fixed"].indexOf(st(i).position)>=0&&ze(i)?jt(i):i;return _t(n)?a.filter(function(s){return _t(s)&&Bi(s,n)&&"body"!==et(s)}):[]}(i):[].concat(a),r=[].concat(s,[e]),l=r.reduce(function(c,u){var d=Pi(i,u,n);return c.top=vt(d.top,c.top),c.right=tn(d.right,c.right),c.bottom=tn(d.bottom,c.bottom),c.left=vt(d.left,c.left),c},Pi(i,r[0],n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(_t(te)?te:te.contextElement||ot(i.elements.popper),c,d,o),ie=At(i.elements.reference),ue=Zi({reference:ie,element:oe,strategy:"absolute",placement:s}),_e=Zn(Object.assign({},oe,ue)),ve=f===qt?_e:ie,Ce={top:ne.top-ve.top+Q.top,bottom:ve.bottom-ne.bottom+Q.bottom,left:ne.left-ve.left+Q.left,right:ve.right-ne.right+Q.right},ge=i.modifiersData.offset;if(f===qt&&ge){var xe=ge[s];Object.keys(Ce).forEach(function(be){var Ie=[Ve,Je].indexOf(be)>=0?1:-1,Ye=[Ue,Je].indexOf(be)>=0?"y":"x";Ce[be]+=xe[Ye]*Ie})}return Ce}const Gr={name:"flip",enabled:!0,phase:"main",fn:function Qr(i){var a=i.state,e=i.options,n=i.name;if(!a.modifiersData[n]._skip){for(var s=e.mainAxis,r=void 0===s||s,o=e.altAxis,l=void 0===o||o,c=e.fallbackPlacements,u=e.padding,d=e.boundary,m=e.rootBoundary,f=e.altBoundary,v=e.flipVariations,C=void 0===v||v,R=e.allowedAutoPlacements,B=a.options.placement,Q=tt(B),oe=c||(Q!==B&&C?function Vr(i){if(tt(i)===Fn)return[];var a=an(i);return[Ri(i),a,Ri(a)]}(B):[an(B)]),te=[B].concat(oe).reduce(function(it,We){return it.concat(tt(We)===Fn?function Jr(i,a){void 0===a&&(a={});var s=a.boundary,r=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,u=void 0===c?Ii:c,d=Et(a.placement),m=d?l?Ei:Ei.filter(function(C){return Et(C)===d}):$t,f=m.filter(function(C){return u.indexOf(C)>=0});0===f.length&&(f=m);var v=f.reduce(function(C,R){return C[R]=zt(i,{placement:R,boundary:s,rootBoundary:r,padding:o})[tt(R)],C},{});return Object.keys(v).sort(function(C,R){return v[C]-v[R]})}(a,{placement:We,boundary:d,rootBoundary:m,padding:u,flipVariations:C,allowedAutoPlacements:R}):We)},[]),ne=a.rects.reference,ie=a.rects.popper,ue=new Map,_e=!0,ve=te[0],Ce=0;Ce<te.length;Ce++){var ge=te[Ce],xe=tt(ge),be=Et(ge)===Ot,Ie=[Ue,Je].indexOf(xe)>=0,Ye=Ie?"width":"height",Me=zt(a,{placement:ge,boundary:d,rootBoundary:m,altBoundary:f,padding:u}),Le=Ie?be?Ve:Re:be?Je:Ue;ne[Ye]>ie[Ye]&&(Le=an(Le));var dt=an(Le),Ke=[];if(r&&Ke.push(Me[xe]<=0),l&&Ke.push(Me[Le]<=0,Me[dt]<=0),Ke.every(function(it){return it})){ve=ge,_e=!1;break}ue.set(ge,Ke)}if(_e)for(var wt=function(We){var rt=te.find(function(gt){var Xe=ue.get(gt);if(Xe)return Xe.slice(0,We).every(function(ke){return ke})});if(rt)return ve=rt,"break"},at=C?3:1;at>0&&"break"!==wt(at);at--);a.placement!==ve&&(a.modifiersData[n]._skip=!0,a.placement=ve,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Jt(i,a,e){return vt(i,tn(a,e))}const eo={name:"preventOverflow",enabled:!0,phase:"main",fn:function Xr(i){var a=i.state,e=i.options,n=i.name,s=e.mainAxis,r=void 0===s||s,o=e.altAxis,l=void 0!==o&&o,f=e.tether,v=void 0===f||f,C=e.tetherOffset,R=void 0===C?0:C,B=zt(a,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),Q=tt(a.placement),A=Et(a.placement),oe=!A,te=Ln(Q),ne=function Wr(i){return"x"===i?"y":"x"}(te),ie=a.modifiersData.popperOffsets,ue=a.rects.reference,_e=a.rects.popper,ve="function"==typeof R?R(Object.assign({},a.rects,{placement:a.placement})):R,Ce="number"==typeof ve?{mainAxis:ve,altAxis:ve}:Object.assign({mainAxis:0,altAxis:0},ve),ge=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,xe={x:0,y:0};if(ie){if(r){var be,Ie="y"===te?Ue:Re,Ye="y"===te?Je:Ve,Me="y"===te?"height":"width",Le=ie[te],dt=Le+B[Ie],Ke=Le-B[Ye],ht=v?-_e[Me]/2:0,wt=A===Ot?ue[Me]:_e[Me],at=A===Ot?-_e[Me]:-ue[Me],pt=a.elements.arrow,it=v&&pt?In(pt):{width:0,height:0},We=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},rt=We[Ie],gt=We[Ye],Xe=Jt(0,ue[Me],it[Me]),ke=oe?ue[Me]/2-ht-Xe-rt-Ce.mainAxis:wt-Xe-rt-Ce.mainAxis,kf=oe?-ue[Me]/2+ht+Xe+gt+Ce.mainAxis:at+Xe+gt+Ce.mainAxis,Xn=a.elements.arrow&&jt(a.elements.arrow),Es=null!=(be=ge?.[te])?be:0,Ef=Le+kf-Es,Is=Jt(v?tn(dt,Le+ke-Es-(Xn?"y"===te?Xn.clientTop||0:Xn.clientLeft||0:0)):dt,Le,v?vt(Ke,Ef):Ke);ie[te]=Is,xe[te]=Is-Le}if(l){var Fs,Dt=ie[ne],fn="y"===ne?"height":"width",Ls=Dt+B["x"===te?Ue:Re],Zs=Dt-B["x"===te?Je:Ve],ei=-1!==[Ue,Re].indexOf(Q),Us=null!=(Fs=ge?.[ne])?Fs:0,Rs=ei?Ls:Dt-ue[fn]-_e[fn]-Us+Ce.altAxis,Bs=ei?Dt+ue[fn]+_e[fn]-Us-Ce.altAxis:Zs,Ps=v&&ei?function Kr(i,a,e){var n=Jt(i,a,e);return n>e?e:n}(Rs,Dt,Bs):Jt(v?Rs:Ls,Dt,v?Bs:Zs);ie[ne]=Ps,xe[ne]=Ps-Dt}a.modifiersData[n]=xe}},requiresIfExists:["offset"]};const so={name:"arrow",enabled:!0,phase:"main",fn:function no(i){var a,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,l=tt(e.placement),c=Ln(l),d=[Re,Ve].indexOf(l)>=0?"height":"width";if(r&&o){var m=function(a,e){return Hi("number"!=typeof(a="function"==typeof a?a(Object.assign({},e.rects,{placement:e.placement})):a)?a:ji(a,$t))}(s.padding,e),f=In(r),v="y"===c?Ue:Re,C="y"===c?Je:Ve,R=e.rects.reference[d]+e.rects.reference[c]-o[c]-e.rects.popper[d],B=o[c]-e.rects.reference[c],Q=jt(r),A=Q?"y"===c?Q.clientHeight||0:Q.clientWidth||0:0,ie=A/2-f[d]/2+(R/2-B/2),ue=Jt(m[v],ie,A-f[d]-m[C]);e.modifiersData[n]=((a={})[c]=ue,a.centerOffset=ue-ie,a)}},effect:function io(i){var a=i.state,n=i.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"==typeof s&&!(s=a.elements.popper.querySelector(s))||Bi(a.elements.popper,s)&&(a.elements.arrow=s))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $i(i,a,e){return void 0===e&&(e={x:0,y:0}),{top:i.top-a.height-e.y,right:i.right-a.width+e.x,bottom:i.bottom-a.height+e.y,left:i.left-a.width-e.x}}function Yi(i){return[Ue,Ve,Je,Re].some(function(a){return i[a]>=0})}var ro=[Mr,Ar,Fr,Ur,Pr,Gr,eo,so,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function ao(i){var a=i.state,e=i.name,n=a.rects.reference,s=a.rects.popper,r=a.modifiersData.preventOverflow,o=zt(a,{elementContext:"reference"}),l=zt(a,{altBoundary:!0}),c=$i(o,n),u=$i(l,s,r),d=Yi(c),m=Yi(u);a.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:m},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}}],oo=xr({defaultModifiers:ro}),nt=_(2722),Un=_(4968);const lo=["popperViewRef"];function co(i,a){if(1&i&&(t.TgZ(0,"div",5),t.Hsn(1),t.qZA()),2&i){const e=t.oxw();t.Q6J("innerHTML",e.text,t.oJD)}}function uo(i,a){1&i&&(t.TgZ(0,"div",6),t.Hsn(1,1),t.qZA())}const qi=["*","*"];var Ct=(()=>(function(i){i.TOP="top",i.BOTTOM="bottom",i.LEFT="left",i.RIGHT="right",i.TOPSTART="top-start",i.BOTTOMSTART="bottom-start",i.LEFTSTART="left-start",i.RIGHTSTART="right-start",i.TOPEND="top-end",i.BOTTOMEND="bottom-end",i.LEFTEND="left-end",i.RIGHTEND="right-end",i.AUTO="auto",i.AUTOSTART="auto-start",i.AUTOEND="auto-end"}(Ct||(Ct={})),Ct))(),He=(()=>(function(i){i.click="click",i.hover="hover",i.mousedown="mousedown",i.none="none"}(He||(He={})),He))();let Rn=(()=>{class i{constructor(e,n,s,r){this.elRef=e,this._renderer=n,this._viewRef=s,this._changeDetectorRef=r,this.ariaHidden="true",this.arrowColor=null,this.displayType="none",this.id="ngx_poppperjs_"+ ++i.nextId,this.isMouseOver=!1,this.onHidden=new t.vpe,this.opacity=0,this.popperOptions={disableAnimation:!1,disableDefaultStyling:!1,placement:Ct.AUTO,boundariesElement:"",trigger:He.hover,positionFixed:!1,appendToBody:!1,popperModifiers:[]},this.state=!0,this._styleId=`${this.id}_style`}clean(){this.toggleVisibility(!1),this.popperInstance&&this.popperInstance.destroy()}extractAppliedClassListExpr(e=[]){return(Array.isArray(e)?e:"string"==typeof e?e.replace(/ /,"").split(","):[]).reduce((s,r)=>(s[r]=!0,s),{})}hide(){this.popperInstance&&this.popperInstance.destroy(),this.toggleVisibility(!1),this.onHidden.emit()}ngOnDestroy(){this.clean(),this.popperOptions.appendTo&&this.elRef&&this.elRef.nativeElement&&this.elRef.nativeElement.parentNode&&(this._viewRef.detach(),this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement))}onDocumentResize(){this.update()}onMouseOver(){this.isMouseOver=!0}show(){if(!this.referenceObject)return;const e=this.popperOptions.appendTo&&document.querySelector(this.popperOptions.appendTo);e&&this.elRef.nativeElement.parentNode!==e&&(this.elRef.nativeElement.parentNode&&this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement),e.appendChild(this.elRef.nativeElement));const n={strategy:this.popperOptions.positionFixed?"fixed":"absolute",placement:this.popperOptions.placement,modifiers:[{name:"offset",enabled:!0,options:{offset:[0,8]}},{name:"arrow",enabled:!0,options:{element:".ngxp__arrow",padding:3},requires:["arrow"]}]};this.onUpdate&&(n.onFirstUpdate=this.onUpdate);const s=this.popperOptions.boundariesElement&&document.querySelector(this.popperOptions.boundariesElement);if(n.modifiers&&s&&n.modifiers.push({name:"preventOverflow",enabled:this.popperOptions.preventOverflow,options:{boundary:s}}),n.modifiers){const r=n.modifiers.find(o=>"preventOverflow"===o.name);if(r&&!r.enabled){const o=n.modifiers.find(l=>"preventOverflow"===l.name);o&&(o.enabled=!1)}}this._determineArrowColor(),n.modifiers=n.modifiers.concat(this.popperOptions.popperModifiers),this.popperInstance=oo(this.referenceObject,this.popperViewRef.nativeElement,n),this.toggleVisibility(!0),this._globalResize=this._renderer.listen("document","resize",this.onDocumentResize.bind(this))}showOnLeave(){this.isMouseOver=!1,(this.popperOptions.trigger===He.hover||this.popperOptions.hideOnMouseLeave)&&this.hide()}toggleVisibility(e){e?(this.opacity=1,this.displayType="block",this.ariaHidden="false",this.state=!0):(this.opacity=0,this.displayType="none",this.ariaHidden="true",this.state=!1),this._changeDetectorRef.destroyed||this._changeDetectorRef.detectChanges()}update(){this.popperInstance&&this.popperInstance.update()}_createArrowSelector(){return`div#${this.id}.ngxp__container > .ngxp__arrow.ngxp__force-arrow`}_determineArrowColor(){if(!this.popperOptions.styles||this.arrowColor)return!1;const e=this.popperOptions.styles["background-color"]||this.popperOptions.styles.backgroundColor;if(this.arrowColor===e)return!1;this.arrowColor=e;let n=document.querySelector(`#${this._styleId}`);const s=this.arrowColor?`${this._createArrowSelector()}:before { background-color: ${this.arrowColor}; }`:"";n||(n=document.createElement("style"),n.id=this._styleId,n.setAttribute("type","text/css"),document.head.appendChild(n)),n.styleSheet?n.styleSheet.cssText=s:n.innerHTML=s}}return i.nextId=0,i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.s_b),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["popper-content"]],viewQuery:function(e,n){if(1&e&&t.Gf(lo,7),2&e){let s;t.iGM(s=t.CRH())&&(n.popperViewRef=s.first)}},hostBindings:function(e,n){1&e&&t.NdJ("mouseover",function(){return n.onMouseOver()})("mouseleave",function(){return n.showOnLeave()})},exportAs:["ngxPopperjsContent"],ngContentSelectors:qi,decls:5,vars:19,consts:[[3,"ngStyle","ngClass"],["popperViewRef",""],["class","ngxp__inner",3,"innerHTML",4,"ngIf"],["class","ngxp__inner",4,"ngIf"],["data-popper-arrow","",1,"ngxp__arrow",3,"ngClass"],[1,"ngxp__inner",3,"innerHTML"],[1,"ngxp__inner"]],template:function(e,n){1&e&&(t.F$t(qi),t.TgZ(0,"div",0,1),t.YNc(2,co,2,1,"div",2),t.YNc(3,uo,2,0,"div",3),t._UZ(4,"div",4),t.qZA()),2&e&&(t.Udp("display",n.displayType)("opacity",n.opacity),t.ekj("ngxp__container",!n.popperOptions.disableDefaultStyling)("ngxp__animation",!n.popperOptions.disableAnimation),t.Q6J("ngStyle",n.popperOptions.styles)("ngClass",n.extractAppliedClassListExpr(n.popperOptions.applyClass)),t.uIk("id",n.id)("aria-hidden",n.ariaHidden)("aria-describedby",n.popperOptions.ariaDescribe||null)("role",n.popperOptions.ariaRole),t.xp6(2),t.Q6J("ngIf",n.text),t.xp6(1),t.Q6J("ngIf",!n.text),t.xp6(1),t.ekj("ngxp__force-arrow",n.arrowColor),t.Q6J("ngClass",n.extractAppliedClassListExpr(n.popperOptions.applyArrowClass)))},dependencies:[x.mk,x.O5,x.PC],styles:['popper-content{position:relative;display:block}.ngxp__container{display:none;position:absolute;border-radius:3px;border:1px solid grey;box-shadow:0 0 2px #00000080;padding:10px}.ngxp__container.ngxp__animation{animation:ngxp-fadeIn .15s ease-out}.ngxp__container>.ngxp__arrow,.ngxp__container>.ngxp__arrow:before{position:absolute;width:10px;height:10px;z-index:-1}.ngxp__container>.ngxp__arrow:before{transform:rotate(45deg);content:"";background-color:#fff;top:0;left:0}.ngxp__container[data-popper-placement^=top]>.ngxp__arrow{bottom:-4px}.ngxp__container[data-popper-placement^=bottom]>.ngxp__arrow{top:-4px}.ngxp__container[data-popper-placement^=left]>.ngxp__arrow{right:-4px}.ngxp__container[data-popper-placement^=right]>.ngxp__arrow{left:-4px}@keyframes ngxp-fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{display:block;opacity:1}}\n'],encapsulation:2,changeDetection:0}),i})();const zi=new t.OlP("NGX_POPPERJS_DEFAULTS");class ho{static coerceBooleanProperty(a){return null!=a&&"false"!=`${a}`}}class Ee{constructor(a,e,n,s={}){this._changeDetectorRef=a,this._elementRef=e,this._vcr=n,this._popperDefaults=s,this.hideTimeout=0,this.popperOnHidden=new t.vpe,this.popperOnShown=new t.vpe,this.popperOnUpdate=new t.vpe,this.timeoutAfterShow=0,this._destroy$=new ee.x,this._globalEventListenersCtrl$=new ee.x,this._popperContentClass=Rn,this._scheduledHideTimeoutCtrl$=new ee.x,this._scheduledShowTimeoutCtrl$=new ee.x,this._shown=!1,Ee.baseOptions={...Ee.baseOptions,...this._popperDefaults}}set applyClass(a){a!==this._applyClass&&(this._applyClass=a,this._checkExisting("applyClass",a))}get applyClass(){return this._applyClass}set content(a){a!==this._content&&(this._content=a,this._popperContent&&("string"==typeof a?this._popperContent.text=a:this._popperContent=a))}get content(){return this._content}set disabled(a){a!==this._disabled&&(this._disabled=!!a,this._shown&&this.hide())}get disabled(){return this._disabled}set placement(a){this._popperPlacement=a,this._checkExisting("placement",a)}get placement(){return this._popperPlacement}set popperApplyArrowClass(a){if(a!==this._popperApplyArrowClass&&(this._popperApplyArrowClass=a,this._popperContent)){if(this._popperContent.popperOptions.applyArrowClass=a,!this._shown)return;this._popperContent.popperInstance.setOptions(this._popperContent.popperOptions)}}get popperApplyArrowClass(){return this._popperApplyArrowClass}set preventOverflow(a){this._popperPreventOverflow=ho.coerceBooleanProperty(a),this._checkExisting("preventOverflow",this._popperPreventOverflow)}get preventOverflow(){return this._popperPreventOverflow}static assignDefined(a,...e){for(const n of e)for(const s of Object.keys(n)){const r=n[s];void 0!==r&&(a[s]=r)}return a}applyTriggerListeners(){switch(this.showTrigger){case He.click:this._addListener("click",this.toggle.bind(this));break;case He.mousedown:this._addListener("mousedown",this.toggle.bind(this));break;case He.hover:this._addListener("mouseenter",this.scheduledShow.bind(this,this.showDelay)),["touchend","touchcancel","mouseleave"].forEach(a=>{this._addListener(a,this.scheduledHide.bind(this,null,this.hideTimeout))})}this.showTrigger!==He.hover&&this.hideOnMouseLeave&&["touchend","touchcancel","mouseleave"].forEach(a=>{this._addListener(a,this.scheduledHide.bind(this,null,this.hideTimeout))})}getRefElement(){return this.targetElement||this._elementRef.nativeElement}hide(){if(!this.disabled){if(!this._shown)return void this._scheduledShowTimeoutCtrl$.next();this._shown=!1,this._popperContentRef?this._popperContentRef.instance.hide():this._popperContent.hide(),this.popperOnHidden.emit(this),this._globalEventListenersCtrl$.next()}}hideOnClickOutsideHandler(a){this.disabled||!this.hideOnClickOutside||a.target===this._popperContent.elRef.nativeElement||this._popperContent.elRef.nativeElement.contains(a.target)||this.scheduledHide(a,this.hideTimeout)}hideOnScrollHandler(a){this.disabled||!this.hideOnScroll||this.scheduledHide(a,this.hideTimeout)}ngOnDestroy(){this._destroy$.next(),this._popperContent&&this._popperContent.clean()}ngOnInit(){this.hideOnClickOutside=typeof this.hideOnClickOutside>"u"?this.closeOnClickOutside:this.hideOnClickOutside,"string"==typeof this.content?(this._popperContent=this._constructContent(),this._popperContent.text=this.content):typeof this.content>"u"?(this._popperContent=this._constructContent(),this._popperContent.text=""):this._popperContent=this.content;const a=this._popperContent;a.referenceObject=this.getRefElement(),this._setContentProperties(a),this._setDefaults(),this.applyTriggerListeners(),this.showOnStart&&this.scheduledShow()}scheduledHide(a=null,e=this.hideTimeout){this.disabled||(this._scheduledShowTimeoutCtrl$.next(),(0,H.H)(e).pipe((0,nt.R)(this._scheduledHideTimeoutCtrl$),(0,nt.R)(this._destroy$)).subscribe({next:()=>{const n=a?a.toElement:null,s=!!this._popperContent.popperViewRef&&this._popperContent.popperViewRef.nativeElement;!s||s===n||s.contains(n)||this.content&&this.content.isMouseOver||(this.hide(),this._applyChanges())}}))}scheduledShow(a=this.showDelay){this.disabled||(this._scheduledHideTimeoutCtrl$.next(),(0,H.H)(a).pipe((0,nt.R)(this._scheduledShowTimeoutCtrl$),(0,nt.R)(this._destroy$)).subscribe({next:()=>{this.show(),this._applyChanges()}}))}show(){if(this._shown)return void this._scheduledHideTimeoutCtrl$.next();this._shown=!0;const a=this._popperContent,e=this.getRefElement();a.referenceObject!==e&&(a.referenceObject=e),this._setContentProperties(a),a.show(),this.popperOnShown.emit(this),this.timeoutAfterShow>0&&this.scheduledHide(null,this.timeoutAfterShow),(0,Un.R)(document,"click").pipe((0,nt.R)(this._globalEventListenersCtrl$),(0,nt.R)(this._destroy$)).subscribe({next:n=>this.hideOnClickOutsideHandler(n)}),(0,Un.R)(this._getScrollParent(this.getRefElement()),"scroll").pipe((0,nt.R)(this._globalEventListenersCtrl$),(0,nt.R)(this._destroy$)).subscribe({next:n=>this.hideOnScrollHandler(n)})}toggle(){this.disabled||(this._shown?this.scheduledHide(null,this.hideTimeout):this.scheduledShow())}_addListener(a,e){(0,Un.R)(this._elementRef.nativeElement,a).pipe((0,nt.R)(this._destroy$)).subscribe({next:e})}_applyChanges(){this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges()}_checkExisting(a,e){if(this._popperContent){if(this._popperContent.popperOptions[a]=e,!this._shown)return;this._popperContent.popperInstance.setOptions(this._popperContent.popperOptions)}}_constructContent(){return this._popperContentRef=this._vcr.createComponent(this._popperContentClass),this._popperContentRef.instance}_getScrollParent(a){const n=a instanceof HTMLElement&&window.getComputedStyle(a).overflowY;return a?"visible"!==n&&"hidden"!==n&&a.scrollHeight>=a.clientHeight?a:this._getScrollParent(a.parentNode)||document:null}_onPopperUpdate(a){this.popperOnUpdate.emit(a)}_setContentProperties(a){a.popperOptions=Ee.assignDefined(a.popperOptions,Ee.baseOptions,{showDelay:this.showDelay,disableAnimation:this.disableAnimation,disableDefaultStyling:this.disableStyle,placement:this.placement,boundariesElement:this.boundariesElement,trigger:this.showTrigger,positionFixed:this.positionFixed,popperModifiers:this.popperModifiers,ariaDescribe:this.ariaDescribe,ariaRole:this.ariaRole,applyClass:this.applyClass,applyArrowClass:this.popperApplyArrowClass,hideOnMouseLeave:this.hideOnMouseLeave,styles:this.styles,appendTo:this.popperAppendTo,preventOverflow:this.preventOverflow}),a.onUpdate=this._onPopperUpdate.bind(this),a.onHidden.pipe((0,nt.R)(this._destroy$)).subscribe(this.hide.bind(this))}_setDefaults(){["showDelay","hideOnScroll","hideOnMouseLeave","hideOnClickOutside","ariaRole","ariaDescribe"].forEach(a=>{this[a]=void 0===this[a]?Ee.baseOptions[a]:this[a]}),this.showTrigger=this.showTrigger||Ee.baseOptions.trigger,this.styles=void 0===this.styles?{...Ee.baseOptions.styles}:this.styles}}function Ji(i={}){return[{provide:zi,useValue:i}]}Ee.baseOptions={showDelay:0,placement:Ct.AUTO,hideOnClickOutside:!0,hideOnMouseLeave:!1,hideOnScroll:!1,appendTo:void 0,ariaRole:"popper",ariaDescribe:"",styles:{},trigger:He.click},Ee.nextId=0,Ee.\u0275fac=function(a){return new(a||Ee)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(zi))},Ee.\u0275dir=t.lG2({type:Ee,selectors:[["","popper",""]],inputs:{applyClass:["popperApplyClass","applyClass"],ariaDescribe:["popperAriaDescribeBy","ariaDescribe"],ariaRole:["popperAriaRole","ariaRole"],boundariesElement:["popperBoundaries","boundariesElement"],closeOnClickOutside:["popperCloseOnClickOutside","closeOnClickOutside"],content:["popper","content"],disableAnimation:["popperDisableAnimation","disableAnimation"],disabled:["popperDisabled","disabled"],disableStyle:["popperDisableStyle","disableStyle"],hideOnClickOutside:["popperHideOnClickOutside","hideOnClickOutside"],hideOnMouseLeave:["popperHideOnMouseLeave","hideOnMouseLeave"],hideOnScroll:["popperHideOnScroll","hideOnScroll"],hideTimeout:["popperTimeout","hideTimeout"],placement:["popperPlacement","placement"],popperAppendTo:"popperAppendTo",popperApplyArrowClass:"popperApplyArrowClass",popperModifiers:"popperModifiers",positionFixed:["popperPositionFixed","positionFixed"],preventOverflow:["popperPreventOverflow","preventOverflow"],showDelay:["popperDelay","showDelay"],showOnStart:["popperShowOnStart","showOnStart"],showTrigger:["popperTrigger","showTrigger"],styles:["popperStyles","styles"],targetElement:["popperTarget","targetElement"],timeoutAfterShow:["popperTimeoutAfterShow","timeoutAfterShow"]},outputs:{popperOnHidden:"popperOnHidden",popperOnShown:"popperOnShown",popperOnUpdate:"popperOnUpdate"},exportAs:["popper"]});let po=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[Ji(e)]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Ji()],imports:[x.ez]}),i})();var go=_(2711);function Bn(){return Bn=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bn.apply(this,arguments)}var mo=/[|\\{}()[\]^$+*?.]/g,fo=function(i){if("string"!=typeof i)throw new TypeError("Expected a string");return i.replace(mo,"\\$&")};const _o=[["\xdf","ss"],["\u1e9e","Ss"],["\xe4","ae"],["\xc4","Ae"],["\xf6","oe"],["\xd6","Oe"],["\xfc","ue"],["\xdc","Ue"],["\xc0","A"],["\xc1","A"],["\xc2","A"],["\xc3","A"],["\xc4","Ae"],["\xc5","A"],["\xc6","AE"],["\xc7","C"],["\xc8","E"],["\xc9","E"],["\xca","E"],["\xcb","E"],["\xcc","I"],["\xcd","I"],["\xce","I"],["\xcf","I"],["\xd0","D"],["\xd1","N"],["\xd2","O"],["\xd3","O"],["\xd4","O"],["\xd5","O"],["\xd6","Oe"],["\u0150","O"],["\xd8","O"],["\xd9","U"],["\xda","U"],["\xdb","U"],["\xdc","Ue"],["\u0170","U"],["\xdd","Y"],["\xde","TH"],["\xdf","ss"],["\xe0","a"],["\xe1","a"],["\xe2","a"],["\xe3","a"],["\xe4","ae"],["\xe5","a"],["\xe6","ae"],["\xe7","c"],["\xe8","e"],["\xe9","e"],["\xea","e"],["\xeb","e"],["\xec","i"],["\xed","i"],["\xee","i"],["\xef","i"],["\xf0","d"],["\xf1","n"],["\xf2","o"],["\xf3","o"],["\xf4","o"],["\xf5","o"],["\xf6","oe"],["\u0151","o"],["\xf8","o"],["\xf9","u"],["\xfa","u"],["\xfb","u"],["\xfc","ue"],["\u0171","u"],["\xfd","y"],["\xfe","th"],["\xff","y"],["\u1e9e","SS"],["\xe0","a"],["\xc0","A"],["\xe1","a"],["\xc1","A"],["\xe2","a"],["\xc2","A"],["\xe3","a"],["\xc3","A"],["\xe8","e"],["\xc8","E"],["\xe9","e"],["\xc9","E"],["\xea","e"],["\xca","E"],["\xec","i"],["\xcc","I"],["\xed","i"],["\xcd","I"],["\xf2","o"],["\xd2","O"],["\xf3","o"],["\xd3","O"],["\xf4","o"],["\xd4","O"],["\xf5","o"],["\xd5","O"],["\xf9","u"],["\xd9","U"],["\xfa","u"],["\xda","U"],["\xfd","y"],["\xdd","Y"],["\u0103","a"],["\u0102","A"],["\u0110","D"],["\u0111","d"],["\u0129","i"],["\u0128","I"],["\u0169","u"],["\u0168","U"],["\u01a1","o"],["\u01a0","O"],["\u01b0","u"],["\u01af","U"],["\u1ea1","a"],["\u1ea0","A"],["\u1ea3","a"],["\u1ea2","A"],["\u1ea5","a"],["\u1ea4","A"],["\u1ea7","a"],["\u1ea6","A"],["\u1ea9","a"],["\u1ea8","A"],["\u1eab","a"],["\u1eaa","A"],["\u1ead","a"],["\u1eac","A"],["\u1eaf","a"],["\u1eae","A"],["\u1eb1","a"],["\u1eb0","A"],["\u1eb3","a"],["\u1eb2","A"],["\u1eb5","a"],["\u1eb4","A"],["\u1eb7","a"],["\u1eb6","A"],["\u1eb9","e"],["\u1eb8","E"],["\u1ebb","e"],["\u1eba","E"],["\u1ebd","e"],["\u1ebc","E"],["\u1ebf","e"],["\u1ebe","E"],["\u1ec1","e"],["\u1ec0","E"],["\u1ec3","e"],["\u1ec2","E"],["\u1ec5","e"],["\u1ec4","E"],["\u1ec7","e"],["\u1ec6","E"],["\u1ec9","i"],["\u1ec8","I"],["\u1ecb","i"],["\u1eca","I"],["\u1ecd","o"],["\u1ecc","O"],["\u1ecf","o"],["\u1ece","O"],["\u1ed1","o"],["\u1ed0","O"],["\u1ed3","o"],["\u1ed2","O"],["\u1ed5","o"],["\u1ed4","O"],["\u1ed7","o"],["\u1ed6","O"],["\u1ed9","o"],["\u1ed8","O"],["\u1edb","o"],["\u1eda","O"],["\u1edd","o"],["\u1edc","O"],["\u1edf","o"],["\u1ede","O"],["\u1ee1","o"],["\u1ee0","O"],["\u1ee3","o"],["\u1ee2","O"],["\u1ee5","u"],["\u1ee4","U"],["\u1ee7","u"],["\u1ee6","U"],["\u1ee9","u"],["\u1ee8","U"],["\u1eeb","u"],["\u1eea","U"],["\u1eed","u"],["\u1eec","U"],["\u1eef","u"],["\u1eee","U"],["\u1ef1","u"],["\u1ef0","U"],["\u1ef3","y"],["\u1ef2","Y"],["\u1ef5","y"],["\u1ef4","Y"],["\u1ef7","y"],["\u1ef6","Y"],["\u1ef9","y"],["\u1ef8","Y"],["\u0621","e"],["\u0622","a"],["\u0623","a"],["\u0624","w"],["\u0625","i"],["\u0626","y"],["\u0627","a"],["\u0628","b"],["\u0629","t"],["\u062a","t"],["\u062b","th"],["\u062c","j"],["\u062d","h"],["\u062e","kh"],["\u062f","d"],["\u0630","dh"],["\u0631","r"],["\u0632","z"],["\u0633","s"],["\u0634","sh"],["\u0635","s"],["\u0636","d"],["\u0637","t"],["\u0638","z"],["\u0639","e"],["\u063a","gh"],["\u0640","_"],["\u0641","f"],["\u0642","q"],["\u0643","k"],["\u0644","l"],["\u0645","m"],["\u0646","n"],["\u0647","h"],["\u0648","w"],["\u0649","a"],["\u064a","y"],["\u064e\u200e","a"],["\u064f","u"],["\u0650\u200e","i"],["\u0660","0"],["\u0661","1"],["\u0662","2"],["\u0663","3"],["\u0664","4"],["\u0665","5"],["\u0666","6"],["\u0667","7"],["\u0668","8"],["\u0669","9"],["\u0686","ch"],["\u06a9","k"],["\u06af","g"],["\u067e","p"],["\u0698","zh"],["\u06cc","y"],["\u06f0","0"],["\u06f1","1"],["\u06f2","2"],["\u06f3","3"],["\u06f4","4"],["\u06f5","5"],["\u06f6","6"],["\u06f7","7"],["\u06f8","8"],["\u06f9","9"],["\u067c","p"],["\u0681","z"],["\u0685","c"],["\u0689","d"],["\ufeab","d"],["\ufead","r"],["\u0693","r"],["\ufeaf","z"],["\u0696","g"],["\u069a","x"],["\u06ab","g"],["\u06bc","n"],["\u06c0","e"],["\u06d0","e"],["\u06cd","ai"],["\u0679","t"],["\u0688","d"],["\u0691","r"],["\u06ba","n"],["\u06c1","h"],["\u06be","h"],["\u06d2","e"],["\u0410","A"],["\u0430","a"],["\u0411","B"],["\u0431","b"],["\u0412","V"],["\u0432","v"],["\u0413","G"],["\u0433","g"],["\u0414","D"],["\u0434","d"],["\u044a\u0435","ye"],["\u042a\u0435","Ye"],["\u044a\u0415","yE"],["\u042a\u0415","YE"],["\u0415","E"],["\u0435","e"],["\u0401","Yo"],["\u0451","yo"],["\u0416","Zh"],["\u0436","zh"],["\u0417","Z"],["\u0437","z"],["\u0418","I"],["\u0438","i"],["\u044b\u0439","iy"],["\u042b\u0439","Iy"],["\u042b\u0419","IY"],["\u044b\u0419","iY"],["\u0419","Y"],["\u0439","y"],["\u041a","K"],["\u043a","k"],["\u041b","L"],["\u043b","l"],["\u041c","M"],["\u043c","m"],["\u041d","N"],["\u043d","n"],["\u041e","O"],["\u043e","o"],["\u041f","P"],["\u043f","p"],["\u0420","R"],["\u0440","r"],["\u0421","S"],["\u0441","s"],["\u0422","T"],["\u0442","t"],["\u0423","U"],["\u0443","u"],["\u0424","F"],["\u0444","f"],["\u0425","Kh"],["\u0445","kh"],["\u0426","Ts"],["\u0446","ts"],["\u0427","Ch"],["\u0447","ch"],["\u0428","Sh"],["\u0448","sh"],["\u0429","Sch"],["\u0449","sch"],["\u042a",""],["\u044a",""],["\u042b","Y"],["\u044b","y"],["\u042c",""],["\u044c",""],["\u042d","E"],["\u044d","e"],["\u042e","Yu"],["\u044e","yu"],["\u042f","Ya"],["\u044f","ya"],["\u0103","a"],["\u0102","A"],["\u0219","s"],["\u0218","S"],["\u021b","t"],["\u021a","T"],["\u0163","t"],["\u0162","T"],["\u015f","s"],["\u015e","S"],["\xe7","c"],["\xc7","C"],["\u011f","g"],["\u011e","G"],["\u0131","i"],["\u0130","I"],["\u0561","a"],["\u0531","A"],["\u0562","b"],["\u0532","B"],["\u0563","g"],["\u0533","G"],["\u0564","d"],["\u0534","D"],["\u0565","ye"],["\u0535","Ye"],["\u0566","z"],["\u0536","Z"],["\u0567","e"],["\u0537","E"],["\u0568","y"],["\u0538","Y"],["\u0569","t"],["\u0539","T"],["\u056a","zh"],["\u053a","Zh"],["\u056b","i"],["\u053b","I"],["\u056c","l"],["\u053c","L"],["\u056d","kh"],["\u053d","Kh"],["\u056e","ts"],["\u053e","Ts"],["\u056f","k"],["\u053f","K"],["\u0570","h"],["\u0540","H"],["\u0571","dz"],["\u0541","Dz"],["\u0572","gh"],["\u0542","Gh"],["\u0573","tch"],["\u0543","Tch"],["\u0574","m"],["\u0544","M"],["\u0575","y"],["\u0545","Y"],["\u0576","n"],["\u0546","N"],["\u0577","sh"],["\u0547","Sh"],["\u0578","vo"],["\u0548","Vo"],["\u0579","ch"],["\u0549","Ch"],["\u057a","p"],["\u054a","P"],["\u057b","j"],["\u054b","J"],["\u057c","r"],["\u054c","R"],["\u057d","s"],["\u054d","S"],["\u057e","v"],["\u054e","V"],["\u057f","t"],["\u054f","T"],["\u0580","r"],["\u0550","R"],["\u0581","c"],["\u0551","C"],["\u0578\u0582","u"],["\u0548\u0552","U"],["\u0548\u0582","U"],["\u0583","p"],["\u0553","P"],["\u0584","q"],["\u0554","Q"],["\u0585","o"],["\u0555","O"],["\u0586","f"],["\u0556","F"],["\u0587","yev"],["\u10d0","a"],["\u10d1","b"],["\u10d2","g"],["\u10d3","d"],["\u10d4","e"],["\u10d5","v"],["\u10d6","z"],["\u10d7","t"],["\u10d8","i"],["\u10d9","k"],["\u10da","l"],["\u10db","m"],["\u10dc","n"],["\u10dd","o"],["\u10de","p"],["\u10df","zh"],["\u10e0","r"],["\u10e1","s"],["\u10e2","t"],["\u10e3","u"],["\u10e4","ph"],["\u10e5","q"],["\u10e6","gh"],["\u10e7","k"],["\u10e8","sh"],["\u10e9","ch"],["\u10ea","ts"],["\u10eb","dz"],["\u10ec","ts"],["\u10ed","tch"],["\u10ee","kh"],["\u10ef","j"],["\u10f0","h"],["\u010d","c"],["\u010f","d"],["\u011b","e"],["\u0148","n"],["\u0159","r"],["\u0161","s"],["\u0165","t"],["\u016f","u"],["\u017e","z"],["\u010c","C"],["\u010e","D"],["\u011a","E"],["\u0147","N"],["\u0158","R"],["\u0160","S"],["\u0164","T"],["\u016e","U"],["\u017d","Z"],["\u0780","h"],["\u0781","sh"],["\u0782","n"],["\u0783","r"],["\u0784","b"],["\u0785","lh"],["\u0786","k"],["\u0787","a"],["\u0788","v"],["\u0789","m"],["\u078a","f"],["\u078b","dh"],["\u078c","th"],["\u078d","l"],["\u078e","g"],["\u078f","gn"],["\u0790","s"],["\u0791","d"],["\u0792","z"],["\u0793","t"],["\u0794","y"],["\u0795","p"],["\u0796","j"],["\u0797","ch"],["\u0798","tt"],["\u0799","hh"],["\u079a","kh"],["\u079b","th"],["\u079c","z"],["\u079d","sh"],["\u079e","s"],["\u079f","d"],["\u07a0","t"],["\u07a1","z"],["\u07a2","a"],["\u07a3","gh"],["\u07a4","q"],["\u07a5","w"],["\u07a6","a"],["\u07a7","aa"],["\u07a8","i"],["\u07a9","ee"],["\u07aa","u"],["\u07ab","oo"],["\u07ac","e"],["\u07ad","ey"],["\u07ae","o"],["\u07af","oa"],["\u07b0",""],["\u03b1","a"],["\u03b2","v"],["\u03b3","g"],["\u03b4","d"],["\u03b5","e"],["\u03b6","z"],["\u03b7","i"],["\u03b8","th"],["\u03b9","i"],["\u03ba","k"],["\u03bb","l"],["\u03bc","m"],["\u03bd","n"],["\u03be","ks"],["\u03bf","o"],["\u03c0","p"],["\u03c1","r"],["\u03c3","s"],["\u03c4","t"],["\u03c5","y"],["\u03c6","f"],["\u03c7","x"],["\u03c8","ps"],["\u03c9","o"],["\u03ac","a"],["\u03ad","e"],["\u03af","i"],["\u03cc","o"],["\u03cd","y"],["\u03ae","i"],["\u03ce","o"],["\u03c2","s"],["\u03ca","i"],["\u03b0","y"],["\u03cb","y"],["\u0390","i"],["\u0391","A"],["\u0392","B"],["\u0393","G"],["\u0394","D"],["\u0395","E"],["\u0396","Z"],["\u0397","I"],["\u0398","TH"],["\u0399","I"],["\u039a","K"],["\u039b","L"],["\u039c","M"],["\u039d","N"],["\u039e","KS"],["\u039f","O"],["\u03a0","P"],["\u03a1","R"],["\u03a3","S"],["\u03a4","T"],["\u03a5","Y"],["\u03a6","F"],["\u03a7","X"],["\u03a8","PS"],["\u03a9","O"],["\u0386","A"],["\u0388","E"],["\u038a","I"],["\u038c","O"],["\u038e","Y"],["\u0389","I"],["\u038f","O"],["\u03aa","I"],["\u03ab","Y"],["\u0101","a"],["\u0113","e"],["\u0123","g"],["\u012b","i"],["\u0137","k"],["\u013c","l"],["\u0146","n"],["\u016b","u"],["\u0100","A"],["\u0112","E"],["\u0122","G"],["\u012a","I"],["\u0136","K"],["\u013b","L"],["\u0145","N"],["\u016a","U"],["\u010d","c"],["\u0161","s"],["\u017e","z"],["\u010c","C"],["\u0160","S"],["\u017d","Z"],["\u0105","a"],["\u010d","c"],["\u0119","e"],["\u0117","e"],["\u012f","i"],["\u0161","s"],["\u0173","u"],["\u016b","u"],["\u017e","z"],["\u0104","A"],["\u010c","C"],["\u0118","E"],["\u0116","E"],["\u012e","I"],["\u0160","S"],["\u0172","U"],["\u016a","U"],["\u040c","Kj"],["\u045c","kj"],["\u0409","Lj"],["\u0459","lj"],["\u040a","Nj"],["\u045a","nj"],["\u0422\u0441","Ts"],["\u0442\u0441","ts"],["\u0105","a"],["\u0107","c"],["\u0119","e"],["\u0142","l"],["\u0144","n"],["\u015b","s"],["\u017a","z"],["\u017c","z"],["\u0104","A"],["\u0106","C"],["\u0118","E"],["\u0141","L"],["\u0143","N"],["\u015a","S"],["\u0179","Z"],["\u017b","Z"],["\u0404","Ye"],["\u0406","I"],["\u0407","Yi"],["\u0490","G"],["\u0454","ye"],["\u0456","i"],["\u0457","yi"],["\u0491","g"],["\u0132","IJ"],["\u0133","ij"],["\xa2","c"],["\xa5","Y"],["\u07ff","b"],["\u09f3","t"],["\u0af1","Bo"],["\u0e3f","B"],["\u20a0","CE"],["\u20a1","C"],["\u20a2","Cr"],["\u20a3","F"],["\u20a5","m"],["\u20a6","N"],["\u20a7","Pt"],["\u20a8","Rs"],["\u20a9","W"],["\u20ab","s"],["\u20ac","E"],["\u20ad","K"],["\u20ae","T"],["\u20af","Dp"],["\u20b0","S"],["\u20b1","P"],["\u20b2","G"],["\u20b3","A"],["\u20b4","S"],["\u20b5","C"],["\u20b6","tt"],["\u20b7","S"],["\u20b8","T"],["\u20b9","R"],["\u20ba","L"],["\u20bd","P"],["\u20bf","B"],["\ufe69","$"],["\uffe0","c"],["\uffe5","Y"],["\uffe6","W"],["\u{1d400}","A"],["\u{1d401}","B"],["\u{1d402}","C"],["\u{1d403}","D"],["\u{1d404}","E"],["\u{1d405}","F"],["\u{1d406}","G"],["\u{1d407}","H"],["\u{1d408}","I"],["\u{1d409}","J"],["\u{1d40a}","K"],["\u{1d40b}","L"],["\u{1d40c}","M"],["\u{1d40d}","N"],["\u{1d40e}","O"],["\u{1d40f}","P"],["\u{1d410}","Q"],["\u{1d411}","R"],["\u{1d412}","S"],["\u{1d413}","T"],["\u{1d414}","U"],["\u{1d415}","V"],["\u{1d416}","W"],["\u{1d417}","X"],["\u{1d418}","Y"],["\u{1d419}","Z"],["\u{1d41a}","a"],["\u{1d41b}","b"],["\u{1d41c}","c"],["\u{1d41d}","d"],["\u{1d41e}","e"],["\u{1d41f}","f"],["\u{1d420}","g"],["\u{1d421}","h"],["\u{1d422}","i"],["\u{1d423}","j"],["\u{1d424}","k"],["\u{1d425}","l"],["\u{1d426}","m"],["\u{1d427}","n"],["\u{1d428}","o"],["\u{1d429}","p"],["\u{1d42a}","q"],["\u{1d42b}","r"],["\u{1d42c}","s"],["\u{1d42d}","t"],["\u{1d42e}","u"],["\u{1d42f}","v"],["\u{1d430}","w"],["\u{1d431}","x"],["\u{1d432}","y"],["\u{1d433}","z"],["\u{1d434}","A"],["\u{1d435}","B"],["\u{1d436}","C"],["\u{1d437}","D"],["\u{1d438}","E"],["\u{1d439}","F"],["\u{1d43a}","G"],["\u{1d43b}","H"],["\u{1d43c}","I"],["\u{1d43d}","J"],["\u{1d43e}","K"],["\u{1d43f}","L"],["\u{1d440}","M"],["\u{1d441}","N"],["\u{1d442}","O"],["\u{1d443}","P"],["\u{1d444}","Q"],["\u{1d445}","R"],["\u{1d446}","S"],["\u{1d447}","T"],["\u{1d448}","U"],["\u{1d449}","V"],["\u{1d44a}","W"],["\u{1d44b}","X"],["\u{1d44c}","Y"],["\u{1d44d}","Z"],["\u{1d44e}","a"],["\u{1d44f}","b"],["\u{1d450}","c"],["\u{1d451}","d"],["\u{1d452}","e"],["\u{1d453}","f"],["\u{1d454}","g"],["\u{1d456}","i"],["\u{1d457}","j"],["\u{1d458}","k"],["\u{1d459}","l"],["\u{1d45a}","m"],["\u{1d45b}","n"],["\u{1d45c}","o"],["\u{1d45d}","p"],["\u{1d45e}","q"],["\u{1d45f}","r"],["\u{1d460}","s"],["\u{1d461}","t"],["\u{1d462}","u"],["\u{1d463}","v"],["\u{1d464}","w"],["\u{1d465}","x"],["\u{1d466}","y"],["\u{1d467}","z"],["\u{1d468}","A"],["\u{1d469}","B"],["\u{1d46a}","C"],["\u{1d46b}","D"],["\u{1d46c}","E"],["\u{1d46d}","F"],["\u{1d46e}","G"],["\u{1d46f}","H"],["\u{1d470}","I"],["\u{1d471}","J"],["\u{1d472}","K"],["\u{1d473}","L"],["\u{1d474}","M"],["\u{1d475}","N"],["\u{1d476}","O"],["\u{1d477}","P"],["\u{1d478}","Q"],["\u{1d479}","R"],["\u{1d47a}","S"],["\u{1d47b}","T"],["\u{1d47c}","U"],["\u{1d47d}","V"],["\u{1d47e}","W"],["\u{1d47f}","X"],["\u{1d480}","Y"],["\u{1d481}","Z"],["\u{1d482}","a"],["\u{1d483}","b"],["\u{1d484}","c"],["\u{1d485}","d"],["\u{1d486}","e"],["\u{1d487}","f"],["\u{1d488}","g"],["\u{1d489}","h"],["\u{1d48a}","i"],["\u{1d48b}","j"],["\u{1d48c}","k"],["\u{1d48d}","l"],["\u{1d48e}","m"],["\u{1d48f}","n"],["\u{1d490}","o"],["\u{1d491}","p"],["\u{1d492}","q"],["\u{1d493}","r"],["\u{1d494}","s"],["\u{1d495}","t"],["\u{1d496}","u"],["\u{1d497}","v"],["\u{1d498}","w"],["\u{1d499}","x"],["\u{1d49a}","y"],["\u{1d49b}","z"],["\u{1d49c}","A"],["\u{1d49e}","C"],["\u{1d49f}","D"],["\u{1d4a2}","g"],["\u{1d4a5}","J"],["\u{1d4a6}","K"],["\u{1d4a9}","N"],["\u{1d4aa}","O"],["\u{1d4ab}","P"],["\u{1d4ac}","Q"],["\u{1d4ae}","S"],["\u{1d4af}","T"],["\u{1d4b0}","U"],["\u{1d4b1}","V"],["\u{1d4b2}","W"],["\u{1d4b3}","X"],["\u{1d4b4}","Y"],["\u{1d4b5}","Z"],["\u{1d4b6}","a"],["\u{1d4b7}","b"],["\u{1d4b8}","c"],["\u{1d4b9}","d"],["\u{1d4bb}","f"],["\u{1d4bd}","h"],["\u{1d4be}","i"],["\u{1d4bf}","j"],["\u{1d4c0}","h"],["\u{1d4c1}","l"],["\u{1d4c2}","m"],["\u{1d4c3}","n"],["\u{1d4c5}","p"],["\u{1d4c6}","q"],["\u{1d4c7}","r"],["\u{1d4c8}","s"],["\u{1d4c9}","t"],["\u{1d4ca}","u"],["\u{1d4cb}","v"],["\u{1d4cc}","w"],["\u{1d4cd}","x"],["\u{1d4ce}","y"],["\u{1d4cf}","z"],["\u{1d4d0}","A"],["\u{1d4d1}","B"],["\u{1d4d2}","C"],["\u{1d4d3}","D"],["\u{1d4d4}","E"],["\u{1d4d5}","F"],["\u{1d4d6}","G"],["\u{1d4d7}","H"],["\u{1d4d8}","I"],["\u{1d4d9}","J"],["\u{1d4da}","K"],["\u{1d4db}","L"],["\u{1d4dc}","M"],["\u{1d4dd}","N"],["\u{1d4de}","O"],["\u{1d4df}","P"],["\u{1d4e0}","Q"],["\u{1d4e1}","R"],["\u{1d4e2}","S"],["\u{1d4e3}","T"],["\u{1d4e4}","U"],["\u{1d4e5}","V"],["\u{1d4e6}","W"],["\u{1d4e7}","X"],["\u{1d4e8}","Y"],["\u{1d4e9}","Z"],["\u{1d4ea}","a"],["\u{1d4eb}","b"],["\u{1d4ec}","c"],["\u{1d4ed}","d"],["\u{1d4ee}","e"],["\u{1d4ef}","f"],["\u{1d4f0}","g"],["\u{1d4f1}","h"],["\u{1d4f2}","i"],["\u{1d4f3}","j"],["\u{1d4f4}","k"],["\u{1d4f5}","l"],["\u{1d4f6}","m"],["\u{1d4f7}","n"],["\u{1d4f8}","o"],["\u{1d4f9}","p"],["\u{1d4fa}","q"],["\u{1d4fb}","r"],["\u{1d4fc}","s"],["\u{1d4fd}","t"],["\u{1d4fe}","u"],["\u{1d4ff}","v"],["\u{1d500}","w"],["\u{1d501}","x"],["\u{1d502}","y"],["\u{1d503}","z"],["\u{1d504}","A"],["\u{1d505}","B"],["\u{1d507}","D"],["\u{1d508}","E"],["\u{1d509}","F"],["\u{1d50a}","G"],["\u{1d50d}","J"],["\u{1d50e}","K"],["\u{1d50f}","L"],["\u{1d510}","M"],["\u{1d511}","N"],["\u{1d512}","O"],["\u{1d513}","P"],["\u{1d514}","Q"],["\u{1d516}","S"],["\u{1d517}","T"],["\u{1d518}","U"],["\u{1d519}","V"],["\u{1d51a}","W"],["\u{1d51b}","X"],["\u{1d51c}","Y"],["\u{1d51e}","a"],["\u{1d51f}","b"],["\u{1d520}","c"],["\u{1d521}","d"],["\u{1d522}","e"],["\u{1d523}","f"],["\u{1d524}","g"],["\u{1d525}","h"],["\u{1d526}","i"],["\u{1d527}","j"],["\u{1d528}","k"],["\u{1d529}","l"],["\u{1d52a}","m"],["\u{1d52b}","n"],["\u{1d52c}","o"],["\u{1d52d}","p"],["\u{1d52e}","q"],["\u{1d52f}","r"],["\u{1d530}","s"],["\u{1d531}","t"],["\u{1d532}","u"],["\u{1d533}","v"],["\u{1d534}","w"],["\u{1d535}","x"],["\u{1d536}","y"],["\u{1d537}","z"],["\u{1d538}","A"],["\u{1d539}","B"],["\u{1d53b}","D"],["\u{1d53c}","E"],["\u{1d53d}","F"],["\u{1d53e}","G"],["\u{1d540}","I"],["\u{1d541}","J"],["\u{1d542}","K"],["\u{1d543}","L"],["\u{1d544}","M"],["\u{1d546}","N"],["\u{1d54a}","S"],["\u{1d54b}","T"],["\u{1d54c}","U"],["\u{1d54d}","V"],["\u{1d54e}","W"],["\u{1d54f}","X"],["\u{1d550}","Y"],["\u{1d552}","a"],["\u{1d553}","b"],["\u{1d554}","c"],["\u{1d555}","d"],["\u{1d556}","e"],["\u{1d557}","f"],["\u{1d558}","g"],["\u{1d559}","h"],["\u{1d55a}","i"],["\u{1d55b}","j"],["\u{1d55c}","k"],["\u{1d55d}","l"],["\u{1d55e}","m"],["\u{1d55f}","n"],["\u{1d560}","o"],["\u{1d561}","p"],["\u{1d562}","q"],["\u{1d563}","r"],["\u{1d564}","s"],["\u{1d565}","t"],["\u{1d566}","u"],["\u{1d567}","v"],["\u{1d568}","w"],["\u{1d569}","x"],["\u{1d56a}","y"],["\u{1d56b}","z"],["\u{1d56c}","A"],["\u{1d56d}","B"],["\u{1d56e}","C"],["\u{1d56f}","D"],["\u{1d570}","E"],["\u{1d571}","F"],["\u{1d572}","G"],["\u{1d573}","H"],["\u{1d574}","I"],["\u{1d575}","J"],["\u{1d576}","K"],["\u{1d577}","L"],["\u{1d578}","M"],["\u{1d579}","N"],["\u{1d57a}","O"],["\u{1d57b}","P"],["\u{1d57c}","Q"],["\u{1d57d}","R"],["\u{1d57e}","S"],["\u{1d57f}","T"],["\u{1d580}","U"],["\u{1d581}","V"],["\u{1d582}","W"],["\u{1d583}","X"],["\u{1d584}","Y"],["\u{1d585}","Z"],["\u{1d586}","a"],["\u{1d587}","b"],["\u{1d588}","c"],["\u{1d589}","d"],["\u{1d58a}","e"],["\u{1d58b}","f"],["\u{1d58c}","g"],["\u{1d58d}","h"],["\u{1d58e}","i"],["\u{1d58f}","j"],["\u{1d590}","k"],["\u{1d591}","l"],["\u{1d592}","m"],["\u{1d593}","n"],["\u{1d594}","o"],["\u{1d595}","p"],["\u{1d596}","q"],["\u{1d597}","r"],["\u{1d598}","s"],["\u{1d599}","t"],["\u{1d59a}","u"],["\u{1d59b}","v"],["\u{1d59c}","w"],["\u{1d59d}","x"],["\u{1d59e}","y"],["\u{1d59f}","z"],["\u{1d5a0}","A"],["\u{1d5a1}","B"],["\u{1d5a2}","C"],["\u{1d5a3}","D"],["\u{1d5a4}","E"],["\u{1d5a5}","F"],["\u{1d5a6}","G"],["\u{1d5a7}","H"],["\u{1d5a8}","I"],["\u{1d5a9}","J"],["\u{1d5aa}","K"],["\u{1d5ab}","L"],["\u{1d5ac}","M"],["\u{1d5ad}","N"],["\u{1d5ae}","O"],["\u{1d5af}","P"],["\u{1d5b0}","Q"],["\u{1d5b1}","R"],["\u{1d5b2}","S"],["\u{1d5b3}","T"],["\u{1d5b4}","U"],["\u{1d5b5}","V"],["\u{1d5b6}","W"],["\u{1d5b7}","X"],["\u{1d5b8}","Y"],["\u{1d5b9}","Z"],["\u{1d5ba}","a"],["\u{1d5bb}","b"],["\u{1d5bc}","c"],["\u{1d5bd}","d"],["\u{1d5be}","e"],["\u{1d5bf}","f"],["\u{1d5c0}","g"],["\u{1d5c1}","h"],["\u{1d5c2}","i"],["\u{1d5c3}","j"],["\u{1d5c4}","k"],["\u{1d5c5}","l"],["\u{1d5c6}","m"],["\u{1d5c7}","n"],["\u{1d5c8}","o"],["\u{1d5c9}","p"],["\u{1d5ca}","q"],["\u{1d5cb}","r"],["\u{1d5cc}","s"],["\u{1d5cd}","t"],["\u{1d5ce}","u"],["\u{1d5cf}","v"],["\u{1d5d0}","w"],["\u{1d5d1}","x"],["\u{1d5d2}","y"],["\u{1d5d3}","z"],["\u{1d5d4}","A"],["\u{1d5d5}","B"],["\u{1d5d6}","C"],["\u{1d5d7}","D"],["\u{1d5d8}","E"],["\u{1d5d9}","F"],["\u{1d5da}","G"],["\u{1d5db}","H"],["\u{1d5dc}","I"],["\u{1d5dd}","J"],["\u{1d5de}","K"],["\u{1d5df}","L"],["\u{1d5e0}","M"],["\u{1d5e1}","N"],["\u{1d5e2}","O"],["\u{1d5e3}","P"],["\u{1d5e4}","Q"],["\u{1d5e5}","R"],["\u{1d5e6}","S"],["\u{1d5e7}","T"],["\u{1d5e8}","U"],["\u{1d5e9}","V"],["\u{1d5ea}","W"],["\u{1d5eb}","X"],["\u{1d5ec}","Y"],["\u{1d5ed}","Z"],["\u{1d5ee}","a"],["\u{1d5ef}","b"],["\u{1d5f0}","c"],["\u{1d5f1}","d"],["\u{1d5f2}","e"],["\u{1d5f3}","f"],["\u{1d5f4}","g"],["\u{1d5f5}","h"],["\u{1d5f6}","i"],["\u{1d5f7}","j"],["\u{1d5f8}","k"],["\u{1d5f9}","l"],["\u{1d5fa}","m"],["\u{1d5fb}","n"],["\u{1d5fc}","o"],["\u{1d5fd}","p"],["\u{1d5fe}","q"],["\u{1d5ff}","r"],["\u{1d600}","s"],["\u{1d601}","t"],["\u{1d602}","u"],["\u{1d603}","v"],["\u{1d604}","w"],["\u{1d605}","x"],["\u{1d606}","y"],["\u{1d607}","z"],["\u{1d608}","A"],["\u{1d609}","B"],["\u{1d60a}","C"],["\u{1d60b}","D"],["\u{1d60c}","E"],["\u{1d60d}","F"],["\u{1d60e}","G"],["\u{1d60f}","H"],["\u{1d610}","I"],["\u{1d611}","J"],["\u{1d612}","K"],["\u{1d613}","L"],["\u{1d614}","M"],["\u{1d615}","N"],["\u{1d616}","O"],["\u{1d617}","P"],["\u{1d618}","Q"],["\u{1d619}","R"],["\u{1d61a}","S"],["\u{1d61b}","T"],["\u{1d61c}","U"],["\u{1d61d}","V"],["\u{1d61e}","W"],["\u{1d61f}","X"],["\u{1d620}","Y"],["\u{1d621}","Z"],["\u{1d622}","a"],["\u{1d623}","b"],["\u{1d624}","c"],["\u{1d625}","d"],["\u{1d626}","e"],["\u{1d627}","f"],["\u{1d628}","g"],["\u{1d629}","h"],["\u{1d62a}","i"],["\u{1d62b}","j"],["\u{1d62c}","k"],["\u{1d62d}","l"],["\u{1d62e}","m"],["\u{1d62f}","n"],["\u{1d630}","o"],["\u{1d631}","p"],["\u{1d632}","q"],["\u{1d633}","r"],["\u{1d634}","s"],["\u{1d635}","t"],["\u{1d636}","u"],["\u{1d637}","v"],["\u{1d638}","w"],["\u{1d639}","x"],["\u{1d63a}","y"],["\u{1d63b}","z"],["\u{1d63c}","A"],["\u{1d63d}","B"],["\u{1d63e}","C"],["\u{1d63f}","D"],["\u{1d640}","E"],["\u{1d641}","F"],["\u{1d642}","G"],["\u{1d643}","H"],["\u{1d644}","I"],["\u{1d645}","J"],["\u{1d646}","K"],["\u{1d647}","L"],["\u{1d648}","M"],["\u{1d649}","N"],["\u{1d64a}","O"],["\u{1d64b}","P"],["\u{1d64c}","Q"],["\u{1d64d}","R"],["\u{1d64e}","S"],["\u{1d64f}","T"],["\u{1d650}","U"],["\u{1d651}","V"],["\u{1d652}","W"],["\u{1d653}","X"],["\u{1d654}","Y"],["\u{1d655}","Z"],["\u{1d656}","a"],["\u{1d657}","b"],["\u{1d658}","c"],["\u{1d659}","d"],["\u{1d65a}","e"],["\u{1d65b}","f"],["\u{1d65c}","g"],["\u{1d65d}","h"],["\u{1d65e}","i"],["\u{1d65f}","j"],["\u{1d660}","k"],["\u{1d661}","l"],["\u{1d662}","m"],["\u{1d663}","n"],["\u{1d664}","o"],["\u{1d665}","p"],["\u{1d666}","q"],["\u{1d667}","r"],["\u{1d668}","s"],["\u{1d669}","t"],["\u{1d66a}","u"],["\u{1d66b}","v"],["\u{1d66c}","w"],["\u{1d66d}","x"],["\u{1d66e}","y"],["\u{1d66f}","z"],["\u{1d670}","A"],["\u{1d671}","B"],["\u{1d672}","C"],["\u{1d673}","D"],["\u{1d674}","E"],["\u{1d675}","F"],["\u{1d676}","G"],["\u{1d677}","H"],["\u{1d678}","I"],["\u{1d679}","J"],["\u{1d67a}","K"],["\u{1d67b}","L"],["\u{1d67c}","M"],["\u{1d67d}","N"],["\u{1d67e}","O"],["\u{1d67f}","P"],["\u{1d680}","Q"],["\u{1d681}","R"],["\u{1d682}","S"],["\u{1d683}","T"],["\u{1d684}","U"],["\u{1d685}","V"],["\u{1d686}","W"],["\u{1d687}","X"],["\u{1d688}","Y"],["\u{1d689}","Z"],["\u{1d68a}","a"],["\u{1d68b}","b"],["\u{1d68c}","c"],["\u{1d68d}","d"],["\u{1d68e}","e"],["\u{1d68f}","f"],["\u{1d690}","g"],["\u{1d691}","h"],["\u{1d692}","i"],["\u{1d693}","j"],["\u{1d694}","k"],["\u{1d695}","l"],["\u{1d696}","m"],["\u{1d697}","n"],["\u{1d698}","o"],["\u{1d699}","p"],["\u{1d69a}","q"],["\u{1d69b}","r"],["\u{1d69c}","s"],["\u{1d69d}","t"],["\u{1d69e}","u"],["\u{1d69f}","v"],["\u{1d6a0}","w"],["\u{1d6a1}","x"],["\u{1d6a2}","y"],["\u{1d6a3}","z"],["\u{1d6a4}","l"],["\u{1d6a5}","j"],["\u{1d6e2}","A"],["\u{1d6e3}","B"],["\u{1d6e4}","G"],["\u{1d6e5}","D"],["\u{1d6e6}","E"],["\u{1d6e7}","Z"],["\u{1d6e8}","I"],["\u{1d6e9}","TH"],["\u{1d6ea}","I"],["\u{1d6eb}","K"],["\u{1d6ec}","L"],["\u{1d6ed}","M"],["\u{1d6ee}","N"],["\u{1d6ef}","KS"],["\u{1d6f0}","O"],["\u{1d6f1}","P"],["\u{1d6f2}","R"],["\u{1d6f3}","TH"],["\u{1d6f4}","S"],["\u{1d6f5}","T"],["\u{1d6f6}","Y"],["\u{1d6f7}","F"],["\u{1d6f8}","x"],["\u{1d6f9}","PS"],["\u{1d6fa}","O"],["\u{1d6fb}","D"],["\u{1d6fc}","a"],["\u{1d6fd}","b"],["\u{1d6fe}","g"],["\u{1d6ff}","d"],["\u{1d700}","e"],["\u{1d701}","z"],["\u{1d702}","i"],["\u{1d703}","th"],["\u{1d704}","i"],["\u{1d705}","k"],["\u{1d706}","l"],["\u{1d707}","m"],["\u{1d708}","n"],["\u{1d709}","ks"],["\u{1d70a}","o"],["\u{1d70b}","p"],["\u{1d70c}","r"],["\u{1d70d}","s"],["\u{1d70e}","s"],["\u{1d70f}","t"],["\u{1d710}","y"],["\u{1d711}","f"],["\u{1d712}","x"],["\u{1d713}","ps"],["\u{1d714}","o"],["\u{1d715}","d"],["\u{1d716}","E"],["\u{1d717}","TH"],["\u{1d718}","K"],["\u{1d719}","f"],["\u{1d71a}","r"],["\u{1d71b}","p"],["\u{1d71c}","A"],["\u{1d71d}","V"],["\u{1d71e}","G"],["\u{1d71f}","D"],["\u{1d720}","E"],["\u{1d721}","Z"],["\u{1d722}","I"],["\u{1d723}","TH"],["\u{1d724}","I"],["\u{1d725}","K"],["\u{1d726}","L"],["\u{1d727}","M"],["\u{1d728}","N"],["\u{1d729}","KS"],["\u{1d72a}","O"],["\u{1d72b}","P"],["\u{1d72c}","S"],["\u{1d72d}","TH"],["\u{1d72e}","S"],["\u{1d72f}","T"],["\u{1d730}","Y"],["\u{1d731}","F"],["\u{1d732}","X"],["\u{1d733}","PS"],["\u{1d734}","O"],["\u{1d735}","D"],["\u{1d736}","a"],["\u{1d737}","v"],["\u{1d738}","g"],["\u{1d739}","d"],["\u{1d73a}","e"],["\u{1d73b}","z"],["\u{1d73c}","i"],["\u{1d73d}","th"],["\u{1d73e}","i"],["\u{1d73f}","k"],["\u{1d740}","l"],["\u{1d741}","m"],["\u{1d742}","n"],["\u{1d743}","ks"],["\u{1d744}","o"],["\u{1d745}","p"],["\u{1d746}","r"],["\u{1d747}","s"],["\u{1d748}","s"],["\u{1d749}","t"],["\u{1d74a}","y"],["\u{1d74b}","f"],["\u{1d74c}","x"],["\u{1d74d}","ps"],["\u{1d74e}","o"],["\u{1d74f}","a"],["\u{1d750}","e"],["\u{1d751}","i"],["\u{1d752}","k"],["\u{1d753}","f"],["\u{1d754}","r"],["\u{1d755}","p"],["\u{1d756}","A"],["\u{1d757}","B"],["\u{1d758}","G"],["\u{1d759}","D"],["\u{1d75a}","E"],["\u{1d75b}","Z"],["\u{1d75c}","I"],["\u{1d75d}","TH"],["\u{1d75e}","I"],["\u{1d75f}","K"],["\u{1d760}","L"],["\u{1d761}","M"],["\u{1d762}","N"],["\u{1d763}","KS"],["\u{1d764}","O"],["\u{1d765}","P"],["\u{1d766}","R"],["\u{1d767}","TH"],["\u{1d768}","S"],["\u{1d769}","T"],["\u{1d76a}","Y"],["\u{1d76b}","F"],["\u{1d76c}","X"],["\u{1d76d}","PS"],["\u{1d76e}","O"],["\u{1d76f}","D"],["\u{1d770}","a"],["\u{1d771}","v"],["\u{1d772}","g"],["\u{1d773}","d"],["\u{1d774}","e"],["\u{1d775}","z"],["\u{1d776}","i"],["\u{1d777}","th"],["\u{1d778}","i"],["\u{1d779}","k"],["\u{1d77a}","l"],["\u{1d77b}","m"],["\u{1d77c}","n"],["\u{1d77d}","ks"],["\u{1d77e}","o"],["\u{1d77f}","p"],["\u{1d780}","r"],["\u{1d781}","s"],["\u{1d782}","s"],["\u{1d783}","t"],["\u{1d784}","y"],["\u{1d785}","f"],["\u{1d786}","x"],["\u{1d787}","ps"],["\u{1d788}","o"],["\u{1d789}","a"],["\u{1d78a}","e"],["\u{1d78b}","i"],["\u{1d78c}","k"],["\u{1d78d}","f"],["\u{1d78e}","r"],["\u{1d78f}","p"],["\u{1d790}","A"],["\u{1d791}","V"],["\u{1d792}","G"],["\u{1d793}","D"],["\u{1d794}","E"],["\u{1d795}","Z"],["\u{1d796}","I"],["\u{1d797}","TH"],["\u{1d798}","I"],["\u{1d799}","K"],["\u{1d79a}","L"],["\u{1d79b}","M"],["\u{1d79c}","N"],["\u{1d79d}","KS"],["\u{1d79e}","O"],["\u{1d79f}","P"],["\u{1d7a0}","S"],["\u{1d7a1}","TH"],["\u{1d7a2}","S"],["\u{1d7a3}","T"],["\u{1d7a4}","Y"],["\u{1d7a5}","F"],["\u{1d7a6}","X"],["\u{1d7a7}","PS"],["\u{1d7a8}","O"],["\u{1d7a9}","D"],["\u{1d7aa}","av"],["\u{1d7ab}","g"],["\u{1d7ac}","d"],["\u{1d7ad}","e"],["\u{1d7ae}","z"],["\u{1d7af}","i"],["\u{1d7b0}","i"],["\u{1d7b1}","th"],["\u{1d7b2}","i"],["\u{1d7b3}","k"],["\u{1d7b4}","l"],["\u{1d7b5}","m"],["\u{1d7b6}","n"],["\u{1d7b7}","ks"],["\u{1d7b8}","o"],["\u{1d7b9}","p"],["\u{1d7ba}","r"],["\u{1d7bb}","s"],["\u{1d7bc}","s"],["\u{1d7bd}","t"],["\u{1d7be}","y"],["\u{1d7bf}","f"],["\u{1d7c0}","x"],["\u{1d7c1}","ps"],["\u{1d7c2}","o"],["\u{1d7c3}","a"],["\u{1d7c4}","e"],["\u{1d7c5}","i"],["\u{1d7c6}","k"],["\u{1d7c7}","f"],["\u{1d7c8}","r"],["\u{1d7c9}","p"],["\u{1d7ca}","F"],["\u{1d7cb}","f"],["\u249c","(a)"],["\u249d","(b)"],["\u249e","(c)"],["\u249f","(d)"],["\u24a0","(e)"],["\u24a1","(f)"],["\u24a2","(g)"],["\u24a3","(h)"],["\u24a4","(i)"],["\u24a5","(j)"],["\u24a6","(k)"],["\u24a7","(l)"],["\u24a8","(m)"],["\u24a9","(n)"],["\u24aa","(o)"],["\u24ab","(p)"],["\u24ac","(q)"],["\u24ad","(r)"],["\u24ae","(s)"],["\u24af","(t)"],["\u24b0","(u)"],["\u24b1","(v)"],["\u24b2","(w)"],["\u24b3","(x)"],["\u24b4","(y)"],["\u24b5","(z)"],["\u24b6","(A)"],["\u24b7","(B)"],["\u24b8","(C)"],["\u24b9","(D)"],["\u24ba","(E)"],["\u24bb","(F)"],["\u24bc","(G)"],["\u24bd","(H)"],["\u24be","(I)"],["\u24bf","(J)"],["\u24c0","(K)"],["\u24c1","(L)"],["\u24c3","(N)"],["\u24c4","(O)"],["\u24c5","(P)"],["\u24c6","(Q)"],["\u24c7","(R)"],["\u24c8","(S)"],["\u24c9","(T)"],["\u24ca","(U)"],["\u24cb","(V)"],["\u24cc","(W)"],["\u24cd","(X)"],["\u24ce","(Y)"],["\u24cf","(Z)"],["\u24d0","(a)"],["\u24d1","(b)"],["\u24d2","(b)"],["\u24d3","(c)"],["\u24d4","(e)"],["\u24d5","(f)"],["\u24d6","(g)"],["\u24d7","(h)"],["\u24d8","(i)"],["\u24d9","(j)"],["\u24da","(k)"],["\u24db","(l)"],["\u24dc","(m)"],["\u24dd","(n)"],["\u24de","(o)"],["\u24df","(p)"],["\u24e0","(q)"],["\u24e1","(r)"],["\u24e2","(s)"],["\u24e3","(t)"],["\u24e4","(u)"],["\u24e5","(v)"],["\u24e6","(w)"],["\u24e7","(x)"],["\u24e8","(y)"],["\u24e9","(z)"],["\u010a","C"],["\u010b","c"],["\u0120","G"],["\u0121","g"],["\u0126","H"],["\u0127","h"],["\u017b","Z"],["\u017c","z"],["\u{1d7ce}","0"],["\u{1d7cf}","1"],["\u{1d7d0}","2"],["\u{1d7d1}","3"],["\u{1d7d2}","4"],["\u{1d7d3}","5"],["\u{1d7d4}","6"],["\u{1d7d5}","7"],["\u{1d7d6}","8"],["\u{1d7d7}","9"],["\u{1d7d8}","0"],["\u{1d7d9}","1"],["\u{1d7da}","2"],["\u{1d7db}","3"],["\u{1d7dc}","4"],["\u{1d7dd}","5"],["\u{1d7de}","6"],["\u{1d7df}","7"],["\u{1d7e0}","8"],["\u{1d7e1}","9"],["\u{1d7e2}","0"],["\u{1d7e3}","1"],["\u{1d7e4}","2"],["\u{1d7e5}","3"],["\u{1d7e6}","4"],["\u{1d7e7}","5"],["\u{1d7e8}","6"],["\u{1d7e9}","7"],["\u{1d7ea}","8"],["\u{1d7eb}","9"],["\u{1d7ec}","0"],["\u{1d7ed}","1"],["\u{1d7ee}","2"],["\u{1d7ef}","3"],["\u{1d7f0}","4"],["\u{1d7f1}","5"],["\u{1d7f2}","6"],["\u{1d7f3}","7"],["\u{1d7f4}","8"],["\u{1d7f5}","9"],["\u{1d7f6}","0"],["\u{1d7f7}","1"],["\u{1d7f8}","2"],["\u{1d7f9}","3"],["\u{1d7fa}","4"],["\u{1d7fb}","5"],["\u{1d7fc}","6"],["\u{1d7fd}","7"],["\u{1d7fe}","8"],["\u{1d7ff}","9"],["\u2460","1"],["\u2461","2"],["\u2462","3"],["\u2463","4"],["\u2464","5"],["\u2465","6"],["\u2466","7"],["\u2467","8"],["\u2468","9"],["\u2469","10"],["\u246a","11"],["\u246b","12"],["\u246c","13"],["\u246d","14"],["\u246e","15"],["\u246f","16"],["\u2470","17"],["\u2471","18"],["\u2472","19"],["\u2473","20"],["\u2474","1"],["\u2475","2"],["\u2476","3"],["\u2477","4"],["\u2478","5"],["\u2479","6"],["\u247a","7"],["\u247b","8"],["\u247c","9"],["\u247d","10"],["\u247e","11"],["\u247f","12"],["\u2480","13"],["\u2481","14"],["\u2482","15"],["\u2483","16"],["\u2484","17"],["\u2485","18"],["\u2486","19"],["\u2487","20"],["\u2488","1."],["\u2489","2."],["\u248a","3."],["\u248b","4."],["\u248c","5."],["\u248d","6."],["\u248e","7."],["\u248f","8."],["\u2490","9."],["\u2491","10."],["\u2492","11."],["\u2493","12."],["\u2494","13."],["\u2495","14."],["\u2496","15."],["\u2497","16."],["\u2498","17."],["\u2499","18."],["\u249a","19."],["\u249b","20."],["\u24ea","0"],["\u24eb","11"],["\u24ec","12"],["\u24ed","13"],["\u24ee","14"],["\u24ef","15"],["\u24f0","16"],["\u24f1","17"],["\u24f2","18"],["\u24f3","19"],["\u24f4","20"],["\u24f5","1"],["\u24f6","2"],["\u24f7","3"],["\u24f8","4"],["\u24f9","5"],["\u24fa","6"],["\u24fb","7"],["\u24fc","8"],["\u24fd","9"],["\u24fe","10"],["\u24ff","0"],["\u{1f670}","&"],["\u{1f671}","&"],["\u{1f672}","&"],["\u{1f673}","&"],["\u{1f674}","&"],["\u{1f675}","&"],["\u{1f676}",'"'],["\u{1f677}",'"'],["\u{1f678}",'"'],["\u203d","?!"],["\u{1f679}","?!"],["\u{1f67a}","?!"],["\u{1f67b}","?!"],["\u{1f67c}","/"],["\u{1f67d}","\\"],["\u{1f707}","AR"],["\u{1f708}","V"],["\u{1f709}","V"],["\u{1f706}","VR"],["\u{1f705}","VF"],["\u{1f729}","2"],["\u{1f72a}","5"],["\u{1f761}","f"],["\u{1f762}","W"],["\u{1f763}","U"],["\u{1f767}","V"],["\u{1f768}","T"],["\u{1f76a}","V"],["\u{1f76b}","MB"],["\u{1f76c}","VB"],["\u{1f772}","3B"],["\u{1f773}","3B"],["\u{1f4af}","100"],["\u{1f519}","BACK"],["\u{1f51a}","END"],["\u{1f51b}","ON!"],["\u{1f51c}","SOON"],["\u{1f51d}","TOP"],["\u{1f51e}","18"],["\u{1f524}","abc"],["\u{1f520}","ABCD"],["\u{1f521}","abcd"],["\u{1f522}","1234"],["\u{1f523}","T&@%"],["#\ufe0f\u20e3","#"],["*\ufe0f\u20e3","*"],["0\ufe0f\u20e3","0"],["1\ufe0f\u20e3","1"],["2\ufe0f\u20e3","2"],["3\ufe0f\u20e3","3"],["4\ufe0f\u20e3","4"],["5\ufe0f\u20e3","5"],["6\ufe0f\u20e3","6"],["7\ufe0f\u20e3","7"],["8\ufe0f\u20e3","8"],["9\ufe0f\u20e3","9"],["\u{1f51f}","10"],["\u{1f170}\ufe0f","A"],["\u{1f171}\ufe0f","B"],["\u{1f18e}","AB"],["\u{1f191}","CL"],["\u{1f17e}\ufe0f","O"],["\u{1f17f}","P"],["\u{1f198}","SOS"],["\u{1f172}","C"],["\u{1f173}","D"],["\u{1f174}","E"],["\u{1f175}","F"],["\u{1f176}","G"],["\u{1f177}","H"],["\u{1f178}","I"],["\u{1f179}","J"],["\u{1f17a}","K"],["\u{1f17b}","L"],["\u{1f17c}","M"],["\u{1f17d}","N"],["\u{1f180}","Q"],["\u{1f181}","R"],["\u{1f182}","S"],["\u{1f183}","T"],["\u{1f184}","U"],["\u{1f185}","V"],["\u{1f186}","W"],["\u{1f187}","X"],["\u{1f188}","Y"],["\u{1f189}","Z"]],Co=["list"],yo=["defaultItemTemplate"];function bo(i,a){if(1&i&&t._uU(0),2&i){const e=a.item,n=t.oxw();t.hij(" ",e[n.labelKey]," ")}}function wo(i,a){}const Do=function(i){return{item:i}};function To(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"a",4),t.NdJ("mousedown",function(s){const o=t.CHM(e).index,l=t.oxw();return l.activeIndex=o,l.itemClick.emit(),t.KtG(s.preventDefault())}),t.YNc(2,wo,0,0,"ng-template",5),t.qZA()()}if(2&i){const e=a.$implicit,n=a.index,s=t.oxw();t.ekj("active",s.activeIndex==n)("mention-active",!s.styleOff&&s.activeIndex==n),t.xp6(1),t.ekj("mention-item",!s.styleOff),t.xp6(1),t.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",t.VKq(8,Do,e))}}function Vi(i){return Vt(i)?i.value:i.textContent}function Pn(i,a,e,n,s,r=!1){if(function So(i){return null!=i&&("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName||"#text"==i.nodeName)}(i)){let u=Vi(i);(function xo(i,a){Vt(i)?i.value=a:i.textContent=a})(i,u.substring(0,a)+n+u.substring(e,u.length)),Qi(i,a+n.length,s)}else if(!r){let u=rn(s);if(u&&u.rangeCount>0){var l=u.getRangeAt(0).startOffset;Pn(u.anchorNode,l-(e-a),l,n,s,!0)}}}function Vt(i){return null!=i&&("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName)}function Qi(i,a,e=null){if(Vt(i)&&i.selectionStart)i.focus(),i.setSelectionRange(a,a);else{let n=Nn(e).createRange();n.setStart(i,a),n.collapse(!0);let s=rn(e);s.removeAllRanges(),s.addRange(n)}}function Gi(i,a=null){if(Vt(i))return i.value.slice(0,i.selectionStart).length;var n=rn(a);if(n.rangeCount>0){var s=n.getRangeAt(0),r=s.cloneRange();return r.selectNodeContents(i),r.setEnd(s.endContainer,s.endOffset),r.toString().length}}function Nn(i){return i?i.contentWindow.document:document}function rn(i){return i?i.contentWindow.getSelection():window.getSelection()}function Wi(i){let e="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),n=Nn(i?i.iframe:null),s=rn(i?i.iframe:null),r=s.getRangeAt(0),o=n.createRange();o.setStart(s.anchorNode,r.startOffset),o.setEnd(s.anchorNode,r.startOffset),o.collapse(!1);let l=n.createElement("span");l.id=e,l.appendChild(n.createTextNode("\ufeff")),o.insertNode(l),s.removeAllRanges(),s.addRange(r);let c={left:0,top:l.offsetHeight};return function Mo(i,a,e){let n=a,s=i?i.iframe:null;for(;n&&(null==i.parent||i.parent!=n);)e.left+=n.offsetLeft+n.clientLeft,e.top+=n.offsetTop+n.clientTop,n=n.offsetParent,!n&&s&&(n=s,s=null);for(n=a,s=i?i.iframe:null;n!==Nn(null).body&&null!=n&&(null==i.parent||i.parent!=n);)n.scrollTop&&n.scrollTop>0&&(e.top-=n.scrollTop),n.scrollLeft&&n.scrollLeft>0&&(e.left-=n.scrollLeft),n=n.parentNode,!n&&s&&(n=s,s=null)}(i,l,c),l.parentNode.removeChild(l),c}var ko=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],Ki=typeof window<"u",Ao=Ki&&null!=window.mozInnerScreenX;let Eo=(()=>{class i{constructor(e){this.element=e,this.labelKey="label",this.itemClick=new t.vpe,this.items=[],this.activeIndex=0,this.hidden=!1,this.dropUp=!1,this.styleOff=!1,this.coords={top:0,left:0},this.offset=0}ngAfterContentChecked(){this.itemTemplate||(this.itemTemplate=this.defaultItemTemplate)}position(e,n=null){if(Vt(e))this.coords=function Oo(i,a,e){if(!Ki)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var n=e&&e.debug||!1;if(n){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var r=document.createElement("div");r.id="input-textarea-caret-position-mirror-div",document.body.appendChild(r);var o=r.style,l=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,c="INPUT"===i.nodeName;o.whiteSpace="pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",n||(o.visibility="hidden"),ko.forEach(function(m){if(c&&"lineHeight"===m)if("border-box"===l.boxSizing){var f=parseInt(l.height),v=parseInt(l.paddingTop)+parseInt(l.paddingBottom)+parseInt(l.borderTopWidth)+parseInt(l.borderBottomWidth),C=v+parseInt(l.lineHeight);o.lineHeight=f>C?f-v+"px":f===C?l.lineHeight:"0"}else o.lineHeight=l.height;else o[m]=l[m]}),Ao?i.scrollHeight>parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",r.textContent=i.value.substring(0,a),c&&(r.textContent=r.textContent.replace(/\s/g,"\xa0"));var u=document.createElement("span");u.textContent=i.value.substring(a)||".",r.appendChild(u);var d={top:u.offsetTop+parseInt(l.borderTopWidth),left:u.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return n?u.style.backgroundColor="#aaa":document.body.removeChild(r),d}(e,e.selectionStart,null),this.coords.top=e.offsetTop+this.coords.top-e.scrollTop,this.coords.left=e.offsetLeft+this.coords.left-e.scrollLeft,this.offset=this.getBlockCursorDimensions(e).height;else if(n)this.coords=Wi({iframe:n,parent:n.offsetParent});else{let s=document.documentElement,r=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),o=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),l=Wi({iframe:n}),c=e.getBoundingClientRect();this.coords.top=l.top-c.top+e.offsetTop-o,this.coords.left=l.left-c.left+e.offsetLeft-r}this.positionElement()}get activeItem(){return this.items[this.activeIndex]}activateNextItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.nextSibling;if(s&&"LI"==s.nodeName){let r=s.getBoundingClientRect();r.bottom>e.getBoundingClientRect().bottom&&(e.scrollTop=s.offsetTop+r.height-e.clientHeight)}}this.activeIndex=Math.max(Math.min(this.activeIndex+1,this.items.length-1),0)}activatePreviousItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.previousSibling;s&&"LI"==s.nodeName&&s.getBoundingClientRect().top<e.getBoundingClientRect().top&&(e.scrollTop=s.offsetTop)}this.activeIndex=Math.max(Math.min(this.activeIndex-1,this.items.length-1),0)}reset(){this.list.nativeElement.scrollTop=0,this.checkBounds()}checkBounds(){let e=this.coords.left,n=this.coords.top,s=this.dropUp;const r=this.list.nativeElement.getBoundingClientRect();r.left+r.width>window.innerWidth&&(e-=r.left+r.width-window.innerWidth+10),r.top<0&&(s=!1),this.positionElement(e,n,s)}positionElement(e=this.coords.left,n=this.coords.top,s=this.dropUp){const r=this.element.nativeElement;n+=s?0:this.offset,r.className=s?"dropup":null,r.style.position="absolute",r.style.left=e+"px",r.style.top=n+"px"}getBlockCursorDimensions(e){const n=window.getComputedStyle(e);return{height:parseFloat(n.lineHeight),width:parseFloat(n.fontSize)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mention-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Co,7),t.Gf(yo,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.list=s.first),t.iGM(s=t.CRH())&&(n.defaultItemTemplate=s.first)}},inputs:{labelKey:"labelKey",itemTemplate:"itemTemplate"},outputs:{itemClick:"itemClick"},decls:5,vars:6,consts:[["defaultItemTemplate",""],[1,"dropdown-menu","scrollable-menu",3,"hidden"],["list",""],[3,"active","mention-active",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t.YNc(0,bo,1,1,"ng-template",null,0,t.W1O),t.TgZ(2,"ul",1,2),t.YNc(4,To,3,10,"li",3),t.qZA()),2&e&&(t.xp6(2),t.ekj("mention-menu",!n.styleOff)("mention-dropdown",!n.styleOff&&n.dropUp),t.Q6J("hidden",n.hidden),t.xp6(2),t.Q6J("ngForOf",n.items))},dependencies:[x.sg,x.tP],styles:[".mention-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:11em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25em}.mention-item[_ngcontent-%COMP%]{display:block;padding:.2em 1.5em;line-height:1.5em;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.scrollable-menu[_ngcontent-%COMP%]{display:block;height:auto;max-height:292px;overflow:auto}[hidden][_ngcontent-%COMP%]{display:none}.mention-dropdown[_ngcontent-%COMP%]{bottom:100%;top:auto;margin-bottom:2px}"]}),i})(),Ro=(()=>{class i{constructor(e,n,s){this._element=e,this._componentResolver=n,this._viewContainerRef=s,this.mentionConfig={items:[]},this.DEFAULT_CONFIG={items:[],triggerChar:"@",labelKey:"label",maxItems:-1,allowSpace:!1,returnTrigger:!1,mentionSelect:(r,o)=>this.activeConfig.triggerChar+r[this.activeConfig.labelKey],mentionFilter:(r,o)=>{const l=r.toLowerCase();return o.filter(c=>c[this.activeConfig.labelKey].toLowerCase().startsWith(l))}},this.searchTerm=new t.vpe,this.itemSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.triggerChars={}}set mention(e){this.mentionItems=e}ngOnChanges(e){(e.mention||e.mentionConfig)&&this.updateConfig()}updateConfig(){let e=this.mentionConfig;this.triggerChars={},this.mentionItems&&(e.items=this.mentionItems),this.addConfig(e),e.mentions&&e.mentions.forEach(n=>this.addConfig(n))}addConfig(e){let n=Object.assign({},this.DEFAULT_CONFIG),s=(e=Object.assign(n,e)).items;s&&s.length>0&&("string"==typeof s[0]&&(s=s.map(r=>{let o={};return o[e.labelKey]=r,o})),e.labelKey&&(s=s.filter(r=>r[e.labelKey]),e.disableSort||s.sort((r,o)=>r[e.labelKey].localeCompare(o[e.labelKey])))),e.items=s,this.triggerChars[e.triggerChar]=e,this.activeConfig&&this.activeConfig.triggerChar==e.triggerChar&&(this.activeConfig=e,this.updateSearchList())}setIframe(e){this.iframe=e}stopEvent(e){e.wasClick||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}blurHandler(e){this.stopEvent(e),this.stopSearch()}inputHandler(e,n=this._element.nativeElement){if(229===this.lastKeyCode&&e.data){let s=e.data.charCodeAt(0);this.keyHandler({keyCode:s,inputEvent:!0},n)}}keyHandler(e,n=this._element.nativeElement){if(this.lastKeyCode=e.keyCode,e.isComposing||229===e.keyCode)return;let s=Vi(n),r=Gi(n,this.iframe),o=e.key;if(!o){let c=e.which||e.keyCode;o=String.fromCharCode(!e.shiftKey&&c>=65&&c<=90?c+32:e.which||e.keyCode)}13==e.keyCode&&e.wasClick&&r<this.startPos&&(r=this.startNode.length,Qi(this.startNode,r,this.iframe));let l=this.triggerChars[o];if(l)this.activeConfig=l,this.startPos=e.inputEvent?r-1:r,this.startNode=(this.iframe?this.iframe.contentWindow.getSelection():window.getSelection()).anchorNode,this.searching=!0,this.searchString=null,this.showSearchList(n),this.updateSearchList(),l.returnTrigger&&this.searchTerm.emit(l.triggerChar);else if(this.startPos>=0&&this.searching)if(r<=this.startPos)this.searchList.hidden=!0;else if(16!==e.keyCode&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&r>this.startPos){if(this.activeConfig.allowSpace||32!==e.keyCode){if(8===e.keyCode&&r>0)r--,r==this.startPos&&this.stopSearch();else if(this.searchList.hidden){if(9===e.keyCode||13===e.keyCode)return void this.stopSearch()}else if(!this.searchList.hidden){if(9===e.keyCode||13===e.keyCode){this.stopEvent(e),this.itemSelected.emit(this.searchList.activeItem);const c=this.activeConfig.mentionSelect(this.searchList.activeItem,this.activeConfig.triggerChar);if(Pn(n,this.startPos,r,c,this.iframe),"createEvent"in document){let u=document.createEvent("HTMLEvents");u.initEvent(this.iframe?"change":"input",!0,!1),this._element.nativeElement.dispatchEvent(u)}return this.startPos=-1,this.stopSearch(),!1}if(27===e.keyCode)return this.stopEvent(e),this.stopSearch(),!1;if(40===e.keyCode)return this.stopEvent(e),this.searchList.activateNextItem(),!1;if(38===e.keyCode)return this.stopEvent(e),this.searchList.activatePreviousItem(),!1}}else this.startPos=-1;if(1!=o.length&&8!=e.keyCode)return this.stopEvent(e),!1;if(this.searching){let c=s.substring(this.startPos+1,r);if(8!==e.keyCode&&!e.inputEvent&&(c+=o),this.searchString=c,this.activeConfig.returnTrigger){const u=this.searchString||8===e.keyCode?s.substring(this.startPos,this.startPos+1):"";this.searchTerm.emit(u+this.searchString)}else this.searchTerm.emit(this.searchString);this.updateSearchList()}}}startSearch(e,n=this._element.nativeElement){e=e||this.mentionConfig.triggerChar||this.DEFAULT_CONFIG.triggerChar;const s=Gi(n,this.iframe);Pn(n,s,s,e,this.iframe),this.keyHandler({key:e,inputEvent:!0},n)}stopSearch(){this.searchList&&!this.searchList.hidden&&(this.searchList.hidden=!0,this.closed.emit()),this.activeConfig=null,this.searching=!1}updateSearchList(){let e=[];if(this.activeConfig&&this.activeConfig.items){let n=this.activeConfig.items;!this.activeConfig.disableSearch&&this.searchString&&this.activeConfig.labelKey&&this.activeConfig.mentionFilter&&(n=this.activeConfig.mentionFilter(this.searchString,n)),e=n,this.activeConfig.maxItems>0&&(e=e.slice(0,this.activeConfig.maxItems))}this.searchList&&(this.searchList.items=e,this.searchList.hidden=0==e.length)}showSearchList(e){if(this.opened.emit(),null==this.searchList){let n=this._componentResolver.resolveComponentFactory(Eo),s=this._viewContainerRef.createComponent(n);this.searchList=s.instance,this.searchList.itemTemplate=this.mentionListTemplate,s.instance.itemClick.subscribe(()=>{e.focus(),this.keyHandler({key:"Enter",keyCode:13,wasClick:!0},e)})}this.searchList.labelKey=this.activeConfig.labelKey,this.searchList.dropUp=this.activeConfig.dropUp,this.searchList.styleOff=this.mentionConfig.disableStyle,this.searchList.activeIndex=0,this.searchList.position(e,this.iframe),window.requestAnimationFrame(()=>this.searchList.reset())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t._Vd),t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","mention",""],["","mentionConfig",""]],hostAttrs:["autocomplete","off"],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(r){return n.keyHandler(r)})("input",function(r){return n.inputHandler(r)})("blur",function(r){return n.blurHandler(r)})},inputs:{mention:"mention",mentionConfig:"mentionConfig",mentionListTemplate:"mentionListTemplate"},outputs:{searchTerm:"searchTerm",itemSelected:"itemSelected",opened:"opened",closed:"closed"},features:[t.TTD]}),i})(),Bo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez]}),i})();const Po=function(i,a,e){return{flexBasis:i,height:a,objectFit:"cover",width:e}};function No(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("load",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isLoaded=!0)})("error",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isError=!0)}),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.kEZ(7,Po,"calc(var(--str-chat__spacing-px, 1px) * "+e.size+")","calc(var(--str-chat__spacing-px, 1px) * "+e.size+")","calc(var(--str-chat__spacing-px, 1px) * "+e.size+")")),t.Gre("str-chat__avatar-image str-chat__avatar-image",e.isLoaded?" str-chat__avatar-image--loaded":"",""),t.s9C("src",e.imageUrl||e.fallbackChannelImage,t.LSH),t.s9C("alt",e.initials)}}function Ho(i,a){if(1&i&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.initials," ")}}function jo(i,a){1&i&&t._UZ(0,"div",6)}const $o=function(i,a,e,n,s){return{flexBasis:i,fontSize:a,height:e,lineHeight:n,width:s}};function Yo(i,a){if(1&i&&t._UZ(0,"stream-avatar",2),2&i){const n=a.imageUrl,s=a.size,r=a.type,o=a.channel,l=a.user,c=a.location;t.Q6J("name",a.name)("imageUrl",n)("size",s)("type",r)("channel",o)("user",l)("location",c)}}function qo(i,a){1&i&&t.GkF(0)}function zo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",22),t._UZ(1,"path",23),t.qZA())}function Jo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",24),t._UZ(1,"path",25),t.qZA())}function Vo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",26)(1,"g",27),t._UZ(2,"path",28)(3,"path",29),t.qZA()())}function Qo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",30)(1,"title"),t._uU(2,"Combined Shape"),t.qZA(),t.TgZ(3,"desc"),t._uU(4,"Created with Sketch."),t.qZA(),t.TgZ(5,"g",31)(6,"g",32)(7,"g",33),t._UZ(8,"path",34),t.qZA()()()())}function Go(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",35)(1,"title",36),t._uU(2,"streamChat.Send"),t.qZA(),t._UZ(3,"path",37),t.qZA())}function Wo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",38)(1,"title",36),t._uU(2,"streamChat.Attach files"),t.qZA(),t._UZ(3,"path",39),t.qZA())}function Ko(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",40),t._UZ(1,"path",41),t.qZA())}function Xo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",42),t._UZ(1,"rect",43)(2,"circle",44)(3,"path",45),t.qZA())}function el(i,a){if(1&i&&(t.O4$(),t.TgZ(0,"svg",46),t._UZ(1,"path",47),t.qZA()),2&i){const e=t.oxw();t.uIk("height",e.size||20)("width",e.size||20)}}function tl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",48),t._UZ(1,"path",49)(2,"path",50)(3,"path",51)(4,"path",52)(5,"path",53),t.TgZ(6,"defs")(7,"linearGradient",54),t._UZ(8,"stop",55)(9,"stop",56),t.qZA()()())}function nl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",57),t._UZ(1,"path",58),t.qZA())}function il(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",59),t._UZ(1,"path",60),t.qZA())}function sl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",61),t._UZ(1,"path",62),t.qZA())}function al(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",63),t._UZ(1,"path",64),t.qZA())}function rl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",65),t._UZ(1,"path",66),t.qZA())}function ol(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",67),t._UZ(1,"path",68),t.qZA())}function ll(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",69),t._UZ(1,"path",70),t.qZA())}function cl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",71),t._UZ(1,"path",72),t.qZA())}function ul(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",73),t._UZ(1,"path",74),t.qZA())}function dl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",75)(1,"g",76),t._UZ(2,"path",77),t.qZA(),t.TgZ(3,"defs")(4,"clipPath",78),t._UZ(5,"rect",79),t.qZA()()())}function hl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",80),t._UZ(1,"path",81),t.qZA())}function pl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",82),t._UZ(1,"path",83)(2,"path",84),t.qZA())}function gl(i,a){if(1&i&&t._UZ(0,"stream-icon",2),2&i){const n=a.size;t.Q6J("icon",a.icon)("size",n)}}function ml(i,a){1&i&&t.GkF(0)}const fl=function(i){return{stopColor:i}};function _l(i,a){if(1&i&&t._UZ(0,"stream-loading-indicator",2),2&i){const n=a.color;t.Q6J("size",a.size)("color",n)}}function vl(i,a){1&i&&t.GkF(0)}const Cl=["modalInner"];function yl(i,a){1&i&&t.GkF(0)}function bl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,yl,1,0,"ng-container",7),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function wl(i,a){1&i&&t.Hsn(0)}const Hn=["*"],ts=["modalContent"],cn=function(i,a){return{height:i,width:a}};function Dl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"img",13,14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openImageModal([s]))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openImageModal([s]))}),t.qZA()}if(2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(2);t.Udp("--original-height",s.getImageAttachmentConfiguration(n,"single",e).originalHeight)("--original-width",s.getImageAttachmentConfiguration(n,"single",e).originalWidth),t.Q6J("src",s.getImageAttachmentConfiguration(n,"single",e).url,t.LSH)("alt",null==n?null:n.fallback)("ngStyle",t.WLB(7,cn,s.getImageAttachmentConfiguration(n,"single",e).height,s.getImageAttachmentConfiguration(n,"single",e).width))}}function Tl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))}),t._UZ(1,"img",19,14),t.qZA()}if(2&i){const e=t.MAs(2),n=t.oxw().$implicit,s=t.oxw(4);t.ekj("str-chat__message-attachment--svg-image",s.isSvg(n)),t.xp6(1),t.Udp("--original-height",s.getImageAttachmentConfiguration(n,"gallery",e).originalHeight)("--original-width",s.getImageAttachmentConfiguration(n,"gallery",e).originalWidth),t.Q6J("src",s.getImageAttachmentConfiguration(n,"gallery",e).url,t.LSH)("alt",n.fallback)("ngStyle",t.WLB(9,cn,s.getImageAttachmentConfiguration(n,"gallery",e).height,s.getImageAttachmentConfiguration(n,"gallery",e).width))}}const xl=function(i,a,e){return{"background-image":i,height:a,width:e}},Sl=function(i){return{imageCount:i}};function Ml(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",20,21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))}),t._UZ(2,"p",22),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(2).$implicit,r=t.oxw(2);t.Udp("--original-height",r.getImageAttachmentConfiguration(n,"gallery",e).originalHeight)("--original-width",r.getImageAttachmentConfiguration(n,"gallery",e).originalWidth),t.ekj("str-chat__message-attachment--svg-image",r.isSvg(n)),t.Q6J("ngStyle",t.kEZ(11,xl,"url("+r.getImageAttachmentConfiguration(n,"gallery",e).url+")",r.getImageAttachmentConfiguration(n,"gallery",e).height,r.getImageAttachmentConfiguration(n,"gallery",e).width)),t.xp6(2),t.Q6J("innerHTML",t.xi3(3,8,"streamChat.{{ imageCount }} more",t.VKq(15,Sl,s.images.length-4)),t.oJD)}}function kl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Tl,3,12,"button",16),t.YNc(2,Ml,4,17,"button",17),t.BQk()),2&i){const e=a.index,n=a.last;t.xp6(1),t.Q6J("ngIf",e<3||3===e&&n),t.xp6(1),t.Q6J("ngIf",3===e&&!n)}}function Al(i,a){if(1&i&&(t.TgZ(0,"div",15),t.YNc(1,kl,3,2,"ng-container",4),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.ekj("str-chat__gallery--square",(null==e?null:e.images.length)>3)("str-chat__gallery-two-rows",(null==e?null:e.images.length)>2),t.xp6(1),t.Q6J("ngForOf",e.images)("ngForTrackBy",n.trackByImageUrl)}}function Ol(i,a){if(1&i&&(t.TgZ(0,"div",23),t._UZ(1,"video",24,25),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw().$implicit,s=t.oxw(2);t.Udp("--original-height",s.getVideoAttachmentConfiguration(n,e).originalHeight)("--original-width",s.getVideoAttachmentConfiguration(n,e).originalWidth),t.Q6J("ngStyle",t.WLB(7,cn,s.getVideoAttachmentConfiguration(n,e).height,s.getVideoAttachmentConfiguration(n,e).width)),t.xp6(1),t.Q6J("src",s.getVideoAttachmentConfiguration(n,e).url,t.LSH)("poster",s.getVideoAttachmentConfiguration(n,e).thumbUrl,t.LSH)}}function El(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",33),2&i&&t.Q6J("size",30)}function Il(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",34),2&i&&t.Q6J("size",30)}function Fl(i,a){if(1&i&&(t.TgZ(0,"span",35),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.getFileSize(e))}}function Ll(i,a){if(1&i&&(t.TgZ(0,"a",26),t.YNc(1,El,1,1,"stream-icon-placeholder",27),t.YNc(2,Il,1,1,"stream-icon-placeholder",28),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t._uU(6),t.qZA()(),t.YNc(7,Fl,2,1,"span",32),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("href",e.asset_url,t.LSH),t.xp6(1),t.Q6J("ngIf","1"===n.themeVersion),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion),t.xp6(4),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",n.hasFileSize(e))}}function Zl(i,a){if(1&i&&(t.TgZ(0,"div",42),t._UZ(1,"img",43),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.s9C("alt",e.url),t.s9C("src",e.url,t.LSH),t.Q6J("ngStyle",t.WLB(3,cn,e.height,e.width))}}function Ul(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function Rl(i,a){if(1&i&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Bl(i,a){if(1&i&&(t.TgZ(0,"a",46),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.s9C("href",e.title_link||e.og_scrape_url,t.LSH),t.xp6(1),t.hij(" ",n.trimUrl(e.title_link||e.og_scrape_url)," ")}}function Pl(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Zl,2,6,"div",36),t.TgZ(2,"div",37)(3,"div",38),t.YNc(4,Ul,2,1,"div",39),t.YNc(5,Rl,2,1,"div",40),t.YNc(6,Bl,2,2,"a",41),t.qZA()()()),2&i){const e=a.ngIf,n=t.oxw().$implicit;t.Gre("str-chat__message-attachment-card str-chat__message-attachment-card--",n.type,""),t.xp6(1),t.Q6J("ngIf",e.url),t.xp6(3),t.Q6J("ngIf",n.title),t.xp6(1),t.Q6J("ngIf",n.text),t.xp6(1),t.Q6J("ngIf",n.title_link||n.og_scrape_url)}}function Nl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(4);return t.KtG(o.sendAction(r))})("keyup.enter",function(){const r=t.CHM(e).$implicit,o=t.oxw(4);return t.KtG(o.sendAction(r))}),t._uU(1),t.qZA()}if(2&i){const e=a.$implicit;t.Gre("str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--",e.style,""),t.xp6(1),t.hij(" ",e.text," ")}}function Hl(i,a){if(1&i&&(t.TgZ(0,"div",47)(1,"div",48),t.YNc(2,Nl,2,4,"button",49),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.actions)("ngForTrackBy",n.trackByActionValue)}}function jl(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6),t.YNc(2,Dl,2,10,"img",7),t.YNc(3,Al,2,6,"div",8),t.YNc(4,Ol,3,10,"div",9),t.YNc(5,Ll,8,5,"a",10),t.YNc(6,Pl,7,7,"div",11),t.YNc(7,Hl,3,2,"div",12),t.qZA(),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.Gre("str-chat__message-attachment str-chat__message-attachment--",e.type," str-chat__message-attachment-dynamic-size"),t.ekj("str-chat__message-attachment--card",n.isCard(e))("str-chat-angular__message-attachment-file-single",n.isFile(e))("str-chat__message-attachment-with-actions",e.actions&&e.actions.length>0)("str-chat__message-attachment--svg-image",n.isSvg(e)),t.xp6(1),t.Q6J("ngIf",n.isImage(e)),t.xp6(1),t.Q6J("ngIf",n.isGallery(e)),t.xp6(1),t.Q6J("ngIf",n.isVideo(e)),t.xp6(1),t.Q6J("ngIf",n.isFile(e)),t.xp6(1),t.Q6J("ngIf",n.isCard(e)&&n.getCardAttachmentConfiguration(e)),t.xp6(1),t.Q6J("ngIf",e.actions&&e.actions.length>0)}}function $l(i,a){1&i&&t.GkF(0)}function Yl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,$l,1,0,"ng-container",51),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw(2),n=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",t.lcZ(2,2,e.customTemplatesService.modalTemplate$)||n)("ngTemplateOutletContext",e.getModalContext())}}function ql(i,a){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,jl,8,17,"ng-container",4),t.YNc(2,Yl,3,4,"ng-container",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.orderedAttachments)("ngForTrackBy",e.trackByUrl),t.xp6(1),t.Q6J("ngIf",e.imagesToView&&e.imagesToView.length>0)}}function zl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-modal",52),t.NdJ("isOpenChange",function(s){const o=t.CHM(e).isOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.content;t.Q6J("isOpen",a.isOpen)("content",n)}}const ns=function(i){return{visibility:i}},Jl=function(i,a){return{width:i,height:a}};function Vl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",54),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(-1))})("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(-1))}),t._UZ(2,"stream-icon-placeholder",55),t.qZA(),t._UZ(3,"img",56,14),t.TgZ(5,"button",57),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(1))})("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(1))}),t._UZ(6,"stream-icon-placeholder",58),t.qZA()()}if(2&i){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(9,ns,n.isImageModalPrevButtonVisible?"visible":"hidden")),t.xp6(2),t.Udp("--original-height",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).originalHeight)("--original-width",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).originalWidth),t.Q6J("src",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).url,t.LSH)("alt",n.imagesToView[n.imagesToViewCurrentIndex].fallback)("ngStyle",t.WLB(11,Jl,n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).width,n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).height)),t.xp6(2),t.Q6J("ngStyle",t.VKq(14,ns,n.isImageModalNextButtonVisible?"visible":"hidden"))}}function Ql(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._UZ(1,"stream-icon-placeholder",17),t.qZA()}}function Gl(i,a){if(1&i&&t._UZ(0,"img",18),2&i){const e=t.oxw(2).$implicit;t.s9C("src",e.url?e.url:e.previewUri,t.LSH),t.s9C("alt",e.file.name)}}function Wl(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder",19)}function Kl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,Ql,2,0,"div",9),t.TgZ(2,"div",10)(3,"div",11)(4,"div",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))}),t._UZ(5,"stream-icon-placeholder",13),t.qZA()(),t.YNc(6,Gl,1,2,"img",14),t.qZA(),t.YNc(7,Wl,1,0,"stream-loading-indicator-placeholder",15),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.ekj("rfu-image-previewer__image--loaded","success"===e.state),t.xp6(1),t.Q6J("ngIf","error"===e.state),t.xp6(5),t.Q6J("ngIf",e.url||e.previewUri),t.xp6(1),t.Q6J("ngIf","uploading"===e.state)}}function Xl(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._uU(2," streamChat.failed "),t.qZA(),t.TgZ(3,"div",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._uU(4," streamChat.retry "),t.qZA(),t.BQk()}}function ec(i,a){1&i&&(t.TgZ(0,"div",29),t._UZ(1,"stream-loading-indicator-placeholder"),t.qZA())}function tc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",20)(1,"ol")(2,"li",21),t._UZ(3,"stream-icon-placeholder",22),t.TgZ(4,"a",23),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.url?null:s.preventDefault())})("keyup.enter",function(s){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.url?null:s.preventDefault())}),t._uU(5),t.YNc(6,Xl,5,0,"ng-container",24),t.qZA(),t.TgZ(7,"span",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))}),t._UZ(8,"stream-icon-placeholder",13),t.qZA(),t.YNc(9,ec,2,0,"div",26),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(2),t.ekj("rfu-file-previewer__file--uploading","uploading"===e.state)("rfu-file-previewer__file--failed","error"===e.state),t.xp6(2),t.s9C("href",e.url,t.LSH),t.xp6(1),t.hij(" ",e.file.name," "),t.xp6(1),t.Q6J("ngIf","error"===e.state),t.xp6(3),t.Q6J("ngIf","uploading"===e.state)}}function nc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Kl,8,5,"div",6),t.YNc(2,tc,10,8,"div",7),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","image"===e.type),t.xp6(1),t.Q6J("ngIf","file"===e.type||"video"===e.type)}}function ic(i,a){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,nc,3,2,"ng-container",5),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,e.attachmentUploads$))("ngForTrackBy",e.trackByFile)}}function sc(i,a){1&i&&t.GkF(0)}function ac(i,a){1&i&&(t.TgZ(0,"div",38),t._UZ(1,"stream-loading-indicator-placeholder",39),t.qZA()),2&i&&(t.xp6(1),t.Q6J("size",18))}function rc(i,a){1&i&&t.GkF(0)}function oc(i,a){if(1&i&&t._UZ(0,"img",40),2&i){const e=t.oxw(2).$implicit;t.s9C("src",e.url?e.url:e.previewUri,t.LSH),t.s9C("alt",e.file.name)}}const un=function(i){return{attachmentUpload:i}};function lc(i,a){if(1&i&&(t.TgZ(0,"div",34),t.YNc(1,sc,1,0,"ng-container",35),t.YNc(2,ac,2,1,"div",36),t.YNc(3,rc,1,0,"ng-container",35),t.YNc(4,oc,1,2,"img",37),t.qZA()),2&i){const e=t.oxw().$implicit;t.oxw(2);const n=t.MAs(5),s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(6,un,e)),t.xp6(1),t.Q6J("ngIf","uploading"===e.state),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(8,un,e)),t.xp6(1),t.Q6J("ngIf",e.url||e.previewUri)}}function cc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r.url?null:s.preventDefault())})("keyup.enter",function(s){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r.url?null:s.preventDefault())}),t._UZ(1,"stream-icon-placeholder",48),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.s9C("href",e.url,t.LSH)}}function uc(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder",39),2&i&&t.Q6J("size",18)}function dc(i,a){1&i&&t.GkF(0)}function hc(i,a){1&i&&t.GkF(0)}function pc(i,a){if(1&i&&(t.TgZ(0,"div",41),t._UZ(1,"stream-icon-placeholder",42),t.TgZ(2,"div",43)(3,"div",44),t._uU(4),t.qZA(),t.YNc(5,cc,2,1,"a",45),t.YNc(6,uc,1,1,"stream-loading-indicator-placeholder",46),t.qZA(),t.YNc(7,dc,1,0,"ng-container",35),t.YNc(8,hc,1,0,"ng-container",35),t.qZA()),2&i){const e=t.oxw().$implicit;t.oxw(2);const n=t.MAs(5),s=t.MAs(7);t.xp6(4),t.hij(" ",e.file.name," "),t.xp6(1),t.Q6J("ngIf","success"===e.state),t.xp6(1),t.Q6J("ngIf","uploading"===e.state),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(7,un,e)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(9,un,e))}}function gc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,lc,5,10,"div",32),t.YNc(2,pc,9,11,"div",33),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","image"===e.type),t.xp6(1),t.Q6J("ngIf","file"===e.type||"video"===e.type)}}function mc(i,a){if(1&i&&(t.TgZ(0,"div",30)(1,"div",31),t.YNc(2,gc,3,2,"ng-container",5),t.ALo(3,"async"),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,e.attachmentUploads$))("ngForTrackBy",e.trackByFile)}}function fc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",49),t.NdJ("click",function(){const r=t.CHM(e).attachmentUpload,o=t.oxw();return t.KtG(o.attachmentDeleted(r))})("keyup.enter",function(){const r=t.CHM(e).attachmentUpload,o=t.oxw();return t.KtG(o.attachmentDeleted(r))}),t._UZ(1,"stream-icon-placeholder",13),t.qZA()}}function _c(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().attachmentUpload,r=t.oxw();return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().attachmentUpload,r=t.oxw();return t.KtG(r.attachmentUploadRetried(s.file))}),t._UZ(1,"stream-icon-placeholder",17),t.qZA()}if(2&i){const e=t.oxw().attachmentUpload;t.Gre("str-chat__attachment-preview-error str-chat__attachment-preview-error-","image"===e.type?"image":"file","")}}function vc(i,a){1&i&&t.YNc(0,_c,2,3,"div",50),2&i&&t.Q6J("ngIf","error"===a.attachmentUpload.state)}const Cc=["fileInput"];function yc(i,a){if(1&i&&t._UZ(0,"stream-attachment-list",22),2&i){const e=t.oxw(3);t.Q6J("attachments",e.quotedMessageAttachments)("messageId",null==e.quotedMessage?null:e.quotedMessage.id)}}function bc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())}),t._UZ(6,"stream-icon-placeholder",16),t.qZA()(),t.TgZ(7,"div",17),t._UZ(8,"stream-avatar-placeholder",18),t.TgZ(9,"div",19),t.YNc(10,yc,1,2,"stream-attachment-list",20),t._UZ(11,"div",21),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,7,"streamChat.Reply to Message")),t.xp6(5),t.Q6J("imageUrl",null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.image)("name",(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.name)||(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.id))("size",20)("user",(null==e.quotedMessage?null:e.quotedMessage.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.quotedMessage?null:e.quotedMessage.attachments)&&(null==e.quotedMessage||null==e.quotedMessage.attachments?null:e.quotedMessage.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.translation)||(null==e.quotedMessage?null:e.quotedMessage.html)||(null==e.quotedMessage?null:e.quotedMessage.text),t.oJD)}}function wc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-preview-list",23),t.NdJ("retryAttachmentUpload",function(s){const o=t.CHM(e).retryUploadHandler;return t.KtG(o(s))})("deleteAttachment",function(s){const o=t.CHM(e).deleteUploadHandler;return t.KtG(o(s))}),t.qZA()}2&i&&t.Q6J("attachmentUploads$",a.attachmentUploads$)}function Dc(i,a){1&i&&t.GkF(0)}function Tc(i,a){1&i&&t.GkF(0)}function xc(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"div",25),t.YNc(2,Tc,1,0,"ng-container",5),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngTemplateOutlet",e.emojiPickerTemplate)("ngTemplateOutletContext",e.getEmojiPickerContext())}}function Sc(i,a){if(1&i){const e=t.EpF();t.ynx(0)(1,26),t.NdJ("valueChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.textareaValue=s)})("valueChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.typingStart$.next())})("send",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("userMentions",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.mentionedUsers=s)}),t.BQk()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("value",e.textareaValue)("componentRef",e.textareaRef)("areMentionsEnabled",e.areMentionsEnabled)("mentionScope",e.mentionScope)("placeholder",e.textareaPlaceholder)("inputMode",e.inputMode)}}function Mc(i,a){if(1&i&&(t._UZ(0,"textarea",27),t.ALo(1,"translate")),2&i){const e=t.oxw(2);t.Q6J("value",t.lcZ(1,1,e.disabledTextareaText))}}function kc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",30)(5,"label")(6,"input",31,32),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(7),r=t.oxw(2);return t.KtG(r.filesSelected(s.files))}),t.qZA(),t.TgZ(8,"span",33),t._UZ(9,"stream-icon-placeholder",34),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"streamChat.Attach files")," "),t.xp6(4),t.Q6J("multiple",e.isMultipleFileUploadEnabled)}}function Ac(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())}),t._UZ(1,"stream-icon-placeholder",36),t.qZA()}}function Oc(i,a){if(1&i&&(t.TgZ(0,"div",37)(1,"div",38),t._uU(2),t.ALo(3,"async"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,1,e.cooldown$)," ")}}function Ec(i,a){if(1&i&&(t.TgZ(0,"div"),t.ALo(1,"async"),t.YNc(2,bc,12,9,"div",2),t.TgZ(3,"div",3)(4,"div"),t.YNc(5,wc,1,1,"ng-template",null,4,t.W1O),t.YNc(7,Dc,1,0,"ng-container",5),t.TgZ(8,"div",6),t.YNc(9,xc,3,2,"ng-container",7),t.YNc(10,Sc,2,6,"ng-container",8),t.YNc(11,Mc,2,3,"ng-template",null,9,t.W1O),t.qZA(),t.YNc(13,kc,10,4,"div",10),t.qZA(),t.YNc(14,Ac,2,0,"button",11),t.YNc(15,Oc,4,3,"div",12),t.qZA()()),2&i){const e=t.MAs(6),n=t.MAs(12),s=t.oxw();t.Tol("main"===s.mode?"str-chat__input-flat":"str-chat__small-message-input"),t.ekj("str-chat__input-flat-has-attachments",t.lcZ(1,19,s.attachmentUploads$).length>0)("str-chat__input-flat-quoted",!!s.quotedMessage),t.xp6(2),t.Q6J("ngIf",s.quotedMessage),t.xp6(2),t.Tol("main"===s.mode?"str-chat__input-flat--textarea-wrapper":"str-chat__small-message-input--textarea-wrapper"),t.xp6(3),t.Q6J("ngTemplateOutlet",s.attachmentPreviewListTemplate||e)("ngTemplateOutletContext",s.getAttachmentPreviewListContext()),t.xp6(2),t.Q6J("ngIf",s.emojiPickerTemplate),t.xp6(1),t.Q6J("ngIf",s.canSendMessages)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",s.isFileUploadEnabled&&s.isFileUploadAuthorized&&s.canSendMessages),t.xp6(1),t.Q6J("ngIf",s.canSendMessages&&!s.isCooldownInProgress),t.xp6(1),t.Q6J("ngIf",s.isCooldownInProgress)}}function Ic(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())}),t._UZ(5,"stream-icon-placeholder",45),t.qZA()()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"streamChat.Reply to Message")," "))}function Fc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",55)(1,"input",56,32),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(2),r=t.oxw(3);return t.KtG(r.filesSelected(s.files))}),t.qZA(),t.TgZ(3,"label",57),t._UZ(4,"stream-icon-placeholder",58),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.s9C("id",e.fileInputId),t.Q6J("multiple",e.isMultipleFileUploadEnabled),t.xp6(2),t.s9C("for",e.fileInputId)}}function Lc(i,a){if(1&i&&t._UZ(0,"stream-attachment-list",22),2&i){const e=t.oxw(4);t.Q6J("attachments",e.quotedMessageAttachments)("messageId",null==e.quotedMessage?null:e.quotedMessage.id)}}function Zc(i,a){if(1&i&&(t.TgZ(0,"div",59),t._UZ(1,"stream-avatar-placeholder",60),t.TgZ(2,"div",61),t.YNc(3,Lc,1,2,"stream-attachment-list",20),t._UZ(4,"div",62),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("imageUrl",null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.image)("name",(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.name)||(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.id))("size",20)("user",(null==e.quotedMessage?null:e.quotedMessage.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.quotedMessage?null:e.quotedMessage.attachments)&&(null==e.quotedMessage||null==e.quotedMessage.attachments?null:e.quotedMessage.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.quotedMessage?null:e.quotedMessage.translation)||(null==e.quotedMessage?null:e.quotedMessage.html)||(null==e.quotedMessage?null:e.quotedMessage.text),t.oJD)}}function Uc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-preview-list",63),t.NdJ("retryAttachmentUpload",function(s){const o=t.CHM(e).retryUploadHandler;return t.KtG(o(s))})("deleteAttachment",function(s){const o=t.CHM(e).deleteUploadHandler;return t.KtG(o(s))}),t.qZA()}2&i&&t.Q6J("attachmentUploads$",a.attachmentUploads$)}function Rc(i,a){1&i&&t.GkF(0)}function Bc(i,a){1&i&&t.GkF(0)}function Pc(i,a){if(1&i&&(t.ynx(0,24),t.YNc(1,Bc,1,0,"ng-container",5),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngTemplateOutlet",e.emojiPickerTemplate)("ngTemplateOutletContext",e.getEmojiPickerContext())}}function Nc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.messageSent())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.messageSent())}),t.ALo(1,"async"),t.ALo(2,"async"),t._UZ(3,"stream-icon-placeholder",65),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",t.lcZ(1,1,e.attachmentUploadInProgressCounter$)>0||!e.textareaValue&&0===t.lcZ(2,3,e.attachmentUploads$).length)}}function Hc(i,a){if(1&i&&(t.TgZ(0,"div",66),t._uU(1),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.cooldown$)," ")}}function jc(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",46),t.YNc(2,Fc,5,3,"div",47),t.TgZ(3,"div",48),t.YNc(4,Zc,5,6,"div",49),t.YNc(5,Uc,1,1,"ng-template",null,4,t.W1O),t.YNc(7,Rc,1,0,"ng-container",5),t.TgZ(8,"div",50),t.ynx(9,51),t.NdJ("valueChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.textareaValue=s)})("valueChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.typingStart$.next())})("send",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("userMentions",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.mentionedUsers=s)}),t.BQk(),t.TgZ(10,"div",52),t.YNc(11,Pc,2,2,"ng-container",7),t.qZA()()(),t.YNc(12,Nc,4,5,"button",53),t.YNc(13,Hc,3,3,"div",54),t.qZA(),t.BQk()}if(2&i){const e=t.MAs(6),n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.isFileUploadEnabled&&n.isFileUploadAuthorized&&n.canSendMessages),t.xp6(2),t.Q6J("ngIf",n.quotedMessage),t.xp6(3),t.Q6J("ngTemplateOutlet",n.attachmentPreviewListTemplate||e)("ngTemplateOutletContext",n.getAttachmentPreviewListContext()),t.xp6(2),t.Q6J("value",n.textareaValue)("componentRef",n.textareaRef)("areMentionsEnabled",n.areMentionsEnabled)("mentionScope",n.mentionScope)("inputMode",n.inputMode)("placeholder",n.textareaPlaceholder),t.xp6(2),t.Q6J("ngIf",n.emojiPickerTemplate),t.xp6(1),t.Q6J("ngIf",n.canSendMessages&&!n.isCooldownInProgress&&!n.message),t.xp6(1),t.Q6J("ngIf",n.isCooldownInProgress)}}function $c(i,a){if(1&i&&(t.TgZ(0,"div",67),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.disabledTextareaText)," ")}}function Yc(i,a){if(1&i&&(t.TgZ(0,"div",39),t.YNc(1,Ic,6,3,"div",40),t.YNc(2,jc,14,13,"ng-container",8),t.YNc(3,$c,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.quotedMessage),t.xp6(1),t.Q6J("ngIf",n.canSendMessages)("ngIfElse",e)}}function qc(i,a){1&i&&t.GkF(0)}function zc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,qc,1,0,"ng-container",3),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function Jc(i,a){1&i&&t.Hsn(0)}function Vc(i,a){if(1&i&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.text,e.translateParams)," ")}}function Qc(i,a){1&i&&t.GkF(0)}function Gc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Qc,1,0,"ng-container",4),t.BQk()),2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.getNotificationContentContext(e))}}function Wc(i,a){if(1&i&&(t.YNc(0,Vc,3,4,"div",5),t.YNc(1,Gc,2,2,"ng-container",6)),2&i){const e=t.oxw().$implicit;t.Q6J("ngIf",void 0!==e.text),t.xp6(1),t.Q6J("ngIf",void 0!==e.template)}}function Kc(i,a){1&i&&t.GkF(0)}const Xc=function(i,a){return{type:i,content:a}};function eu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Wc,2,2,"ng-template",null,3,t.W1O),t.YNc(3,Kc,1,0,"ng-container",4),t.ALo(4,"async"),t.BQk()),2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(),r=t.MAs(5);t.xp6(3),t.Q6J("ngTemplateOutlet",t.lcZ(4,2,s.customTemplatesService.notificationTemplate$)||r)("ngTemplateOutletContext",t.WLB(4,Xc,e.type,n))}}function tu(i,a){if(1&i&&t._UZ(0,"stream-notification",8),2&i){const n=a.content;t.Q6J("type",a.type)("content",n)}}function nu(i,a){1&i&&t.GkF(0)}function iu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,nu,1,0,"ng-container",5),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(),s=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n.messageActionItemTemplate||s)("ngTemplateOutletContext",e)}}function su(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){const r=t.CHM(e).actionHandler,o=t.oxw();return t.KtG(r(o.message,o.isMine))}),t.TgZ(1,"li",9),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=a.actionName,n=a.actionLabelOrTranslationKey,s=t.oxw();t.uIk("data-testid",e+"-action"),t.xp6(2),t.hij(" ",t.lcZ(3,2,s.getActionLabel(n))," ")}}function au(i,a){1&i&&t.GkF(0)}function ru(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-modal",10),t.NdJ("isOpenChange",function(s){const o=t.CHM(e).isOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.content;t.Q6J("isOpen",a.isOpen)("content",n)}}function ou(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-input",18),t.NdJ("messageUpdate",function(){const r=t.CHM(e).messageUpdateHandler;return t.KtG(r())}),t.qZA()}if(2&i){const n=a.sendMessage$;t.Q6J("message",a.message)("sendMessage$",n)}}function lu(i,a){1&i&&t.GkF(0)}function cu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",12),t.YNc(1,ou,1,2,"ng-template",null,13,t.W1O),t.YNc(3,lu,1,0,"ng-container",5),t._UZ(4,"stream-notification-list"),t.TgZ(5,"div",14)(6,"div",15)(7,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.modalClosed())}),t._uU(8," streamChat.Cancel "),t.qZA(),t.TgZ(9,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendClicked())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendClicked())}),t._uU(10," streamChat.Send "),t.qZA()()()()}if(2&i){const e=t.MAs(2),n=t.oxw(2);t.xp6(3),t.Q6J("ngTemplateOutlet",n.messageInputTemplate||e)("ngTemplateOutletContext",n.getMessageInputContext())}}function uu(i,a){if(1&i&&t.YNc(0,cu,11,2,"div",11),2&i){const e=t.oxw();t.Q6J("ngIf",e.isEditModalOpen)}}function du(i,a){1&i&&t.Hsn(0,1,["*ngIf","isActiveThread$ | async"])}function hu(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3),t.Hsn(2),t.qZA(),t.YNc(3,du,1,0,"ng-content",4),t.ALo(4,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,e.isActiveThread$))}}function pu(i,a){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"stream-icon",8),t.TgZ(2,"p",9),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",10),t._UZ(6,"stream-notification-list"),t.qZA()()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"streamChat.No chats here yet\u2026")," "))}function gu(i,a){1&i&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"div",13),t.TgZ(3,"div",14),t._UZ(4,"div",15)(5,"div",16),t.qZA()(),t.TgZ(6,"div",17)(7,"div",18),t._UZ(8,"div",19),t.TgZ(9,"div",20),t._UZ(10,"div",21),t.TgZ(11,"div",22),t._UZ(12,"div",23)(13,"div",24),t.qZA()()(),t.TgZ(14,"div",18),t._UZ(15,"div",19),t.TgZ(16,"div",20),t._UZ(17,"div",21),t.TgZ(18,"div",22),t._UZ(19,"div",23)(20,"div",24),t.qZA()()(),t.TgZ(21,"div",18),t._UZ(22,"div",19),t.TgZ(23,"div",20),t._UZ(24,"div",21),t.TgZ(25,"div",22),t._UZ(26,"div",23)(27,"div",24),t.qZA()()()(),t.TgZ(28,"div",25),t._UZ(29,"div",26)(30,"div",27),t.qZA()())}function mu(i,a){if(1&i&&(t.YNc(0,pu,7,3,"div",5),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,gu,31,0,"div",6),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",!1===t.lcZ(1,2,e.isInitializing$)&&(!0===t.lcZ(2,4,e.isError$)||!1===t.lcZ(3,6,e.isActiveChannel$))),t.xp6(4),t.Q6J("ngIf",!0===t.lcZ(5,8,e.isInitializing$)&&!1===t.lcZ(6,10,e.isError$)&&!1===t.lcZ(7,12,e.isActiveChannel$))}}const fu=["*",[["","name","thread"]]],_u=["*",'[name="thread"]'];function vu(i,a){1&i&&t.GkF(0)}function Cu(i,a){if(1&i&&(t.TgZ(0,"p",9),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.xi3(2,2,"streamChat.{{ memberCount }} members",e.memberCountParam)," ",e.canReceiveConnectEvents?t.xi3(3,5,"streamChat.{{ watcherCount }} online",e.watcherCountParam):""," ")}}function yu(i,a){1&i&&t.GkF(0)}function bu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,yu,1,0,"ng-container",6),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.channelActionsTemplate)("ngTemplateOutletContext",e.getChannelActionsContext())}}function wu(i,a){if(1&i&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.unreadCount," ")}}const is=["container"];function Du(i,a){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"stream-icon",14),t.TgZ(2,"p",15),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"streamChat.You have no channels currently")," "))}function Tu(i,a){1&i&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"streamChat.You have no channels currently")," "))}function xu(i,a){1&i&&t._UZ(0,"stream-channel-preview",20),2&i&&t.Q6J("channel",a.channel)}function Su(i,a){1&i&&t.GkF(0)}function Mu(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.YNc(1,xu,1,1,"ng-template",null,17,t.W1O),t.TgZ(3,"div",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.channelSelected())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.channelSelected())}),t.YNc(4,Su,1,0,"ng-container",19),t.qZA(),t.BQk()}if(2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(2);t.xp6(4),t.Q6J("ngTemplateOutlet",s.customChannelPreviewTemplate||n)("ngTemplateOutletContext",s.getChannelPreviewContext(e))}}function ku(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Load more")))}function Au(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder")}function Ou(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreChannels())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreChannels())}),t.TgZ(1,"button",22),t.YNc(2,ku,3,3,"span",23),t.YNc(3,Au,1,0,"ng-template",null,24,t.W1O),t.qZA()()}if(2&i){const e=t.MAs(4),n=t.oxw(2);t.xp6(1),t.Q6J("disabled",n.isLoadingMoreChannels),t.xp6(1),t.Q6J("ngIf",!n.isLoadingMoreChannels)("ngIfElse",e)}}function Eu(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,Du,5,3,"div",9),t.ALo(3,"async"),t.YNc(4,Tu,3,3,"p",10),t.ALo(5,"async"),t.Hsn(6),t.YNc(7,Mu,5,2,"ng-container",11),t.ALo(8,"async"),t.YNc(9,Ou,5,3,"div",12),t.ALo(10,"async"),t.Hsn(11,1),t.qZA()()),2&i){const e=t.oxw();let n,s;t.xp6(2),t.Q6J("ngIf",!(null!=(n=t.lcZ(3,5,e.channels$))&&n.length)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=t.lcZ(5,7,e.channels$))&&s.length)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(8,9,e.channels$))("ngForTrackBy",e.trackByChannelId),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,e.hasMoreChannels$))}}function Iu(i,a){1&i&&t.GkF(0)}function Fu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Iu,1,0,"ng-container",26),t.BQk()),2&i){t.oxw(2);const e=t.MAs(10);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Lu(i,a){1&i&&t.GkF(0)}function Zu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Lu,1,0,"ng-container",26),t.BQk()),2&i){t.oxw(2);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Uu(i,a){if(1&i&&(t.YNc(0,Fu,2,1,"ng-container",25),t.ALo(1,"async"),t.YNc(2,Zu,2,1,"ng-container",25),t.ALo(3,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,e.isError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,e.isInitializing$))}}function Ru(i,a){1&i&&t.GkF(0)}function Bu(i,a){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,Ru,1,0,"ng-container",26),t.TgZ(2,"div",28),t._UZ(3,"stream-icon-placeholder",29),t.TgZ(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()),2&i){t.oxw();const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(4),t.Oqu(t.lcZ(6,3,"streamChat.Connection error")),t.xp6(3),t.hij(" ",t.lcZ(9,5,"streamChat.Error connecting to chat, refresh the page to try again.")," ")}}function Pu(i,a){1&i&&t.GkF(0)}function Nu(i,a){1&i&&t.GkF(0)}function Hu(i,a){1&i&&t.GkF(0)}function ju(i,a){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,Pu,1,0,"ng-container",26),t.YNc(2,Nu,1,0,"ng-container",26),t.YNc(3,Hu,1,0,"ng-container",26),t.qZA()),2&i){t.oxw();const e=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function $u(i,a){1&i&&(t.TgZ(0,"div",31),t._UZ(1,"div",32),t.TgZ(2,"div",33),t._UZ(3,"div",34)(4,"div",35),t.qZA()())}const Yu=[[["","channel-list-top",""]],[["","channel-list-bottom",""]]],qu=["[channel-list-top]","[channel-list-bottom]"],zu=["selectorContainer"],Ju=["selectorTooltip"];function Vu(i,a){if(1&i&&(t.TgZ(0,"li",6),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,7)(3,"div",8)(4,"span"),t._uU(5),t.qZA()()(),t.TgZ(6,"span",9),t._uU(7),t.qZA(),t.TgZ(8,"span",10),t._uU(9),t.qZA()()),2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(2);t.ekj("str-chat__message-reaction-own",s.isOwnReaction(e)),t.Q6J("popper",n)("popperTrigger",s.popperTriggerHover)("popperPlacement",s.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(5),t.hij(" ",s.getUsersByReaction(e)," "),t.xp6(2),t.hij(" ",s.getEmojiByReaction(e),"\xa0 "),t.xp6(2),t.hij(" ",s.messageReactionCounts[e]," ")}}function Qu(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"ul",3),t.YNc(2,Vu,10,10,"li",4),t.TgZ(3,"li")(4,"span",5),t._uU(5),t.qZA()()()()),2&i){const e=t.oxw();t.ekj("str-chat__reaction-list--reverse",!0)("str-chat__reaction-list-hidden",e.isSelectorOpen),t.xp6(2),t.Q6J("ngForOf",e.existingReactions)("ngForTrackBy",e.trackByMessageReaction),t.xp6(3),t.Oqu(e.reactionsCount)}}const Gu=function(i,a){return{left:i,visibility:a}},Wu=function(i){return{left:i}};function Ku(i,a){if(1&i&&(t.TgZ(0,"div",16,17),t._UZ(2,"div",18),t.TgZ(3,"span",19),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.Q6J("ngStyle",t.WLB(3,Gu,(null==e.tooltipPositions?null:e.tooltipPositions.tooltip)+"px",e.tooltipPositions?"visible":"hidden")),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,Wu,(null==e.tooltipPositions?null:e.tooltipPositions.arrow)+"px")),t.xp6(2),t.hij(" ",e.tooltipText," ")}}function Xu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())})("mouseenter",function(s){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.showTooltip(s,r))})("mouseleave",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())}),t._UZ(1,"stream-avatar-placeholder",25),t.qZA()}if(2&i){const e=a.ngIf,n=t.oxw().$implicit;t.Q2q("data-testid","",n,"-last-user"),t.xp6(1),t.Q2q("data-testid","",n,"-avatar"),t.Q6J("imageUrl",e.image)("name",e.name||e.id)("size",20)}}function ed(i,a){if(1&i&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q2q("data-testid","",e,"-reaction-count"),t.xp6(1),t.hij(" ",n.messageReactionCounts[e]," ")}}function td(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",20),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.react(r))})("keyup.enter",function(){const r=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.react(r))}),t.YNc(1,Xu,2,5,"div",21),t.TgZ(2,"span",22),t._uU(3),t.qZA(),t.YNc(4,ed,2,2,"span",23),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.ekj("str-chat__message-reactions-option-selected",n.isOwnReaction(e)),t.xp6(1),t.Q6J("ngIf",n.getLatestUserByReaction(e)),t.xp6(2),t.hij(" ",n.getEmojiByReaction(e)," "),t.xp6(1),t.Q6J("ngIf",n.messageReactionCounts[e]&&n.messageReactionCounts[e]>0)}}function nd(i,a){if(1&i&&(t.TgZ(0,"div",11,12),t.YNc(2,Ku,5,8,"div",13),t.TgZ(3,"ul",14),t.YNc(4,td,5,5,"li",15),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.tooltipText),t.xp6(2),t.Q6J("ngForOf",e.reactionOptions)("ngForTrackBy",e.trackByMessageReaction)}}function id(i,a){1&i&&t.GkF(0)}function sd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,id,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function ad(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-actions-box",29),t.NdJ("displayedActionsCount",function(s){const o=t.CHM(e).displayedActionsCountChaneHanler;return t.KtG(o(s))})("isEditing",function(s){const o=t.CHM(e).isEditingChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.isMine,s=a.enabledActions,r=a.message;t.Q6J("isOpen",a.isOpen)("isMine",n)("enabledActions",s)("message",r)}}function rd(i,a){1&i&&t.GkF(0)}function od(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isActionBoxOpen=!s.isActionBoxOpen)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isActionBoxOpen=!s.isActionBoxOpen)}),t._UZ(1,"stream-icon-placeholder",31),t.qZA()}}function ld(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setAsActiveParentMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setAsActiveParentMessage())}),t._UZ(1,"stream-icon-placeholder",33),t.qZA()}}function cd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isReactionSelectorOpen=!s.isReactionSelectorOpen)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isReactionSelectorOpen=!s.isReactionSelectorOpen)}),t._UZ(1,"stream-icon-placeholder",35),t.qZA()}}function ud(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22,23)(3,"popper-content",null,24),t.YNc(5,ad,1,4,"ng-template",null,25,t.W1O),t.YNc(7,rd,1,0,"ng-container",16),t.qZA(),t.YNc(8,od,2,0,"div",26),t.qZA(),t.YNc(9,ld,2,0,"div",27),t.YNc(10,cd,2,0,"div",28),t.qZA()),2&i){const e=t.MAs(4),n=t.MAs(6),s=t.oxw(3);t.ekj("str-chat__message-edit-in-progress",s.isEditing),t.xp6(1),t.ekj("str-chat-angular__message-simple__actions__action--options--editing",s.isEditing),t.Q6J("popper",e)("popperTrigger",s.popperTriggerClick)("popperPlacement",s.popperPlacementAuto)("popperHideOnScroll",!0)("popperHideOnClickOutside",!0)("popperHideOnMouseLeave",!1),t.xp6(6),t.Q6J("ngTemplateOutlet",s.messageActionsBoxTemplate||n)("ngTemplateOutletContext",s.getMessageActionsBoxContext()),t.xp6(1),t.Q6J("ngIf",s.visibleMessageActionsCount>0),t.xp6(1),t.Q6J("ngIf",-1!==s.enabledMessageActions.indexOf("send-reply")&&"main"===s.mode),t.xp6(1),t.Q6J("ngIf",s.canReactToMessage)}}function dd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-reactions",36),t.NdJ("isSelectorOpenChange",function(s){const o=t.CHM(e).isSelectorOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.latestReactions,s=a.isSelectorOpen,r=a.messageId,o=a.ownReactions;t.Q6J("messageReactionCounts",a.messageReactionCounts)("latestReactions",n)("isSelectorOpen",s)("messageId",r)("ownReactions",o)}}function hd(i,a){1&i&&t.GkF(0)}function pd(i,a){1&i&&t.GkF(0)}function gd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,pd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function md(i,a){1&i&&t.GkF(0)}function fd(i,a){1&i&&t.GkF(0)}function _d(i,a){if(1&i&&(t.ynx(0),t.YNc(1,fd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(4);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function vd(i,a){1&i&&(t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"streamChat.Error \xb7 Unsent")," "))}function Cd(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,1,403===(null==e.message?null:e.message.errorStatusCode)?"streamChat.Message Failed \xb7 Unauthorized":"streamChat.Message Failed \xb7 Click to try again")," ")}}function yd(i,a){if(1&i&&t._UZ(0,"span",47),2&i){const e=t.oxw().$implicit;t.Q6J("innerHTML",e.content,t.oJD)}}function bd(i,a){if(1&i&&(t.TgZ(0,"span",49),t._uU(1),t.qZA()),2&i){const e=a.content;t.xp6(1),t.Oqu(e)}}function wd(i,a){1&i&&t.GkF(0)}function Dd(i,a){if(1&i&&(t.YNc(0,bd,2,1,"ng-template",null,48,t.W1O),t.YNc(2,wd,1,0,"ng-container",16)),2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(4);t.xp6(2),t.Q6J("ngTemplateOutlet",s.mentionTemplate||e)("ngTemplateOutletContext",s.getMentionContext(n))}}function Td(i,a){if(1&i&&(t.ynx(0),t.YNc(1,yd,1,1,"span",45),t.YNc(2,Dd,3,2,"ng-template",null,46,t.W1O),t.BQk()),2&i){const e=a.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf","text"===e.type)("ngIfElse",n)}}function xd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",37)(1,"div",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG("failed"===(null==s.message?null:s.message.status)&&403!==(null==s.message?null:s.message.errorStatusCode)?s.resendMessage():void 0)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG("failed"===(null==s.message?null:s.message.status)&&403!==(null==s.message?null:s.message.errorStatusCode)?s.resendMessage():void 0)}),t.YNc(2,md,1,0,"ng-container",20),t.YNc(3,_d,2,1,"ng-container",10),t.YNc(4,vd,3,3,"div",39),t.YNc(5,Cd,3,3,"div",40),t.TgZ(6,"div",41)(7,"p"),t.YNc(8,Td,4,2,"ng-container",42),t.qZA()()()()}if(2&i){const e=t.oxw(3),n=t.MAs(8);t.xp6(1),t.ekj("str-chat__message-light-text-inner--has-attachment",e.hasAttachment),t.xp6(1),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("ngIf",e.hasAttachment&&(null==e.message?null:e.message.quoted_message)),t.xp6(1),t.Q6J("ngIf","error"===(null==e.message?null:e.message.type)),t.xp6(1),t.Q6J("ngIf","failed"===(null==e.message?null:e.message.status)),t.xp6(3),t.Q6J("ngForOf",e.messageTextParts)}}function Sd(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",50)}function Md(i,a){1&i&&t.GkF(0)}function kd(i,a){1&i&&t.GkF(0)}function Ad(i,a){1&i&&t.GkF(0)}function Od(i,a){1&i&&t.GkF(0)}const ss=function(){return{position:"inside-message-bubble"}},Ed=function(i){return{position:"outside-message-bubble",message:i}},Id=function(){return{position:"outside-message-bubble"}};function Fd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,sd,2,1,"ng-container",10),t._UZ(2,"stream-avatar-placeholder",11),t.TgZ(3,"div",12),t.YNc(4,ud,11,15,"div",13),t.TgZ(5,"div",14),t.YNc(6,dd,1,5,"ng-template",null,15,t.W1O),t.YNc(8,hd,1,0,"ng-container",16),t.qZA(),t.TgZ(9,"div",17),t.YNc(10,gd,2,1,"ng-container",10),t.YNc(11,xd,9,7,"div",18),t.YNc(12,Sd,1,0,"stream-icon-placeholder",19),t.qZA(),t.YNc(13,Md,1,0,"ng-container",16),t.YNc(14,kd,1,0,"ng-container",16),t.qZA(),t.YNc(15,Ad,1,0,"ng-container",16),t.YNc(16,Od,1,0,"ng-container",16),t.BQk()),2&i){const e=t.MAs(7),n=t.oxw(2),s=t.MAs(14),r=t.MAs(10);t.xp6(1),t.Q6J("ngIf","1"===n.themeVersion),t.xp6(1),t.Q6J("imageUrl",null==n.message||null==n.message.user?null:n.message.user.image)("name",(null==n.message||null==n.message.user?null:n.message.user.name)||(null==n.message||null==n.message.user?null:n.message.user.id))("user",(null==n.message?null:n.message.user)||void 0),t.xp6(2),t.Q6J("ngIf",n.areOptionsVisible),t.xp6(4),t.Q6J("ngTemplateOutlet",n.messageReactionsTemplate||e)("ngTemplateOutletContext",n.getMessageReactionsContext()),t.xp6(1),t.Jzz("transform: ","opened"===n.imageAttachmentModalState?"none":"translate3d(0, 0, 0)",""),t.xp6(1),t.Q6J("ngIf",n.hasAttachment&&!(null!=n.message&&n.message.quoted_message)),t.xp6(1),t.Q6J("ngIf",(null==n.message?null:n.message.text)||(null==n.message?null:n.message.quoted_message)&&n.hasAttachment),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.DdM(21,ss)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(22,ss)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(23,Ed,n.message)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(25,Id))}}function Ld(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Fd,17,26,"ng-container",2),t.BQk()),2&i){const e=t.oxw(),n=t.MAs(6);t.xp6(1),t.Q6J("ngIf","system"!==(null==e.message?null:e.message.type))("ngIfElse",n)}}function Zd(i,a){1&i&&(t.TgZ(0,"div",51)(1,"div",52),t._uU(2," streamChat.This message was deleted... "),t.qZA()())}function Ud(i,a){if(1&i&&(t.TgZ(0,"div",53)(1,"div",54),t._UZ(2,"div",55),t.TgZ(3,"p"),t._uU(4),t.qZA(),t._UZ(5,"div",55),t.qZA(),t.TgZ(6,"div",56),t._uU(7),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(null==e.message?null:e.message.text),t.xp6(3),t.hij(" ",e.parsedDate," ")}}function Rd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-list",63),t.NdJ("imageModalStateChange",function(s){const o=t.CHM(e).imageModalStateChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.attachments,s=a.parentMessageId;t.Q6J("messageId",a.messageId)("attachments",n)("parentMessageId",s)}}function Bd(i,a){1&i&&t.GkF(0)}function Pd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Rd,1,3,"ng-template",null,62,t.W1O),t.YNc(3,Bd,1,0,"ng-container",16),t.BQk()),2&i){const e=t.MAs(2),n=t.oxw(3);t.xp6(3),t.Q6J("ngTemplateOutlet",n.attachmentListTemplate||e)("ngTemplateOutletContext",n.getQuotedMessageAttachmentListContext())}}function Nd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",58),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.jumpToMessage(null==s.message?null:s.message.quoted_message.id,null==s.message||null==s.message.quoted_message?null:s.message.quoted_message.parent_id))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.jumpToMessage(null==s.message?null:s.message.quoted_message.id,null==s.message||null==s.message.quoted_message?null:s.message.quoted_message.parent_id))}),t._UZ(1,"stream-avatar-placeholder",59),t.TgZ(2,"div",60),t.YNc(3,Pd,4,2,"ng-container",10),t._UZ(4,"div",61),t.qZA()()}if(2&i){const e=t.oxw(2);t.ekj("mine",e.isSentByCurrentUser),t.xp6(1),t.Q6J("imageUrl",null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.image)("name",(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.name)||(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.id))("size",20)("user",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.attachments)&&(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.attachments?null:e.message.quoted_message.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.translation)||(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.html)||(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.text),t.oJD)}}function Hd(i,a){if(1&i&&t.YNc(0,Nd,5,8,"div",57),2&i){const e=t.oxw();t.Q6J("ngIf",null==e.message?null:e.message.quoted_message)}}function jd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayOriginalMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayOriginalMessage())}),t._uU(1," streamChat.See original (automatically translated) "),t.qZA()}}function $d(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayTranslatedMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayTranslatedMessage())}),t._uU(1," streamChat.See translation "),t.qZA()}}function Yd(i,a){if(1&i&&(t.TgZ(0,"div",68),t.YNc(1,jd,2,0,"button",69),t.YNc(2,$d,2,0,"button",70),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","translation"===e.displayedMessageTextContent),t.xp6(1),t.Q6J("ngIf","original"===e.displayedMessageTextContent)}}function qd(i,a){1&i&&t.GkF(0)}function zd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,qd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Jd(i,a){if(1&i&&(t.TgZ(0,"span",73),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",null!=e.message&&null!=e.message.user&&e.message.user.name?null==e.message||null==e.message.user?null:e.message.user.name:null==e.message||null==e.message.user?null:e.message.user.id," ")}}function Vd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Yd,3,2,"div",64),t.TgZ(2,"div",65),t.YNc(3,zd,2,1,"ng-container",10),t.YNc(4,Jd,2,1,"span",66),t.TgZ(5,"span",67),t._uU(6),t.qZA()(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shouldDisplayTranslationNotice),t.xp6(2),t.Q6J("ngIf","2"===e.themeVersion),t.xp6(1),t.Q6J("ngIf",!e.isSentByCurrentUser),t.xp6(2),t.hij(" ",e.parsedDate," ")}}function Qd(i,a){if(1&i&&t.YNc(0,Vd,7,4,"ng-container",10),2&i){const e=a.position,n=t.oxw();t.Q6J("ngIf","inside-message-bubble"===e&&"1"===n.themeVersion||"outside-message-bubble"===e&&"2"===n.themeVersion)}}function Gd(i,a){1&i&&t.GkF(0)}function Wd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Gd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Kd(i,a){1&i&&t.GkF(0)}function Xd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Kd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(2);const e=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function eh(i,a){if(1&i&&t.YNc(0,Xd,2,1,"ng-container",2),2&i){t.oxw();const e=t.MAs(5),n=t.oxw(2);t.Q6J("ngIf","main"===n.mode&&n.isMessageDeliveredAndRead&&n.canDisplayReadStatus)("ngIfElse",e)}}function th(i,a){1&i&&t.GkF(0)}function nh(i,a){if(1&i&&t.YNc(0,th,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(7),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customDeliveredStatusTemplate||e)("ngTemplateOutletContext",n.getDeliveredStatusContext())}}function ih(i,a){if(1&i&&(t.TgZ(0,"span",82),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",83),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"stream-icon-placeholder",84),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(4);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",t.lcZ(5,6,"streamChat.Delivered")," ")}}function sh(i,a){if(1&i&&t.YNc(0,ih,7,8,"span",81),2&i){const e=t.oxw(3);t.Q6J("ngIf","main"===e.mode)}}function ah(i,a){1&i&&t.GkF(0)}function rh(i,a){if(1&i&&t.YNc(0,ah,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(11),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customSendingStatusTemplate||e)("ngTemplateOutletContext",n.getSendingStatusContext())}}function oh(i,a){if(1&i&&(t.TgZ(0,"span",85),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",83),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"stream-loading-indicator-placeholder",86),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",t.lcZ(5,6,"streamChat.Sending...")," ")}}function lh(i,a){1&i&&t.GkF(0)}function ch(i,a){if(1&i&&t.YNc(0,lh,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(15),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customReadStatusTemplate||e)("ngTemplateOutletContext",n.getReadStatusContext())}}function uh(i,a){if(1&i&&(t.TgZ(0,"span",91),t._uU(1),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",null==e.message?null:e.message.readBy.length," ")}}function dh(i,a){if(1&i&&(t.TgZ(0,"span",87),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",88),t._uU(4),t.qZA()(),t._UZ(5,"stream-avatar-placeholder",89),t.YNc(6,uh,2,1,"span",90),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",n.readByText," "),t.xp6(1),t.Q6J("size",15)("imageUrl",null==n.lastReadUser?null:n.lastReadUser.image)("name",(null==n.lastReadUser?null:n.lastReadUser.name)||(null==n.lastReadUser?null:n.lastReadUser.id))("user",n.lastReadUser),t.xp6(1),t.Q6J("ngIf",n.isReadByMultipleUsers)}}function hh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Wd,2,1,"ng-container",2),t.YNc(2,eh,1,2,"ng-template",null,74,t.W1O),t.YNc(4,nh,1,2,"ng-template",null,75,t.W1O),t.YNc(6,sh,1,1,"ng-template",null,76,t.W1O),t.YNc(8,rh,1,2,"ng-template",null,77,t.W1O),t.YNc(10,oh,7,8,"ng-template",null,78,t.W1O),t.YNc(12,ch,1,2,"ng-template",null,79,t.W1O),t.YNc(14,dh,7,11,"ng-template",null,80,t.W1O),t.BQk()),2&i){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf","sending"===(null==n.message?null:n.message.status))("ngIfElse",e)}}function ph(i,a){if(1&i&&t.YNc(0,hh,16,2,"ng-container",10),2&i){const e=t.oxw();t.Q6J("ngIf",e.isSentByCurrentUser&&(e.isLastSentMessage&&"received"===(null==e.message?null:e.message.status)||"sending"===(null==e.message?null:e.message.status)))}}function gh(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",97)}function mh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",95),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.setAsActiveParentMessage())}),t.YNc(1,gh,1,0,"stream-icon-placeholder",96),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","1"===e.themeVersion),t.xp6(1),t.hij(" ",1===(null==e.message?null:e.message.reply_count)?t.lcZ(3,2,"streamChat.1 reply"):t.xi3(4,4,"streamChat.{{ replyCount }} replies",e.replyCountParam)," ")}}function fh(i,a){if(1&i&&(t.TgZ(0,"div",93),t.YNc(1,mh,5,7,"button",94),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shouldDisplayThreadLink)}}function _h(i,a){if(1&i&&t.YNc(0,fh,2,1,"div",92),2&i){const e=a.position,n=t.oxw();t.Q6J("ngIf","inside-message-bubble"===e&&"1"===n.themeVersion||"outside-message-bubble"===e&&"2"===n.themeVersion)}}function vh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-list",63),t.NdJ("imageModalStateChange",function(s){const o=t.CHM(e).imageModalStateChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.attachments,s=a.parentMessageId;t.Q6J("messageId",a.messageId)("attachments",n)("parentMessageId",s)}}function Ch(i,a){1&i&&t.GkF(0)}function yh(i,a){if(1&i&&(t.YNc(0,vh,1,3,"ng-template",null,62,t.W1O),t.YNc(2,Ch,1,0,"ng-container",16)),2&i){const e=t.MAs(1),n=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",n.attachmentListTemplate||e)("ngTemplateOutletContext",n.getAttachmentListContext())}}const bh=["input"];function wh(i,a){1&i&&t.GkF(0)}const as=function(i){return{item:i}};function Dh(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,wh,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw().item,n=t.oxw(),s=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",n.mentionAutocompleteItemTemplate||s)("ngTemplateOutletContext",t.VKq(2,as,e))}}function Th(i,a){1&i&&t.GkF(0)}function xh(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,Th,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw().item,n=t.oxw(),s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",n.commandAutocompleteItemTemplate||s)("ngTemplateOutletContext",t.VKq(2,as,e))}}function Sh(i,a){1&i&&(t.TgZ(0,"div",5),t.YNc(1,Dh,2,4,"div",6),t.YNc(2,xh,2,4,"div",6),t.qZA()),2&i&&(t.Q6J("ngSwitch",a.item.type),t.xp6(1),t.Q6J("ngSwitchCase","mention"),t.xp6(1),t.Q6J("ngSwitchCase","command"))}function Mh(i,a){if(1&i&&(t.TgZ(0,"div",9)(1,"span",10)(2,"strong",11),t._uU(3),t.qZA(),t.TgZ(4,"span",12),t._uU(5),t.qZA()(),t._UZ(6,"br"),t.qZA()),2&i){const e=a.item;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.AsE("/",e.name," ",e.args,"")}}function kh(i,a){1&i&&(t.TgZ(0,"div",17),t._uU(1,"@"),t.qZA())}function Ah(i,a){if(1&i&&(t.TgZ(0,"div",13),t._UZ(1,"stream-avatar-placeholder",14),t.TgZ(2,"span",15),t._uU(3),t.qZA(),t.YNc(4,kh,2,0,"div",16),t.qZA()),2&i){const e=a.item,n=t.oxw();t.xp6(1),t.Akn("height: "+n.themeVersion=="2"?56:"20px"),t.Q6J("size","2"===n.themeVersion?56:20)("imageUrl",e.image||(null==e.user?null:e.user.image))("name",e.autocompleteLabel)("user",e.user||e),t.xp6(2),t.Oqu(e.autocompleteLabel),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion)}}const Oh=["scrollContainer"],Eh=["parentMessageElement"];function Ih(i,a){1&i&&t.GkF(0)}const rs=function(i){return{message:i}};function Fh(i,a){if(1&i&&(t.TgZ(0,"li",13,14),t.YNc(2,Ih,1,0,"ng-container",9),t.TgZ(3,"div",15),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA()()),2&i){const e=t.oxw(),n=t.MAs(15);t.xp6(2),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(8,rs,e.parentMessage)),t.xp6(2),t.hij(" ",1===(null==e.parentMessage?null:e.parentMessage.reply_count)?t.lcZ(5,3,"streamChat.1 reply"):t.xi3(6,5,"streamChat.{{ replyCount }} replies",e.replyCountParam)," ")}}function Lh(i,a){1&i&&t._UZ(0,"stream-loading-indicator",16)}function Zh(i,a){1&i&&t.GkF(0)}function Uh(i,a){if(1&i&&(t.TgZ(0,"li",17),t.YNc(1,Zh,1,0,"ng-container",9),t.qZA()),2&i){const e=a.$implicit,n=a.index,s=t.oxw(),r=t.MAs(15);t.Gre("str-chat__li str-chat__li--",s.groupStyles[n],""),t.s9C("id",e.id),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(6,rs,e))}}function Rh(i,a){1&i&&t._UZ(0,"stream-loading-indicator",18)}const Bh=function(i){return{user:i}},Ph=function(i){return{users:i}};function Nh(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23)(3,"span",23)(4,"span",23),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()()),2&i){const e=t.oxw().ngIf,n=t.oxw(2);t.xp6(6),t.hij(" ",1===e.length?t.xi3(7,1,"streamChat.user is typing",t.VKq(7,Bh,n.getTypingIndicatorText(e))):t.xi3(8,4,"streamChat.users are typing",t.VKq(9,Ph,n.getTypingIndicatorText(e)))," ")}}function Hh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Nh,9,11,"div",20),t.BQk()),2&i){const e=a.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function jh(i,a){1&i&&(t.YNc(0,Hh,2,1,"ng-container",19),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.usersTyping$))}function $h(i,a){1&i&&t.GkF(0)}function Yh(i,a){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessageCount," ")}}function qh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.jumpToLatestMessage())})("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.jumpToLatestMessage())}),t._UZ(1,"stream-icon",26),t.YNc(2,Yh,2,1,"div",27),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon","bottom-to-top"===e.direction?"arrow-down":"arrow-up"),t.xp6(1),t.Q6J("ngIf",e.unreadMessageCount>0)}}function zh(i,a){if(1&i&&t._UZ(0,"stream-message",30),2&i){const n=a.isLastSentMessage,s=a.enabledMessageActions,r=a.mode,o=a.isHighlighted;t.Q6J("message",a.message)("isLastSentMessage",n)("enabledMessageActions",s)("mode",r)("isHighlighted",o)}}function Jh(i,a){1&i&&t.GkF(0)}function Vh(i,a){if(1&i&&(t.YNc(0,zh,1,5,"ng-template",null,29,t.W1O),t.YNc(2,Jh,1,0,"ng-container",9)),2&i){const e=a.message,n=t.MAs(1),s=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",s.messageTemplate||n)("ngTemplateOutletContext",s.getMessageContext(e))}}let lt=(()=>{class i{constructor(){this.notificationsSubject=new y.X([]),this.notifications$=this.notificationsSubject.asObservable()}addTemporaryNotification(e,n="error",s=5e3,r,o){const l=this.createNotification(e,n,r,o),c=setTimeout(()=>this.removeNotification(l.id),s);return l.dismissFn=()=>{clearTimeout(c),this.removeNotification(l.id)},this.notificationsSubject.next([...this.notificationsSubject.getValue(),l]),l.dismissFn}addPermanentNotification(e,n="error",s,r){const o=this.createNotification(e,n,s,r);return this.notificationsSubject.next([...this.notificationsSubject.getValue(),o]),o.dismissFn}createNotification(e,n,s,r){const o=(new Date).getTime().toString()+Math.random().toString();return{id:o,["string"==typeof e?"text":"template"]:e,type:n,translateParams:s,templateContext:r,dismissFn:()=>this.removeNotification(o)}}removeNotification(e){const n=this.notificationsSubject.getValue(),s=n.findIndex(r=>r.id===e);-1!==s&&(n.splice(s,1),this.notificationsSubject.next([...n]))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Qe=(()=>{class i{constructor(e,n){this.ngZone=e,this.notificationService=n,this.notificationSubject=new L.t(1),this.connectionStateSubject=new L.t(1),this.appSettingsSubject=new y.X(void 0),this.pendingInvitesSubject=new y.X([]),this.userSubject=new L.t(1),this.subscriptions=[],this.events$=this.notificationSubject.asObservable(),this.connectionState$=this.connectionStateSubject.asObservable(),this.appSettings$=this.appSettingsSubject.asObservable(),this.pendingInvites$=this.pendingInvitesSubject.asObservable(),this.user$=this.userSubject.asObservable()}init(e,n,s){var r;return(0,w.mG)(this,void 0,void 0,function*(){let o;this.chatClient=bi.getInstance(e),yield this.ngZone.runOutsideAngular(()=>(0,w.mG)(this,void 0,void 0,function*(){const u="string"==typeof n?{id:n}:n;try{o="guest"===s?yield this.chatClient.setGuestUser(u):yield this.chatClient.connectUser(u,s)}catch(m){throw this.notificationService.addPermanentNotification("streamChat.Error connecting to chat, refresh the page to try again.","error"),m}this.userSubject.next(this.chatClient.user);const d="stream-chat-angular";this.chatClient.getUserAgent().includes(d)||this.chatClient.setUserAgent(`${d}-4.17.0-test.1-${this.chatClient.getUserAgent()}`)}));const l=yield this.chatClient.queryChannels({invite:"pending"},{},{user_id:null===(r=this.chatClient.user)||void 0===r?void 0:r.id});let c;return this.pendingInvitesSubject.next(l),this.appSettingsSubject.next(void 0),this.subscriptions.push(this.chatClient.on(u=>{this.updatePendingInvites(u),this.notificationSubject.next({eventType:u.type,event:u})})),this.subscriptions.push(this.chatClient.on("connection.changed",u=>{this.ngZone.run(()=>{const d=u.online;d?c&&c():c=this.notificationService.addPermanentNotification("streamChat.Connection failure, reconnecting now..."),this.connectionStateSubject.next(d?"online":"offline")})})),o})}disconnectUser(){return(0,w.mG)(this,void 0,void 0,function*(){this.pendingInvitesSubject.next([]),yield this.chatClient.disconnectUser(),this.userSubject.next(void 0),this.subscriptions.forEach(e=>e.unsubscribe())})}getAppSettings(){return(0,w.mG)(this,void 0,void 0,function*(){if(this.appSettingsSubject.getValue())return;const e=yield this.chatClient.getAppSettings();this.appSettingsSubject.next(e.app||{})})}flagMessage(e){return(0,w.mG)(this,void 0,void 0,function*(){yield this.chatClient.flagMessage(e)})}autocompleteUsers(e){return(0,w.mG)(this,void 0,void 0,function*(){return e?(yield this.chatClient.queryUsers({$or:[{id:{$autocomplete:e}},{name:{$autocomplete:e}}],id:{$ne:this.chatClient.userID}})).users:[]})}updatePendingInvites(e){var n,s,r;if((null===(s=null===(n=e.member)||void 0===n?void 0:n.user)||void 0===s?void 0:s.id)===(null===(r=this.chatClient.user)||void 0===r?void 0:r.id)&&e.channel){const o=this.pendingInvitesSubject.getValue();if("notification.invited"===e.type)this.pendingInvitesSubject.next([...o,e.channel]);else if("notification.invite_accepted"===e.type||"notification.invite_rejected"===e.type){const l=o.findIndex(c=>{var u;return c?.cid===(null===(u=e.channel)||void 0===u?void 0:u.cid)});-1!==l&&(o.splice(l,1),this.pendingInvitesSubject.next([...o]))}}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.R0b),t.LFG(lt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ct=(i,a,e)=>{var n,s;const r=e?.language||(null===(n=a?.data)||void 0===n?void 0:n.auto_translation_language);if(r&&i?.i18n&&(null===(s=i?.user)||void 0===s?void 0:s.id)!==e?.id)return i.i18n[`${r}_text`]},dn=(i,a)=>{const e=[];return Object.keys(a.state.read).forEach(n=>{var s;a.state.read[n].last_read.getTime()>=i.created_at.getTime()&&(null===(s=i.user)||void 0===s?void 0:s.id)!==n&&e.push(a.state.read[n].user)}),e};let Be=(()=>{class i{constructor(e,n,s){this.chatClientService=e,this.ngZone=n,this.notificationService=s,this.channelsSubject=new y.X(void 0),this.activeChannelSubject=new y.X(void 0),this.activeChannelMessagesSubject=new y.X([]),this.activeChannelPinnedMessagesSubject=new y.X([]),this.hasMoreChannelsSubject=new L.t(1),this.activeChannelSubscriptions=[],this.activeParentMessageIdSubject=new y.X(void 0),this.activeThreadMessagesSubject=new y.X([]),this.jumpToMessageSubject=new y.X({id:void 0,parentId:void 0}),this.latestMessageDateByUserByChannelsSubject=new y.X({}),this.messagePageSize=25,this.messageToQuoteSubject=new y.X(void 0),this.usersTypingInChannelSubject=new y.X([]),this.usersTypingInThreadSubject=new y.X([]),this._shouldMarkActiveChannelAsRead=!0,this.isStateRecoveryInProgress=!1,this.channelListSetter=r=>{const o=this.channelsSubject.getValue()||[],l=r.filter(u=>!o.find(d=>d.cid===u.cid)),c=o.filter(u=>!r?.find(d=>d.cid===u.cid));this.addChannelsFromNotification(l),this.removeChannelsFromChannelList(c.map(u=>u.cid))},this.messageListSetter=r=>{this.activeChannelMessagesSubject.next(r)},this.threadListSetter=r=>{this.activeThreadMessagesSubject.next(r)},this.parentMessageSetter=r=>{this.activeParentMessageIdSubject.next(r?.id)},this.channels$=this.channelsSubject.asObservable(),this.activeChannel$=this.activeChannelSubject.asObservable(),this.activeChannelMessages$=this.activeChannelMessagesSubject.pipe((0,b.U)(r=>{const o=this.activeChannelSubject.getValue();return r.map(l=>this.transformToStreamMessage(l,o))})),this.hasMoreChannels$=this.hasMoreChannelsSubject.asObservable(),this.activeParentMessageId$=this.activeParentMessageIdSubject.asObservable(),this.activeThreadMessages$=this.activeThreadMessagesSubject.pipe((0,b.U)(r=>{const o=this.activeChannelSubject.getValue();return r.map(l=>this.transformToStreamMessage(l,o))})),this.activeParentMessage$=(0,S.a)([this.activeChannelMessages$,this.activeParentMessageId$]).pipe((0,b.U)(([r,o])=>{if(o){return r.find(c=>c.id===o)||void this.setAsActiveParentMessage(void 0)}}),(0,Na.d)()),this.messageToQuote$=this.messageToQuoteSubject.asObservable(),this.jumpToMessage$=this.jumpToMessageSubject.asObservable(),this.usersTypingInChannel$=this.usersTypingInChannelSubject.asObservable(),this.usersTypingInThread$=this.usersTypingInThreadSubject.asObservable(),this.latestMessageDateByUserByChannels$=this.latestMessageDateByUserByChannelsSubject.asObservable(),this.activeChannelPinnedMessages$=this.activeChannelPinnedMessagesSubject.asObservable()}get shouldMarkActiveChannelAsRead(){return this._shouldMarkActiveChannelAsRead}set shouldMarkActiveChannelAsRead(e){var n;!this._shouldMarkActiveChannelAsRead&&e&&(null===(n=this.activeChannelSubject.getValue())||void 0===n||n.markRead()),this._shouldMarkActiveChannelAsRead=e}setAsActiveChannel(e){const n=this.activeChannelSubject.getValue();this.stopWatchForActiveChannelEvents(n),this.watchForActiveChannelEvents(e),this.activeChannelSubject.next(e),e.state.messages.forEach(s=>{s.readBy=dn(s,e),s.translation=ct(s,e,this.chatClientService.chatClient.user),s.quoted_message&&(s.quoted_message.translation=ct(s.quoted_message,e,this.chatClientService.chatClient.user))}),this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&e.markRead(),this.activeChannelMessagesSubject.next([...e.state.messages]),this.activeChannelPinnedMessagesSubject.next([...e.state.pinnedMessages]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.messageToQuoteSubject.next(void 0)}deselectActiveChannel(){const e=this.activeChannelSubject.getValue();e&&(this.stopWatchForActiveChannelEvents(e),this.activeChannelMessagesSubject.next([]),this.activeChannelSubject.next(void 0),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.latestMessageDateByUserByChannelsSubject.next({}),this.selectMessageToQuote(void 0),this.jumpToMessageSubject.next({id:void 0,parentId:void 0}),this.activeChannelPinnedMessagesSubject.next([]))}setAsActiveParentMessage(e,n="request"){var s;return(0,w.mG)(this,void 0,void 0,function*(){const r=this.messageToQuoteSubject.getValue();if(r&&r.parent_id&&this.messageToQuoteSubject.next(void 0),e){this.activeParentMessageIdSubject.next(e.id);const o=this.activeChannelSubject.getValue();if("request"===n){const l=yield o?.getReplies(e.id,{limit:null===(s=this.options)||void 0===s?void 0:s.message_limit});this.activeThreadMessagesSubject.next(l?.messages||[])}else this.activeThreadMessagesSubject.next(o?.state.threads[e.id]||[])}else{this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]);const o=this.jumpToMessageSubject.getValue();o&&o.parentId&&this.jumpToMessageSubject.next({id:void 0,parentId:void 0})}})}loadMoreMessages(e="older"){var n,s,r,o,l,c,u;return(0,w.mG)(this,void 0,void 0,function*(){const d=this.activeChannelSubject.getValue(),m=this.activeChannelMessagesSubject.getValue(),f=null===(n=m["older"===e?0:m.length-1])||void 0===n?void 0:n.id;"newer"===e&&(null===(s=d?.state)||void 0===s?void 0:s.latestMessages)===(null===(r=d?.state)||void 0===r?void 0:r.messages)||(yield d?.query({messages:{limit:null===(o=this.options)||void 0===o?void 0:o.message_limit,["older"===e?"id_lt":"id_gt"]:f},members:{limit:0},watchers:{limit:0}}),(null===(l=d?.data)||void 0===l?void 0:l.id)===(null===(u=null===(c=this.activeChannelSubject.getValue())||void 0===c?void 0:c.data)||void 0===u?void 0:u.id)&&this.activeChannelMessagesSubject.next([...d.state.messages]))})}loadMoreThreadReplies(e="older"){var n,s;return(0,w.mG)(this,void 0,void 0,function*(){if("newer"===e)return;const r=this.activeChannelSubject.getValue(),o=this.activeParentMessageIdSubject.getValue();if(!o)return;const l=this.activeThreadMessagesSubject.getValue(),c=null===(n=l["older"===e?0:l.length-1])||void 0===n?void 0:n.id;yield r?.getReplies(o,{limit:null===(s=this.options)||void 0===s?void 0:s.message_limit,["older"===e?"id_lt":"id_gt"]:c}),this.activeThreadMessagesSubject.next(r?.state.threads[o]||[])})}init(e,n,s,r=!0){return(0,w.mG)(this,void 0,void 0,function*(){this.filters=e,this.options=s||{offset:0,limit:25,state:!0,presence:!0,watch:!0,message_limit:this.messagePageSize},this.sort=n||{last_message_at:-1,updated_at:-1},this.shouldSetActiveChannel=r;try{const o=yield this.queryChannels(this.shouldSetActiveChannel);return this.clientEventsSubscription=this.chatClientService.events$.subscribe(l=>{this.handleNotification(l)}),o}catch(o){throw this.notificationService.addPermanentNotification("streamChat.Error loading channels","error"),o}})}reset(){var e;this.deselectActiveChannel(),this.channelsSubject.next(void 0),null===(e=this.clientEventsSubscription)||void 0===e||e.unsubscribe()}loadMoreChannels(){return(0,w.mG)(this,void 0,void 0,function*(){this.options.offset=this.channels.length,yield this.queryChannels(!1)})}addReaction(e,n,s){var r;return(0,w.mG)(this,void 0,void 0,function*(){yield null===(r=this.activeChannelSubject.getValue())||void 0===r?void 0:r.sendReaction(e,Object.assign({type:n},s))})}removeReaction(e,n){var s;return(0,w.mG)(this,void 0,void 0,function*(){yield null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.deleteReaction(e,n)})}sendMessage(e,n=[],s=[],r,o,l){return(0,w.mG)(this,void 0,void 0,function*(){const c=((i,a,e=[],n=[],s,r,o)=>{const l=`${i.id}-${Sn()}`;return Object.assign({__html:a,created_at:new Date,html:a,id:l,reactions:[],status:"sending",text:a,type:"regular",user:i,attachments:e,mentioned_users:n,parent_id:s,quoted_message_id:r},o)})(this.chatClientService.chatClient.user,e,n,s,r,o,l),u=this.activeChannelSubject.getValue();c.readBy=[],u.state.addMessageSorted(c,!0),yield this.sendMessageRequest(c,l)})}resendMessage(e){return(0,w.mG)(this,void 0,void 0,function*(){this.activeChannelSubject.getValue().state.addMessageSorted(Object.assign(Object.assign({},e),{errorStatusCode:void 0,status:"sending"}),!0),yield this.sendMessageRequest(e)})}updateMessage(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=Object.assign({},e);delete n.i18n,yield this.chatClientService.chatClient.updateMessage(n)})}deleteMessage(e){return(0,w.mG)(this,void 0,void 0,function*(){yield this.chatClientService.chatClient.deleteMessage(e.id)})}uploadAttachments(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=[],s=this.activeChannelSubject.getValue();return(yield Promise.allSettled(e.map(o=>"image"===o.type?this.customImageUploadRequest?this.customImageUploadRequest(o.file,s):s.sendImage(o.file,o.file.name,o.file.type):this.customFileUploadRequest?this.customFileUploadRequest(o.file,s):s.sendFile(o.file,o.file.name,o.file.type)))).forEach((o,l)=>{const c=e[l].file,u=e[l].type;n.push("fulfilled"===o.status?{file:c,type:u,state:"success",url:o.value.file,thumb_url:o.value.thumb_url}:{file:c,type:u,state:"error"})}),n})}deleteAttachment(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield"image"===e.type?this.customImageDeleteRequest?this.customImageDeleteRequest(e.url,n):n.deleteImage(e.url):this.customFileDeleteRequest?this.customFileDeleteRequest(e.url,n):n.deleteFile(e.url)})}autocompleteMembers(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();if(!n)return[];if(Object.keys(n.state.members).length<=100)return Object.values(n.state.members).filter(s=>{var r;return(null===(r=s.user)||void 0===r?void 0:r.id)!==this.chatClientService.chatClient.userID});{if(!e)return[];const s=yield n.queryMembers({name:{$autocomplete:e},id:{$ne:this.chatClientService.chatClient.userID}});return Object.values(s.members)}})}sendAction(e,n,s){return(0,w.mG)(this,void 0,void 0,function*(){const r=this.activeChannelSubject.getValue(),o=yield r.sendAction(e,n);o?.message?(r.state.addMessageSorted(Object.assign(Object.assign({},o.message),{status:"received"})),o.message.parent_id?this.activeThreadMessagesSubject.next([...r.state.threads[o.message.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages])):(r.state.removeMessage({id:e,parent_id:s}),s?this.activeThreadMessagesSubject.next(r.state.threads[this.activeParentMessageIdSubject.getValue()]):this.activeChannelMessagesSubject.next([...r.state.messages]))})}selectMessageToQuote(e){this.messageToQuoteSubject.next(e)}sendMessageRequest(e,n){var s;return(0,w.mG)(this,void 0,void 0,function*(){const r=this.activeChannelSubject.getValue(),o=!!e.parent_id;o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages]);try{const l=yield r.sendMessage(Object.assign({id:e.id,text:e.text,attachments:e.attachments,mentioned_users:null===(s=e.mentioned_users)||void 0===s?void 0:s.map(c=>c.id),parent_id:e.parent_id,quoted_message_id:e.quoted_message_id},n));l?.message&&(r.state.addMessageSorted(Object.assign(Object.assign({},l.message),{status:"received"}),!0),o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages]))}catch(l){const c=JSON.stringify(l),u=c?JSON.parse(c):{};r.state.addMessageSorted(Object.assign(Object.assign({},e),{errorStatusCode:u.status||void 0,status:"failed"}),!0),o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages])}})}jumpToMessage(e,n){return(0,w.mG)(this,void 0,void 0,function*(){const s=this.activeChannelSubject.getValue();try{yield s?.state.loadMessageIntoState(e,n);const r=s?.state.messages||[];if(this.activeChannelMessagesSubject.next([...r]),n){const o=r.find(l=>l.id===n);this.setAsActiveParentMessage(o,"state")}this.jumpToMessageSubject.next({id:e,parentId:n})}catch(r){throw this.notificationService.addTemporaryNotification("Message not found"),r}})}pinMessage(e){var n;return(0,w.mG)(this,void 0,void 0,function*(){try{yield null===(n=this.chatClientService.chatClient)||void 0===n?void 0:n.pinMessage(e),this.notificationService.addTemporaryNotification("Message pinned","success")}catch(s){throw this.notificationService.addTemporaryNotification("Error pinning message"),s}})}unpinMessage(e){var n;return(0,w.mG)(this,void 0,void 0,function*(){try{yield null===(n=this.chatClientService.chatClient)||void 0===n?void 0:n.unpinMessage(e),this.notificationService.addTemporaryNotification("Message unpinned","success")}catch(s){throw this.notificationService.addTemporaryNotification("Error removing message pin"),s}})}handleNotification(e){switch(e.eventType){case"connection.recovered":this.ngZone.run(()=>(0,w.mG)(this,void 0,void 0,function*(){if(!this.isStateRecoveryInProgress){this.isStateRecoveryInProgress=!0;try{this.options&&(this.options.offset=0),yield this.queryChannels(!1,!0),this.setAsActiveParentMessage(void 0),this.isStateRecoveryInProgress=!1}catch{this.isStateRecoveryInProgress=!1}}}));break;case"notification.message_new":this.ngZone.run(()=>{this.customNewMessageNotificationHandler?this.customNewMessageNotificationHandler(e,this.channelListSetter):this.handleNewMessageNotification(e)});break;case"notification.added_to_channel":this.ngZone.run(()=>{this.customAddedToChannelNotificationHandler?this.customAddedToChannelNotificationHandler(e,this.channelListSetter):this.handleAddedToChannelNotification(e)});break;case"notification.removed_from_channel":this.ngZone.run(()=>{this.customRemovedFromChannelNotificationHandler?this.customRemovedFromChannelNotificationHandler(e,this.channelListSetter):this.handleRemovedFromChannelNotification(e)})}}handleRemovedFromChannelNotification(e){this.removeChannelsFromChannelList([e.event.channel.cid])}handleNewMessageNotification(e){e.event.channel&&this.addChannelsFromNotification([e.event.channel])}handleAddedToChannelNotification(e){e.event.channel&&this.addChannelsFromNotification([e.event.channel])}addChannelsFromNotification(e){return(0,w.mG)(this,void 0,void 0,function*(){let n=[];const s=[];e.forEach(o=>{const l=this.chatClientService.chatClient.channel(o.type,o.id);s.push(l.watch()),n.push(l)}),yield Promise.all(s);const r=this.channelsSubject.getValue()||[];n=n.filter(o=>!r.find(l=>l.cid===o.cid)),n.length>0&&(n.forEach(o=>this.watchForChannelEvents(o)),this.channelsSubject.next([...n,...r]))})}removeChannelsFromChannelList(e){var n;const s=this.channels.filter(r=>!e.includes(r.cid||""));e.forEach(r=>{var o;null===(o=this.chatClientService.chatClient.activeChannels[r])||void 0===o||o.stopWatching()}),s.length<this.channels.length&&(this.channelsSubject.next(s),e.includes((null===(n=this.activeChannelSubject.getValue())||void 0===n?void 0:n.cid)||"")&&(s.length>0?this.setAsActiveChannel(s[0]):this.activeChannelSubject.next(void 0)))}watchForActiveChannelEvents(e){this.activeChannelSubscriptions.push(e.on("message.new",n=>{this.ngZone.run(()=>{n.message&&n.message.parent_id?this.activeThreadMessagesSubject.next([...e.state.threads[n.message.parent_id]]):this.activeChannelMessagesSubject.next([...e.state.messages]),this.activeChannel$.pipe((0,Mt.P)()).subscribe(s=>{this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&s?.markRead()}),this.updateLatestMessages(n)})})),this.activeChannelSubscriptions.push(e.on("message.updated",n=>this.messageUpdated(n))),this.activeChannelSubscriptions.push(e.on("message.deleted",n=>this.messageUpdated(n))),this.activeChannelSubscriptions.push(e.on("reaction.new",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("reaction.deleted",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("reaction.updated",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("message.read",n=>{this.ngZone.run(()=>{let s;this.activeChannelMessages$.pipe((0,Mt.P)()).subscribe(r=>{s=r[r.length-1]}),s&&n.user&&(s.readBy=dn(s,e),this.activeChannelMessagesSubject.next(this.activeChannelMessagesSubject.getValue()))})})),this.activeChannelSubscriptions.push(e.on("typing.start",n=>this.ngZone.run(()=>this.handleTypingStartEvent(n)))),this.activeChannelSubscriptions.push(e.on("typing.stop",n=>this.ngZone.run(()=>this.handleTypingStopEvent(n))))}typingStarted(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield n?.keystroke(e)})}typingStopped(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield n?.stopTyping(e)})}messageUpdated(e){this.ngZone.run(()=>{var n;const s=e.message&&e.message.parent_id,r=this.activeChannelSubject.getValue();if(!r)return;const o=s?r.state.threads[(null===(n=e?.message)||void 0===n?void 0:n.parent_id)||""]:r.state.messages;o&&-1!==o.findIndex(c=>{var u;return c.id===(null===(u=e?.message)||void 0===u?void 0:u.id)})&&(s?this.activeThreadMessagesSubject.next([...o]):this.activeChannelMessagesSubject.next([...o]),this.activeChannelPinnedMessagesSubject.next([...r.state.pinnedMessages]))})}messageReactionEventReceived(e){this.ngZone.run(()=>{var n,s,r,o;const l=e.message&&e.message.parent_id;let c;(l?this.activeThreadMessages$:this.activeChannelMessages$).pipe((0,Mt.P)()).subscribe(d=>c=d);const u=c.find(d=>{var m;return d.id===(null===(m=e?.message)||void 0===m?void 0:m.id)});u&&(u.reaction_counts=Object.assign({},null===(n=e.message)||void 0===n?void 0:n.reaction_counts),u.reaction_scores=Object.assign({},null===(s=e.message)||void 0===s?void 0:s.reaction_scores),u.latest_reactions=[...(null===(r=e.message)||void 0===r?void 0:r.latest_reactions)||[]],u.own_reactions=[...(null===(o=e.message)||void 0===o?void 0:o.own_reactions)||[]],l?this.activeThreadMessagesSubject.next([...c]):this.activeChannelMessagesSubject.next([...c]))})}formatMessage(e){return Object.assign(Object.assign({},e),{pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"})}isStreamMessage(e){return!!e.readBy}isFormatMessageResponse(e){return e.created_at instanceof Date}stopWatchForActiveChannelEvents(e){e&&(this.activeChannelSubscriptions.forEach(n=>n.unsubscribe()),this.activeChannelSubscriptions=[])}queryChannels(e,n=!1){return(0,w.mG)(this,void 0,void 0,function*(){try{const s=yield this.chatClientService.chatClient.queryChannels(this.filters,this.sort||{},this.options);s.forEach(l=>this.watchForChannelEvents(l));const r=n?[]:this.channelsSubject.getValue()||[];this.channelsSubject.next([...r,...s]);const o=this.activeChannelSubject.getValue();return s.length>0&&!o&&e&&this.setAsActiveChannel(s[0]),n&&!s.find(l=>l.cid===o?.cid)&&this.deselectActiveChannel(),this.hasMoreChannelsSubject.next(s.length>=this.options.limit),s}catch(s){throw this.channelsSubject.error(s),s}})}watchForChannelEvents(e){e.on(n=>{switch(n.type){case"message.new":this.ngZone.run(()=>{this.customNewMessageHandler?this.customNewMessageHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleNewMessage(n,e)});break;case"channel.hidden":this.ngZone.run(()=>{this.customChannelHiddenHandler?this.customChannelHiddenHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelHidden(n)});break;case"channel.deleted":this.ngZone.run(()=>{this.customChannelDeletedHandler?this.customChannelDeletedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelDeleted(n)});break;case"channel.visible":this.ngZone.run(()=>{this.customChannelVisibleHandler?this.customChannelVisibleHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelVisible(n,e)});break;case"channel.updated":this.ngZone.run(()=>{this.customChannelUpdatedHandler?this.customChannelUpdatedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelUpdate(n)});break;case"channel.truncated":this.ngZone.run(()=>{this.customChannelTruncatedHandler?this.customChannelTruncatedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelTruncate(n)})}})}handleNewMessage(e,n){const s=this.channels.findIndex(r=>r.cid===n.cid);this.channels.splice(s,1),this.channelsSubject.next([n,...this.channels])}handleChannelHidden(e){this.removeChannelsFromChannelList([e.channel.cid])}handleChannelDeleted(e){this.removeChannelsFromChannelList([e.channel.cid])}handleChannelVisible(e,n){this.channels.find(s=>s.cid===e.cid)||this.ngZone.run(()=>this.channelsSubject.next([...this.channels,n]))}handleChannelUpdate(e){var n,s;const r=this.channels.findIndex(o=>o.cid===e.channel.cid);if(-1!==r&&(this.channels[r].data=e.channel,this.channelsSubject.next([...this.channels]),(null===(n=e.channel)||void 0===n?void 0:n.cid)===(null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.cid))){const o=this.activeChannelSubject.getValue();o.data=e.channel,this.activeChannelSubject.next(o)}}handleChannelTruncate(e){var n,s;const r=this.channels.findIndex(o=>o.cid===e.channel.cid);if(-1!==r&&(this.channels[r].state.messages=[],this.channelsSubject.next([...this.channels]),(null===(n=e.channel)||void 0===n?void 0:n.cid)===(null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.cid))){const o=this.activeChannelSubject.getValue();o.state.messages=[],this.activeChannelSubject.next(o),this.activeChannelMessagesSubject.next([]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([])}}get channels(){return this.channelsSubject.getValue()||[]}get canSendReadEvents(){var e;const n=this.activeChannelSubject.getValue();return!!n&&-1!==(null===(e=n.data)||void 0===e?void 0:e.own_capabilities).indexOf("read-events")}transformToStreamMessage(e,n){const s=!!e.parent_id;if(this.isStreamMessage(e)&&this.isFormatMessageResponse(e))return e.quoted_message&&(e.quoted_message.translation=ct(e.quoted_message,n,this.chatClientService.chatClient.user)),e.translation=ct(e,n,this.chatClientService.chatClient.user),e;if(e.quoted_message&&(e.quoted_message=Object.assign(Object.assign({},e.quoted_message),{translation:ct(e.quoted_message,n,this.chatClientService.chatClient.user)})),this.isFormatMessageResponse(e))return Object.assign(Object.assign({},e),{readBy:s?[]:dn(e,n),translation:ct(e,n,this.chatClientService.chatClient.user)});{const r=this.formatMessage(e);return Object.assign(Object.assign({},r),{readBy:s?[]:dn(r,n),translation:ct(e,n,this.chatClientService.chatClient.user)})}}handleTypingStartEvent(e){var n,s;if((null===(n=e.user)||void 0===n?void 0:n.id)===(null===(s=this.chatClientService.chatClient.user)||void 0===s?void 0:s.id))return;const r=!!e.parent_id;if(r&&e.parent_id!==this.activeParentMessageIdSubject.getValue())return;const o=r?this.usersTypingInThreadSubject:this.usersTypingInChannelSubject,l=o.getValue(),c=e.user;c&&!l.find(u=>u.id===c.id)&&(l.push(c),o.next([...l]))}handleTypingStopEvent(e){const n=this.usersTypingInChannelSubject.getValue(),s=this.usersTypingInThreadSubject.getValue(),r=e.user;return r&&n.find(o=>o.id===r.id)?(n.splice(n.findIndex(o=>o.id===r.id),1),void this.usersTypingInChannelSubject.next([...n])):r&&s.find(o=>o.id===r.id)?(s.splice(s.findIndex(o=>o.id===r.id),1),void this.usersTypingInThreadSubject.next([...s])):void 0}updateLatestMessages(e){var n,s,r,o,l,c,u;if((null===(s=null===(n=e.message)||void 0===n?void 0:n.user)||void 0===s?void 0:s.id)!==(null===(o=null===(r=this.chatClientService)||void 0===r?void 0:r.chatClient.user)||void 0===o?void 0:o.id))return;const d=this.latestMessageDateByUserByChannelsSubject.getValue();if(null===(l=e.message)||void 0===l||!l.created_at)return;const m=null===(c=e?.message)||void 0===c?void 0:c.cid;if(!m)return;const f=new Date(e.message.created_at);(!d[m]||(null===(u=d[m])||void 0===u?void 0:u.getTime())<f.getTime())&&(d[m]=f,this.latestMessageDateByUserByChannelsSubject.next(Object.assign({},d)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Qe),t.LFG(t.R0b),t.LFG(lt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ut=(()=>{class i{constructor(){this.theme$=new y.X("light"),this.defaultDarkModeVariables={"--bg-gradient-end":"#101214","--bg-gradient-start":"#070a0d","--black":"#ffffff","--blue-alice":"#00193d","--border":"#141924","--button-background":"#ffffff","--button-text":"#005fff","--grey":"#7a7a7a","--grey-gainsboro":"#2d2f2f","--grey-whisper":"#1c1e22","--modal-shadow":"#000000","--overlay":"#00000066","--overlay-dark":"#ffffffcc","--shadow-icon":"#00000080","--targetedMessageBackground":"#302d22","--transparent":"transparent","--white":"#101418","--white-smoke":"#13151b","--white-snow":"#070a0d"},this.variablesToDelete=[],this.theme$.subscribe(e=>{const n=this.customDarkThemeVariables?Object.assign(Object.assign({},this.defaultDarkModeVariables),this.customDarkThemeVariables):this.defaultDarkModeVariables,s=this.customLightThemeVariables?this.customLightThemeVariables:{};this.variablesToDelete.forEach(r=>this.deleteVariables(r)),"dark"===e?(this.deleteVariables(s),this.setVariables(n)):(this.deleteVariables(n),this.setVariables(s))}),this.themeVersion=getComputedStyle(document.documentElement).getPropertyValue("--str-chat__theme-version").replace(" ","")||"1"}get customLightThemeVariables(){return this._customLightThemeVariables}set customLightThemeVariables(e){const n=this.customLightThemeVariables;n&&this.variablesToDelete.push(n),this._customLightThemeVariables=e,"light"===this.theme$.getValue()&&this.theme$.next("light")}get customDarkThemeVariables(){return this._customDarkThemeVariables}set customDarkThemeVariables(e){const n=this.customDarkThemeVariables;n&&this.variablesToDelete.push(n),this._customDarkThemeVariables=e,"dark"===this.theme$.getValue()&&this.theme$.next("dark")}deleteVariables(e){e&&Object.keys(e).forEach(n=>document.documentElement.style.setProperty(n,null))}setVariables(e){e&&Object.keys(e).forEach(n=>document.documentElement.style.setProperty(n,e[n]))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const os=i=>i.type.startsWith("image/")&&!i.type.endsWith(".photoshop"),ls=i=>"image"===i.type&&!i.title_link&&!i.og_scrape_url;let cs=(()=>{class i{constructor(e,n){this.channelService=e,this.notificationService=n,this.attachmentUploadInProgressCounterSubject=new y.X(0),this.attachmentUploadsSubject=new y.X([]),this.attachmentUploadInProgressCounter$=this.attachmentUploadInProgressCounterSubject.asObservable(),this.attachmentUploads$=this.attachmentUploadsSubject.asObservable()}resetAttachmentUploads(){this.attachmentUploadsSubject.next([])}filesSelected(e){return(0,w.mG)(this,void 0,void 0,function*(){if(!e)return;const n=[],s=[],r=[];Array.from(e).forEach(l=>{os(l)?n.push(l):l.type.startsWith("video/")?r.push(l):s.push(l)}),n.forEach(l=>this.createPreview(l));const o=[...n.map(l=>({file:l,state:"uploading",type:"image"})),...r.map(l=>({file:l,state:"uploading",type:"video"})),...s.map(l=>({file:l,state:"uploading",type:"file"}))];this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...o]),yield this.uploadAttachments(o)})}retryAttachmentUpload(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=this.attachmentUploadsSubject.getValue(),s=n.find(r=>r.file===e);s&&(s.state="uploading",this.attachmentUploadsSubject.next([...n]),yield this.uploadAttachments([s]))})}deleteAttachment(e){return(0,w.mG)(this,void 0,void 0,function*(){const n=this.attachmentUploadsSubject.getValue();let s;if("success"===e.state)try{yield this.channelService.deleteAttachment(e),s=[...n];const r=n.indexOf(e);s.splice(r,1)}catch{s=n,this.notificationService.addTemporaryNotification("streamChat.Error deleting attachment")}else{s=[...n];const r=n.indexOf(e);s.splice(r,1)}this.attachmentUploadsSubject.next([...s])})}mapToAttachments(){return this.attachmentUploadsSubject.getValue().filter(n=>"success"===n.state).map(n=>{var s,r,o;const l={type:n.type};return"image"===n.type?(l.fallback=null===(s=n.file)||void 0===s?void 0:s.name,l.image_url=n.url):(l.asset_url=n.url,l.title=null===(r=n.file)||void 0===r?void 0:r.name,l.file_size=null===(o=n.file)||void 0===o?void 0:o.size,l.thumb_url=n.thumb_url),l})}createFromAttachments(e){const n=[];e.forEach(s=>{ls(s)?n.push({url:s.img_url||s.thumb_url||s.image_url,state:"success",type:"image",file:{name:s.fallback}}):("file"===s.type||"video"===s.type)&&n.push({url:s.asset_url,state:"success",file:{name:s.title,size:s.file_size},type:s.type,thumb_url:s.thumb_url})}),n.length>0&&this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...n])}createPreview(e){const n=new FileReader;n.onload=s=>{var r;const o=this.attachmentUploadsSubject.getValue(),l=o.find(c=>c.file===e);l&&(l.previewUri=(null===(r=s.target)||void 0===r?void 0:r.result)||void 0,this.attachmentUploadsSubject.next([...o]))},n.readAsDataURL(e)}uploadAttachments(e){return(0,w.mG)(this,void 0,void 0,function*(){this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()+1);const n=yield this.channelService.uploadAttachments(e),s=this.attachmentUploadsSubject.getValue();n.forEach(r=>{const o=s.find(l=>l.file===r.file);o?(o.state=r.state,o.url=r.url,o.thumb_url=r.thumb_url,"error"===o.state&&this.notificationService.addTemporaryNotification("image"===o.type?"streamChat.Error uploading image":"streamChat.Error uploading file")):r.url&&this.channelService.deleteAttachment(r)}),this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()-1),this.attachmentUploadsSubject.next([...s])})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Be),t.LFG(lt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wh=(()=>{class i{constructor(){this.shouldGenerateVideoThumbnail=!0}getImageAttachmentConfiguration(e,n,s){if(this.customImageAttachmentConfigurationHandler)return this.customImageAttachmentConfigurationHandler(e,n,s);const r=new URL(e.img_url||e.thumb_url||e.image_url||""),o=Number(r.searchParams.get("oh"))>1?Number(r.searchParams.get("oh")):1e6,l=Number(r.searchParams.get("ow"))>1?Number(r.searchParams.get("ow")):1e6,u=this.getSizingRestrictions(r,s,"gallery"===n||"single"===n);return u&&(u.height*=2,u.width*=2,this.addResizingParamsToUrl(u,r)),{url:r.href,width:"",height:"",originalHeight:o,originalWidth:l}}getVideoAttachmentConfiguration(e,n){if(this.customVideoAttachmentConfigurationHandler)return this.customVideoAttachmentConfigurationHandler(e,n);let s,r=1e6,o=1e6;if(e.thumb_url&&this.shouldGenerateVideoThumbnail){const l=new URL(e.thumb_url);r=Number(l.searchParams.get("oh"))>1?Number(l.searchParams.get("oh")):r,o=Number(l.searchParams.get("ow"))>1?Number(l.searchParams.get("ow")):o;const u=this.getSizingRestrictions(l,n,!0);u&&(u.height*=2,u.width*=2,this.addResizingParamsToUrl(u,l)),s=l.href}return{url:e.asset_url||"",width:"",height:"",thumbUrl:s,originalHeight:r,originalWidth:o}}getGiphyAttachmentConfiguration(e){var n;if(this.customGiphyAttachmentConfigurationHandler)return this.customGiphyAttachmentConfigurationHandler(e);const s=null===(n=e.giphy)||void 0===n?void 0:n.fixed_height_downsampled;return{url:s?.url||e.image_url||e.thumb_url||"",height:s?.height?`${s?.height}px`:"300px",width:s?.width?`${s?.width}px`:""}}getScrapedImageAttachmentConfiguration(e){return this.customScrapedImageAttachmentConfigurationHandler?this.customScrapedImageAttachmentConfigurationHandler(e):{url:e.image_url||e.thumb_url||"",width:"",height:""}}addResizingParamsToUrl(e,n){n.searchParams.set("h",e.height.toString()),n.searchParams.set("w",e.width.toString())}getSizingRestrictions(e,n,s=!1){const r=e.searchParams,o=Number(r.get("oh"))||1,l=Number(r.get("ow"))||1,c=this.getCSSSizeRestriction(n);let u;return(c.maxHeight||c.height)&&c.maxWidth?u=this.getSizeRestrictions(o,l,c.maxHeight||c.height,c.maxWidth):(u=void 0,s&&console.warn("Invalid value set for height/max-height and/or max-width for HTML element, this can cause scrolling issues inside the message list, more info https://getstream.io/chat/docs/sdk/angular/components/AttachmentListComponent/#image-and-video-sizing")),u}getSizeRestrictions(e,n,s,r){return{height:Math.round(Math.max(s,r/n*e)),width:Math.round(Math.max(s,r/e*n))}}getCSSSizeRestriction(e){const n=getComputedStyle(e);return{height:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("height")),maxHeight:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("max-height")),maxWidth:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("max-width"))}}getValueRepresentationOfCSSProperty(e){return Number(e.replace("px",""))||void 0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Kh_streamChat={"1 reply":"1 reply","Attach files":"Attach files",Cancel:"Cancel","Channel Missing":"Channel Missing",Close:"Close","Close emoji picker":"Close emoji picker","Commands matching":"Commands matching","Connection failure, reconnecting now...":"Connection failure, reconnecting now...",Delete:"Delete",Delivered:"Delivered","Edit Message":"Edit Message","Edit message request failed":"Edit message request failed","Emoji matching":"Emoji matching","Empty message...":"Empty message...","Error adding flag":"Error adding flag","Error connecting to chat, refresh the page to try again.":"Error connecting to chat, refresh the page to try again","Error deleting message":"Error deleting message","Error muting a user ...":"Error muting a user ...","Error pinning message":"Error pinning message","Error removing message pin":"Error removing message pin","Error unmuting a user ...":"Error unmuting a user ...","Error uploading file":"Error uploading file","Error uploading image":"Error uploading image","Error deleting attachment":"Error deleting attachment","Error \xb7 Unsent":"Message couldn't be sent","Error: {{ errorMessage }}":"Error: {{ errorMessage }}",Flag:"Flag","Message Failed":"Message Failed","Message Failed \xb7 Unauthorized":"Unauthorized to send message","Message Failed \xb7 Click to try again":"Message couldn't be sent, click to try again","Message deleted":"Message deleted","Message has been successfully flagged":"Message has been successfully flagged","Message pinned":"Message pinned","Message unpinned":"Message unpinned",Mute:"Mute",New:"New","New Messages!":"New Messages!","No results found":"No results found","Nothing yet...":"Nothing yet...","Only visible to you":"Only visible to you","Open emoji picker":"Open emoji picker","People matching":"People matching","Pick your emoji":"Pick your emoji",Pin:"Pin","Pinned by":"Pinned by",Reply:"Reply","Reply to Message":"Reply to Message",Search:"Search","Searching...":"Searching...",Send:"Send","Send message request failed":"Send message request failed","Sending...":"Sending...","Slow Mode ON":"Slow Mode ON","Start of a new thread":"Start of a new thread","This message was deleted...":"This message was deleted...",Thread:"Thread reply","Type your message":"Type your message",Unmute:"Unmute",Unpin:"Unpin","Wait until all attachments have uploaded":"Wait until all attachments have uploaded","You have no channels currently":"You have no channels currently","You've reached the maximum number of files":"You've reached the maximum number of files",live:"live","this content could not be displayed":"this content could not be displayed","{{ commaSeparatedUsers }} and {{ moreCount }} more":"{{ commaSeparatedUsers }} and {{ moreCount }} more","{{ commaSeparatedUsers }}, and {{ lastUser }}":"{{ commaSeparatedUsers }}, and {{ lastUser }}","{{ firstUser }} and {{ secondUser }}":"{{ firstUser }} and {{ secondUser }}","{{ imageCount }} more":"{{ imageCount }} more","{{ memberCount }} members":"{{ memberCount }} members","{{ replyCount }} replies":"{{ replyCount }} replies","{{ user }} has been muted":"{{ user }} has been muted","{{ user }} has been unmuted":"{{ user }} has been unmuted","{{ watcherCount }} online":"{{ watcherCount }} online","\u{1f3d9} Attachment...":"\u{1f3d9} Attachment...","Connection error":"Connection error","Load more":"Load more",failed:"failed",retry:"retry",test:"success","Sending links is not allowed in this conversation":"Sending links is not allowed in this conversation","You can't send messages in this channel":"You can't send messages in this channel","You can't send thread replies in this channel":"You can't send thread replies in this channel","Unsupported file type: {{type}}":"Unsupported file type: {{type}}","Message not found":"Message not found","No chats here yet\u2026":"No chats here yet\u2026","user is typing":"{{ user }} is typing","users are typing":"{{ users }} are typing","Error loading channels":"Error loading channels","See original (automatically translated)":"See original (automatically translated)","See translation":"See translation"};let Xh=(()=>{class i{constructor(e){this.translteService=e}setTranslation(e="en",n){this.translteService.defaultLang||(this.translteService.defaultLang=e),this.translteService.setTranslation(e,{streamChat:Object.assign(Object.assign({},Kh_streamChat),n)},!0)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Se.sK))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ep=(()=>{class i{constructor(e,n){this.chatClientService=e,this.ngZone=n,this.size=32,this.showOnlineIndicator=!0,this.isLoaded=!1,this.isError=!1,this.isOnline=!1}ngOnChanges(e){var n,s,r;return(0,w.mG)(this,void 0,void 0,function*(){if(e.channel)if(this.channel){const o=this.getOtherMemberIfOneToOneChannel();if(o){this.isOnlineSubscription=this.chatClientService.events$.pipe((0,Pt.h)(l=>"user.presence.changed"===l.eventType)).subscribe(l=>{var c;(null===(c=l.event.user)||void 0===c?void 0:c.id)===o.id&&this.ngZone.run(()=>{var u;this.isOnline=(null===(u=l.event.user)||void 0===u?void 0:u.online)||!1})});try{const l=yield this.chatClientService.chatClient.queryUsers({id:{$eq:o.id}});this.isOnline=(null===(n=l.users[0])||void 0===n?void 0:n.online)||!1}catch{this.isOnline=o.online||!1}}else null===(s=this.isOnlineSubscription)||void 0===s||s.unsubscribe()}else this.isOnline=!1,null===(r=this.isOnlineSubscription)||void 0===r||r.unsubscribe()})}get initials(){var e,n,s,r,o;let l="";if("user"===this.type)l=(null===(e=this.name)||void 0===e?void 0:e.toString())||"";else if("channel"===this.type)if(null!==(s=null===(n=this.channel)||void 0===n?void 0:n.data)&&void 0!==s&&s.name)l=null===(o=null===(r=this.channel)||void 0===r?void 0:r.data)||void 0===o?void 0:o.name;else{const c=this.getOtherMemberIfOneToOneChannel();l=c?c.name||c.id||"":"#"}return l.charAt(0)||""}get fallbackChannelImage(){if("channel"===this.type){const e=this.getOtherMemberIfOneToOneChannel();return e?e.image:void 0}}getOtherMemberIfOneToOneChannel(){var e,n;const s=Object.values((null===(n=null===(e=this.channel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.members)||{}).filter(r=>{var o;return r.user_id!==(null===(o=this.chatClientService.chatClient.user)||void 0===o?void 0:o.id)});if(1===s.length)return s[0].user}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Qe),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-avatar"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type",showOnlineIndicator:"showOnlineIndicator"},features:[t.TTD],decls:5,vars:15,consts:[[3,"title"],["data-testid","avatar-img",3,"class","src","alt","style","load","error",4,"ngIf","ngIfElse"],["fallback",""],["data-testid","online-indicator","class","str-chat__avatar--online-indicator",4,"ngIf"],["data-testid","avatar-img",3,"src","alt","load","error"],["data-testid","fallback-img",1,"str-chat__avatar-fallback"],["data-testid","online-indicator",1,"str-chat__avatar--online-indicator"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,No,1,11,"img",1),t.YNc(2,Ho,2,1,"ng-template",null,2,t.W1O),t.YNc(4,jo,1,0,"div",3),t.qZA()),2&e){const s=t.MAs(3);t.Akn(t.qbA(9,$o,"calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size/2+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")")),t.Gre("str-chat__avatar str-chat__avatar--circle stream-chat__avatar--",n.location,""),t.s9C("title",n.name),t.xp6(1),t.Q6J("ngIf",(n.imageUrl||n.fallbackChannelImage)&&!n.isError)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",n.isOnline)}},dependencies:[x.O5]}),i})(),je=(()=>{class i{constructor(){this.mentionAutocompleteItemTemplate$=new y.X(void 0),this.commandAutocompleteItemTemplate$=new y.X(void 0),this.channelPreviewTemplate$=new y.X(void 0),this.messageInputTemplate$=new y.X(void 0),this.mentionTemplate$=new y.X(void 0),this.emojiPickerTemplate$=new y.X(void 0),this.typingIndicatorTemplate$=new y.X(void 0),this.messageTemplate$=new y.X(void 0),this.channelActionsTemplate$=new y.X(void 0),this.attachmentListTemplate$=new y.X(void 0),this.attachmentPreviewListTemplate$=new y.X(void 0),this.avatarTemplate$=new y.X(void 0),this.iconTemplate$=new y.X(void 0),this.loadingIndicatorTemplate$=new y.X(void 0),this.messageActionsBoxTemplate$=new y.X(void 0),this.messageActionsBoxItemTemplate$=new y.X(void 0),this.messageReactionsTemplate$=new y.X(void 0),this.modalTemplate$=new y.X(void 0),this.notificationTemplate$=new y.X(void 0),this.threadHeaderTemplate$=new y.X(void 0),this.deliveredStatusTemplate$=new y.X(void 0),this.sendingStatusTemplate$=new y.X(void 0),this.readStatusTemplate$=new y.X(void 0),this.channelHeaderInfoTemplate$=new y.X(void 0)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),It=(()=>{class i{constructor(e){this.customTemplatesService=e,this.size=32}getAvatarContext(){return{name:this.name,imageUrl:this.imageUrl,size:this.size,location:this.location,type:this.type,user:this.user,channel:this.channel}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-avatar-placeholder"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type"},decls:4,vars:4,consts:[["defaultAvatar",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"name","imageUrl","size","type","channel","user","location"]],template:function(e,n){if(1&e&&(t.YNc(0,Yo,1,7,"ng-template",null,0,t.W1O),t.YNc(2,qo,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.avatarTemplate$)||s)("ngTemplateOutletContext",n.getAvatarContext())}},dependencies:[ep,x.tP,x.Ov],encapsulation:2}),i})(),hn=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-icon"]],inputs:{icon:"icon",size:"size"},decls:22,vars:22,consts:[["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon",4,"ngIf"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",4,"ngIf"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread",4,"ngIf"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","error","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg"],["d","M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z","fillRule","nonzero"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M8.9999 16.2L4.7999 12L3.3999 13.4L8.9999 19L20.9999 6.99998L19.5999 5.59998L8.9999 16.2Z","fill","black"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon"],["clipRule","evenodd","fillRule","evenodd"],["d","M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z"],["d","M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Interactions","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","Connection-Error-_-Connectivity","transform","translate(-270.000000, -30.000000)","fill","#CF1F25"],["id","109-network-connection","transform","translate(270.000000, 30.000000)"],["d","M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z","id","Combined-Shape"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["translate",""],["d","M4.00952 22L24 12L4.00952 2L4 9.77778L18.2857 12L4 14.2222L4.00952 22Z","fill","black"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg"],["d","M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z","fillRule","nonzero"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M17.6449 6.35C16.1949 4.9 14.2049 4 11.9949 4C7.57488 4 4.00488 7.58 4.00488 12C4.00488 16.42 7.57488 20 11.9949 20C15.7249 20 18.8349 17.45 19.7249 14H17.6449C16.8249 16.33 14.6049 18 11.9949 18C8.68488 18 5.99488 15.31 5.99488 12C5.99488 8.69 8.68488 6 11.9949 6C13.6549 6 15.1349 6.69 16.2149 7.78L12.9949 11H19.9949V4L17.6449 6.35Z","fill","black"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","28","height","28","rx","14","fill","#72767E"],["cx","14","cy","14","r","12","fill","#72767E"],["fill-rule","evenodd","clip-rule","evenodd","d","M28 14C28 21.732 21.732 28 14 28C6.26801 28 0 21.732 0 14C0 6.26801 6.26801 0 14 0C21.732 0 28 6.26801 28 14ZM26 14C26 20.6274 20.6274 26 14 26C7.37258 26 2 20.6274 2 14C2 7.37258 7.37258 2 14 2C20.6274 2 26 7.37258 26 14ZM19.59 7L21 8.41L15.41 14L21 19.59L19.59 21L14 15.41L8.41 21L7 19.59L12.59 14L7 8.41L8.41 7L14 12.59L19.59 7Z","fill","white"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512"],["d","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z","fill","#414D54"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 3C0 1.34315 1.34315 0 3 0H23L34 11V37C34 38.6569 32.6569 40 31 40H3C1.34315 40 0 38.6569 0 37V3Z","fill","url(#paint0_linear)"],["d","M34 11L26 11C24.3431 11 23 9.65685 23 8V0L34 11Z","fill","#DBDBDB"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 13H23V15H8V13Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 17H18V19H8V17Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 21H23V23H8V21Z","fill","#CFCFCF"],["id","paint0_linear","x1","0","y1","0","x2","0","y2","40","gradientUnits","userSpaceOnUse"],["stop-color","white"],["offset","1","stop-color","#DBDBDB"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg"],["d","M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z","fillRule","nonzero"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z","fill","black"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread"],["d","M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z","fillRule","evenodd"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.7049 7.41L14.2949 6L8.29492 12L14.2949 18L15.7049 16.59L11.1249 12L15.7049 7.41Z","fill","var(--black)"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z","fill","var(--black)"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3 8V6H21V8H3ZM3 13H21V11H3V13ZM3 18H21V16H3V18Z","fill","black"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M16.59 15.7051L12 11.1251L7.41 15.7051L6 14.2951L12 8.29508L18 14.2951L16.59 15.7051Z","fill","var(--primary-color)"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.41 8.29504L12 12.875L16.59 8.29504L18 9.70504L12 15.705L6 9.70504L7.41 8.29504Z","fill","var(--primary-color)"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M106 24.5H30C24.775 24.5 20.5 28.775 20.5 34V119.5L39.5 100.5H106C111.225 100.5 115.5 96.225 115.5 91V34C115.5 28.775 111.225 24.5 106 24.5ZM106 91H39.5L30 100.5V34H106V91Z","fill","#B4B7BB"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_10878_5)"],["d","M12.9997 6.99993L10.9997 6.99993L10.9997 10.9999L6.99972 10.9999L6.99972 12.9999L10.9997 12.9999L10.9997 16.9999L12.9997 16.9999L12.9997 12.9999L16.9997 12.9999L16.9997 10.9999L12.9997 10.9999L12.9997 6.99993ZM11.9997 1.99992C6.47972 1.99992 1.99972 6.47993 1.99972 11.9999C1.99972 17.5199 6.47972 21.9999 11.9997 21.9999C17.5197 21.9999 21.9997 17.5199 21.9997 11.9999C21.9997 6.47993 17.5197 1.99992 11.9997 1.99992ZM11.9997 19.9999C7.58972 19.9999 3.99972 16.4099 3.99972 11.9999C3.99972 7.58993 7.58972 3.99993 11.9997 3.99993C16.4097 3.99993 19.9997 7.58993 19.9997 11.9999C19.9997 16.4099 16.4097 19.9999 11.9997 19.9999Z","fill","black"],["id","clip0_10878_5"],["width","24","height","24","fill","white"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM19 18H6C3.79 18 2 16.21 2 14C2 11.95 3.53 10.24 5.56 10.03L6.63 9.92L7.13 8.97C8.08 7.14 9.94 6 12 6C14.62 6 16.88 7.86 17.39 10.43L17.69 11.93L19.22 12.04C20.78 12.14 22 13.45 22 15C22 16.65 20.65 18 19 18ZM13.45 10H10.55V13H8L12 17L16 13H13.45V10Z","fill","black"],["data-testid","error","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","background","d","M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z","fill","black"],["d","M13 17H11V15H13V17ZM13 13H11V7H13V13Z","fill","white"]],template:function(e,n){1&e&&(t.YNc(0,zo,2,0,"svg",0),t.YNc(1,Jo,2,0,"svg",1),t.YNc(2,Vo,4,0,"svg",2),t.YNc(3,Qo,9,0,"svg",3),t.YNc(4,Go,4,0,"svg",4),t.YNc(5,Wo,4,0,"svg",5),t.YNc(6,Ko,2,0,"svg",6),t.YNc(7,Xo,4,0,"svg",7),t.YNc(8,el,2,2,"svg",8),t.YNc(9,tl,10,0,"svg",9),t.YNc(10,nl,2,0,"svg",10),t.YNc(11,il,2,0,"svg",11),t.YNc(12,sl,2,0,"svg",12),t.YNc(13,al,2,0,"svg",13),t.YNc(14,rl,2,0,"svg",14),t.YNc(15,ol,2,0,"svg",15),t.YNc(16,ll,2,0,"svg",16),t.YNc(17,cl,2,0,"svg",17),t.YNc(18,ul,2,0,"svg",18),t.YNc(19,dl,6,0,"svg",19),t.YNc(20,hl,2,0,"svg",20),t.YNc(21,pl,3,0,"svg",21)),2&e&&(t.Q6J("ngIf","action-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","delivered-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","reaction-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","connection-error"===n.icon),t.xp6(1),t.Q6J("ngIf","send"===n.icon),t.xp6(1),t.Q6J("ngIf","file-upload"===n.icon),t.xp6(1),t.Q6J("ngIf","retry"===n.icon),t.xp6(1),t.Q6J("ngIf","close"===n.icon),t.xp6(1),t.Q6J("ngIf","file"===n.icon),t.xp6(1),t.Q6J("ngIf","unspecified-filetype"===n.icon),t.xp6(1),t.Q6J("ngIf","reply"===n.icon),t.xp6(1),t.Q6J("ngIf","close-no-outline"===n.icon),t.xp6(1),t.Q6J("ngIf","reply-in-thread"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-left"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-right"===n.icon),t.xp6(1),t.Q6J("ngIf","menu"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-up"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-down"===n.icon),t.xp6(1),t.Q6J("ngIf","chat-bubble"===n.icon),t.xp6(1),t.Q6J("ngIf","attach"===n.icon),t.xp6(1),t.Q6J("ngIf","download"===n.icon),t.xp6(1),t.Q6J("ngIf","error"===n.icon))},dependencies:[x.O5,Se.Pi],encapsulation:2}),i})(),yt=(()=>{class i{constructor(e){this.customTemplatesService=e}getIconContext(){return{icon:this.icon,size:this.size}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-icon-placeholder"]],inputs:{icon:"icon",size:"size"},decls:4,vars:4,consts:[["defaultIcon",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"icon","size"]],template:function(e,n){if(1&e&&(t.YNc(0,gl,1,2,"ng-template",null,0,t.W1O),t.YNc(2,ml,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.iconTemplate$)||s)("ngTemplateOutletContext",n.getIconContext())}},dependencies:[hn,x.tP,x.Ov],encapsulation:2}),i})(),us=(()=>{class i{constructor(){this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))",this.linearGradientId=Sn()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-loading-indicator"]],inputs:{size:"size",color:"color"},decls:7,vars:8,consts:[[1,"str-chat__loading-indicator"],["viewBox","0 0 30 30","data-testid","loading-indicator","xmlns","http://www.w3.org/2000/svg"],["x1","50%","x2","50%","y1","0%","y2","100%",3,"id"],["offset","0%","stop-color","#FFF","stop-opacity","0"],["data-testid","stop-color","offset","100%","stop-opacity","1",3,"ngStyle"],["d","M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z","fillRule","evenodd"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1)(2,"defs")(3,"linearGradient",2),t._UZ(4,"stop",3)(5,"stop",4),t.qZA()(),t._UZ(6,"path",5),t.qZA()()),2&e&&(t.xp6(1),t.uIk("height",n.size)("width",n.size),t.xp6(2),t.s9C("id",n.linearGradientId),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,fl,n.color)),t.uIk("stop-color",n.color),t.xp6(1),t.uIk("fill","url(#"+n.linearGradientId+")"))},dependencies:[x.PC],encapsulation:2}),i})(),jn=(()=>{class i{constructor(e){this.customTemplatesService=e,this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))"}getLoadingIndicatorContext(){return{size:this.size,color:this.color}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-loading-indicator-placeholder"]],inputs:{size:"size",color:"color"},decls:4,vars:4,consts:[["defaultLoadingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"size","color"]],template:function(e,n){if(1&e&&(t.YNc(0,_l,1,2,"ng-template",null,0,t.W1O),t.YNc(2,vl,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.loadingIndicatorTemplate$)||s)("ngTemplateOutletContext",n.getLoadingIndicatorContext())}},dependencies:[us,x.tP,x.Ov],encapsulation:2}),i})(),ds=(()=>{class i{constructor(){this.isOpen=!1,this.isOpenChange=new t.vpe,this.watchForEscPress=e=>{"Escape"===e.key&&this.close()},this.stopWatchForEscPress=()=>{window.removeEventListener("keyup",this.watchForEscPress)},this.watchForOutsideClicks=e=>{var n;null!==(n=this.innerContainer)&&void 0!==n&&n.nativeElement.contains(e.target)||this.close()}}ngOnChanges(e){e.isOpen&&(this.isOpen?(window.addEventListener("keyup",this.watchForEscPress),setTimeout(()=>window.addEventListener("click",this.watchForOutsideClicks),0)):(this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()))}close(){this.isOpen=!1,this.isOpenChange.emit(!1),this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()}stopWatchForOutsideClicks(){window.removeEventListener("click",this.watchForOutsideClicks)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-modal"]],viewQuery:function(e,n){if(1&e&&t.Gf(Cl,5),2&e){let s;t.iGM(s=t.CRH())&&(n.innerContainer=s.first)}},inputs:{isOpen:"isOpen",content:"content"},outputs:{isOpenChange:"isOpenChange"},features:[t.TTD],ngContentSelectors:Hn,decls:8,vars:5,consts:[["data-testid","modal"],["data-testid","close",1,"str-chat__modal__close-button",3,"click","keyup.enter"],["icon","close"],[1,"str-chat__modal__inner"],["modalInner",""],[4,"ngIf","ngIfElse"],["elseContent",""],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.close()})("keyup.enter",function(){return n.close()}),t._UZ(2,"stream-icon-placeholder",2),t.qZA(),t.TgZ(3,"div",3,4),t.YNc(5,bl,2,1,"ng-container",5),t.YNc(6,wl,1,0,"ng-template",null,6,t.W1O),t.qZA()()),2&e){const s=t.MAs(7);t.Gre("str-chat__modal str-chat__modal--",n.isOpen?"open":"close",""),t.xp6(5),t.Q6J("ngIf",n.content)("ngIfElse",s)}},dependencies:[yt,x.O5,x.tP],encapsulation:2}),i})();const hs=new t.OlP("textareaInjectionToken");let ps=(()=>{class i{constructor(e){this.viewContainerRef=e,this.value="",this.valueChange=new t.vpe,this.send=new t.vpe,this.userMentions=new t.vpe,this.subscriptions=[],this.unpropagatedChanges=[]}ngOnChanges(e){if(this.unpropagatedChanges.push(e),!this.componentRef)return;e.componentRef&&(this.subscriptions.forEach(s=>s.unsubscribe()),this.componentRef&&(this.subscriptions.push(this.componentRef.instance.valueChange.subscribe(s=>this.valueChange.next(s))),this.subscriptions.push(this.componentRef.instance.send.subscribe(s=>this.send.next(s))),this.componentRef.instance.userMentions&&this.subscriptions.push(this.componentRef.instance.userMentions.subscribe(s=>this.userMentions.next(s))),this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled,this.componentRef.instance.mentionScope=this.mentionScope,this.componentRef.instance.value=this.value,this.componentRef.instance.placeholder=this.placeholder,this.componentRef.instance.inputMode=this.inputMode)),e.areMentionsEnabled&&(this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled),e.mentionScope&&(this.componentRef.instance.mentionScope=this.mentionScope),e.value&&(this.componentRef.instance.value=this.value),e.placeholder&&(this.componentRef.instance.placeholder=this.placeholder),e.inputMode&&(this.componentRef.instance.inputMode=this.inputMode);let n={};this.unpropagatedChanges.forEach(s=>n=Object.assign(Object.assign({},n),s)),this.componentRef.instance.ngOnChanges(n),this.unpropagatedChanges=[]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","streamTextarea",""]],inputs:{componentRef:"componentRef",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",inputMode:"inputMode",value:"value",placeholder:"placeholder"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[t.TTD]}),i})(),$n=(()=>{class i{constructor(){this.emojiInput$=new ee.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tp=(()=>{class i{constructor(){this.isFileUploadEnabled=!0,this.areMentionsEnabled=!0,this.isMultipleFileUploadEnabled=!0,this.mentionScope="channel",this.inputMode="desktop"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gs=(()=>{class i{constructor(e,n,s,r){this.customTemplatesService=e,this.channelService=n,this.attachmentConfigurationService=s,this.attachments=[],this.imageModalStateChange=new t.vpe,this.class="str-chat__attachment-list-angular-host",this.orderedAttachments=[],this.imagesToView=[],this.imagesToViewCurrentIndex=0,this.attachmentConfigurations=new Map,this.themeVersion=r.themeVersion}ngOnChanges(e){if(e.attachments){const n=this.attachments.filter(this.isImage);this.orderedAttachments=[...n.length>=2?this.createGallery(n):n,...this.attachments.filter(r=>this.isVideo(r)),...this.attachments.filter(r=>this.isFile(r))],this.attachmentConfigurations=new Map,0===this.orderedAttachments.length&&this.orderedAttachments.push(...this.attachments.filter(r=>this.isCard(r)))}}trackByUrl(e,n){return n.image_url||n.img_url||n.asset_url||n.thumb_url}isImage(e){return ls(e)}isSvg(e){return!!(e.fallback||"").toLowerCase().endsWith(".svg")}isFile(e){return"file"===e.type}isGallery(e){return"gallery"===e.type}isVideo(e){return"video"===e.type&&e.asset_url&&!e.og_scrape_url}isCard(e){return!e.type||"image"===e.type&&!this.isImage(e)||"giphy"===e.type}hasFileSize(e){return e.file_size&&Number.isFinite(Number(e.file_size))}getFileSize(e){return Ka()(Number(e.file_size))}getModalContext(){return{isOpen:this.imagesToView&&this.imagesToView.length>0,isOpenChangeHandler:e=>e?null:this.closeImageModal(),content:this.modalContent}}trimUrl(e){if(null!=e){const[n]=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/");return n}return null}sendAction(e){this.channelService.sendAction(this.messageId,{[e.name]:e.value},this.parentMessageId)}trackByActionValue(e,n){return n.value}openImageModal(e,n=0){this.imageModalStateChange.next("opened"),this.imagesToView=e,this.imagesToViewCurrentIndex=n}stepImages(e){this.imagesToViewCurrentIndex+=1*e}trackByImageUrl(e,n){return n.image_url||n.img_url||n.thumb_url}getImageAttachmentConfiguration(e,n,s){const r=this.attachmentConfigurations.get(e);if(r)return r;const o=this.attachmentConfigurationService.getImageAttachmentConfiguration(e,n,s);return this.attachmentConfigurations.set(e,o),o}getCarouselImageAttachmentConfiguration(e,n){return this.attachmentConfigurationService.getImageAttachmentConfiguration(e,"carousel",n)}getVideoAttachmentConfiguration(e,n){const s=this.attachmentConfigurations.get(e);if(s)return s;const r=this.attachmentConfigurationService.getVideoAttachmentConfiguration(e,n);return this.attachmentConfigurations.set(e,r),r}getCardAttachmentConfiguration(e){const n=this.attachmentConfigurations.get(e);if(n)return n;if("giphy"===e.type)return this.attachmentConfigurationService.getGiphyAttachmentConfiguration(e);{const s=this.attachmentConfigurationService.getScrapedImageAttachmentConfiguration(e);return this.attachmentConfigurations.set(e,s),s}}get isImageModalPrevButtonVisible(){return 0!==this.imagesToViewCurrentIndex}get isImageModalNextButtonVisible(){return this.imagesToViewCurrentIndex!==this.imagesToView.length-1}createGallery(e){return[{type:"gallery",images:e}]}closeImageModal(){this.imageModalStateChange.next("closed"),this.imagesToView=[]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(je),t.Y36(Be),t.Y36(Wh),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-attachment-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(ts,7),2&e){let s;t.iGM(s=t.CRH())&&(n.modalContent=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{messageId:"messageId",parentMessageId:"parentMessageId",attachments:"attachments"},outputs:{imageModalStateChange:"imageModalStateChange"},features:[t.TTD],decls:5,vars:1,consts:[["class","str-chat__attachment-list",4,"ngIf"],["defaultModal",""],["modalContent",""],[1,"str-chat__attachment-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["data-testclass","attachment-container"],["class","str-chat__message-attachment--img","data-testclass","image",3,"src","alt","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery","data-testid","image-gallery",3,"str-chat__gallery--square","str-chat__gallery-two-rows",4,"ngIf"],["class","str-chat__player-wrapper","data-testclass","video-attachment-parent",3,"--original-height","--original-width","ngStyle",4,"ngIf"],["class","\n          str-chat__message-attachment-file--item\n          str-chat-angular__message-attachment-file-single\n        ","style","cursor: pointer; text-decoration: none","data-testclass","file-link","target","_blank",3,"href",4,"ngIf"],[3,"class",4,"ngIf"],["class","str-chat__message-attachment-actions",4,"ngIf"],["data-testclass","image",1,"str-chat__message-attachment--img",3,"src","alt","ngStyle","click","keyup.enter"],["imgElement",""],["data-testid","image-gallery",1,"str-chat__gallery"],["class","str-chat__gallery-image","data-testclass","gallery-image",3,"str-chat__message-attachment--svg-image","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery-placeholder","data-testclass","gallery-image","data-testid","more-image-button",3,"str-chat__message-attachment--svg-image","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["data-testclass","gallery-image",1,"str-chat__gallery-image",3,"click","keyup.enter"],[3,"src","alt","ngStyle"],["data-testclass","gallery-image","data-testid","more-image-button",1,"str-chat__gallery-placeholder",3,"ngStyle","click","keyup.enter"],["element",""],[3,"innerHTML"],["data-testclass","video-attachment-parent",1,"str-chat__player-wrapper",3,"ngStyle"],["controls","","data-testclass","video-attachment",1,"str-chat__video-angular",3,"src","poster"],["videoElement",""],["data-testclass","file-link","target","_blank",1,"str-chat__message-attachment-file--item","str-chat-angular__message-attachment-file-single",2,"cursor","pointer","text-decoration","none",3,"href"],["icon","file",3,"size",4,"ngIf"],["icon","unspecified-filetype",3,"size",4,"ngIf"],[1,"str-chat__message-attachment-file--item-text"],[1,"str-chat__message-attachment-file--item-first-row"],["data-testclass","file-title",1,"str-chat__message-attachment-file--item-name"],["class","str-chat__message-attachment-file--item-size","data-testclass","size",4,"ngIf"],["icon","file",3,"size"],["icon","unspecified-filetype",3,"size"],["data-testclass","size",1,"str-chat__message-attachment-file--item-size"],["class","str-chat__message-attachment-card--header",4,"ngIf"],[1,"str-chat__message-attachment-card--content"],[1,"str-chat__message-attachment-card--flex"],["data-testclass","card-title","class","str-chat__message-attachment-card--title",4,"ngIf"],["class","str-chat__message-attachment-card--text","data-testclass","card-text",4,"ngIf"],["class","str-chat__message-attachment-card--url","data-testclass","url-link","noopener","","noreferrer","","target","_blank",3,"href",4,"ngIf"],[1,"str-chat__message-attachment-card--header"],["data-testclass","card-img",3,"alt","src","ngStyle"],["data-testclass","card-title",1,"str-chat__message-attachment-card--title"],["data-testclass","card-text",1,"str-chat__message-attachment-card--text"],["data-testclass","url-link","noopener","","noreferrer","","target","_blank",1,"str-chat__message-attachment-card--url",3,"href"],[1,"str-chat__message-attachment-actions"],[1,"str-chat__message-attachment-actions-form"],["data-testclass","attachment-action",3,"class","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testclass","attachment-action",3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"stream-chat-angular__image-modal-host",3,"isOpen","content","isOpenChange"],[1,"stream-chat-angular__image-modal","str-chat__image-carousel"],["data-testid","image-modal-prev","type","button",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper",3,"ngStyle","click","keyup.enter"],["icon","arrow-left"],["data-testid","modal-image",1,"stream-chat-angular__image-modal-image","str-chat__image-carousel-image",3,"src","alt","ngStyle"],["type","button","data-testid","image-modal-next",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper",3,"ngStyle","click","keyup.enter"],["icon","arrow-right"]],template:function(e,n){1&e&&(t.YNc(0,ql,3,3,"div",0),t.YNc(1,zl,1,2,"ng-template",null,1,t.W1O),t.YNc(3,Vl,7,16,"ng-template",null,2,t.W1O)),2&e&&t.Q6J("ngIf",n.orderedAttachments.length>0)},dependencies:[yt,ds,x.O5,x.sg,x.PC,x.tP,Se.X$,x.Ov],encapsulation:2}),i})(),np=(()=>{class i{constructor(e){this.retryAttachmentUpload=new t.vpe,this.deleteAttachment=new t.vpe,this.themeVersion=e.themeVersion}attachmentUploadRetried(e){this.retryAttachmentUpload.emit(e)}attachmentDeleted(e){this.deleteAttachment.emit(e)}trackByFile(e,n){return n.file}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-attachment-preview-list"]],inputs:{attachmentUploads$:"attachmentUploads$"},outputs:{retryAttachmentUpload:"retryAttachmentUpload",deleteAttachment:"deleteAttachment"},decls:8,vars:6,consts:[["class","rfu-image-previewer",4,"ngIf"],["class","str-chat__attachment-preview-list",4,"ngIf"],["deleteButton",""],["retryButton",""],[1,"rfu-image-previewer"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","rfu-image-previewer__image","data-testclass","attachment-image-preview",3,"rfu-image-previewer__image--loaded",4,"ngIf"],["class","rfu-file-previewer","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"rfu-image-previewer__image"],["class","rfu-image-previewer__retry","data-testclass","upload-retry",3,"click","keyup.enter",4,"ngIf"],[1,"rfu-thumbnail__wrapper",2,"width","100","height","100"],[1,"rfu-thumbnail__overlay"],["data-testclass","file-delete","role","button",1,"rfu-icon-button",3,"click","keyup.enter"],["icon","close-no-outline"],["class","rfu-thumbnail__image","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)",4,"ngIf"],["data-testclass","upload-retry",1,"rfu-image-previewer__retry",3,"click","keyup.enter"],["icon","retry"],["data-testclass","attachment-image",1,"rfu-thumbnail__image",3,"src","alt"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)"],["data-testclass","attachment-file-preview",1,"rfu-file-previewer"],[1,"rfu-file-previewer__file"],["icon","file"],["data-testclass","file-download-link","download","",3,"href","click","keyup.enter"],[4,"ngIf"],["data-testclass","file-delete",1,"rfu-file-previewer__close-button",3,"click","keyup.enter"],["class","rfu-file-previewer__loading-indicator",4,"ngIf"],["data-testclass","upload-retry","translate","",1,"rfu-file-previewer__failed",3,"click","keyup.enter"],["translate","",1,"rfu-file-previewer__retry",3,"click","keyup.enter"],[1,"rfu-file-previewer__loading-indicator"],[1,"str-chat__attachment-preview-list"],[1,"str-chat__attachment-list-scroll-container"],["class","str-chat__attachment-preview-image","data-testclass","attachment-image-preview",4,"ngIf"],["class","str-chat__attachment-preview-file","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"str-chat__attachment-preview-image"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","str-chat__attachment-preview-image-loading",4,"ngIf"],["class","str-chat__attachment-preview-thumbnail","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],[1,"str-chat__attachment-preview-image-loading"],["data-testclass","loading-indicator",3,"size"],["data-testclass","attachment-image",1,"str-chat__attachment-preview-thumbnail",3,"src","alt"],["data-testclass","attachment-file-preview",1,"str-chat__attachment-preview-file"],["icon","unspecified-filetype"],[1,"str-chat__attachment-preview-file-end"],[1,"str-chat__attachment-preview-file-name"],["class","str-chat__attachment-preview-file-download","data-testclass","file-download-link","download","",3,"href","click","keyup.enter",4,"ngIf"],["data-testclass","loading-indicator",3,"size",4,"ngIf"],["data-testclass","file-download-link","download","",1,"str-chat__attachment-preview-file-download",3,"href","click","keyup.enter"],["icon","download"],["data-testclass","file-delete","role","button",1,"str-chat__attachment-preview-delete",3,"click","keyup.enter"],["data-testclass","upload-retry",3,"class","click","keyup.enter",4,"ngIf"],["data-testclass","upload-retry",3,"click","keyup.enter"]],template:function(e,n){if(1&e&&(t.YNc(0,ic,3,4,"div",0),t.ALo(1,"async"),t.YNc(2,mc,4,4,"div",1),t.ALo(3,"async"),t.YNc(4,fc,2,0,"ng-template",null,2,t.W1O),t.YNc(6,vc,1,1,"ng-template",null,3,t.W1O)),2&e){let s,r;t.Q6J("ngIf",(null==(s=t.lcZ(1,2,n.attachmentUploads$))?null:s.length)&&"1"===n.themeVersion),t.xp6(2),t.Q6J("ngIf",(null==(r=t.lcZ(3,4,n.attachmentUploads$))?null:r.length)&&"2"===n.themeVersion)}},dependencies:[yt,jn,x.O5,x.sg,Se.Pi,x.tP,x.Ov],encapsulation:2}),i})(),ms=(()=>{class i{constructor(e,n,s,r,o,l,c,u,d,m,f){this.channelService=e,this.notificationService=n,this.attachmentService=s,this.configService=r,this.textareaType=o,this.componentFactoryResolver=l,this.cdRef=c,this.chatClient=u,this.emojiInputService=d,this.customTemplatesService=m,this.mode="main",this.messageUpdate=new t.vpe,this.class="str-chat__message-input-angular-host",this.textareaValue="",this.mentionedUsers=[],this.typingStart$=new ee.x,this.isCooldownInProgress=!1,this.fileInputId=Sn(),this.subscriptions=[],this.isViewInited=!1,this.defaultTextareaPlaceholder="streamChat.Type your message",this.slowModeTextareaPlaceholder="streamChat.Slow Mode ON",this.themeVersion=f.themeVersion,this.textareaPlaceholder=this.defaultTextareaPlaceholder,this.subscriptions.push(this.attachmentService.attachmentUploadInProgressCounter$.subscribe(v=>{0===v&&this.hideNotification&&(this.hideNotification(),this.hideNotification=void 0)})),this.subscriptions.push(this.channelService.activeChannel$.subscribe(v=>{var C;this.textareaValue="",this.attachmentService.resetAttachmentUploads();const R=null===(C=v?.data)||void 0===C?void 0:C.own_capabilities;R&&(this.isFileUploadAuthorized=-1!==R.indexOf("upload-file"),this.canSendLinks=-1!==R.indexOf("send-links"),this.channel=v,this.setCanSendMessages())})),this.subscriptions.push(this.chatClient.appSettings$.subscribe(v=>this.appSettings=v)),this.subscriptions.push(this.channelService.messageToQuote$.subscribe(v=>{const C=v&&v.parent_id;("thread"===this.mode&&C||"thread"===this.mode&&this.quotedMessage&&!v||"main"===this.mode&&!C)&&(this.quotedMessage=v)})),this.attachmentUploads$=this.attachmentService.attachmentUploads$,this.attachmentUploadInProgressCounter$=this.attachmentService.attachmentUploadInProgressCounter$,this.isFileUploadEnabled=this.configService.isFileUploadEnabled,this.isMultipleFileUploadEnabled=this.configService.isMultipleFileUploadEnabled,this.areMentionsEnabled=this.configService.areMentionsEnabled,this.mentionScope=this.configService.mentionScope,this.inputMode=this.configService.inputMode,this.subscriptions.push(this.typingStart$.subscribe(()=>{this.channelService.typingStarted(this.parentMessageId)})),this.subscriptions.push((0,S.a)([this.channelService.latestMessageDateByUserByChannels$,this.channelService.activeChannel$]).pipe((0,b.U)(([v,C])=>[v[C?.cid||""],C])).subscribe(([v,C])=>{var R,B,Q;const A=(null===(R=C?.data)||void 0===R?void 0:R.cooldown)&&v&&Math.round((null===(B=C?.data)||void 0===B?void 0:B.cooldown)-((new Date).getTime()-v.getTime())/1e3);A&&A>0&&(null===(Q=C?.data)||void 0===Q?void 0:Q.own_capabilities).includes("slow-mode")?this.startCooldown(A):this.isCooldownInProgress&&this.stopCooldown()}))}ngOnInit(){this.subscriptions.push(this.customTemplatesService.emojiPickerTemplate$.subscribe(e=>{this.emojiPickerTemplate=e,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.attachmentPreviewListTemplate$.subscribe(e=>{this.attachmentPreviewListTemplate=e,this.cdRef.detectChanges()}))}ngAfterViewInit(){this.isViewInited=!0,this.initTextarea()}ngOnChanges(e){e.message&&(this.attachmentService.resetAttachmentUploads(),this.isUpdate&&(this.attachmentService.createFromAttachments(this.message.attachments||[]),this.textareaValue=this.message.text||"")),e.isFileUploadEnabled&&(this.configService.isFileUploadEnabled=this.isFileUploadEnabled),e.isMultipleFileUploadEnabled&&(this.configService.isMultipleFileUploadEnabled=this.isMultipleFileUploadEnabled),e.areMentionsEnabled&&(this.configService.areMentionsEnabled=this.areMentionsEnabled),e.mentionScope&&(this.configService.mentionScope=this.mentionScope),e.mode&&this.setCanSendMessages(),e.inputMode&&(this.configService.inputMode=this.inputMode),e.sendMessage$&&(this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.sendMessage$&&(this.sendMessageSubcription=this.sendMessage$.subscribe(()=>{this.messageSent()})))}ngOnDestroy(){this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.subscriptions.forEach(e=>e.unsubscribe())}messageSent(){var e;return(0,w.mG)(this,void 0,void 0,function*(){if(this.isCooldownInProgress)return;let n;if(this.attachmentService.attachmentUploadInProgressCounter$.pipe((0,Mt.P)()).subscribe(l=>n=l),n>0)return void(this.hideNotification||(this.hideNotification=this.notificationService.addPermanentNotification("streamChat.Wait until all attachments have uploaded")));const s=this.attachmentService.mapToAttachments();let r=this.textareaValue;const o=!r.replace(/ /g,"");if(r&&!o||s&&0!==s.length){if(o&&(r=""),this.containsLinks&&!this.canSendLinks)return void this.notificationService.addTemporaryNotification("streamChat.Sending links is not allowed in this conversation");this.isUpdate||(this.textareaValue="");try{yield this.isUpdate?this.channelService.updateMessage(Object.assign(Object.assign({},this.message),{text:r,attachments:s})):this.channelService.sendMessage(r,s,this.mentionedUsers,this.parentMessageId,null===(e=this.quotedMessage)||void 0===e?void 0:e.id),this.messageUpdate.emit(),this.isUpdate||this.attachmentService.resetAttachmentUploads()}catch{this.isUpdate&&this.notificationService.addTemporaryNotification("streamChat.Edit message request failed")}this.channelService.typingStopped(this.parentMessageId),this.quotedMessage&&this.deselectMessageToQuote()}})}get containsLinks(){return/(?:(?:https?|ftp):\/\/)?[\w/\-?=%.]+\.[\w/\-&?=%.]+/.test(this.textareaValue)}get quotedMessageAttachments(){var e;const n=null===(e=this.quotedMessage)||void 0===e?void 0:e.attachments;return n&&n.length?[n[0]]:[]}get disabledTextareaText(){return this.canSendMessages?"":"thread"===this.mode?"streamChat.You can't send thread replies in this channel":"streamChat.You can't send messages in this channel"}filesSelected(e){return(0,w.mG)(this,void 0,void 0,function*(){(yield this.areAttachemntsValid(e))&&(yield this.attachmentService.filesSelected(e),this.clearFileInput())})}deselectMessageToQuote(){this.channelService.selectMessageToQuote(void 0)}getEmojiPickerContext(){return{emojiInput$:this.emojiInputService.emojiInput$}}getAttachmentPreviewListContext(){return{attachmentUploads$:this.attachmentService.attachmentUploads$,deleteUploadHandler:this.deleteUpload.bind(this),retryUploadHandler:this.retryUpload.bind(this)}}deleteUpload(e){this.attachmentService.deleteAttachment(e)}retryUpload(e){this.attachmentService.retryAttachmentUpload(e)}clearFileInput(){this.fileInput.nativeElement.value=""}get isUpdate(){return!!this.message}initTextarea(){if(this.canSendMessages||(this.textareaRef=void 0),!this.canSendMessages||this.textareaRef||!this.textareaAnchor)return;const e=this.componentFactoryResolver.resolveComponentFactory(this.textareaType);this.textareaRef=this.textareaAnchor.viewContainerRef.createComponent(e),this.cdRef.detectChanges()}areAttachemntsValid(e){return(0,w.mG)(this,void 0,void 0,function*(){if(!e)return!0;this.appSettings||(yield this.chatClient.getAppSettings());let n=!0;return Array.from(e).forEach(s=>{var r,o,l,c,u,d,m,f,v,C,R,B,Q,A,oe,te,ne,ie,ue,_e,ve,Ce,ge,xe,be,Ie,Ye,Me,Le,dt,Ke,ht,wt,at,pt,it;let We,rt,gt,Xe;os(s)?(We=!(null===(l=null===(o=null===(r=this.appSettings)||void 0===r?void 0:r.image_upload_config)||void 0===o?void 0:o.blocked_file_extensions)||void 0===l||!l.find(ke=>s.name.endsWith(ke))),rt=!(null===(d=null===(u=null===(c=this.appSettings)||void 0===c?void 0:c.image_upload_config)||void 0===u?void 0:u.blocked_mime_types)||void 0===d||!d.find(ke=>s.type===ke)),gt=!(null===(v=null===(f=null===(m=this.appSettings)||void 0===m?void 0:m.image_upload_config)||void 0===f?void 0:f.allowed_file_extensions)||void 0===v||!v.length||null!==(B=null===(R=null===(C=this.appSettings)||void 0===C?void 0:C.image_upload_config)||void 0===R?void 0:R.allowed_file_extensions)&&void 0!==B&&B.find(ke=>s.name.endsWith(ke))),Xe=!(null===(oe=null===(A=null===(Q=this.appSettings)||void 0===Q?void 0:Q.image_upload_config)||void 0===A?void 0:A.allowed_mime_types)||void 0===oe||!oe.length||null!==(ie=null===(ne=null===(te=this.appSettings)||void 0===te?void 0:te.image_upload_config)||void 0===ne?void 0:ne.allowed_mime_types)&&void 0!==ie&&ie.find(ke=>s.type===ke))):(We=!(null===(ve=null===(_e=null===(ue=this.appSettings)||void 0===ue?void 0:ue.file_upload_config)||void 0===_e?void 0:_e.blocked_file_extensions)||void 0===ve||!ve.find(ke=>s.name.endsWith(ke))),rt=!(null===(xe=null===(ge=null===(Ce=this.appSettings)||void 0===Ce?void 0:Ce.file_upload_config)||void 0===ge?void 0:ge.blocked_mime_types)||void 0===xe||!xe.find(ke=>s.type===ke)),gt=!(null===(Ye=null===(Ie=null===(be=this.appSettings)||void 0===be?void 0:be.file_upload_config)||void 0===Ie?void 0:Ie.allowed_file_extensions)||void 0===Ye||!Ye.length||null!==(dt=null===(Le=null===(Me=this.appSettings)||void 0===Me?void 0:Me.file_upload_config)||void 0===Le?void 0:Le.allowed_file_extensions)&&void 0!==dt&&dt.find(ke=>s.name.endsWith(ke))),Xe=!(null===(wt=null===(ht=null===(Ke=this.appSettings)||void 0===Ke?void 0:Ke.file_upload_config)||void 0===ht?void 0:ht.allowed_mime_types)||void 0===wt||!wt.length||null!==(it=null===(pt=null===(at=this.appSettings)||void 0===at?void 0:at.file_upload_config)||void 0===pt?void 0:pt.allowed_mime_types)&&void 0!==it&&it.find(ke=>s.type===ke))),(We||rt||gt||Xe)&&(this.notificationService.addTemporaryNotification("streamChat.Unsupported file type: {{type}}",void 0,void 0,{type:s.type}),n=!1)}),n})}setCanSendMessages(){var e,n;const s=null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.own_capabilities;this.canSendMessages=!!s&&-1!==s.indexOf("main"===this.mode?"send-message":"send-reply"),this.isViewInited&&(this.cdRef.detectChanges(),this.initTextarea())}get parentMessageId(){let e;return"thread"===this.mode&&this.channelService.activeParentMessageId$.pipe((0,Mt.P)()).subscribe(n=>e=n),e}startCooldown(e){this.textareaPlaceholder=this.slowModeTextareaPlaceholder,this.isCooldownInProgress=!0,this.cooldown$=(0,H.H)(0,1e3).pipe((0,Ha.q)(e+1),(0,b.U)(n=>e-n),(0,Nt.b)(n=>{0===n&&this.stopCooldown()}))}stopCooldown(){this.cooldown$=void 0,this.isCooldownInProgress=!1,this.textareaPlaceholder=this.defaultTextareaPlaceholder}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(lt),t.Y36(cs),t.Y36(tp),t.Y36(hs),t.Y36(t._Vd),t.Y36(t.sBO),t.Y36(Qe),t.Y36($n),t.Y36(je),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-input"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Cc,5),t.Gf(ps,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.fileInput=s.first),t.iGM(s=t.CRH())&&(n.textareaAnchor=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{isFileUploadEnabled:"isFileUploadEnabled",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",mode:"mode",isMultipleFileUploadEnabled:"isMultipleFileUploadEnabled",message:"message",sendMessage$:"sendMessage$",inputMode:"inputMode"},outputs:{messageUpdate:"messageUpdate"},features:[t._Bn([cs,$n]),t.TTD],decls:2,vars:2,consts:[[3,"class","str-chat__input-flat-has-attachments","str-chat__input-flat-quoted",4,"ngIf"],["class","str-chat__message-input str-chat-angular__message-input",4,"ngIf"],["class","quoted-message-preview",4,"ngIf"],[1,"str-chat__input-flat-wrapper",2,"width","100%"],["defaultAttachmentsPreview",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rta","str-chat__textarea","str-chat-angular__textarea"],["data-testid","emoji-picker",4,"ngIf"],[4,"ngIf","ngIfElse"],["disabledTextarea",""],["class","str-chat__fileupload-wrapper","data-testid","file-upload-button",4,"ngIf"],["data-testid","send-button","class","str-chat__send-button",3,"click","keyup.enter",4,"ngIf"],["class","str-chat__input-flat-cooldown","data-testid","cooldown-timer",4,"ngIf"],[1,"quoted-message-preview"],[1,"quoted-message-preview-header"],["data-testid","remove-quote",1,"str-chat__square-button",3,"click","keyup.enter"],["icon","close-no-outline",2,"font-size","15px","line-height","15px","width","15px","height","15px"],[1,"quoted-message-preview-content"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner"],[3,"attachments","messageId",4,"ngIf"],["data-testid","quoted-message-text",3,"innerHTML"],[3,"attachments","messageId"],[1,"rfu-image-previewer-angular-host",3,"attachmentUploads$","retryAttachmentUpload","deleteAttachment"],["data-testid","emoji-picker"],[1,"str-chat__input-flat-emojiselect","str-chat-angular__emojiselect"],["streamTextarea","",3,"value","componentRef","areMentionsEnabled","mentionScope","placeholder","inputMode","valueChange","send","userMentions"],["disabled","","rows","1","data-testid","disabled-textarea",1,"rta__textarea","str-chat__textarea__textarea",3,"value"],["data-testid","file-upload-button",1,"str-chat__fileupload-wrapper"],[1,"str-chat__tooltip"],[1,"rfu-file-upload-button"],["type","file","data-testid","file-input",1,"rfu-file-input",3,"multiple","change"],["fileInput",""],[1,"str-chat__input-flat-fileupload"],["icon","file-upload"],["data-testid","send-button",1,"str-chat__send-button",3,"click","keyup.enter"],["icon","send",1,"str-chat__send-button-angular"],["data-testid","cooldown-timer",1,"str-chat__input-flat-cooldown"],[1,"str-chat__message-input-cooldown-text"],[1,"str-chat__message-input","str-chat-angular__message-input"],["class","str-chat__quoted-message-preview-header",4,"ngIf"],["notAllowed",""],[1,"str-chat__quoted-message-preview-header"],[1,"str-chat__quoted-message-reply-to-message"],["data-testid","remove-quote",1,"str-chat__quoted-message-remove",3,"click","keyup.enter"],["icon","close-no-outline"],[1,"str-chat__message-input-inner","str-chat-angular__message-input-inner"],["class","str-chat__file-input-container","data-testid","file-upload-button",4,"ngIf"],[1,"str-chat__message-textarea-container"],["data-testid","quoted-message-container","class","str-chat__quoted-message-preview",4,"ngIf"],[1,"str-chat__message-textarea-with-emoji-picker"],["streamTextarea","",3,"value","componentRef","areMentionsEnabled","mentionScope","inputMode","placeholder","valueChange","send","userMentions"],[1,"str-chat__message-textarea-emoji-picker"],["data-testid","send-button","class","str-chat__send-button",3,"disabled","click","keyup.enter",4,"ngIf"],["class","str-chat__message-input-cooldown","data-testid","cooldown-timer",4,"ngIf"],["data-testid","file-upload-button",1,"str-chat__file-input-container"],["type","file","data-testid","file-input",1,"str-chat__file-input",3,"multiple","id","change"],[1,"str-chat__file-input-label",3,"for"],["icon","attach"],["data-testid","quoted-message-container",1,"str-chat__quoted-message-preview"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",1,"str-chat__quoted-message-text",3,"innerHTML"],[1,"str-chat__attachment-preview-list-angular-host",3,"attachmentUploads$","retryAttachmentUpload","deleteAttachment"],["data-testid","send-button",1,"str-chat__send-button",3,"disabled","click","keyup.enter"],["icon","send"],["data-testid","cooldown-timer",1,"str-chat__message-input-cooldown"],["data-testid","disabled-textarea",1,"str-chat__message-input-not-allowed"]],template:function(e,n){1&e&&(t.YNc(0,Ec,16,21,"div",0),t.YNc(1,Yc,5,3,"div",1)),2&e&&(t.Q6J("ngIf","2"!==n.themeVersion),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion))},dependencies:[yt,It,gs,np,x.O5,x.tP,ps,x.Ov,Se.X$],encapsulation:2}),i})(),ip=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-notification"]],inputs:{type:"type",content:"content"},ngContentSelectors:Hn,decls:4,vars:5,consts:[["data-testid","custom-notification"],[4,"ngIf","ngIfElse"],["elseContent",""],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,zc,2,1,"ng-container",1),t.YNc(2,Jc,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const s=t.MAs(3);t.Gre("str-chat__custom-notification notification-",n.type," str-chat__notification"),t.xp6(1),t.Q6J("ngIf",n.content)("ngIfElse",s)}},dependencies:[x.O5,x.tP],encapsulation:2}),i})(),Yn=(()=>{class i{constructor(e,n,s){this.customTemplatesService=e,this.notificationService=n,this.themeService=s,this.notifications$=this.notificationService.notifications$,this.theme$=this.themeService.theme$,this.themeVersion=this.themeService.themeVersion}trackById(e,n){return n.id}getNotificationContentContext(e){return Object.assign(Object.assign({},e.templateContext),{dismissFn:e.dismissFn})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(je),t.Y36(lt),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-notification-list"]],decls:6,vars:11,consts:[["data-testid","notification-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["defaultNotification",""],["notificationContent",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","notification-content",4,"ngIf"],[4,"ngIf"],["data-testclass","notification-content"],[3,"type","content"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.YNc(2,eu,5,7,"ng-container",1),t.ALo(3,"async"),t.qZA(),t.YNc(4,tu,1,2,"ng-template",null,2,t.W1O)),2&e&&(t.Gre("str-chat__theme-",t.lcZ(1,7,n.theme$)," str-chat__list-notifications"),t.ekj("str-chat","2"===n.themeVersion),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,9,n.notifications$))("ngForTrackBy",n.trackById))},dependencies:[ip,x.sg,x.O5,x.tP,x.Ov,Se.X$],encapsulation:2}),i})(),sp=(()=>{class i{constructor(e,n,s,r){this.chatClientService=e,this.notificationService=n,this.channelService=s,this.customTemplatesService=r,this.isOpen=!1,this.isMine=!1,this.enabledActions=[],this.displayedActionsCount=new t.vpe,this.isEditing=new t.vpe,this.isEditModalOpen=!1,this.subscriptions=[],this.visibleMessageActionItems=[],this.sendMessageSubject=new ee.x,this.modalClosed=()=>{this.isEditModalOpen=!1,this.isEditing.emit(!1)},this.subscriptions.push(this.customTemplatesService.messageInputTemplate$.subscribe(o=>this.messageInputTemplate=o)),this.subscriptions.push(this.customTemplatesService.messageActionsBoxItemTemplate$.subscribe(o=>this.messageActionItemTemplate=o)),this.subscriptions.push(this.customTemplatesService.modalTemplate$.subscribe(o=>this.modalTemplate=o)),this.messageActionItems=[{actionName:"quote",actionLabelOrTranslationKey:"streamChat.Reply",actionHandler:o=>this.channelService.selectMessageToQuote(o),isVisible:o=>-1!==o.indexOf("quote-message")},{actionName:"pin",actionLabelOrTranslationKey:()=>{var o;return null!==(o=this.message)&&void 0!==o&&o.pinned?"streamChat.Unpin":"streamChat.Pin"},actionHandler:o=>o.pinned?this.channelService.unpinMessage(o):this.channelService.pinMessage(o),isVisible:o=>-1!==o.indexOf("pin-message")},{actionName:"flag",actionLabelOrTranslationKey:"streamChat.Flag",actionHandler:o=>(0,w.mG)(this,void 0,void 0,function*(){try{yield this.chatClientService.flagMessage(o.id),this.notificationService.addTemporaryNotification("streamChat.Message has been successfully flagged","success")}catch{this.notificationService.addTemporaryNotification("streamChat.Error adding flag")}}),isVisible:(o,l)=>-1!==o.indexOf("flag-message")&&!l},{actionName:"edit",actionLabelOrTranslationKey:"streamChat.Edit Message",actionHandler:()=>{this.isEditing.emit(!0),this.isEditModalOpen=!0},isVisible:(o,l)=>-1!==o.indexOf("update-own-message")&&l||-1!==o.indexOf("update-any-message")},{actionName:"delete",actionLabelOrTranslationKey:"streamChat.Delete",actionHandler:o=>(0,w.mG)(this,void 0,void 0,function*(){try{yield this.channelService.deleteMessage(o)}catch{this.notificationService.addTemporaryNotification("streamChat.Error deleting message")}}),isVisible:(o,l)=>(-1!==o.indexOf("delete")||-1!==o.indexOf("delete-own-message"))&&l||-1!==o.indexOf("delete-any")||-1!==o.indexOf("delete-any-message")}],this.sendMessage$=this.sendMessageSubject.asObservable()}ngOnChanges(e){(e.isMine||e.enabledActions||e.message)&&(this.visibleMessageActionItems=this.messageActionItems.filter(n=>n.isVisible(this.enabledActions,this.isMine,this.message)),this.displayedActionsCount.emit(this.visibleMessageActionItems.length))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getActionLabel(e){return"string"==typeof e?e:e()}sendClicked(){this.sendMessageSubject.next()}getMessageInputContext(){return{message:this.message,messageUpdateHandler:this.modalClosed,isFileUploadEnabled:void 0,areMentionsEnabled:void 0,isMultipleFileUploadEnabled:void 0,mentionScope:void 0,mode:void 0,sendMessage$:this.sendMessage$}}getEditModalContext(){return{isOpen:this.isEditModalOpen,isOpenChangeHandler:e=>{this.isEditModalOpen=e,this.isEditModalOpen||this.modalClosed()},content:this.modalContent}}trackByActionName(e,n){return n.actionName}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Qe),t.Y36(lt),t.Y36(Be),t.Y36(je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-actions-box"]],viewQuery:function(e,n){if(1&e&&t.Gf(ts,7),2&e){let s;t.iGM(s=t.CRH())&&(n.modalContent=s.first)}},inputs:{isOpen:"isOpen",isMine:"isMine",message:"message",enabledActions:"enabledActions"},outputs:{displayedActionsCount:"displayedActionsCount",isEditing:"isEditing"},features:[t.TTD],decls:11,vars:6,consts:[["data-testid","action-box",1,"str-chat__message-actions-box","str-chat__message-actions-box-angular"],["actionBox",""],[1,"str-chat__message-actions-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["defaultMessageActionItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultModal",""],["modalContent",""],[1,"str-chat__message-actions-list-item-button",3,"click"],[1,"str-chat__message-actions-list-item"],[3,"isOpen","content","isOpenChange"],["class","str-chat__edit-message-form",4,"ngIf"],[1,"str-chat__edit-message-form"],["defaultInput",""],[1,"str-chat__message-team-form-footer","str-chat__message-team-form-footer-angular"],[1,"str-chat__edit-message-form-options"],["translate","","data-testid","cancel-button",1,"str-chat__edit-message-cancel",3,"click"],["type","submit","translate","","data-testid","send-button",1,"str-chat__edit-message-send",3,"click","keyup.enter"],[3,"message","sendMessage$","messageUpdate"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1)(2,"ul",2),t.YNc(3,iu,2,2,"ng-container",3),t.qZA()(),t.YNc(4,su,4,4,"ng-template",null,4,t.W1O),t.YNc(6,au,1,0,"ng-container",5),t.YNc(7,ru,1,2,"ng-template",null,6,t.W1O),t.YNc(9,uu,1,1,"ng-template",null,7,t.W1O)),2&e){const s=t.MAs(8);t.ekj("str-chat__message-actions-box--open",!0),t.xp6(3),t.Q6J("ngForOf",n.visibleMessageActionItems)("ngForTrackBy",n.trackByActionName),t.xp6(3),t.Q6J("ngTemplateOutlet",n.modalTemplate||s)("ngTemplateOutletContext",n.getEditModalContext())}},dependencies:[ds,ms,Yn,x.sg,x.tP,x.O5,Se.Pi,Se.X$],encapsulation:2}),i})(),ap=(()=>{class i{constructor(e,n){this.channelService=e,this.themeService=n,this.subscriptions=[],this.isError$=this.channelService.channels$.pipe((0,b.U)(()=>!1),(0,D.K)(()=>(0,k.of)(!0)),(0,Ti.O)(!1)),this.isInitializing$=this.channelService.channels$.pipe((0,b.U)(s=>!s),(0,D.K)(()=>(0,k.of)(!1))),this.isActiveThread$=this.channelService.activeParentMessageId$.pipe((0,b.U)(s=>!!s)),this.theme$=this.themeService.theme$,this.isActiveChannel$=this.channelService.activeChannel$.pipe((0,b.U)(s=>!!s))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel"]],ngContentSelectors:_u,decls:8,vars:13,consts:[["class","str-chat__container",4,"ngIf","ngIfElse"],["noChannel",""],[1,"str-chat__container"],[1,"str-chat__main-panel"],[4,"ngIf"],["class","str-chat__empty-channel",4,"ngIf"],["class","str-chat__loading-channel",4,"ngIf"],[1,"str-chat__empty-channel"],["icon","chat-bubble"],[1,"str-chat__empty-channel-text"],[1,"str-chat__empty-channel-notifications"],[1,"str-chat__loading-channel"],[1,"str-chat__loading-channel-header"],[1,"str-chat__loading-channel-header-avatar"],[1,"str-chat__loading-channel-header-end"],[1,"str-chat__loading-channel-header-name"],[1,"str-chat__loading-channel-header-info"],[1,"str-chat__loading-channel-message-list"],[1,"str-chat__loading-channel-message"],[1,"str-chat__loading-channel-message-avatar"],[1,"str-chat__loading-channel-message-end"],[1,"str-chat__loading-channel-message-sender"],[1,"str-chat__loading-channel-message-last-row"],[1,"str-chat__loading-channel-message-text"],[1,"str-chat__loading-channel-message-date"],[1,"str-chat__loading-channel-message-input-row"],[1,"str-chat__loading-channel-message-input"],[1,"str-chat__loading-channel-message-send"]],template:function(e,n){if(1&e&&(t.F$t(fu),t.TgZ(0,"div"),t.ALo(1,"async"),t.YNc(2,hu,5,3,"div",0),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.YNc(6,mu,8,14,"ng-template",null,1,t.W1O),t.qZA()),2&e){const s=t.MAs(7);t.Gre("str-chat str-chat-channel messaging str-chat__channel str-chat__theme-",t.lcZ(1,5,n.theme$),""),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,7,n.isError$)&&!1===t.lcZ(4,9,n.isInitializing$)&&!0===t.lcZ(5,11,n.isActiveChannel$))("ngIfElse",s)}},dependencies:[hn,Yn,x.O5,x.Ov,Se.X$],encapsulation:2}),i})();const qn=i=>{let a="";const e=i.map(r=>r.name||r.id).slice(0,5),n=i.length-e.length;return a=e.join(", "),n>0&&(a+=` +${n}`),a},fs=(i,a)=>{var e;if(null!==(e=i.data)&&void 0!==e&&e.name)return i.data.name;if(i.state.members&&Object.keys(i.state.members).length>0){const n=Object.values(i.state.members).map(s=>s.user||{id:s.user_id}).filter(s=>s.id!==a?.id);return qn(n)}return i.id};let _s=(()=>{class i{constructor(){this.isOpenSubject=new y.X(!1),this.isOpen$=this.isOpenSubject.asObservable().pipe((0,xi.x)()),this.isOpen$.pipe((0,Pt.h)(e=>e)).subscribe(()=>{this.watchForOutsideClicks()})}open(){this.isOpenSubject.next(!0)}close(){this.isOpenSubject.next(!1)}toggle(){this.isOpenSubject.getValue()?this.close():this.open()}setMenuElement(e){this.menuElement=e}channelSelected(){this.close()}watchForOutsideClicks(){if(!this.menuElement)return;const e=n=>{this.menuElement.contains(n.target)||(this.close(),window.removeEventListener("click",e))};window.addEventListener("click",e),this.isOpen$.pipe((0,Pt.h)(n=>!n),(0,Mt.P)()).subscribe(()=>window.removeEventListener("click",e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rp=(()=>{class i{constructor(e,n,s,r,o){this.channelService=e,this.channelListToggleService=n,this.customTemplatesService=s,this.cdRef=r,this.chatClientService=o,this.subscriptions=[],this.channelService.activeChannel$.subscribe(l=>{var c,u;this.activeChannel=l;const d=null===(u=null===(c=this.activeChannel)||void 0===c?void 0:c.data)||void 0===u?void 0:u.own_capabilities;d&&(this.canReceiveConnectEvents=-1!==d.indexOf("connect-events"))})}ngOnInit(){this.subscriptions.push(this.customTemplatesService.channelActionsTemplate$.subscribe(e=>{this.channelActionsTemplate=e,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.channelHeaderInfoTemplate$.subscribe(e=>{this.channelHeaderInfoTemplate=e,this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}toggleMenu(e){e.stopPropagation(),this.channelListToggleService.toggle()}getChannelActionsContext(){return{channel:this.activeChannel}}getChannelInfoContext(){return{channel:this.activeChannel}}get memberCountParam(){var e,n;return{memberCount:(null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.member_count)||0}}get watcherCountParam(){var e,n;return{watcherCount:(null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.watcher_count)||0}}get displayText(){return this.activeChannel?fs(this.activeChannel,this.chatClientService.chatClient.user):""}get avatarName(){var e,n;return null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.name}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(_s),t.Y36(je),t.Y36(t.sBO),t.Y36(Qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-header"]],ngContentSelectors:Hn,decls:12,vars:8,consts:[[1,"str-chat__header-livestream","str-chat__channel-header"],[1,"str-chat__header-hamburger",3,"click","keyup.enter"],["icon","menu"],["type","channel","location","channel-header",3,"imageUrl","name","channel","size"],[1,"str-chat__header-livestream-left","str-chat__channel-header-end"],["data-testid","name",1,"str-chat__header-livestream-left--title","str-chat__channel-header-title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultChannelInfo",""],[4,"ngIf"],["data-testid","info",1,"str-chat__header-livestream-left--members","str-chat__channel-header-info"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(r){return n.toggleMenu(r)})("keyup.enter",function(r){return n.toggleMenu(r)}),t._UZ(2,"stream-icon-placeholder",2),t.qZA(),t.Hsn(3),t._UZ(4,"stream-avatar-placeholder",3),t.TgZ(5,"div",4)(6,"p",5),t._uU(7),t.qZA(),t.YNc(8,vu,1,0,"ng-container",6),t.YNc(9,Cu,4,8,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(11,bu,2,2,"ng-container",8),t.qZA()),2&e){const s=t.MAs(10);t.xp6(4),t.s9C("imageUrl",null==n.activeChannel||null==n.activeChannel.data?null:n.activeChannel.data.image),t.s9C("name",n.avatarName),t.Q6J("channel",n.activeChannel)("size",40),t.xp6(3),t.hij(" ",n.displayText," "),t.xp6(1),t.Q6J("ngTemplateOutlet",n.channelHeaderInfoTemplate||s)("ngTemplateOutletContext",n.getChannelInfoContext()),t.xp6(3),t.Q6J("ngIf",n.channelActionsTemplate)}},dependencies:[yt,It,x.tP,x.O5,Se.X$],encapsulation:2}),i})(),op=(()=>{class i{constructor(e,n,s){this.channelService=e,this.ngZone=n,this.chatClientService=s,this.isActive=!1,this.isUnread=!1,this.latestMessage="streamChat.Nothing yet...",this.subscriptions=[],this.canSendReadEvents=!0}ngOnInit(){var e,n,s,r;this.subscriptions.push(this.channelService.activeChannel$.subscribe(c=>{var u;return this.isActive=c?.id===(null===(u=this.channel)||void 0===u?void 0:u.id)}));const o=null===(n=null===(e=this.channel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.latestMessages;o&&o.length>0&&this.setLatestMessage(o[o.length-1]),this.updateUnreadState();const l=(null===(r=null===(s=this.channel)||void 0===s?void 0:s.data)||void 0===r?void 0:r.own_capabilities)||[];this.canSendReadEvents=-1!==l.indexOf("read-events"),this.subscriptions.push(this.channel.on("message.new",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.updated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.deleted",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("channel.truncated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.read",()=>this.ngZone.run(()=>{this.updateUnreadState()})))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get avatarImage(){var e,n;return null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.image}get avatarName(){var e,n;return null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.name}get title(){return this.channel?fs(this.channel,this.chatClientService.chatClient.user):""}setAsActiveChannel(){this.channelService.setAsActiveChannel(this.channel)}handleMessageEvent(e){this.ngZone.run(()=>{var n,s,r;0!==(null===(n=this.channel)||void 0===n?void 0:n.state.latestMessages.length)?!e.message||(null===(s=this.channel)||void 0===s?void 0:s.state.latestMessages[(null===(r=this.channel)||void 0===r?void 0:r.state.latestMessages.length)-1].id)!==e.message.id||(this.setLatestMessage(e.message),this.updateUnreadState()):this.latestMessage="streamChat.Nothing yet..."})}setLatestMessage(e){e?.deleted_at?this.latestMessage="streamChat.Message deleted":e?.text?this.latestMessage=ct(e,this.channel,this.chatClientService.chatClient.user)||e.text:e?.attachments&&e.attachments.length&&(this.latestMessage="streamChat.\u{1f3d9} Attachment...")}updateUnreadState(){if(this.isActive||!this.canSendReadEvents)return this.unreadCount=0,void(this.isUnread=!1);this.unreadCount=this.channel.countUnread(),this.isUnread=!!this.unreadCount}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(t.R0b),t.Y36(Qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-preview"]],inputs:{channel:"channel"},decls:12,vars:15,consts:[["data-testid","channel-preview-container",1,"str-chat__channel-preview-messenger","str-chat__channel-preview",3,"click"],[1,"str-chat__channel-preview-messenger--left"],["type","channel","location","channel-preview",3,"name","imageUrl","channel","size"],[1,"str-chat__channel-preview-messenger--right","str-chat__channel-preview-end"],[1,"str-chat__channel-preview-end-first-row"],[1,"str-chat__channel-preview-messenger--name"],["data-testid","channel-preview-title"],["data-testid","unread-badge","class","str-chat__channel-preview-unread-badge",4,"ngIf"],["data-testid","latest-message",1,"str-chat__channel-preview-messenger--last-message"],["data-testid","unread-badge",1,"str-chat__channel-preview-unread-badge"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.setAsActiveChannel()}),t.TgZ(1,"div",1),t._UZ(2,"stream-avatar-placeholder",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),t._uU(7),t.qZA()(),t.YNc(8,wu,2,1,"div",7),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&e&&(t.ekj("str-chat__channel-preview-messenger--active",n.isActive)("str-chat__channel-preview--active",n.isActive)("str-chat__channel-preview-messenger--unread",n.isUnread),t.xp6(2),t.s9C("name",n.avatarName),t.s9C("imageUrl",n.avatarImage),t.Q6J("channel",n.channel)("size",49),t.xp6(5),t.Oqu(n.title),t.xp6(1),t.Q6J("ngIf",n.unreadCount),t.xp6(2),t.hij(" ",t.lcZ(11,13,n.latestMessage)," "))},dependencies:[It,x.O5,Se.X$],encapsulation:2}),i})(),lp=(()=>{class i{constructor(e,n,s,r){this.channelService=e,this.channelListToggleService=n,this.customTemplatesService=s,this.themeService=r,this.isLoadingMoreChannels=!1,this.subscriptions=[],this.theme$=this.themeService.theme$,this.isOpen$=this.channelListToggleService.isOpen$,this.channels$=this.channelService.channels$,this.hasMoreChannels$=this.channelService.hasMoreChannels$,this.isError$=this.channels$.pipe((0,b.U)(()=>!1),(0,D.K)(()=>(0,k.of)(!0)),(0,Ti.O)(!1)),this.isInitializing$=this.channels$.pipe((0,b.U)(o=>!o),(0,D.K)(()=>(0,k.of)(!1))),this.subscriptions.push(this.customTemplatesService.channelPreviewTemplate$.subscribe(o=>this.customChannelPreviewTemplate=o))}ngAfterViewInit(){this.channelListToggleService.setMenuElement(this.container.nativeElement)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadMoreChannels(){return(0,w.mG)(this,void 0,void 0,function*(){this.isLoadingMoreChannels=!0,yield this.channelService.loadMoreChannels(),this.isLoadingMoreChannels=!1})}trackByChannelId(e,n){return n.cid}channelSelected(){this.channelListToggleService.channelSelected()}getChannelPreviewContext(e){return{channel:e}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(_s),t.Y36(je),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(is,5),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first)}},ngContentSelectors:qu,decls:15,vars:15,consts:[["data-testid","channel-list-container",2,"max-width","unset"],["container",""],["class","str-chat__channel-list-messenger",4,"ngIf","ngIfElse"],["statusIndicator",""],["chatDown",""],["loadingChannels",""],["loadingChannel",""],[1,"str-chat__channel-list-messenger"],[1,"str-chat__channel-list-messenger__main"],["class","str-chat__channel-list-empty",4,"ngIf"],["class","str-chat__channel-list-empty-v1","data-testid","empty-channel-list-indicator",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","str-chat__load-more-button","data-testid","load-more",3,"click","keyup.enter",4,"ngIf"],[1,"str-chat__channel-list-empty"],["icon","chat-bubble"],["data-testid","empty-channel-list-indicator"],["data-testid","empty-channel-list-indicator",1,"str-chat__channel-list-empty-v1"],["defaultTemplate",""],[3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","channel-preview",3,"channel"],["data-testid","load-more",1,"str-chat__load-more-button",3,"click","keyup.enter"],["data-testid","load-more-button",1,"str-chat__load-more-button__button","str-chat__cta-button",3,"disabled"],[4,"ngIf","ngIfElse"],["loadingIndicator",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","chatdown-container",1,"str-chat__down"],[1,"str-chat__down-main"],["icon","connection-error"],["data-testid","loading-indicator",1,"str-chat__loading-channels"],[1,"str-chat__loading-channels-item","str-chat__channel-preview-loading"],[1,"str-chat__loading-channels-avatar"],[1,"str-chat__loading-channels-meta","str-chat__channel-preview-end-loading"],[1,"str-chat__loading-channels-username"],[1,"str-chat__loading-channels-status"]],template:function(e,n){if(1&e&&(t.F$t(Yu),t.TgZ(0,"div",0,1),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,Eu,12,13,"div",2),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA(),t.YNc(7,Uu,4,6,"ng-template",null,3,t.W1O),t.YNc(9,Bu,10,7,"ng-template",null,4,t.W1O),t.YNc(11,ju,4,3,"ng-template",null,5,t.W1O),t.YNc(13,$u,5,0,"ng-template",null,6,t.W1O)),2&e){const s=t.MAs(8);t.Gre("str-chat str-chat__channel-list str-chat-channel-list messaging str-chat__theme-",t.lcZ(2,7,n.theme$),""),t.ekj("str-chat-channel-list--open",!0===t.lcZ(3,9,n.isOpen$)),t.xp6(4),t.Q6J("ngIf",!1===t.lcZ(5,11,n.isError$)&&!1===t.lcZ(6,13,n.isInitializing$))("ngIfElse",s)}},dependencies:[hn,op,jn,yt,x.O5,x.sg,x.tP,x.Ov,Se.X$],encapsulation:2}),i})();Si().extend(tr());const up={like:"\u{1f44d}",angry:"\u{1f620}",love:"\u2764\ufe0f",haha:"\u{1f602}",wow:"\u{1f62e}",sad:"\u{1f61e}"};let dp=(()=>{class i{constructor(e,n){this.cdRef=e,this.channelService=n,this.messageReactionCounts={},this.isSelectorOpen=!1,this.latestReactions=[],this.ownReactions=[],this.isSelectorOpenChange=new t.vpe,this.popperTriggerHover=He.hover,this.popperPlacementAuto=Ct.AUTO,this.eventHandler=s=>{var r;null!==(r=this.selectorContainer)&&void 0!==r&&r.nativeElement.contains(s.target)||this.isSelectorOpenChange.emit(!1)}}ngOnChanges(e){e.isSelectorOpen&&(this.isSelectorOpen?setTimeout(()=>this.watchForOutsideClicks()):this.stopWatchForOutsideClicks())}ngAfterViewChecked(){this.tooltipText&&!this.tooltipPositions&&(this.setTooltipPosition(),this.cdRef.detectChanges())}get existingReactions(){return Object.keys(this.messageReactionCounts).filter(e=>this.messageReactionCounts[e]>0)}get reactionsCount(){return Object.values(this.messageReactionCounts).reduce((e,n)=>e+n,0)}get reactionOptions(){return["like","love","haha","wow","sad","angry"]}getLatestUserByReaction(e){var n;return null===(n=this.latestReactions.find(s=>s.type===e&&s.user))||void 0===n?void 0:n.user}getEmojiByReaction(e){return up[e]}getUsersByReaction(e){return this.latestReactions.filter(n=>n.type===e).map(n=>{var s,r;return(null===(s=n.user)||void 0===s?void 0:s.name)||(null===(r=n.user)||void 0===r?void 0:r.id)}).filter(n=>!!n).join(", ")}showTooltip(e,n){this.currentTooltipTarget=e.target,this.tooltipText=this.getUsersByReaction(n)}hideTooltip(){this.tooltipText=void 0,this.currentTooltipTarget=void 0,this.tooltipPositions=void 0}trackByMessageReaction(e,n){return n}react(e){this.ownReactions.find(n=>n.type===e)?this.channelService.removeReaction(this.messageId,e):this.channelService.addReaction(this.messageId,e)}isOwnReaction(e){return!!this.ownReactions.find(n=>n.type===e)}watchForOutsideClicks(){window.addEventListener("click",this.eventHandler)}stopWatchForOutsideClicks(){window.removeEventListener("click",this.eventHandler)}setTooltipPosition(){var e,n,s;const r=null===(e=this.selectorTooltip)||void 0===e?void 0:e.nativeElement.getBoundingClientRect(),o=null===(n=this.currentTooltipTarget)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(s=this.selectorContainer)||void 0===s?void 0:s.nativeElement.getBoundingClientRect();if(!r||!o||!l)return;const c=r.width===l.width||r.x<l.x?0:o.left+o.width/2-l.left-r.width/2;this.tooltipPositions={tooltip:c,arrow:o.x-r.x+o.width/2-c}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(Be))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-reactions"]],viewQuery:function(e,n){if(1&e&&(t.Gf(zu,5),t.Gf(Ju,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.selectorContainer=s.first),t.iGM(s=t.CRH())&&(n.selectorTooltip=s.first)}},inputs:{messageId:"messageId",messageReactionCounts:"messageReactionCounts",isSelectorOpen:"isSelectorOpen",latestReactions:"latestReactions",ownReactions:"ownReactions"},outputs:{isSelectorOpenChange:"isSelectorOpenChange"},features:[t.TTD],decls:2,vars:2,consts:[["class","str-chat__reaction-list str-chat__message-reactions-container","data-testid","reaction-list",3,"str-chat__reaction-list--reverse","str-chat__reaction-list-hidden",4,"ngIf"],["class","str-chat__reaction-selector str-chat__message-reaction-selector","data-testid","reaction-selector",4,"ngIf"],["data-testid","reaction-list",1,"str-chat__reaction-list","str-chat__message-reactions-container"],[1,"str-chat__message-reactions"],["class","str-chat__message-reaction","data-testclass","emoji",3,"str-chat__message-reaction-own","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","reactions-count",1,"str-chat__reaction-list--counter"],["data-testclass","emoji",1,"str-chat__message-reaction",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["popperContent",""],["data-testclass","tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],[1,"emoji","str-chat__message-reaction-emoji"],["data-testclass","reaction-list-reaction-count",1,"str-chat__message-reaction-count"],["data-testid","reaction-selector",1,"str-chat__reaction-selector","str-chat__message-reaction-selector"],["selectorContainer",""],["data-testid","tooltip","class","str-chat__reaction-selector-tooltip",3,"ngStyle",4,"ngIf"],[1,"str-chat__message-reactions-list","str-chat__message-reactions-options"],["class","\n        str-chat__message-reactions-option\n        str-chat__message-reactions-list-item\n        str-chat__emoji\n      ","data-testclass","emoji-option",3,"str-chat__message-reactions-option-selected","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","tooltip",1,"str-chat__reaction-selector-tooltip",3,"ngStyle"],["selectorTooltip",""],[1,"arrow",3,"ngStyle"],[1,"latest-user-username"],["data-testclass","emoji-option",1,"str-chat__message-reactions-option","str-chat__message-reactions-list-item","str-chat__emoji",3,"click","keyup.enter"],["class","latest-user str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave",4,"ngIf"],[1,"emoji","str-chat__emoji-selector-emoji-angular","str-chat__message-reaction-emoji"],["class","str-chat__message-reactions-list-item__count",4,"ngIf"],[1,"latest-user","str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave"],[3,"imageUrl","name","size"],[1,"str-chat__message-reactions-list-item__count"]],template:function(e,n){1&e&&(t.YNc(0,Qu,6,7,"div",0),t.YNc(1,nd,5,3,"div",1)),2&e&&(t.Q6J("ngIf",n.existingReactions.length>0),t.xp6(1),t.Q6J("ngIf",n.isSelectorOpen))},dependencies:[Rn,It,x.O5,x.sg,Ee,x.PC],styles:[".emoji[_ngcontent-%COMP%] {position: relative; display: inline-block; }"]}),i})(),hp=(()=>{class i{constructor(e,n,s,r,o){this.chatClientService=e,this.channelService=n,this.customTemplatesService=s,this.cdRef=r,this.enabledMessageActions=[],this.mode="main",this.isHighlighted=!1,this.isActionBoxOpen=!1,this.isReactionSelectorOpen=!1,this.visibleMessageActionsCount=0,this.messageTextParts=[],this.popperTriggerClick=He.click,this.popperTriggerHover=He.hover,this.popperPlacementAuto=Ct.AUTO,this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.imageAttachmentModalState="closed",this.subscriptions=[],this.themeVersion=o.themeVersion}ngOnInit(){this.subscriptions.push(this.chatClientService.user$.subscribe(e=>{this.user=e})),this.subscriptions.push(this.customTemplatesService.mentionTemplate$.subscribe(e=>this.mentionTemplate=e)),this.subscriptions.push(this.customTemplatesService.attachmentListTemplate$.subscribe(e=>this.attachmentListTemplate=e)),this.subscriptions.push(this.customTemplatesService.messageActionsBoxTemplate$.subscribe(e=>this.messageActionsBoxTemplate=e)),this.subscriptions.push(this.customTemplatesService.messageReactionsTemplate$.subscribe(e=>this.messageReactionsTemplate=e)),this.subscriptions.push(this.customTemplatesService.deliveredStatusTemplate$.subscribe(e=>this.customDeliveredStatusTemplate=e)),this.subscriptions.push(this.customTemplatesService.sendingStatusTemplate$.subscribe(e=>this.customSendingStatusTemplate=e)),this.subscriptions.push(this.customTemplatesService.readStatusTemplate$.subscribe(e=>this.customReadStatusTemplate=e))}ngOnChanges(e){var n,s;if(e.message){this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.createMessageParts();const r=null===(s=null===(n=this.message)||void 0===n?void 0:n.quoted_message)||void 0===s?void 0:s.attachments;this.quotedMessageAttachments=r&&r.length?[r[0]]:[]}e.enabledMessageActions&&(this.canReactToMessage=-1!==this.enabledMessageActions.indexOf("send-reaction"),this.canReceiveReadEvents=-1!==this.enabledMessageActions.indexOf("read-events"))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get shouldDisplayThreadLink(){var e;return!(null===(e=this.message)||void 0===e||!e.reply_count)&&"thread"!==this.mode&&-1!==this.enabledMessageActions.indexOf("send-reply")}get isSentByCurrentUser(){var e,n,s;return(null===(n=null===(e=this.message)||void 0===e?void 0:e.user)||void 0===n?void 0:n.id)===(null===(s=this.user)||void 0===s?void 0:s.id)}get readByText(){return qn(this.message.readBy)}get lastReadUser(){var e;return null===(e=this.message)||void 0===e?void 0:e.readBy.filter(n=>{var s;return n.id!==(null===(s=this.user)||void 0===s?void 0:s.id)})[0]}get isOnlyReadByMe(){return this.message&&0===this.message.readBy.length}get isReadByMultipleUsers(){return this.message&&this.message.readBy.length>1}get isMessageDeliveredAndRead(){return this.message&&this.message.readBy&&"received"===this.message.status&&this.message.readBy.length>0}get parsedDate(){var e;if(this.message&&null!==(e=this.message)&&void 0!==e&&e.created_at)return(i=>Si()(i).calendar())(this.message.created_at)}get areOptionsVisible(){return!!this.message&&!(!this.message.type||"error"===this.message.type||"system"===this.message.type||"ephemeral"===this.message.type||"failed"===this.message.status||"sending"===this.message.status||"thread"===this.mode&&!this.message.parent_id)}get hasAttachment(){var e;return!(null===(e=this.message)||void 0===e||!e.attachments||!this.message.attachments.length)}get hasReactions(){var e;return!(null===(e=this.message)||void 0===e||!e.reaction_counts)&&Object.keys(this.message.reaction_counts).length>0}get replyCountParam(){var e;return{replyCount:null===(e=this.message)||void 0===e?void 0:e.reply_count}}get canDisplayReadStatus(){return!1!==this.canReceiveReadEvents&&-1!==this.enabledMessageActions.indexOf("read-events")}getAttachmentListContext(){var e,n,s;return{messageId:(null===(e=this.message)||void 0===e?void 0:e.id)||"",attachments:(null===(n=this.message)||void 0===n?void 0:n.attachments)||[],parentMessageId:null===(s=this.message)||void 0===s?void 0:s.parent_id,imageModalStateChangeHandler:r=>this.imageAttachmentModalState=r}}getQuotedMessageAttachmentListContext(){var e,n,s,r;return{messageId:(null===(n=null===(e=this.message)||void 0===e?void 0:e.quoted_message)||void 0===n?void 0:n.id)||"",attachments:this.quotedMessageAttachments,parentMessageId:null===(r=null===(s=null==this?void 0:this.message)||void 0===s?void 0:s.quoted_message)||void 0===r?void 0:r.parent_id}}getMessageReactionsContext(){var e,n,s,r;return{messageReactionCounts:(null===(e=this.message)||void 0===e?void 0:e.reaction_counts)||{},latestReactions:(null===(n=this.message)||void 0===n?void 0:n.latest_reactions)||[],isSelectorOpen:this.isReactionSelectorOpen,isSelectorOpenChangeHandler:o=>this.isReactionSelectorOpen=o,messageId:null===(s=this.message)||void 0===s?void 0:s.id,ownReactions:(null===(r=this.message)||void 0===r?void 0:r.own_reactions)||[]}}resendMessage(){this.channelService.resendMessage(this.message)}setAsActiveParentMessage(){this.channelService.setAsActiveParentMessage(this.message)}getMentionContext(e){return{content:e.content,user:e.user}}getMessageActionsBoxContext(){return{isOpen:this.isActionBoxOpen,isMine:this.isSentByCurrentUser,enabledActions:this.enabledMessageActions,message:this.message,displayedActionsCountChaneHanler:e=>{this.visibleMessageActionsCount=e,this.cdRef.detectChanges()},isEditingChangeHandler:e=>{this.isEditing=e,this.isActionBoxOpen=!this.isEditing}}}getDeliveredStatusContext(){return{message:this.message}}getSendingStatusContext(){return{message:this.message}}getReadStatusContext(){return{message:this.message,readByText:this.readByText}}jumpToMessage(e,n){this.channelService.jumpToMessage(e,n)}displayTranslatedMessage(){this.createMessageParts(!0)}displayOriginalMessage(){this.createMessageParts(!1)}createMessageParts(e=!0){let n=this.getMessageContent(e);if(n){let s=!1;if(n.startsWith("<p>")&&(n=n.replace("<p>",""),s=!0),n.endsWith("</p>\n")&&(n=n.replace("</p>\n",""),s=!0),this.message.mentioned_users&&0!==this.message.mentioned_users.length){this.messageTextParts=[];let r=n;this.message.mentioned_users.forEach(o=>{const l=`@${o.name||o.id}`;let c=r.substring(0,r.indexOf(l));c=this.fixEmojiDisplay(c),s||(c=this.wrapLinskWithAnchorTag(c)),this.messageTextParts.push({content:c,type:"text"}),this.messageTextParts.push({content:l,type:"mention",user:o}),r=r.replace(c+l,"")}),r&&(r=this.fixEmojiDisplay(r),s||(r=this.wrapLinskWithAnchorTag(r)),this.messageTextParts.push({content:r,type:"text"}))}else n=this.fixEmojiDisplay(n),s||(n=this.wrapLinskWithAnchorTag(n)),this.messageTextParts=[{content:n,type:"text"}]}else this.messageTextParts=[]}getMessageContent(e){var n,s,r;const o=(null===(n=this.message)||void 0===n?void 0:n.html)||(null===(s=this.message)||void 0===s?void 0:s.text);if(e){const l=null===(r=this.message)||void 0===r?void 0:r.translation;return l&&(this.shouldDisplayTranslationNotice=!0,this.displayedMessageTextContent="translation"),l||o}return this.displayedMessageTextContent="original",o}fixEmojiDisplay(e){const n=new RegExp(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,"g"),s=!!window.chrome&&typeof window.opr>"u";return e.replace(n,r=>`<span ${s?'class="str-chat__emoji-display-fix"':""}>${r}</span>`)}wrapLinskWithAnchorTag(e){return e.replace(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[A-Z0-9+&@#/%=~_|$])/gim,s=>`<a href="${s}" rel="nofollow">${s}</a>`)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Qe),t.Y36(Be),t.Y36(je),t.Y36(t.sBO),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message"]],viewQuery:function(e,n){if(1&e&&t.Gf(is,5),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first)}},inputs:{message:"message",enabledMessageActions:"enabledMessageActions",isLastSentMessage:"isLastSentMessage",mode:"mode",isHighlighted:"isHighlighted"},features:[t.TTD],decls:17,vars:23,consts:[["data-testid","message-container",3,"mouseleave"],["container",""],[4,"ngIf","ngIfElse"],["deletedMessage",""],["systemMessage",""],["quotedMessage",""],["messageDateAndSender",""],["messageStatus",""],["replyCountButton",""],["attachmentsTemplate",""],[4,"ngIf"],["data-testid","avatar","type","user","location","message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","user"],[1,"str-chat__message-inner"],["class","str-chat__message-simple__actions str-chat__message-options","data-testid","message-options",3,"str-chat__message-edit-in-progress",4,"ngIf"],[1,"str-chat__message-reactions-host"],["defaultMessageReactions",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__message-bubble"],["class","str-chat__message-text","tabindex","0",4,"ngIf"],["class","str-chat__message-error-icon","icon","error",4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","message-options",1,"str-chat__message-simple__actions","str-chat__message-options"],["data-testid","message-actions-container",1,"str-chat__message-actions-container","str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--options",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","popperHideOnMouseLeave"],["messageActionsToggle",""],["popperContent",""],["defaultMessageActionsBox",""],["class","str-chat__message-actions-box-button","data-testid","action-icon",3,"click","keyup.enter",4,"ngIf"],["class","\n              str-chat__message-simple__actions__action\n              str-chat__message-simple__actions__action--thread\n              str-chat__message-reply-in-thread-button\n            ","data-testid","reply-in-thread",3,"click","keyup.enter",4,"ngIf"],["class","\n              str-chat__message-simple__actions__action\n              str-chat__message-simple__actions__action--reactions\n              str-chat__message-reactions-button\n            ","data-testid","reaction-icon",3,"click","keyup.enter",4,"ngIf"],[3,"isOpen","isMine","enabledActions","message","displayedActionsCount","isEditing"],["data-testid","action-icon",1,"str-chat__message-actions-box-button",3,"click","keyup.enter"],["icon","action-icon",1,"str-chat__message-action-icon"],["data-testid","reply-in-thread",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--thread","str-chat__message-reply-in-thread-button",3,"click","keyup.enter"],["icon","reply-in-thread",1,"str-chat__message-action-icon"],["data-testid","reaction-icon",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--reactions","str-chat__message-reactions-button",3,"click","keyup.enter"],["icon","reaction-icon",1,"str-chat__message-action-icon"],[3,"messageReactionCounts","latestReactions","isSelectorOpen","messageId","ownReactions","isSelectorOpenChange"],["tabindex","0",1,"str-chat__message-text"],["data-testid","inner-message",1,"str-chat__message-text-inner","str-chat__message-simple-text-inner",3,"click","keyup.enter"],["data-testid","client-error-message","class","\n                  str-chat__simple-message--error-message\n                  str-chat__message--error-message\n                ",4,"ngIf"],["data-testid","error-message","class","\n                  str-chat__simple-message--error-message\n                  str-chat__message--error-message\n                ",4,"ngIf"],["data-testid","text"],[4,"ngFor","ngForOf"],["data-testid","client-error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],["data-testid","error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],[3,"innerHTML",4,"ngIf","ngIfElse"],["mention",""],[3,"innerHTML"],["defaultMention",""],[1,"str-chat__message-mention"],["icon","error",1,"str-chat__message-error-icon"],["data-testid","message-deleted-component"],["translate","",1,"str-chat__message--deleted-inner"],["data-testid","system-message",1,"str-chat__message--system"],[1,"str-chat__message--system__text"],[1,"str-chat__message--system__line"],[1,"str-chat__message--system__date"],["class","quoted-message str-chat__quoted-message-preview","data-testid","quoted-message-container",3,"mine","click","keyup.enter",4,"ngIf"],["data-testid","quoted-message-container",1,"quoted-message","str-chat__quoted-message-preview",3,"click","keyup.enter"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",3,"innerHTML"],["defaultAttachments",""],[3,"messageId","attachments","parentMessageId","imageModalStateChange"],["class","str-chat__translation-notice","data-testid","translation-notice",4,"ngIf"],[1,"str-chat__message-data","str-chat__message-simple-data","str-chat__message-metadata"],["data-testid","sender","class","str-chat__message-simple-name str-chat__message-sender-name",4,"ngIf"],["data-testid","date",1,"str-chat__message-simple-timestamp"],["data-testid","translation-notice",1,"str-chat__translation-notice"],["data-testid","see-original","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-translation","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-original","translate","",3,"click","keyup.enter"],["data-testid","see-translation","translate","",3,"click","keyup.enter"],["data-testid","sender",1,"str-chat__message-simple-name","str-chat__message-sender-name"],["sentStatus",""],["deliveredStatus",""],["defaultDeliveredStatus",""],["sendingStatus",""],["defaultSendingStatus",""],["readStatus",""],["defaultReadStatus",""],["class","\n          str-chat__message-simple-status\n          str-chat__message-simple-status-angular\n          str-chat__message-status\n        ","data-testid","delivered-indicator","tabindex","0",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngIf"],["data-testid","delivered-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],[1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-testid","delivered-icon","icon","delivered-icon"],["data-testid","sending-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["data-testid","loading-indicator"],["data-testid","read-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["data-testid","read-by-tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-test-id","last-read-user-avatar","type","user","location","message-reader",1,"str-chat-angular__avatar-host",3,"size","imageUrl","name","user"],["data-test-id","read-by-length","class","str-chat__message-simple-status-number",4,"ngIf"],["data-test-id","read-by-length",1,"str-chat__message-simple-status-number"],["class","\n      str-chat__message-simple-reply-button\n      str-chat__message-replies-count-button-wrapper\n    ",4,"ngIf"],[1,"str-chat__message-simple-reply-button","str-chat__message-replies-count-button-wrapper"],["class","str-chat__message-replies-count-button","data-testid","reply-count-button",3,"click",4,"ngIf"],["data-testid","reply-count-button",1,"str-chat__message-replies-count-button",3,"click"],["stream-icon-placeholder","","icon","reply",4,"ngIf"],["stream-icon-placeholder","","icon","reply"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1),t.NdJ("mouseleave",function(){return n.isActionBoxOpen=!1}),t.YNc(2,Ld,2,2,"ng-container",2),t.qZA(),t.YNc(3,Zd,3,0,"ng-template",null,3,t.W1O),t.YNc(5,Ud,8,2,"ng-template",null,4,t.W1O),t.YNc(7,Hd,1,1,"ng-template",null,5,t.W1O),t.YNc(9,Qd,1,1,"ng-template",null,6,t.W1O),t.YNc(11,ph,1,1,"ng-template",null,7,t.W1O),t.YNc(13,_h,1,1,"ng-template",null,8,t.W1O),t.YNc(15,yh,3,2,"ng-template",null,9,t.W1O)),2&e){const s=t.MAs(4);t.IyS("str-chat__message-simple str-chat__message str-chat__message--",null==n.message?null:n.message.type," str-chat__message--",null==n.message?null:n.message.status," ",null!=n.message&&n.message.text?"str-chat__message--has-text":"has-no-text",""),t.ekj("str-chat__message--me",n.isSentByCurrentUser)("str-chat__message--other",!n.isSentByCurrentUser)("str-chat__message-simple--me",n.isSentByCurrentUser)("str-chat__message--has-attachment",n.hasAttachment)("str-chat__message--with-reactions",n.hasReactions)("str-chat__message--highlighted",n.isHighlighted)("str-chat__message-with-thread-link",n.shouldDisplayThreadLink)("str-chat__message-send-can-be-retried","failed"===(null==n.message?null:n.message.status)&&403!==(null==n.message?null:n.message.errorStatusCode)),t.xp6(2),t.Q6J("ngIf",!(null!=n.message&&n.message.deleted_at))("ngIfElse",s)}},dependencies:[It,Rn,sp,yt,dp,gs,jn,x.O5,x.tP,Ee,x.sg,Se.Pi,Se.X$],encapsulation:2}),i})(),pp=(()=>{class i{constructor(){}transliterate(e){return function vo(i,a){if("string"!=typeof i)throw new TypeError(`Expected a string, got \`${typeof i}\``);a=Bn({customReplacements:[]},a);const e=new Map([..._o,...a.customReplacements]);return i=((n,s)=>{for(const[r,o]of s)n=n.replace(new RegExp(fo(r),"g"),o);return n})(i=i.normalize(),e),go(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gp=(()=>{class i{constructor(e,n,s,r,o,l){this.channelService=e,this.chatClientService=n,this.transliterationService=s,this.emojiInputService=r,this.customTemplatesService=o,this.themeService=l,this.class="str-chat__textarea str-chat__message-textarea-angular-host",this.value="",this.placeholder="",this.areMentionsEnabled=!0,this.mentionScope="channel",this.valueChange=new t.vpe,this.send=new t.vpe,this.userMentions=new t.vpe,this.autocompleteKey="autocompleteLabel",this.mentionTriggerChar="@",this.commandTriggerChar="/",this.autocompleteConfig={mentions:[]},this.subscriptions=[],this.mentionedUsers=[],this.userMentionConfig={triggerChar:this.mentionTriggerChar,dropUp:!0,labelKey:this.autocompleteKey,returnTrigger:!0,mentionFilter:(c,u)=>this.filter(c,u),mentionSelect:(c,u)=>this.itemSelectedFromAutocompleteList(c,u)},this.slashCommandConfig={triggerChar:this.commandTriggerChar,dropUp:!0,labelKey:"name",returnTrigger:!0,mentionFilter:(c,u)=>this.filter(c,u),mentionSelect:(c,u)=>this.itemSelectedFromAutocompleteList(c,u)},this.searchTerm$=new y.X(""),this.searchTerm$.pipe((0,ja.b)(300),(0,xi.x)()).subscribe(c=>{c.startsWith(this.mentionTriggerChar)&&this.updateMentionOptions(c)}),this.subscriptions.push(this.channelService.activeChannel$.subscribe(c=>{var u;const d=(null===(u=c?.getConfig())||void 0===u?void 0:u.commands)||[];this.slashCommandConfig.items=d.map(m=>Object.assign(Object.assign({},m),{[this.autocompleteKey]:m.name,type:"command"})),this.mentionedUsers=[],this.userMentions.next([...this.mentionedUsers]),this.updateMentionOptions(this.searchTerm$.getValue())})),this.subscriptions.push(this.emojiInputService.emojiInput$.subscribe(c=>{this.messageInput.nativeElement.focus();const{selectionStart:u}=this.messageInput.nativeElement;this.messageInput.nativeElement.setRangeText(c),this.messageInput.nativeElement.selectionStart=u+c.length,this.messageInput.nativeElement.selectionEnd=u+c.length,this.inputChanged()})),this.subscriptions.push(this.customTemplatesService.mentionAutocompleteItemTemplate$.subscribe(c=>this.mentionAutocompleteItemTemplate=c)),this.subscriptions.push(this.customTemplatesService.commandAutocompleteItemTemplate$.subscribe(c=>this.commandAutocompleteItemTemplate=c)),this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.themeVersion=this.themeService.themeVersion}ngOnChanges(e){e.areMentionsEnabled&&(this.areMentionsEnabled?(this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)):(this.autocompleteConfig.mentions=[this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig))),e.mentionScope&&this.updateMentionOptions(this.searchTerm$.getValue()),e.value&&!this.value&&this.messageInput&&(this.messageInput.nativeElement.style.height="auto")}ngAfterViewInit(){this.messageInput.nativeElement.scrollHeight>0&&this.adjustTextareaHeight()}filter(e,n){return n.filter(s=>this.transliterate(s.autocompleteLabel.toLowerCase()).includes(this.transliterate(e.toLowerCase())))}itemSelectedFromAutocompleteList(e,n=""){return n===this.mentionTriggerChar&&(this.mentionedUsers.push(e.user?e.user:e),this.userMentions.next([...this.mentionedUsers])),n+e.autocompleteLabel+(n===this.commandTriggerChar?" ":"")}autcompleteSearchTermChanged(e){e===this.mentionTriggerChar?this.updateMentionOptions():this.searchTerm$.next(e)}inputChanged(){this.valueChange.emit(this.messageInput.nativeElement.value),this.adjustTextareaHeight()}inputLeft(){this.updateMentionedUsersFromText()}enterHit(e){"desktop"===this.inputMode&&(e.preventDefault(),this.updateMentionedUsersFromText(),this.send.next())}adjustTextareaHeight(){"2"===this.themeVersion&&(this.messageInput.nativeElement.style.height="",this.messageInput.nativeElement.style.height=`${this.messageInput.nativeElement.scrollHeight}px`)}transliterate(e){return this.transliterationService?this.transliterationService.transliterate(e):e}updateMentionOptions(e){return(0,w.mG)(this,void 0,void 0,function*(){if(!this.areMentionsEnabled)return;e=e?.replace(this.mentionTriggerChar,"");const s=yield("application"===this.mentionScope?o=>this.chatClientService.autocompleteUsers(o):o=>this.channelService.autocompleteMembers(o))(e||""),r=this.filter(e||"",s.map(o=>{const l=o.user?o.user:o;return Object.assign(Object.assign({},o),{autocompleteLabel:l.name||l.id,type:"mention"})}));this.userMentionConfig.items=r,this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)})}updateMentionedUsersFromText(){const e=[];this.mentionedUsers.forEach(n=>{this.value.includes(`${this.mentionTriggerChar}${n.name||n.id}`)&&e.push(n)}),e.length!==this.mentionedUsers.length&&(this.userMentions.next([...e]),this.mentionedUsers=e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(Qe),t.Y36(pp),t.Y36($n),t.Y36(je),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-autocomplete-textarea"]],viewQuery:function(e,n){if(1&e&&t.Gf(bh,5),2&e){let s;t.iGM(s=t.CRH())&&(n.messageInput=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{value:"value",placeholder:"placeholder",areMentionsEnabled:"areMentionsEnabled",inputMode:"inputMode",mentionScope:"mentionScope"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[t.TTD],decls:9,vars:6,consts:[["autofocus","","data-testid","textarea","rows","1",1,"rta__textarea","str-chat__textarea__textarea","str-chat__angular-textarea","str-chat__message-textarea",3,"value","placeholder","mentionConfig","mentionListTemplate","input","keydown.enter","searchTerm","blur"],["input",""],["autocompleteItem",""],["defaultCommandTemplate",""],["defaultMentionTemplate",""],[1,"rta","rta__item","str-chat__emojisearch__item",3,"ngSwitch"],["class","rta__entity",4,"ngSwitchCase"],[1,"rta__entity"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__slash-command"],[1,"str-chat__slash-command-header"],["data-testclass","command-name",1,"str-chat__slash-command-name"],[1,"str-chat__slash-command-args"],[1,"str-chat__user-item"],["data-testclass","avatar","type","user","location","autocomplete-item",1,"str-chat__avatar","str-chat__avatar--circle",3,"size","imageUrl","name","user"],["data-testclass","username",1,"str-chat__user-item--name"],["class","str-chat__user-item-at",4,"ngIf"],[1,"str-chat__user-item-at"]],template:function(e,n){if(1&e&&(t.TgZ(0,"textarea",0,1),t.NdJ("input",function(){return n.inputChanged()})("keydown.enter",function(r){return n.enterHit(r)})("searchTerm",function(r){return n.autcompleteSearchTermChanged(r)})("blur",function(){return n.inputLeft()}),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Sh,3,3,"ng-template",null,2,t.W1O),t.YNc(5,Mh,7,3,"ng-template",null,3,t.W1O),t.YNc(7,Ah,5,8,"ng-template",null,4,t.W1O)),2&e){const s=t.MAs(4);t.s9C("placeholder",t.lcZ(2,4,n.placeholder)),t.Q6J("value",n.value||"")("mentionConfig",n.autocompleteConfig)("mentionListTemplate",s)}},dependencies:[It,Ro,x.RF,x.n9,x.tP,x.O5,Se.X$],encapsulation:2}),i})();const vs=(i,a)=>i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()&&i.getDate()===a.getDate();let fp=(()=>{class i{constructor(e,n,s){this.channelService=e,this.chatClientService=n,this.customTemplatesService=s,this.mode="main",this.direction="bottom-to-top",this.messageOptionsTrigger="message-row",this.enabledMessageActions=[],this.class="str-chat-angular__main-panel-inner str-chat-angular__message-list-host str-chat__main-panel-inner",this.unreadMessageCount=0,this.groupStyles=[],this.isLoading=!1,this.subscriptions=[],this.isLatestMessageInList=!0,this.subscriptions.push(this.channelService.activeChannel$.subscribe(r=>{var o,l;this.resetScrollState();const c=null===(o=r?.data)||void 0===o?void 0:o.own_capabilities;c&&(this.enabledMessageActions=c),null===(l=this.newMessageSubscription)||void 0===l||l.unsubscribe(),r&&(this.newMessageSubscription=r.on("message.new",u=>{!u.message||r.state.messages===r.state.latestMessages||"thread"===this.mode||this.newMessageReceived({id:u.message.id,user:u.message.user,created_at:new Date(u.message.created_at||"")})}))})),this.subscriptions.push(this.channelService.activeParentMessage$.subscribe(r=>{r&&this.parentMessage&&r.id!==this.parentMessage.id&&"thread"===this.mode&&this.resetScrollState(),this.parentMessage=r})),this.subscriptions.push(this.customTemplatesService.messageTemplate$.subscribe(r=>this.messageTemplate=r)),this.subscriptions.push(this.customTemplatesService.typingIndicatorTemplate$.subscribe(r=>this.typingIndicatorTemplate=r)),this.usersTypingInChannel$=this.channelService.usersTypingInChannel$,this.usersTypingInThread$=this.channelService.usersTypingInThread$}ngOnInit(){this.setMessages$()}ngOnChanges(e){var n;(e.mode||e.direction)&&this.setMessages$(),e.direction&&null!==(n=this.scrollContainer)&&void 0!==n&&n.nativeElement&&this.jumpToLatestMessage()}ngAfterViewInit(){this.subscriptions.push(this.channelService.jumpToMessage$.pipe((0,Pt.h)(e=>!!e.id)).subscribe(e=>{let n;"main"===this.mode?n=e.parentId||e.id:e.parentId&&(n=e.id),n&&("latest"===n?this.scrollToLatestMessage():(this.scrollMessageIntoView(n),this.highlightedMessageId=n))}))}ngAfterViewChecked(){this.highlightedMessageId&&(this.hasNewMessages=!1,this.olderMassagesLoaded=!1),"top-to-bottom"===this.direction?this.hasNewMessages&&(this.isNewMessageSentByUser||!this.isUserScrolled)&&(this.isLatestMessageInList?this.scrollToTop():this.jumpToLatestMessage(),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.hasNewMessages?((!this.isUserScrolled||this.isNewMessageSentByUser)&&(this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage()),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.olderMassagesLoaded?(this.preserveScrollbarPosition(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,this.olderMassagesLoaded=!1):"bottom"!==this.getScrollPosition()&&!this.isUserScrolled&&!this.highlightedMessageId&&(this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight)}ngOnDestroy(){var e;this.subscriptions.forEach(n=>n.unsubscribe()),null===(e=this.newMessageSubscription)||void 0===e||e.unsubscribe()}trackByMessageId(e,n){return n.id}trackByUserId(e,n){return n.id}jumpToLatestMessage(){var e;this.channelService.jumpToMessage("latest","thread"===this.mode?null===(e=this.parentMessage)||void 0===e?void 0:e.id:void 0)}scrollToBottom(){this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}scrollToTop(){this.scrollContainer.nativeElement.scrollTop=0}scrolled(){if(this.scrollContainer.nativeElement.scrollHeight===this.scrollContainer.nativeElement.clientHeight)return;const e=this.getScrollPosition();if(this.isUserScrolled=("bottom-to-top"===this.direction?"bottom"!==e:"top"!==e)||!this.isLatestMessageInList,this.isUserScrolled||(this.unreadMessageCount=0),this.shouldLoadMoreMessages(e)){let n;this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,n="top-to-bottom"===this.direction?"top"===e?"newer":"older":"top"===e?"older":"newer","main"===this.mode?this.channelService.loadMoreMessages(n):this.channelService.loadMoreThreadReplies(n),this.isLoading=!0}this.prevScrollTop=this.scrollContainer.nativeElement.scrollTop}getTypingIndicatorContext(){return{usersTyping$:this.usersTyping$}}getMessageContext(e){return{message:e,isLastSentMessage:!(!this.lastSentMessageId||e?.id!==this.lastSentMessageId),enabledMessageActions:this.enabledMessageActions,mode:this.mode,isHighlighted:e?.id===this.highlightedMessageId}}getTypingIndicatorText(e){return qn(e)}get replyCountParam(){var e;return{replyCount:null===(e=this.parentMessage)||void 0===e?void 0:e.reply_count}}preserveScrollbarPosition(){this.scrollContainer.nativeElement.scrollTop=(this.prevScrollTop||0)+(this.scrollContainer.nativeElement.scrollHeight-this.containerHeight)}getScrollPosition(){var e,n;let s="middle";return Math.floor(this.scrollContainer.nativeElement.scrollTop)<=((null===(e=this.parentMessageElement)||void 0===e?void 0:e.nativeElement.clientHeight)||0)&&(void 0===this.prevScrollTop||this.prevScrollTop>((null===(n=this.parentMessageElement)||void 0===n?void 0:n.nativeElement.clientHeight)||0))?s="top":Math.ceil(this.scrollContainer.nativeElement.scrollTop)+this.scrollContainer.nativeElement.clientHeight>=this.scrollContainer.nativeElement.scrollHeight&&(s="bottom"),s}shouldLoadMoreMessages(e){return"middle"!==e&&!this.highlightedMessageId}setMessages$(){this.messages$=("main"===this.mode?this.channelService.activeChannelMessages$:this.channelService.activeThreadMessages$).pipe((0,Nt.b)(e=>{if(this.isLoading=!1,0===e.length)return;this.newMessageReceived(e[e.length-1]);const s=e[0];this.oldestMessage&&e.find(r=>r.id===this.oldestMessage.id)?this.oldestMessage.created_at.getTime()>s.created_at.getTime()&&(this.oldestMessage=s,this.olderMassagesLoaded=!0):this.oldestMessage=s}),(0,Nt.b)(e=>{var n;return this.lastSentMessageId=null===(n=[...e].reverse().find(s=>{var r,o,l;return(null===(r=s.user)||void 0===r?void 0:r.id)===(null===(l=null===(o=this.chatClientService.chatClient)||void 0===o?void 0:o.user)||void 0===l?void 0:l.id)&&"sending"!==s.status}))||void 0===n?void 0:n.id}),(0,Nt.b)(e=>{this.isLatestMessageInList=!this.latestMessage||0===e.length||e[e.length-1].id===this.latestMessage.id,this.isLatestMessageInList||(this.isUserScrolled=!0)}),(0,b.U)(e=>"bottom-to-top"===this.direction?e:[...e].reverse()),(0,Nt.b)(e=>{this.groupStyles=e.map((n,s)=>((i,a,e,n=!1)=>{var s,r,o,l,c,u;if(n||i.attachments&&0!==i.attachments.length)return"single";const d=!a||!vs(a.created_at,i.created_at)||"system"===a.type||a.attachments&&0!==(null===(s=a.attachments)||void 0===s?void 0:s.length)||(null===(r=i.user)||void 0===r?void 0:r.id)!==(null===(o=a.user)||void 0===o?void 0:o.id)||"error"===a.type||a.deleted_at||i.reaction_counts&&Object.keys(i.reaction_counts).length>0,m=!e||!vs(i.created_at,e.created_at)||"system"===e.type||e.attachments&&0!==(null===(l=e.attachments)||void 0===l?void 0:l.length)||(null===(c=i.user)||void 0===c?void 0:c.id)!==(null===(u=e.user)||void 0===u?void 0:u.id)||"error"===e.type||e.deleted_at||e.reaction_counts&&Object.keys(e.reaction_counts).length>0;return d||m?m?d||i.deleted_at||"error"===i.type?"single":"bottom":d?"top":"":i.deleted_at||"error"===i.type?"single":"middle"})(n,e[s-1],e[s+1]))}))}resetScrollState(){this.latestMessage=void 0,this.hasNewMessages=!0,this.isUserScrolled=!1,this.containerHeight=void 0,this.olderMassagesLoaded=!1,this.oldestMessage=void 0,this.unreadMessageCount=0,this.prevScrollTop=void 0,this.isNewMessageSentByUser=void 0,this.isLatestMessageInList=!0}get usersTyping$(){return"thread"===this.mode?this.usersTypingInThread$:this.usersTypingInChannel$}scrollMessageIntoView(e,n=!0){const s=document.getElementById(e);!s&&n?setTimeout(()=>this.scrollMessageIntoView(e,!1)):s&&(s.scrollIntoView({block:"center"}),setTimeout(()=>{this.highlightedMessageId=void 0},1e3))}scrollToLatestMessage(e=!0){document.getElementById(this.latestMessage.id)?"bottom-to-top"===this.direction?this.scrollToBottom():this.scrollToTop():e&&setTimeout(()=>this.scrollToLatestMessage(!1),0)}newMessageReceived(e){var n,s,r,o;(!this.latestMessage||(null===(n=this.latestMessage.created_at)||void 0===n?void 0:n.getTime())<e.created_at.getTime())&&(this.latestMessage=e,this.hasNewMessages=!0,this.isNewMessageSentByUser=(null===(s=e.user)||void 0===s?void 0:s.id)===(null===(o=null===(r=this.chatClientService.chatClient)||void 0===r?void 0:r.user)||void 0===o?void 0:o.id),this.isUserScrolled&&this.unreadMessageCount++)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(Qe),t.Y36(je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Oh,5),t.Gf(Eh,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.scrollContainer=s.first),t.iGM(s=t.CRH())&&(n.parentMessageElement=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{mode:"mode",direction:"direction",messageOptionsTrigger:"messageOptionsTrigger"},features:[t.TTD],decls:16,vars:12,consts:[["data-testid","scroll-container",1,"str-chat__list",3,"scroll"],["scrollContainer",""],[1,"str-chat__reverse-infinite-scroll","str-chat__message-list-scroll"],[1,"str-chat__ul"],["data-testid","parent-message","class","str-chat__parent-message-li",4,"ngIf"],["data-testid","top-loading-indicator",4,"ngIf"],["tabindex","0","data-testclass","message",3,"class","id",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","bottom-loading-indicator",4,"ngIf"],["defaultTypingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__jump-to-latest-message"],["data-testid","scroll-to-latest","class","\n      str-chat__message-notification-scroll-to-latest\n      str-chat__message-notification-scroll-to-latest-right\n      str-chat__circle-fab\n    ",3,"keyup.enter","click",4,"ngIf"],["messageTemplateContainer",""],["data-testid","parent-message",1,"str-chat__parent-message-li"],["parentMessageElement",""],["data-testid","reply-count",1,"str-chat__thread-start"],["data-testid","top-loading-indicator"],["tabindex","0","data-testclass","message",3,"id"],["data-testid","bottom-loading-indicator"],[4,"ngIf"],["data-testid","typing-indicator","class","str-chat__typing-indicator str-chat__typing-indicator--typing",4,"ngIf"],["data-testid","typing-indicator",1,"str-chat__typing-indicator","str-chat__typing-indicator--typing"],[1,"str-chat__typing-indicator__dots"],[1,"str-chat__typing-indicator__dot"],["data-testid","typing-users",1,"str-chat__typing-indicator__users"],["data-testid","scroll-to-latest",1,"str-chat__message-notification-scroll-to-latest","str-chat__message-notification-scroll-to-latest-right","str-chat__circle-fab",3,"keyup.enter","click"],[1,"str-chat__jump-to-latest-icon","str-chat__circle-fab-icon",3,"icon"],["class","\n        str-chat__message-notification\n        str-chat__message-notification-scroll-to-latest-unread-count\n        str-chat__jump-to-latest-unread-count\n      ",4,"ngIf"],[1,"str-chat__message-notification","str-chat__message-notification-scroll-to-latest-unread-count","str-chat__jump-to-latest-unread-count"],["defaultMessageTemplate",""],[3,"message","isLastSentMessage","enabledMessageActions","mode","isHighlighted"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1),t.NdJ("scroll",function(){return n.scrolled()}),t.TgZ(2,"div",2)(3,"ul",3),t.YNc(4,Fh,7,10,"li",4),t.YNc(5,Lh,1,0,"stream-loading-indicator",5),t.YNc(6,Uh,2,8,"li",6),t.ALo(7,"async"),t.YNc(8,Rh,1,0,"stream-loading-indicator",7),t.qZA(),t.YNc(9,jh,2,3,"ng-template",null,8,t.W1O),t.YNc(11,$h,1,0,"ng-container",9),t.qZA()(),t.TgZ(12,"div",10),t.YNc(13,qh,3,2,"button",11),t.qZA(),t.YNc(14,Vh,3,2,"ng-template",null,12,t.W1O)),2&e){const s=t.MAs(10);t.xp6(3),t.ekj("str-chat__message-options-in-bubble","message-bubble"===n.messageOptionsTrigger),t.xp6(1),t.Q6J("ngIf","thread"===n.mode),t.xp6(1),t.Q6J("ngIf",n.isLoading&&"bottom-to-top"===n.direction),t.xp6(1),t.Q6J("ngForOf",t.lcZ(7,10,n.messages$))("ngForTrackBy",n.trackByMessageId),t.xp6(2),t.Q6J("ngIf",n.isLoading&&"top-to-bottom"===n.direction),t.xp6(3),t.Q6J("ngTemplateOutlet",n.typingIndicatorTemplate||s)("ngTemplateOutletContext",n.getTypingIndicatorContext()),t.xp6(2),t.Q6J("ngIf",n.isUserScrolled)}},dependencies:[us,hn,hp,x.O5,x.tP,x.sg,Se.X$,x.Ov],encapsulation:2}),i})(),zn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[x.ez,Se.aw]]}),i})(),Jn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[x.ez,Se.aw,zn,po],zn]}),i})(),_p=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:hs,useValue:gp}],imports:[[x.ez,Se.aw,Bo,zn]]}),i})();var Qt=_(6851);let vp=(()=>{class i{constructor(){this.strokeWidth="2",this.fill="none",this.animationDuration="2s"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration"},decls:3,vars:6,consts:[["role","alert","aria-busy","true",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"circle",2),t.qZA()()),2&e&&(t.Q6J("ngStyle",n.style)("ngClass",n.styleClass),t.xp6(1),t.Udp("animation-duration",n.animationDuration),t.xp6(1),t.uIk("fill",n.fill)("stroke-width",n.strokeWidth))},dependencies:[x.mk,x.PC],styles:['.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;inset:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}\n'],encapsulation:2,changeDetection:0}),i})(),Cp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez]}),i})();var pe=_(7340),P=_(9592),ye=_(982),De=_(805);const yp=["mask"],bp=["content"],wp=["titlebar"];function Dp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("mousedown",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.initResize(s))}),t.qZA()}}const Tp=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function xp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.maximize())})("keydown.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.maximize())}),t._UZ(1,"span",19),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("ngClass",t.DdM(2,Tp)),t.xp6(1),t.Q6J("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function Sp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hide())})("keydown.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hide())}),t._UZ(1,"span",21),t.qZA()}2&i&&t.Q6J("ngClass","p-dialog-header-icon p-dialog-header-maximize p-link")}function Mp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",12,13),t.NdJ("mousedown",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.initDrag(s))}),t.TgZ(2,"span",14),t._uU(3),t.qZA(),t.TgZ(4,"div",15),t.YNc(5,xp,2,3,"button",16),t.YNc(6,Sp,2,1,"button",17),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.config.header),t.xp6(2),t.Q6J("ngIf",e.config.maximizable),t.xp6(1),t.Q6J("ngIf",!1!==e.config.closable)}}function kp(i,a){}function Ap(i,a){if(1&i&&(t.TgZ(0,"div",22),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.config.footer," ")}}const Op=function(i,a,e,n){return{"p-dialog p-dynamic-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-resizable":a,"p-dialog-draggable":e,"p-dialog-maximized":n}},Ep=function(i,a){return{transform:i,transition:a}},Ip=function(i){return{value:"visible",params:i}};function Fp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3,4),t.NdJ("@animation.start",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onAnimationStart(s))})("@animation.done",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onAnimationEnd(s))}),t.YNc(2,Dp,1,0,"div",5),t.YNc(3,Mp,7,3,"div",6),t.TgZ(4,"div",7,8),t.YNc(6,kp,0,0,"ng-template",9),t.qZA(),t.YNc(7,Ap,2,1,"div",10),t.qZA()}if(2&i){const e=t.oxw();t.Tol(e.config.styleClass),t.Udp("width",e.config.width)("height",e.config.height),t.Q6J("ngClass",t.l5B(13,Op,e.config.rtl,e.config.resizable,e.config.draggable,e.maximized))("ngStyle",e.config.style)("@animation",t.VKq(21,Ip,t.WLB(18,Ep,e.transformOptions,e.config.transitionOptions||"150ms cubic-bezier(0, 0, 0.2, 1)"))),t.xp6(2),t.Q6J("ngIf",e.config.resizable),t.xp6(1),t.Q6J("ngIf",!1!==e.config.showHeader),t.xp6(1),t.Q6J("ngStyle",e.config.contentStyle),t.xp6(3),t.Q6J("ngIf",e.config.footer)}}const Lp=function(i,a,e,n,s,r,o,l,c){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter p-dialog-mask-scrollblocker":i,"p-dialog-left":a,"p-dialog-right":e,"p-dialog-top":n,"p-dialog-bottom":s,"p-dialog-top-left":r,"p-dialog-top-right":o,"p-dialog-bottom-left":l,"p-dialog-bottom-right":c}};let Cs=(()=>{class i{constructor(e){this.viewContainerRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","pDynamicDialogContent",""]],hostAttrs:[1,"p-element"]}),i})();class ys{}class Gt{constructor(){this._onClose=new ee.x,this.onClose=this._onClose.asObservable(),this._onDestroy=new ee.x,this.onDestroy=this._onDestroy.asObservable(),this._onDragStart=new ee.x,this.onDragStart=this._onDragStart.asObservable(),this._onDragEnd=new ee.x,this.onDragEnd=this._onDragEnd.asObservable(),this._onResizeInit=new ee.x,this.onResizeInit=this._onResizeInit.asObservable(),this._onResizeEnd=new ee.x,this.onResizeEnd=this._onResizeEnd.asObservable(),this._onMaximize=new ee.x,this.onMaximize=this._onMaximize.asObservable()}close(a){this._onClose.next(a)}destroy(){this._onDestroy.next(null)}dragStart(a){this._onDragStart.next(a)}dragEnd(a){this._onDragEnd.next(a)}resizeInit(a){this._onResizeInit.next(a)}resizeEnd(a){this._onResizeEnd.next(a)}maximize(a){this._onMaximize.next(a)}}const Zp=(0,pe.oQ)([(0,pe.oB)({transform:"{{transform}}",opacity:0}),(0,pe.jt)("{{transition}}",(0,pe.oB)({transform:"none",opacity:1}))]),Up=(0,pe.oQ)([(0,pe.jt)("{{transition}}",(0,pe.oB)({transform:"{{transform}}",opacity:0}))]);let Rp=(()=>{class i{constructor(e,n,s,r,o,l,c,u,d){this.document=e,this.platformId=n,this.componentFactoryResolver=s,this.cd=r,this.renderer=o,this.config=l,this.dialogRef=c,this.zone=u,this.primeNGConfig=d,this.visible=!0,this._style={},this.transformOptions="scale(0.7)"}get minX(){return this.config.minX?this.config.minX:0}get minY(){return this.config.minY?this.config.minY:0}get keepInViewport(){return this.config.keepInViewport}get maximizable(){return this.config.maximizable}get maximizeIcon(){return this.config.maximizeIcon?this.config.maximizeIcon:"pi pi-window-maximize"}get minimizeIcon(){return this.config.minimizeIcon?this.config.minimizeIcon:"pi pi-window-minimize"}get style(){return this._style}get position(){return this.config.position}set style(e){e&&(this._style={...e},this.originalStyle=e)}get parent(){const e=Array.from(this.document.getElementsByClassName("p-dialog"));if(e.length>1)return e.pop()}ngAfterViewInit(){this.loadChildComponent(this.childComponentType),this.cd.detectChanges()}loadChildComponent(e){let n=this.componentFactoryResolver.resolveComponentFactory(e),s=this.insertionPoint?.viewContainerRef;s?.clear(),this.componentRef=s?.createComponent(n)}moveOnTop(){!1!==this.config.autoZIndex&&(ye.P9.set("modal",this.container,(this.config.baseZIndex||0)+this.primeNGConfig.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.moveOnTop(),this.parent&&this.unbindGlobalListeners(),this.bindGlobalListeners(),!1!==this.config.modal&&this.enableModality(),this.focus();break;case"void":this.wrapper&&!1!==this.config.modal&&P.p.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){"void"===e.toState&&(this.onContainerDestroy(),this.dialogRef.destroy())}onContainerDestroy(){this.unbindGlobalListeners(),this.container&&!1!==this.config.autoZIndex&&ye.P9.clear(this.container),!1!==this.config.modal&&this.disableModality(),this.container=null}close(){this.visible=!1,this.cd.markForCheck()}hide(){this.dialogRef&&this.dialogRef.close()}enableModality(){!1!==this.config.closable&&this.config.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.hide()})),!1!==this.config.modal&&P.p.addClass(this.document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.config.dismissableMask&&this.unbindMaskClickListener(),!1!==this.config.modal&&P.p.removeClass(this.document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}onKeydown(e){if(!this.parent&&9===e.which){e.preventDefault();let n=P.p.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let s=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==s||0===s?n[n.length-1].focus():n[s-1].focus():-1==s||s===n.length-1?n[0].focus():n[s+1].focus()}else n[0].focus()}}focus(){const e=P.p.getFocusableElements(this.container);e&&e.length>0&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e[0].focus(),5)})}maximize(){this.maximized=!this.maximized,this.maximized?P.p.addClass(this.document.body,"p-overflow-hidden"):P.p.removeClass(this.document.body,"p-overflow-hidden"),this.dialogRef.maximize({maximized:this.maximized})}initResize(e){this.config.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,P.p.addClass(this.document.body,"p-unselectable-text"),this.dialogRef.resizeInit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,s=e.pageY-this.lastPageY,r=P.p.getOuterWidth(this.container),o=P.p.getOuterHeight(this.container),l=P.p.getOuterHeight(this.contentViewChild.nativeElement),c=r+n,u=o+s,d=this.container.style.minWidth,m=this.container.style.minHeight,f=this.container.getBoundingClientRect(),v=P.p.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(c+=n,u+=s),(!d||c>parseInt(d))&&f.left+c<v.width&&(this._style.width=c+"px",this.container.style.width=this._style.width),(!m||u>parseInt(m))&&f.top+u<v.height&&(this.contentViewChild.nativeElement.style.height=l+u-o+"px",this._style.height&&(this._style.height=u+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,P.p.removeClass(this.document.body,"p-unselectable-text"),this.dialogRef.resizeEnd(e))}initDrag(e){P.p.hasClass(e.target,"p-dialog-header-icon")||P.p.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.config.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",P.p.addClass(this.document.body,"p-unselectable-text"),this.dialogRef.dragStart(e))}onDrag(e){if(this.dragging){let n=P.p.getOuterWidth(this.container),s=P.p.getOuterHeight(this.container),r=e.pageX-this.lastPageX,o=e.pageY-this.lastPageY,l=this.container.getBoundingClientRect(),c=l.left+r,u=l.top+o,d=P.p.getViewport();this.container.style.position="fixed",this.keepInViewport?(c>=this.minX&&c+n<d.width&&(this._style.left=c+"px",this.lastPageX=e.pageX,this.container.style.left=c+"px"),u>=this.minY&&u+s<d.height&&(this._style.top=u+"px",this.lastPageY=e.pageY,this.container.style.top=u+"px")):(this.lastPageX=e.pageX,this.container.style.left=c+"px",this.lastPageY=e.pageY,this.container.style.top=u+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,P.p.removeClass(this.document.body,"p-unselectable-text"),this.dialogRef.dragEnd(e),this.cd.detectChanges())}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}bindDocumentDragListener(){(0,x.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.document,"mousemove",this.onDrag.bind(this))})}bindDocumentDragEndListener(){(0,x.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.document,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragListener=null)}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentResizeListeners(){(0,x.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.document,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.document,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindGlobalListeners(){this.bindDocumentKeydownListener(),!1!==this.config.closeOnEscape&&!1!==this.config.closable&&this.bindDocumentEscapeListener(),this.config.resizable&&this.bindDocumentResizeListeners(),this.config.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener())}unbindGlobalListeners(){this.unbindDocumentKeydownListener(),this.unbindDocumentEscapeListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener()}bindDocumentKeydownListener(){(0,x.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.document,"keydown",this.onKeydown.bind(this))})}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.maskViewChild?this.maskViewChild.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&parseInt(this.container.style.zIndex)==ye.P9.getCurrent()&&this.hide()})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}ngOnDestroy(){this.onContainerDestroy(),this.componentRef&&this.componentRef.destroy()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.K0),t.Y36(t.Lbi),t.Y36(t._Vd),t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(ys),t.Y36(Gt),t.Y36(t.R0b),t.Y36(De.b4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-dynamicDialog"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Cs,5),t.Gf(yp,5),t.Gf(bp,5),t.Gf(wp,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.insertionPoint=s.first),t.iGM(s=t.CRH())&&(n.maskViewChild=s.first),t.iGM(s=t.CRH())&&(n.contentViewChild=s.first),t.iGM(s=t.CRH())&&(n.headerViewChild=s.first)}},hostAttrs:[1,"p-element"],decls:3,vars:14,consts:[[3,"ngClass"],["mask",""],["role","dialog",3,"ngClass","ngStyle","class","width","height",4,"ngIf"],["role","dialog",3,"ngClass","ngStyle"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[1,"p-dialog-content",3,"ngStyle"],["content",""],["pDynamicDialogContent",""],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],[1,"p-dialog-title"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon","pi","pi-times"],[1,"p-dialog-footer"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0,1),t.YNc(2,Fp,8,23,"div",2),t.qZA()),2&e&&(t.Tol(n.config.maskStyleClass),t.Q6J("ngClass",t.rFY(4,Lp,[!1!==n.config.modal,"left"===n.position,"right"===n.position,"top"===n.position,"bottom"===n.position,"topleft"===n.position||"top-left"===n.position,"topright"===n.position||"top-right"===n.position,"bottomleft"===n.position||"bottom-left"===n.position,"bottomright"===n.position||"bottom-right"===n.position])),t.xp6(2),t.Q6J("ngIf",n.visible))},dependencies:function(){return[x.mk,x.O5,x.PC,Cs]},styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[(0,pe.X$)("animation",[(0,pe.eR)("void => visible",[(0,pe._7)(Zp)]),(0,pe.eR)("visible => void",[(0,pe._7)(Up)])])]}}),i})(),Bp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez]}),i})();class Pp{constructor(a,e){this._parentInjector=a,this._additionalTokens=e}get(a,e,n){return this._additionalTokens.get(a)||this._parentInjector.get(a,e)}}let Vn=(()=>{class i{constructor(e,n,s,r){this.componentFactoryResolver=e,this.appRef=n,this.injector=s,this.document=r,this.dialogComponentRefMap=new Map}open(e,n){const s=this.appendDialogComponentToBody(n);return this.dialogComponentRefMap.get(s).instance.childComponentType=e,s}appendDialogComponentToBody(e){const n=new WeakMap;n.set(ys,e);const s=new Gt;n.set(Gt,s);const r=s.onClose.subscribe(()=>{this.dialogComponentRefMap.get(s).instance.close()}),o=s.onDestroy.subscribe(()=>{this.removeDialogComponentFromBody(s),o.unsubscribe(),r.unsubscribe()}),c=this.componentFactoryResolver.resolveComponentFactory(Rp).create(new Pp(this.injector,n));return this.appRef.attachView(c.hostView),this.document.body.appendChild(c.hostView.rootNodes[0]),this.dialogComponentRefMap.set(s,c),s}removeDialogComponentFromBody(e){if(!e||!this.dialogComponentRefMap.has(e))return;const n=this.dialogComponentRefMap.get(e);this.appRef.detachView(n.hostView),n.destroy(),this.dialogComponentRefMap.delete(e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t._Vd),t.LFG(t.z2F),t.LFG(t.zs3),t.LFG(x.K0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var bt=_(371),pn=_(1795);let Qn=(()=>{class i{constructor(e,n,s,r,o,l){this.platformId=e,this.el=n,this.zone=s,this.config=r,this.renderer=o,this.changeDetector=l,this.escape=!0,this.autoHide=!0,this.fitContent=!0,this.hideOnEscape=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0,autoHide:!0,hideOnEscape:!1}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){(0,x.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){(this.isAutoHide()||!(P.p.hasClass(e.toElement,"p-tooltip")||P.p.hasClass(e.toElement,"p-tooltip-arrow")||P.p.hasClass(e.toElement,"p-tooltip-text")||P.p.hasClass(e.relatedTarget,"p-tooltip")))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?P.p.appendChild(this.container,this.el.nativeElement):P.p.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",n=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),P.p.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?ye.P9.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&ye.P9.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+P.p.getWindowScrollLeft(),top:e.top+P.p.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+P.p.getOuterWidth(this.el.nativeElement),s=e.top+(P.p.getOuterHeight(this.el.nativeElement)-P.p.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-P.p.getOuterWidth(this.container),s=e.top+(P.p.getOuterHeight(this.el.nativeElement)-P.p.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(P.p.getOuterWidth(this.el.nativeElement)-P.p.getOuterWidth(this.container))/2,s=e.top-P.p.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(P.p.getOuterWidth(this.el.nativeElement)-P.p.getOuterWidth(this.container))/2,s=e.top+P.p.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return P.p.hasClass(e,"p-inputwrapper")?P.p.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,s=e.left,r=P.p.getOuterWidth(this.container),o=P.p.getOuterHeight(this.container),l=P.p.getViewport();return s+r>l.width||s<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new P.V(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):P.p.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&ye.P9.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(De.b4),t.Y36(t.Qsj),t.Y36(t.sBO))},i.\u0275dir=t.lG2({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&t.NdJ("keydown.escape",function(r){return n.onPressEscape(r)},!1,t.evT)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[t.TTD]}),i})(),Wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez]}),i})();var Np=_(4482),Hp=_(5032),bs=_(5403),jp=_(8421),Yp=_(4986);const zp=function(i){return{"p-hidden":i}};function Jp(i,a){if(1&i&&t._UZ(0,"li",4),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,zp,!1===e.visible))}}function Vp(i,a){if(1&i&&t._UZ(0,"span",16),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Qp(i,a){if(1&i&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Oqu(e.label)}}function Gp(i,a){if(1&i&&t._UZ(0,"span",18),2&i){const e=t.oxw(3).$implicit;t.Q6J("innerHTML",e.label,t.oJD)}}function Wp(i,a){if(1&i&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.badgeStyleClass),t.xp6(1),t.Oqu(e.badge)}}const ws=function(i,a){return{"pi-angle-down":i,"pi-angle-right":a}};function Kp(i,a){if(1&i&&t._UZ(0,"span",20),2&i){const e=t.oxw(4);t.Q6J("ngClass",t.WLB(1,ws,e.root,!e.root))}}const Ds=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function Xp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",10),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemClick(s,r))})("mouseenter",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseEnter(s,r))})("mouseleave",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseLeave(s,r))}),t.YNc(1,Vp,1,2,"span",11),t.YNc(2,Qp,2,1,"span",12),t.YNc(3,Gp,1,1,"ng-template",null,13,t.W1O),t.YNc(5,Wp,2,2,"span",14),t.YNc(6,Kp,1,4,"span",15),t.qZA()}if(2&i){const e=t.MAs(4),n=t.oxw(2).$implicit,s=t.oxw();t.Q6J("target",n.target)("ngClass",t.VKq(14,Ds,n.disabled)),t.uIk("href",n.url,t.LSH)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=s.item.items)("aria-expanded",s.item===s.activeItem),t.xp6(1),t.Q6J("ngIf",n.icon),t.xp6(1),t.Q6J("ngIf",!1!==n.escape)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n.badge),t.xp6(1),t.Q6J("ngIf",n.items)}}function eg(i,a){if(1&i&&t._UZ(0,"span",16),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.icon)("ngStyle",e.iconStyle)}}function tg(i,a){if(1&i&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Oqu(e.label)}}function ng(i,a){if(1&i&&t._UZ(0,"span",18),2&i){const e=t.oxw(3).$implicit;t.Q6J("innerHTML",e.label,t.oJD)}}function ig(i,a){if(1&i&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.badgeStyleClass),t.xp6(1),t.Oqu(e.badge)}}function sg(i,a){if(1&i&&t._UZ(0,"span",20),2&i){const e=t.oxw(4);t.Q6J("ngClass",t.WLB(1,ws,e.root,!e.root))}}const ag=function(){return{exact:!1}};function rg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",21),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemClick(s,r))})("mouseenter",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseEnter(s,r))})("mouseleave",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseLeave(s,r))}),t.YNc(1,eg,1,2,"span",11),t.YNc(2,tg,2,1,"span",12),t.YNc(3,ng,1,1,"ng-template",null,22,t.W1O),t.YNc(5,ig,2,2,"span",14),t.YNc(6,sg,1,4,"span",15),t.qZA()}if(2&i){const e=t.MAs(4),n=t.oxw(2).$implicit;t.Q6J("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||t.DdM(21,ag))("target",n.target)("ngClass",t.VKq(22,Ds,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),t.uIk("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),t.xp6(1),t.Q6J("ngIf",n.icon),t.xp6(1),t.Q6J("ngIf",!1!==n.escape)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n.badge),t.xp6(1),t.Q6J("ngIf",n.items)}}function og(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-menubarSub",23),t.NdJ("leafClick",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onLeafClick())}),t.qZA()}if(2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const lg=function(i,a){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":a}};function cg(i,a){if(1&i&&(t.TgZ(0,"li",5,6),t.YNc(2,Xp,7,16,"a",7),t.YNc(3,rg,7,24,"a",8),t.YNc(4,og,1,4,"p-menubarSub",9),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Tol(e.styleClass),t.Q6J("ngClass",t.WLB(8,lg,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),t.xp6(2),t.Q6J("ngIf",!e.routerLink),t.xp6(1),t.Q6J("ngIf",e.routerLink),t.xp6(1),t.Q6J("ngIf",e.items)}}function ug(i,a){if(1&i&&(t.YNc(0,Jp,1,3,"li",2),t.YNc(1,cg,5,11,"li",3)),2&i){const e=a.$implicit;t.Q6J("ngIf",e.separator),t.xp6(1),t.Q6J("ngIf",!e.separator)}}const dg=function(i,a){return{"p-submenu-list":i,"p-menubar-root-list":a}},hg=["menubutton"],pg=["rootmenu"];function gg(i,a){1&i&&t.GkF(0)}function mg(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,gg,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.startTemplate)}}function fg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",9,10),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.toggle(s))}),t._UZ(2,"i",11),t.qZA()}}function _g(i,a){1&i&&t.GkF(0)}function vg(i,a){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,_g,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.endTemplate)}}function Cg(i,a){1&i&&(t.TgZ(0,"div",12),t.Hsn(1),t.qZA())}const yg=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},bg=["*"];let Gn=(()=>{class i{constructor(){this.mouseLeaves=new ee.x,this.mouseLeft$=this.mouseLeaves.pipe(function $p(i){return(0,Np.e)((a,e)=>{let n=!1,s=null,r=null;const o=()=>{if(r?.unsubscribe(),r=null,n){n=!1;const l=s;s=null,e.next(l)}};a.subscribe((0,bs.x)(e,l=>{r?.unsubscribe(),n=!0,s=l,r=(0,bs.x)(e,o,Hp.Z),(0,jp.Xf)(i(l)).subscribe(r)},()=>{o(),e.complete()},void 0,()=>{s=r=null}))})}(()=>function qp(i=0,a=Yp.z){return i<0&&(i=0),(0,H.H)(i,i,a)}(this.autoHideDelay)),(0,Pt.h)(e=>this.autoHide&&e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),wg=(()=>{class i{constructor(e,n,s,r,o,l){this.document=e,this.platformId=n,this.el=s,this.renderer=r,this.cd=o,this.menubarService=l,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new t.vpe,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}ngOnInit(){this.mouseLeaveSubscriber=this.menubarService.mouseLeft$.subscribe(()=>{this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener()})}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseLeave(e,n){this.menubarService.mouseLeaves.next(!0)}onItemMouseEnter(e,n){this.menubarService.mouseLeaves.next(!1),n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){(0,x.NF)(this.platformId)&&(this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())})))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}ngOnDestroy(){this.mouseLeaveSubscriber.unsubscribe(),this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.K0),t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(Gn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter","mouseleave",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter","mouseleave",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter","mouseleave"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter","mouseleave"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(t.TgZ(0,"ul",0),t.YNc(1,ug,2,2,"ng-template",1),t.qZA()),2&e&&(t.Q6J("ngClass",t.WLB(3,dg,!n.root,n.root)),t.uIk("role",n.root?"menubar":"menu"),t.xp6(1),t.Q6J("ngForOf",n.root?n.item:n.item.items))},dependencies:[x.mk,x.sg,x.O5,x.PC,bt.rH,bt.Od,pn.H,Qn,i],encapsulation:2}),i})(),Dg=(()=>{class i{constructor(e,n,s,r,o,l,c){this.document=e,this.platformId=n,this.el=s,this.renderer=r,this.cd=o,this.config=l,this.menubarService=c,this.autoZIndex=!0,this.baseZIndex=0,this.autoHideDelay=100}ngOnInit(){this.menubarService.autoHide=this.autoHide,this.menubarService.autoHideDelay=this.autoHideDelay,this.mouseLeaveSubscriber=this.menubarService.mouseLeft$.subscribe(()=>this.unbindOutsideClickListener())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),ye.P9.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,ye.P9.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){(0,x.NF)(this.platformId)&&(this.outsideClickListener||(this.outsideClickListener=this.renderer.listen(this.document,"click",e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()})))}hide(){this.mobileActive=!1,this.cd.markForCheck(),ye.P9.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(this.outsideClickListener(),this.outsideClickListener=null)}ngOnDestroy(){this.mouseLeaveSubscriber.unsubscribe(),this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.K0),t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(De.b4),t.Y36(Gn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,De.jx,4),2&e){let r;t.iGM(r=t.CRH())&&(n.templates=r)}},viewQuery:function(e,n){if(1&e&&(t.Gf(hg,5),t.Gf(pg,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.menubutton=s.first),t.iGM(s=t.CRH())&&(n.rootmenu=s.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay",autoHide:"autoHide",autoHideDelay:"autoHideDelay"},features:[t._Bn([Gn])],ngContentSelectors:bg,decls:8,vars:15,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0","class","p-menubar-button",3,"click",4,"ngIf"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,mg,2,1,"div",1),t.YNc(2,fg,3,0,"a",2),t.TgZ(3,"p-menubarSub",3,4),t.NdJ("leafClick",function(){return n.onLeafClick()}),t.qZA(),t.YNc(5,vg,2,1,"div",5),t.YNc(6,Cg,2,0,"ng-template",null,6,t.W1O),t.qZA()),2&e){const s=t.MAs(7);t.Tol(n.styleClass),t.Q6J("ngClass",t.VKq(13,yg,n.mobileActive))("ngStyle",n.style),t.xp6(1),t.Q6J("ngIf",n.startTemplate),t.xp6(1),t.Q6J("ngIf",n.model&&n.model.length>0),t.xp6(1),t.Q6J("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),t.xp6(2),t.Q6J("ngIf",n.endTemplate)("ngIfElse",s)}},dependencies:[x.mk,x.O5,x.tP,x.PC,wg],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center;flex-wrap:wrap}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:2}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),Tg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,bt.Bz,pn.T,Wt,De.m8,bt.Bz,Wt,De.m8]}),i})();var $e=_(5593);function xg(i,a){1&i&&(t.TgZ(0,"span",4),t._uU(1,"Getstream Chat"),t.qZA())}function Sg(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-button",6),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.signOut())}),t._uU(2,"Sign out"),t.qZA(),t.BQk()}}function Mg(i,a){if(1&i&&(t.YNc(0,Sg,3,0,"ng-container",5),t.ALo(1,"async")),2&i){const e=t.oxw(),n=t.MAs(4);t.Q6J("ngIf",t.lcZ(1,2,e.auth.isLoggedIn$))("ngIfElse",n)}}function kg(i,a){1&i&&(t.TgZ(0,"p-button",7),t._uU(1,"Sign in"),t.qZA(),t.TgZ(2,"p-button",8),t._uU(3,"Sign up"),t.qZA()),2&i&&t.Udp("margin-right","10px")}let Ag=(()=>{class i{constructor(e,n){(0,p.Z)(this,"_router",void 0),(0,p.Z)(this,"auth",void 0),this._router=e,this.auth=n}signOut(){this.auth.signOut().subscribe({next:()=>this._router.navigate(["signin"])})}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(bt.F0),t.Y36(Qt.e8))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-menubar"]],standalone:!0,features:[t.jDz],decls:5,vars:0,consts:[["styleClass","menubar"],["pTemplate","start"],["pTemplate","end"],["authButtons",""],[1,"logo-title"],[4,"ngIf","ngIfElse"],["styleClass","p-button-secondary",3,"onClick"],["routerLink","/signin","routerLinkActive","active-btn"],["routerLink","/signup","routerLinkActive","active-btn"]],template:function(e,n){1&e&&(t.TgZ(0,"p-menubar",0),t.YNc(1,xg,2,0,"ng-template",1),t.YNc(2,Mg,2,4,"ng-template",2),t.qZA(),t.YNc(3,kg,4,2,"ng-template",null,3,t.W1O))},dependencies:[x.O5,x.Ov,bt.rH,bt.Od,Tg,Dg,De.jx,$e.hJ,$e.zx],styles:["[_nghost-%COMP%]     .menubar{background-color:var(--primary-color);color:#fff;border:none;border-radius:initial}[_nghost-%COMP%]     .active-btn .p-button, [_nghost-%COMP%]     .active-btn .p-button:hover{border:1px solid white}.logo-title[_ngcontent-%COMP%]{font-size:1.2rem}"],changeDetection:0})),i})();var Ge=_(4006),Wn=_(1740);let Og=(()=>{class i{constructor(e){(0,p.Z)(this,"_dialogRef",void 0),(0,p.Z)(this,"newChannelCtrl",new Ge.NI("")),this._dialogRef=e}createChannel(){this._dialogRef.close(this.newChannelCtrl.value)}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(Gt))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-create-channel"]],standalone:!0,features:[t.jDz],decls:5,vars:1,consts:[[1,"create-channel-wrapper"],["label","Channel name"],["pInputText","","id","channelName",3,"formControl"],[3,"onClick"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"app-form-field",1),t._UZ(2,"input",2),t.qZA(),t.TgZ(3,"p-button",3),t.NdJ("onClick",function(){return n.createChannel()}),t._uU(4,"Create"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("formControl",n.newChannelCtrl))},dependencies:[Qt.hg,$e.hJ,$e.zx,Wn.j,Wn.o,Ge.UX,Ge.Fj,Ge.JJ,Ge.oH],styles:[".create-channel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:10px}.create-channel-wrapper[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin-left:auto}"]})),i})(),Eg=(()=>{class i{constructor(e,n,s,r){(0,p.Z)(this,"_dialog",void 0),(0,p.Z)(this,"_chatService",void 0),(0,p.Z)(this,"notify",void 0),(0,p.Z)(this,"_authService",void 0),this._dialog=e,this._chatService=n,this.notify=s,this._authService=r}openCreateChannelModal(){this._dialog.open(Og,{header:"Create channel",width:"400px"}).onClose.subscribe(n=>{this._chatService.chatClient.channel("messaging",n.replace(/\s+/g,"-").toLowerCase(),{name:n,members:[this._authService.currentUser.uid]}).create(),this.notify.addTemporaryNotification("You've created a new channel","info")})}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(Vn),t.Y36(Qe),t.Y36(lt),t.Y36(Qt.e8))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-channel-list"]],standalone:!0,features:[t.jDz],decls:2,vars:0,consts:[["channel-list-bottom","","icon","pi pi-plus","styleClass","p-button-rounded p-button-lg","pTooltip","Create channel","tooltipPosition","top",1,"create-channel-btn",3,"onClick"]],template:function(e,n){1&e&&(t.TgZ(0,"stream-channel-list")(1,"p-button",0),t.NdJ("onClick",function(){return n.openCreateChannelModal()}),t.qZA()())},dependencies:[Ge.UX,$e.hJ,$e.zx,Wt,Qn,Jn,lp],styles:[".create-channel-btn[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px;z-index:100}"],changeDetection:0})),i})(),Ig=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterViewChecked(){if(!this.focused&&this.autofocus){const e=P.p.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275dir=t.lG2({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),i})(),Ts=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez]}),i})();const Fg=["overlay"],Lg=["content"];function Zg(i,a){1&i&&t.GkF(0)}const Ug=function(i,a,e){return{showTransitionParams:i,hideTransitionParams:a,transform:e}},Rg=function(i){return{value:"visible",params:i}},Bg=function(i){return{mode:i}},Pg=function(i){return{$implicit:i}};function Ng(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",1,3),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onOverlayContentClick(s))})("@overlayContentAnimation.start",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onOverlayContentAnimationStart(s))})("@overlayContentAnimation.done",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onOverlayContentAnimationDone(s))}),t.Hsn(2),t.YNc(3,Zg,1,0,"ng-container",4),t.qZA()}if(2&i){const e=t.oxw(2);t.Tol(e.contentStyleClass),t.Q6J("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",t.VKq(11,Rg,t.kEZ(7,Ug,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),t.xp6(3),t.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",t.VKq(15,Pg,t.VKq(13,Bg,e.overlayMode)))}}const Hg=function(i,a,e,n,s,r,o,l,c,u,d,m,f,v){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":i,"p-overlay-center":a,"p-overlay-top":e,"p-overlay-top-start":n,"p-overlay-top-end":s,"p-overlay-bottom":r,"p-overlay-bottom-start":o,"p-overlay-bottom-end":l,"p-overlay-left":c,"p-overlay-left-start":u,"p-overlay-left-end":d,"p-overlay-right":m,"p-overlay-right-start":f,"p-overlay-right-end":v}};function jg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",1,2),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onOverlayClick(s))}),t.YNc(2,Ng,4,17,"div",0),t.qZA()}if(2&i){const e=t.oxw();t.Tol(e.styleClass),t.Q6J("ngStyle",e.style)("ngClass",t.rFY(5,Hg,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),t.xp6(2),t.Q6J("ngIf",e.visible)}}const $g=["*"],Yg={provide:Ge.JU,useExisting:(0,t.Gpc)(()=>xs),multi:!0},qg=(0,pe.oQ)([(0,pe.oB)({transform:"{{transform}}",opacity:0}),(0,pe.jt)("{{showTransitionParams}}")]),zg=(0,pe.oQ)([(0,pe.jt)("{{hideTransitionParams}}",(0,pe.oB)({transform:"{{transform}}",opacity:0}))]);let xs=(()=>{class i{constructor(e,n,s,r,o,l,c){this.document=e,this.platformId=n,this.el=s,this.renderer=r,this.config=o,this.overlayService=l,this.zone=c,this.visibleChange=new t.vpe,this.onBeforeShow=new t.vpe,this.onShow=new t.vpe,this.onBeforeHide=new t.vpe,this.onHide=new t.vpe,this.onAnimationStart=new t.vpe,this.onAnimationDone=new t.vpe,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return ye.gb.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return ye.gb.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return ye.gb.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return ye.gb.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){if((0,x.NF)(this.platformId))return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return P.p.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,n=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&P.p.focus(this.targetEl),this.modal&&P.p.addClass(this.document?.body,"p-overflow-hidden")}hide(e,n=!1){this.visible&&(this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&P.p.focus(this.targetEl),this.modal&&P.p.removeClass(this.document?.body,"p-overflow-hidden"))}alignOverlay(){!this.modal&&P.p.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(e){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&ye.P9.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),P.p.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&P.p.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const n=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(n,!0),this.bindListeners();break;case"void":this.hide(n,!0),this.unbindListeners(),P.p.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),ye.P9.clear(n),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,n){this[e].emit(n),this.options&&this.options[e]&&this.options[e](n),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](n)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new P.V(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const s=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&s}):s)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!P.p.isTouchDevice()}):!P.p.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{this.overlayOptions.hideOnEscape&&27===e.keyCode&&(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!P.p.isTouchDevice()}):!P.p.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(P.p.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),ye.P9.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.K0),t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(De.b4),t.Y36(De.F0),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-overlay"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,De.jx,4),2&e){let r;t.iGM(r=t.CRH())&&(n.templates=r)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Fg,5),t.Gf(Lg,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.overlayViewChild=s.first),t.iGM(s=t.CRH())&&(n.contentViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[t._Bn([Yg])],ngContentSelectors:$g,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,jg,3,20,"div",0)),2&e&&t.Q6J("ngIf",n.modalVisible)},dependencies:[x.mk,x.O5,x.tP,x.PC],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[(0,pe.X$)("overlayContentAnimation",[(0,pe.eR)(":enter",[(0,pe._7)(qg)]),(0,pe.eR)(":leave",[(0,pe._7)(zg)])])]},changeDetection:0}),i})(),Ss=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,De.m8,De.m8]}),i})();const Jg=["element"],Vg=["content"];function Qg(i,a){1&i&&t.GkF(0)}const Kn=function(i,a){return{$implicit:i,options:a}};function Gg(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Qg,1,0,"ng-container",7),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",t.WLB(2,Kn,e.loadedItems,e.getContentOptions()))}}function Wg(i,a){1&i&&t.GkF(0)}function Kg(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Wg,1,0,"ng-container",7),t.BQk()),2&i){const e=a.$implicit,n=a.index,s=t.oxw(3);t.xp6(1),t.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",t.WLB(2,Kn,e,s.getOptions(n)))}}const Xg=function(i){return{"p-scroller-loading":i}};function em(i,a){if(1&i&&(t.TgZ(0,"div",8,9),t.YNc(2,Kg,2,5,"ng-container",10),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,Xg,e.d_loading))("ngStyle",e.contentStyle),t.xp6(2),t.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function tm(i,a){if(1&i&&t._UZ(0,"div",11),2&i){const e=t.oxw(2);t.Q6J("ngStyle",e.spacerStyle)}}function nm(i,a){1&i&&t.GkF(0)}const im=function(i){return{numCols:i}},Ms=function(i){return{options:i}};function sm(i,a){if(1&i&&(t.ynx(0),t.YNc(1,nm,1,0,"ng-container",7),t.BQk()),2&i){const e=a.index,n=t.oxw(4);t.xp6(1),t.Q6J("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",t.VKq(4,Ms,n.getLoaderOptions(e,n.both&&t.VKq(2,im,n._numItemsInViewport.cols))))}}function am(i,a){if(1&i&&(t.ynx(0),t.YNc(1,sm,2,6,"ng-container",14),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.loaderArr)}}function rm(i,a){1&i&&t.GkF(0)}const om=function(){return{styleClass:"p-scroller-loading-icon"}};function lm(i,a){if(1&i&&(t.ynx(0),t.YNc(1,rm,1,0,"ng-container",7),t.BQk()),2&i){const e=t.oxw(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",t.VKq(3,Ms,t.DdM(2,om)))}}function cm(i,a){1&i&&t._UZ(0,"i",16)}function um(i,a){if(1&i&&(t.YNc(0,lm,2,5,"ng-container",0),t.YNc(1,cm,1,0,"ng-template",null,15,t.W1O)),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("ngIf",n.loaderIconTemplate)("ngIfElse",e)}}const dm=function(i){return{"p-component-overlay":i}};function hm(i,a){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,am,2,1,"ng-container",0),t.YNc(2,um,3,2,"ng-template",null,13,t.W1O),t.qZA()),2&i){const e=t.MAs(3),n=t.oxw(2);t.Q6J("ngClass",t.VKq(3,dm,!n.loaderTemplate)),t.xp6(1),t.Q6J("ngIf",n.loaderTemplate)("ngIfElse",e)}}const pm=function(i,a,e){return{"p-scroller":!0,"p-scroller-inline":i,"p-both-scroll":a,"p-horizontal-scroll":e}};function gm(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2,3),t.NdJ("scroll",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onContainerScroll(s))}),t.YNc(3,Gg,2,5,"ng-container",0),t.YNc(4,em,3,6,"ng-template",null,4,t.W1O),t.YNc(6,tm,1,1,"div",5),t.YNc(7,hm,4,5,"div",6),t.qZA(),t.BQk()}if(2&i){const e=t.MAs(5),n=t.oxw();t.xp6(1),t.Tol(n._styleClass),t.Q6J("ngStyle",n._style)("ngClass",t.kEZ(10,pm,n.inline,n.both,n.horizontal)),t.uIk("id",n._id)("tabindex",n.tabindex),t.xp6(2),t.Q6J("ngIf",n.contentTemplate)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n._showSpacer),t.xp6(1),t.Q6J("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function mm(i,a){1&i&&t.GkF(0)}const fm=function(i,a){return{rows:i,columns:a}};function _m(i,a){if(1&i&&(t.ynx(0),t.YNc(1,mm,1,0,"ng-container",7),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",t.WLB(5,Kn,e.items,t.WLB(2,fm,e._items,e.loadedColumns)))}}function vm(i,a){if(1&i&&(t.Hsn(0),t.YNc(1,_m,2,8,"ng-container",17)),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.contentTemplate)}}const Cm=["*"];let ym=(()=>{class i{constructor(e,n,s,r,o){this.document=e,this.platformId=n,this.renderer=s,this.cd=r,this.zone=o,this.onLazyLoad=new t.vpe,this.onScroll=new t.vpe,this.onScrollIndexChange=new t.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.isRangeChanged=!1,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,s])=>this[`_${n}`]!==s&&(this[`_${n}`]=s))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:s,currentValue:r}=e.loading;this.lazy&&s!==r&&r!==this.d_loading&&(this.d_loading=r,n=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:s,currentValue:r}=e.numToleratedItems;s!==r&&r!==this.d_numToleratedItems&&(this.d_numToleratedItems=r)}if(e.options){const{previousValue:s,currentValue:r}=e.options;this.lazy&&s?.loading!==r?.loading&&r?.loading!==this.d_loading&&(this.d_loading=r.loading,n=!0),s?.numToleratedItems!==r?.numToleratedItems&&r?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=r.numToleratedItems)}this.initialized&&!n&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){(0,x.NF)(this.platformId)&&P.p.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=P.p.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=P.p.getHeight(this.elementViewChild.nativeElement),this.defaultContentWidth=P.p.getWidth(this.contentEl),this.defaultContentHeight=P.p.getHeight(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||P.p.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:s}=this.calculateNumItems(),r=this.getContentPosition(),o=(d=0,m)=>d<=m?0:d,l=(d,m,f)=>d*m+f,c=(d=0,m=0)=>this.scrollTo({left:d,top:m,behavior:n});let u=0;this.both?(u={rows:o(e[0],s[0]),cols:o(e[1],s[1])},c(l(u.cols,this._itemSize[1],r.left),l(u.rows,this._itemSize[0],r.top))):(u=o(e,s),this.horizontal?c(l(u,this._itemSize,r.left),0):c(0,l(u,this._itemSize,r.top))),this.isRangeChanged=this.first!==u,this.first=u}scrollInView(e,n,s="auto"){if(n){const{first:r,viewport:o}=this.getRenderedRange(),l=(d=0,m=0)=>this.scrollTo({left:d,top:m,behavior:s}),u="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-r.rows>e[0]?l(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-r.cols>e[1]&&l((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-r>e){const d=(o.first-1)*this._itemSize;this.horizontal?l(d,0):l(0,d)}}else if(u)if(this.both)o.last.rows-r.rows<=e[0]+1?l(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-r.cols<=e[1]+1&&l((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-r<=e+1){const d=(o.first+1)*this._itemSize;this.horizontal?l(d,0):l(0,d)}}else this.scrollToIndex(e,s)}getRenderedRange(){const e=(r,o)=>Math.floor(r/(o||r));let n=this.first,s=0;if(this.elementViewChild?.nativeElement){const{scrollTop:r,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:e(r,this._itemSize[0]),cols:e(o,this._itemSize[1])},s={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?o:r,this._itemSize),s=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:s}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,s=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,r=(u,d)=>Math.ceil(u/(d||u)),o=u=>Math.ceil(u/2),l=this.both?{rows:r(s,this._itemSize[0]),cols:r(n,this._itemSize[1])}:r(this.horizontal?n:s,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[o(l.rows),o(l.cols)]:o(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),s=(l,c,u,d=!1)=>this.getLast(l+c+(l<u?2:3)*u,d),r=this.first,o=this.both?{rows:s(this.first.rows,e.rows,n[0]),cols:s(this.first.cols,e.cols,n[1],!0)}:s(this.first,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:r.cols}:0:r,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";const[e,n]=[P.p.getWidth(this.contentEl),P.p.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),n!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");const[s,r]=[P.p.getWidth(this.elementViewChild.nativeElement),P.p.getHeight(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=s<this.defaultWidth?s+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=r<this.defaultHeight?r+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),s=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),r=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),o=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:n,right:s,top:r,bottom:o,x:n+s,y:r+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,s=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,r=(o,l)=>this.elementViewChild.nativeElement.style[o]=l;this.both||this.horizontal?(r("height",s),r("width",n)):r("height",s)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(s,r,o,l=0)=>this.spacerStyle={...this.spacerStyle,[`${s}`]:(r||[]).length*o+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const n=e?e.first:this.first,s=(o,l)=>o*l,r=(o=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${l}px, 0)`};if(this.both)r(s(n.cols,this._itemSize[1]),s(n.rows,this._itemSize[0]));else{const o=s(n,this._itemSize);this.horizontal?r(o,0):r(0,o)}}}onScrollPositionChange(e){const n=e.target,s=this.getContentPosition(),r=(B,Q)=>B?B>Q?B-Q:B:0,o=(B,Q)=>Math.floor(B/(Q||B)),l=(B,Q,A,oe,te,ne)=>B<=te?te:ne?A-oe-te:Q+te-1,c=(B,Q,A,oe,te,ne,ie)=>B<=ne?0:Math.max(0,ie?B<Q?A:B-ne:B>Q?A:B-2*ne),u=(B,Q,A,oe,te,ne=!1)=>{let ie=Q+oe+2*te;return B>=te&&(ie+=te+1),this.getLast(ie,ne)},d=r(n.scrollTop,s.top),m=r(n.scrollLeft,s.left);let f=this.both?{rows:0,cols:0}:0,v=this.last,C=!1,R=this.lastScrollPos;if(this.both){const B=this.lastScrollPos.top<=d,Q=this.lastScrollPos.left<=m;if(!this._appendOnly||this._appendOnly&&(B||Q)){const A={rows:o(d,this._itemSize[0]),cols:o(m,this._itemSize[1])},oe={rows:l(A.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],B),cols:l(A.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Q)};f={rows:c(A.rows,oe.rows,this.first.rows,0,0,this.d_numToleratedItems[0],B),cols:c(A.cols,oe.cols,this.first.cols,0,0,this.d_numToleratedItems[1],Q)},v={rows:u(A.rows,f.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:u(A.cols,f.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},C=f.rows!==this.first.rows||v.rows!==this.last.rows||f.cols!==this.first.cols||v.cols!==this.last.cols||this.isRangeChanged,R={top:d,left:m}}}else{const B=this.horizontal?m:d,Q=this.lastScrollPos<=B;if(!this._appendOnly||this._appendOnly&&Q){const A=o(B,this._itemSize);f=c(A,l(A,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Q),this.first,0,0,this.d_numToleratedItems,Q),v=u(A,f,0,this.numItemsInViewport,this.d_numToleratedItems),C=f!==this.first||v!==this.last||this.isRangeChanged,R=B}}return{first:f,last:v,isRangeChanged:C,scrollPos:R}}onScrollChange(e){const{first:n,last:s,isRangeChanged:r,scrollPos:o}=this.onScrollPositionChange(e);if(r){const l={first:n,last:s};if(this.setContentPosition(l),this.first=n,this.last=s,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.isPageChanged){const c={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):n,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:s,this.items.length)};(this.lazyLoadState.first!==c.first||this.lazyLoadState.last!==c.last)&&this.handleEvents("onLazyLoad",c),this.lazyLoadState=c}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);(n||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){(0,x.NF)(this.platformId)&&(this.windowResizeListener||this.zone.runOutsideAngular(()=>{const e=this.document.defaultView,n=P.p.isTouchDevice()?"orientationchange":"resize";this.windowResizeListener=this.renderer.listen(e,n,this.onWindowResize.bind(this))}))}unbindResizeListener(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(P.p.isVisible(this.elementViewChild?.nativeElement)){const[e,n]=[P.p.getWidth(this.elementViewChild.nativeElement),P.p.getHeight(this.elementViewChild.nativeElement)],[s,r]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?s||r:this.horizontal?s:this.vertical&&r)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.defaultContentWidth=P.p.getWidth(this.contentEl),this.defaultContentHeight=P.p.getHeight(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,s=this.both?this.first.rows+e:this.first+e;return{index:s,count:n,first:0===s,last:s===n-1,even:s%2==0,odd:s%2!=0}}getLoaderOptions(e,n){const s=this.loaderArr.length;return{index:e,count:s,first:0===e,last:e===s-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.K0),t.Y36(t.Lbi),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,De.jx,4),2&e){let r;t.iGM(r=t.CRH())&&(n.templates=r)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Jg,5),t.Gf(Vg,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.elementViewChild=s.first),t.iGM(s=t.CRH())&&(n.contentViewChild=s.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[t.TTD],ngContentSelectors:Cm,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(t.F$t(),t.YNc(0,gm,8,14,"ng-container",0),t.YNc(1,vm,2,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",!n._disabled)("ngIfElse",s)}},dependencies:[x.mk,x.sg,x.O5,x.tP,x.PC],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),i})(),ks=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,De.m8,De.m8]}),i})();const bm=["container"],wm=["in"],Dm=["multiIn"],Tm=["multiContainer"],xm=["ddBtn"],Sm=["items"],Mm=["scroller"],km=["overlay"],Am=function(i,a){return{"p-autocomplete-dd-input":i,"p-disabled":a}};function Om(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",13,14),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputClick(s))})("input",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInput(s))})("keydown",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeydown(s))})("keyup",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeyup(s))})("focus",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputFocus(s))})("blur",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputBlur(s))})("change",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputChange(s))})("paste",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputPaste(s))}),t.qZA()}if(2&i){const e=t.oxw();t.Tol(e.inputStyleClass),t.Q6J("autofocus",e.autofocus)("ngStyle",e.inputStyle)("autocomplete",e.autocomplete)("ngClass",t.WLB(20,Am,e.dropdown,e.disabled))("value",e.inputFieldValue)("readonly",e.readonly)("disabled",e.disabled),t.uIk("type",e.type)("id",e.inputId)("required",e.required)("name",e.name)("placeholder",e.placeholder)("size",e.size)("maxlength",e.maxlength)("tabindex",e.tabindex)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("aria-required",e.required)}}function Em(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"i",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clear())}),t.qZA()}}function Im(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"i",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clear())}),t.qZA()}}function Fm(i,a){1&i&&t.GkF(0)}function Lm(i,a){if(1&i&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.resolveFieldData(e))}}function Zm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",28),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(1),r=t.oxw(2);return t.KtG(r.removeItem(s))}),t.qZA()}}const gn=function(i){return{$implicit:i}};function Um(i,a){if(1&i&&(t.TgZ(0,"li",22,23),t.YNc(2,Fm,1,0,"ng-container",24),t.YNc(3,Lm,2,1,"span",25),t.YNc(4,Zm,1,0,"span",26),t.qZA()),2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngTemplateOutlet",n.selectedItemTemplate)("ngTemplateOutletContext",t.VKq(4,gn,e)),t.xp6(1),t.Q6J("ngIf",!n.selectedItemTemplate),t.xp6(1),t.Q6J("ngIf",!n.disabled&&!n.readonly)}}const Rm=function(i,a){return{"p-disabled":i,"p-focus":a}};function Bm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ul",16,17),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(5);return t.KtG(s.focus())}),t.YNc(2,Um,5,6,"li",18),t.TgZ(3,"li",19)(4,"input",20,21),t.NdJ("input",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInput(s))})("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputClick(s))})("keydown",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeydown(s))})("keyup",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeyup(s))})("focus",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputFocus(s))})("blur",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputBlur(s))})("change",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputChange(s))})("paste",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onInputPaste(s))}),t.qZA()()()}if(2&i){const e=t.oxw();t.Q6J("ngClass",t.WLB(20,Rm,e.disabled,e.focus)),t.xp6(2),t.Q6J("ngForOf",e.value),t.xp6(2),t.Tol(e.inputStyleClass),t.Q6J("autofocus",e.autofocus)("disabled",e.disabled)("readonly",e.readonly)("autocomplete",e.autocomplete)("ngStyle",e.inputStyle),t.uIk("type",e.type)("id",e.inputId)("placeholder",e.value&&e.value.length?null:e.placeholder)("tabindex",e.tabindex)("maxlength",e.maxlength)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("aria-required",e.required)("aria-controls",e.listId)("aria-expanded",e.overlayVisible)("aria-activedescendant","p-highlighted-option")}}function Pm(i,a){1&i&&t._UZ(0,"i",29)}function Nm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",30,31),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.handleDropdownClick(s))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("icon",e.dropdownIcon)("disabled",e.disabled),t.uIk("aria-label",e.dropdownAriaLabel)("tabindex",e.tabindex)}}function Hm(i,a){1&i&&t.GkF(0)}function jm(i,a){1&i&&t.GkF(0)}const As=function(i,a){return{$implicit:i,options:a}};function $m(i,a){if(1&i&&t.YNc(0,jm,1,0,"ng-container",24),2&i){const e=a.$implicit,n=a.options;t.oxw(2);const s=t.MAs(15);t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.WLB(2,As,e,n))}}function Ym(i,a){1&i&&t.GkF(0)}const qm=function(i){return{options:i}};function zm(i,a){if(1&i&&t.YNc(0,Ym,1,0,"ng-container",24),2&i){const e=a.options,n=t.oxw(3);t.Q6J("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",t.VKq(2,qm,e))}}function Jm(i,a){1&i&&(t.ynx(0),t.YNc(1,zm,1,4,"ng-template",35),t.BQk())}const mn=function(i){return{height:i}};function Vm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-scroller",32,33),t.NdJ("onLazyLoad",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.onLazyLoad.emit(s))}),t.YNc(2,$m,1,5,"ng-template",34),t.YNc(3,Jm,2,0,"ng-container",11),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.VKq(8,mn,e.scrollHeight)),t.Q6J("items",e.suggestions)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),t.xp6(3),t.Q6J("ngIf",e.loaderTemplate)}}function Qm(i,a){1&i&&t.GkF(0)}const Gm=function(){return{}};function Wm(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Qm,1,0,"ng-container",24),t.BQk()),2&i){const e=t.oxw(),n=t.MAs(15);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.WLB(3,As,e.suggestions,t.DdM(2,Gm)))}}function Km(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.Oqu(n.getOptionGroupLabel(e)||"empty")}}function Xm(i,a){1&i&&t.GkF(0)}function ef(i,a){1&i&&t.GkF(0)}function tf(i,a){if(1&i&&(t.TgZ(0,"li",41),t.YNc(1,Km,2,1,"span",11),t.YNc(2,Xm,1,0,"ng-container",24),t.qZA(),t.YNc(3,ef,1,0,"ng-container",24)),2&i){const e=a.$implicit,n=t.oxw(2).options,s=t.MAs(5),r=t.oxw();t.Q6J("ngStyle",t.VKq(6,mn,n.itemSize+"px")),t.xp6(1),t.Q6J("ngIf",!r.groupTemplate),t.xp6(1),t.Q6J("ngTemplateOutlet",r.groupTemplate)("ngTemplateOutletContext",t.VKq(8,gn,e)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(10,gn,r.getOptionGroupChildren(e)))}}function nf(i,a){if(1&i&&(t.ynx(0),t.YNc(1,tf,4,12,"ng-template",40),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function sf(i,a){1&i&&t.GkF(0)}function af(i,a){if(1&i&&(t.ynx(0),t.YNc(1,sf,1,0,"ng-container",24),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,gn,e))}}function rf(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.Oqu(n.resolveFieldData(e))}}function of(i,a){1&i&&t.GkF(0)}const lf=function(i){return{"p-highlight":i}},cf=function(i,a){return{$implicit:i,index:a}};function uf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(3);return t.KtG(o.selectItem(r))}),t.YNc(1,rf,2,1,"span",11),t.YNc(2,of,1,0,"ng-container",24),t.qZA()}if(2&i){const e=a.$implicit,n=a.index,s=t.oxw(2).options,r=t.oxw();t.Q6J("ngStyle",t.VKq(6,mn,s.itemSize+"px"))("ngClass",t.VKq(8,lf,e===r.highlightOption))("id",r.highlightOption==e?"p-highlighted-option":""),t.xp6(1),t.Q6J("ngIf",!r.itemTemplate),t.xp6(1),t.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",t.WLB(10,cf,e,s.getOptions?s.getOptions(n):n))}}function df(i,a){1&i&&t.YNc(0,uf,3,13,"li",42),2&i&&t.Q6J("ngForOf",a.$implicit)}function hf(i,a){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.emptyMessageLabel," ")}}function pf(i,a){1&i&&t.GkF(0,null,46)}function gf(i,a){if(1&i&&(t.TgZ(0,"li",44),t.YNc(1,hf,2,1,"ng-container",45),t.YNc(2,pf,2,0,"ng-container",9),t.qZA()),2&i){const e=t.oxw().options,n=t.oxw();t.Q6J("ngStyle",t.VKq(4,mn,e.itemSize+"px")),t.xp6(1),t.Q6J("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),t.xp6(1),t.Q6J("ngTemplateOutlet",n.emptyTemplate)}}function mf(i,a){if(1&i&&(t.TgZ(0,"ul",36,37),t.YNc(2,nf,2,1,"ng-container",11),t.YNc(3,af,2,4,"ng-container",11),t.YNc(4,df,1,1,"ng-template",null,38,t.W1O),t.YNc(6,gf,3,6,"li",39),t.qZA()),2&i){const e=a.options,n=t.oxw();t.Akn(e.contentStyle),t.Q6J("ngClass",e.contentStyleClass),t.uIk("id",n.listId),t.xp6(2),t.Q6J("ngIf",n.group),t.xp6(1),t.Q6J("ngIf",!n.group),t.xp6(3),t.Q6J("ngIf",n.noResults&&n.showEmptyMessage)}}function ff(i,a){1&i&&t.GkF(0)}const _f=function(i,a){return{"p-autocomplete p-component":!0,"p-autocomplete-dd":i,"p-autocomplete-multiple":a}},vf=function(){return["p-autocomplete-panel p-component"]},Cf={provide:Ge.JU,useExisting:(0,t.Gpc)(()=>Os),multi:!0};let Os=(()=>{class i{constructor(e,n,s,r,o,l,c,u){this.document=e,this.el=n,this.renderer=s,this.cd=r,this.differs=o,this.config=l,this.overlayService=c,this.zone=u,this.minLength=1,this.delay=300,this.scrollHeight="200px",this.lazy=!1,this.type="text",this.autoZIndex=!0,this.baseZIndex=0,this.dropdownIcon="pi pi-chevron-down",this.unique=!0,this.completeOnFocus=!1,this.showClear=!1,this.dropdownMode="blank",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autocomplete="off",this.completeMethod=new t.vpe,this.onSelect=new t.vpe,this.onUnselect=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.onDropdownClick=new t.vpe,this.onClear=new t.vpe,this.onKeyUp=new t.vpe,this.onShow=new t.vpe,this.onHide=new t.vpe,this.onLazyLoad=new t.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.overlayVisible=!1,this.focus=!1,this.inputFieldValue=null,this.inputValue=null,this.differ=o.find([]).create(null),this.listId=(0,ye.Th)()+"_list"}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get suggestions(){return this._suggestions}set suggestions(e){this._suggestions=e,this.handleSuggestionsChange()}ngAfterViewChecked(){this.suggestionsUpdated&&this.overlayViewChild&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1),this.suggestionsUpdated=!1}),this.highlightOptionChanged&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{if(this.overlay&&this.itemsWrapper){let e=P.p.findSingle(this.overlayViewChild.overlayViewChild.nativeElement,"li.p-highlight");e&&P.p.scrollInView(this.itemsWrapper,e)}},1),this.highlightOptionChanged=!1})}handleSuggestionsChange(){null!=this._suggestions&&this.loading&&(this.highlightOption=null,this._suggestions.length?(this.noResults=!1,this.show(),this.suggestionsUpdated=!0,this.autoHighlight&&(this.highlightOption=this._suggestions[0])):(this.noResults=!0,this.showEmptyMessage?(this.show(),this.suggestionsUpdated=!0):this.hide()),this.loading=!1)}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}writeValue(e){this.value=e,this.filled=this.value&&""!=this.value,this.updateInputField(),this.cd.markForCheck()}getOptionGroupChildren(e){return this.optionGroupChildren?ye.gb.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?ye.gb.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInput(e){if(!this.inputKeyDown&&P.p.isIE())return;this.timeout&&clearTimeout(this.timeout);let n=e.target.value;this.inputValue=n,!this.multiple&&!this.forceSelection&&this.onModelChange(n),0===n.length&&!this.multiple&&(this.value=null,this.hide(),this.onClear.emit(e),this.onModelChange(n)),n.length>=this.minLength?this.timeout=setTimeout(()=>{this.search(e,n)},this.delay):this.hide(),this.updateFilledState(),this.inputKeyDown=!1}onInputClick(e){this.inputClick=!0}search(e,n){null!=n&&(this.loading=!0,this.completeMethod.emit({originalEvent:e,query:n}))}selectItem(e,n=!0){this.forceSelectionUpdateModelTimeout&&(clearTimeout(this.forceSelectionUpdateModelTimeout),this.forceSelectionUpdateModelTimeout=null),this.multiple?(this.multiInputEL.nativeElement.value="",this.value=this.value||[],(!this.isSelected(e)||!this.unique)&&(this.value=[...this.value,e],this.onModelChange(this.value))):(this.inputEL.nativeElement.value=this.resolveFieldData(e),this.value=e,this.onModelChange(this.value)),this.onSelect.emit(e),this.updateFilledState(),n&&(this.itemClicked=!0,this.focusInput()),this.hide()}show(e){(this.multiInputEL||this.inputEL)&&!this.overlayVisible&&(this.multiple?this.multiInputEL.nativeElement.ownerDocument.activeElement==this.multiInputEL.nativeElement:this.inputEL.nativeElement.ownerDocument.activeElement==this.inputEL.nativeElement)&&(this.overlayVisible=!0),this.onShow.emit(e),this.cd.markForCheck()}clear(){this.multiple?this.value=null:(this.inputValue=null,this.inputEL.nativeElement.value=""),this.updateFilledState(),this.onModelChange(this.value),this.onClear.emit()}onOverlayAnimationStart(e){"visible"===e.toState&&(this.itemsWrapper=P.p.findSingle(this.overlayViewChild.overlayViewChild.nativeElement,this.virtualScroll?".p-scroller":".p-autocomplete-panel"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement))}resolveFieldData(e){let n=this.field?ye.gb.resolveFieldData(e,this.field):e;return void 0!==n?n:""}hide(e){this.overlayVisible=!1,this.onHide.emit(e),this.cd.markForCheck()}handleDropdownClick(e){if(this.overlayVisible)this.hide();else{this.focusInput();let n=this.multiple?this.multiInputEL.nativeElement.value:this.inputEL.nativeElement.value;"blank"===this.dropdownMode?this.search(e,""):"current"===this.dropdownMode&&this.search(e,n),this.onDropdownClick.emit({originalEvent:e,query:n})}}focusInput(){this.multiple?this.multiInputEL.nativeElement.focus():this.inputEL.nativeElement.focus()}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(De.ws.EMPTY_MESSAGE)}removeItem(e){let n=P.p.index(e),s=this.value[n];this.value=this.value.filter((r,o)=>o!=n),this.onModelChange(this.value),this.updateFilledState(),this.onUnselect.emit(s)}onKeydown(e){if(this.overlayVisible)switch(e.which){case 40:if(this.group){let s=this.findOptionGroupIndex(this.highlightOption,this.suggestions);if(-1!==s){let r=s.itemIndex+1;r<this.getOptionGroupChildren(this.suggestions[s.groupIndex]).length?(this.highlightOption=this.getOptionGroupChildren(this.suggestions[s.groupIndex])[r],this.highlightOptionChanged=!0):this.suggestions[s.groupIndex+1]&&(this.highlightOption=this.getOptionGroupChildren(this.suggestions[s.groupIndex+1])[0],this.highlightOptionChanged=!0)}else this.highlightOption=this.getOptionGroupChildren(this.suggestions[0])[0]}else{let s=this.findOptionIndex(this.highlightOption,this.suggestions);if(-1!=s){var n=s+1;n!=this.suggestions.length&&(this.highlightOption=this.suggestions[n],this.highlightOptionChanged=!0)}else this.highlightOption=this.suggestions[0]}e.preventDefault();break;case 38:if(this.group){let s=this.findOptionGroupIndex(this.highlightOption,this.suggestions);if(-1!==s){let r=s.itemIndex-1;if(r>=0)this.highlightOption=this.getOptionGroupChildren(this.suggestions[s.groupIndex])[r],this.highlightOptionChanged=!0;else if(r<0){let o=this.suggestions[s.groupIndex-1];o&&(this.highlightOption=this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1],this.highlightOptionChanged=!0)}}}else{let s=this.findOptionIndex(this.highlightOption,this.suggestions);s>0&&(this.highlightOption=this.suggestions[s-1],this.highlightOptionChanged=!0)}e.preventDefault();break;case 13:this.highlightOption&&(this.selectItem(this.highlightOption),this.hide()),e.preventDefault();break;case 27:this.hide(),e.preventDefault();break;case 9:this.highlightOption&&this.selectItem(this.highlightOption),this.hide()}else 40===e.which&&this.suggestions?this.search(e,e.target.value):e.ctrlKey&&"z"===e.key&&!this.multiple?(this.inputEL.nativeElement.value=this.resolveFieldData(null),this.value="",this.onModelChange(this.value)):e.ctrlKey&&"z"===e.key&&this.multiple&&(this.value.pop(),this.onModelChange(this.value),this.updateFilledState());if(this.multiple&&8===e.which&&this.value&&this.value.length&&!this.multiInputEL.nativeElement.value){this.value=[...this.value];const s=this.value.pop();this.onModelChange(this.value),this.updateFilledState(),this.onUnselect.emit(s)}this.inputKeyDown=!0}onKeyup(e){this.onKeyUp.emit(e)}onInputFocus(e){!this.itemClicked&&this.completeOnFocus&&this.search(e,this.multiple?this.multiInputEL.nativeElement.value:this.inputEL.nativeElement.value),this.focus=!0,this.onFocus.emit(e),this.itemClicked=!1}onInputBlur(e){this.focus=!1,this.onModelTouched(),this.onBlur.emit(e)}onInputChange(e){if(this.forceSelection){let n=!1,s=e.target.value.trim();if(this.suggestions)for(let r of this.suggestions){let o=this.field?ye.gb.resolveFieldData(r,this.field):r;if(o&&s===o.trim()){n=!0,this.forceSelectionUpdateModelTimeout=setTimeout(()=>{this.selectItem(r,!1)},250);break}}n||(this.multiple?this.multiInputEL.nativeElement.value="":(this.value=null,this.inputEL.nativeElement.value=""),this.onClear.emit(e),this.onModelChange(this.value),this.updateFilledState())}}onInputPaste(e){this.onKeydown(e)}isSelected(e){let n=!1;if(this.value&&this.value.length)for(let s=0;s<this.value.length;s++)if(ye.gb.equals(this.value[s],e,this.dataKey)){n=!0;break}return n}findOptionIndex(e,n){let s=-1;if(n)for(let r=0;r<n.length;r++)if(ye.gb.equals(e,n[r])){s=r;break}return s}findOptionGroupIndex(e,n){let s,r;if(n)for(let o=0;o<n.length&&(s=o,r=this.findOptionIndex(e,this.getOptionGroupChildren(n[o])),-1===r);o++);return-1!==r?{groupIndex:s,itemIndex:r}:-1}updateFilledState(){this.filled=this.multiple?this.value&&this.value.length||this.multiInputEL&&this.multiInputEL.nativeElement&&""!=this.multiInputEL.nativeElement.value:this.inputFieldValue&&""!=this.inputFieldValue||this.inputEL&&this.inputEL.nativeElement&&""!=this.inputEL.nativeElement.value}updateInputField(){let e=this.resolveFieldData(this.value);this.inputFieldValue=e,this.inputEL&&this.inputEL.nativeElement&&(this.inputEL.nativeElement.value=e),this.updateFilledState()}ngOnDestroy(){this.forceSelectionUpdateModelTimeout&&(clearTimeout(this.forceSelectionUpdateModelTimeout),this.forceSelectionUpdateModelTimeout=null),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.K0),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(t.ZZ4),t.Y36(De.b4),t.Y36(De.F0),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-autoComplete"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,De.jx,4),2&e){let r;t.iGM(r=t.CRH())&&(n.templates=r)}},viewQuery:function(e,n){if(1&e&&(t.Gf(bm,5),t.Gf(wm,5),t.Gf(Dm,5),t.Gf(Tm,5),t.Gf(xm,5),t.Gf(Sm,5),t.Gf(Mm,5),t.Gf(km,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.containerEL=s.first),t.iGM(s=t.CRH())&&(n.inputEL=s.first),t.iGM(s=t.CRH())&&(n.multiInputEL=s.first),t.iGM(s=t.CRH())&&(n.multiContainerEL=s.first),t.iGM(s=t.CRH())&&(n.dropdownButton=s.first),t.iGM(s=t.CRH())&&(n.itemsViewChild=s.first),t.iGM(s=t.CRH())&&(n.scroller=s.first),t.iGM(s=t.CRH())&&(n.overlayViewChild=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&t.ekj("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus&&!n.disabled||n.autofocus||n.overlayVisible)("p-autocomplete-clearable",n.showClear&&!n.disabled)},inputs:{minLength:"minLength",delay:"delay",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",inputStyle:"inputStyle",inputId:"inputId",inputStyleClass:"inputStyleClass",placeholder:"placeholder",readonly:"readonly",disabled:"disabled",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",maxlength:"maxlength",name:"name",required:"required",size:"size",appendTo:"appendTo",autoHighlight:"autoHighlight",forceSelection:"forceSelection",type:"type",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",ariaLabel:"ariaLabel",dropdownAriaLabel:"dropdownAriaLabel",ariaLabelledBy:"ariaLabelledBy",dropdownIcon:"dropdownIcon",unique:"unique",group:"group",completeOnFocus:"completeOnFocus",showClear:"showClear",field:"field",dropdown:"dropdown",showEmptyMessage:"showEmptyMessage",dropdownMode:"dropdownMode",multiple:"multiple",tabindex:"tabindex",dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:"autofocus",autocomplete:"autocomplete",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",overlayOptions:"overlayOptions",itemSize:"itemSize",suggestions:"suggestions"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onDropdownClick:"onDropdownClick",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide",onLazyLoad:"onLazyLoad"},features:[t._Bn([Cf])],decls:17,vars:30,consts:[[3,"ngClass","ngStyle"],["container",""],["pAutoFocus","","class","p-autocomplete-input p-inputtext p-component","aria-autocomplete","list","role","searchbox",3,"autofocus","ngStyle","class","autocomplete","ngClass","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste",4,"ngIf"],["class","p-autocomplete-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-autocomplete-multiple-container p-component p-inputtext",3,"ngClass","click",4,"ngIf"],["class","p-autocomplete-loader pi pi-spinner pi-spin",4,"ngIf"],["type","button","pButton","","class","p-autocomplete-dropdown","pRipple","",3,"icon","disabled","click",4,"ngIf"],[3,"visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onShow","onHide"],["overlay",""],[4,"ngTemplateOutlet"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],["pAutoFocus","","aria-autocomplete","list","role","searchbox",1,"p-autocomplete-input","p-inputtext","p-component",3,"autofocus","ngStyle","autocomplete","ngClass","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste"],["in",""],[1,"p-autocomplete-clear-icon","pi","pi-times",3,"click"],[1,"p-autocomplete-multiple-container","p-component","p-inputtext",3,"ngClass","click"],["multiContainer",""],["class","p-autocomplete-token",4,"ngFor","ngForOf"],[1,"p-autocomplete-input-token"],["pAutoFocus","","aria-autocomplete","list","role","searchbox","aria-haspopup","true",3,"autofocus","disabled","readonly","autocomplete","ngStyle","input","click","keydown","keyup","focus","blur","change","paste"],["multiIn",""],[1,"p-autocomplete-token"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-autocomplete-token-label",4,"ngIf"],["class","p-autocomplete-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-autocomplete-token-label"],[1,"p-autocomplete-token-icon","pi","pi-times-circle",3,"click"],[1,"p-autocomplete-loader","pi","pi-spinner","pi-spin"],["type","button","pButton","","pRipple","",1,"p-autocomplete-dropdown",3,"icon","disabled","click"],["ddBtn",""],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-autocomplete-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-autocomplete-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-autocomplete-item-group",3,"ngStyle"],["role","option","class","p-autocomplete-item","pRipple","",3,"ngStyle","ngClass","id","click",4,"ngFor","ngForOf"],["role","option","pRipple","",1,"p-autocomplete-item",3,"ngStyle","ngClass","id","click"],[1,"p-autocomplete-empty-message",3,"ngStyle"],[4,"ngIf","ngIfElse"],["empty",""]],template:function(e,n){1&e&&(t.TgZ(0,"span",0,1),t.YNc(2,Om,2,23,"input",2),t.YNc(3,Em,1,0,"i",3),t.YNc(4,Im,1,0,"i",3),t.YNc(5,Bm,6,23,"ul",4),t.YNc(6,Pm,1,0,"i",5),t.YNc(7,Nm,2,4,"button",6),t.TgZ(8,"p-overlay",7,8),t.NdJ("visibleChange",function(r){return n.overlayVisible=r})("onAnimationStart",function(r){return n.onOverlayAnimationStart(r)})("onShow",function(r){return n.show(r)})("onHide",function(r){return n.hide(r)}),t.TgZ(10,"div",0),t.YNc(11,Hm,1,0,"ng-container",9),t.YNc(12,Vm,4,10,"p-scroller",10),t.YNc(13,Wm,2,6,"ng-container",11),t.YNc(14,mf,7,7,"ng-template",null,12,t.W1O),t.YNc(16,ff,1,0,"ng-container",9),t.qZA()()()),2&e&&(t.Tol(n.styleClass),t.Q6J("ngClass",t.WLB(26,_f,n.dropdown,n.multiple))("ngStyle",n.style),t.xp6(2),t.Q6J("ngIf",!n.multiple),t.xp6(1),t.Q6J("ngIf",!n.multiple&&n.filled&&!n.disabled&&n.showClear),t.xp6(1),t.Q6J("ngIf",n.multiple&&n.filled&&!n.disabled&&n.showClear),t.xp6(1),t.Q6J("ngIf",n.multiple),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.dropdown),t.xp6(1),t.Q6J("visible",n.overlayVisible)("options",n.virtualScrollOptions)("target","@parent")("appendTo",n.appendTo)("showTransitionOptions",n.showTransitionOptions)("hideTransitionOptions",n.hideTransitionOptions),t.xp6(2),t.Tol(n.panelStyleClass),t.Udp("max-height",n.virtualScroll?"auto":n.scrollHeight),t.Q6J("ngClass",t.DdM(29,vf))("ngStyle",n.panelStyle),t.xp6(1),t.Q6J("ngTemplateOutlet",n.headerTemplate),t.xp6(1),t.Q6J("ngIf",n.virtualScroll),t.xp6(1),t.Q6J("ngIf",!n.virtualScroll),t.xp6(3),t.Q6J("ngTemplateOutlet",n.footerTemplate))},dependencies:[x.mk,x.sg,x.O5,x.tP,x.PC,xs,De.jx,$e.Hq,pn.H,ym,Ig],styles:[".p-autocomplete{display:inline-flex;position:relative}.p-autocomplete-loader{position:absolute;top:50%;margin-top:-.5rem}.p-autocomplete-dd .p-autocomplete-input{flex:1 1 auto;width:1%}.p-autocomplete-dd .p-autocomplete-input,.p-autocomplete-dd .p-autocomplete-multiple-container{border-top-right-radius:0;border-bottom-right-radius:0}.p-autocomplete-dd .p-autocomplete-dropdown{border-top-left-radius:0;border-bottom-left-radius:0}.p-autocomplete-panel{overflow:auto}.p-autocomplete-items{margin:0;padding:0;list-style-type:none}.p-autocomplete-item{cursor:pointer;white-space:nowrap;position:relative;overflow:hidden}.p-autocomplete-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-autocomplete-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-autocomplete-token-icon{cursor:pointer}.p-autocomplete-input-token{flex:1 1 auto;display:inline-flex}.p-autocomplete-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-autocomplete{display:flex}.p-fluid .p-autocomplete-dd .p-autocomplete-input{width:1%}.p-autocomplete-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-autocomplete-clearable{position:relative}\n"],encapsulation:2,data:{animation:[(0,pe.X$)("overlayAnimation",[(0,pe.eR)(":enter",[(0,pe.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,pe.jt)("{{showTransitionParams}}")]),(0,pe.eR)(":leave",[(0,pe.jt)("{{hideTransitionParams}}",(0,pe.oB)({opacity:0}))])])]},changeDetection:0}),i})(),yf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,Ss,Wn.j,$e.hJ,De.m8,pn.T,ks,Ts,Ss,De.m8,ks,Ts]}),i})(),bf=(()=>{class i{constructor(e,n,s){(0,p.Z)(this,"_chatService",void 0),(0,p.Z)(this,"_dialogRef",void 0),(0,p.Z)(this,"_cdr",void 0),(0,p.Z)(this,"selectedUsers",new Ge.NI([])),(0,p.Z)(this,"searchUserList",[]),this._chatService=e,this._dialogRef=n,this._cdr=s}searchUsers(e){var n=this;return(0,g.Z)(function*(){n.searchUserList=yield n._chatService.autocompleteUsers(e.query),n._cdr.detectChanges()})()}closeModal(){this._dialogRef.close(this.selectedUsers.value)}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(Qe),t.Y36(Gt),t.Y36(t.sBO))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-invite-users"]],standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[[1,"p-fluid"],["field","name",3,"formControl","suggestions","multiple","completeMethod"],[3,"disabled","onClick"]],template:function(e,n){1&e&&(t.TgZ(0,"span",0)(1,"p-autoComplete",1),t.NdJ("completeMethod",function(r){return n.searchUsers(r)}),t.qZA()(),t.TgZ(2,"p-button",2),t.NdJ("onClick",function(){return n.closeModal()}),t._uU(3,"Invite"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formControl",n.selectedUsers)("suggestions",n.searchUserList)("multiple",!0),t.xp6(1),t.Q6J("disabled",!(null!=n.selectedUsers.value&&n.selectedUsers.value.length)))},dependencies:[yf,Os,Ge.UX,Ge.JJ,Ge.oH,$e.hJ,$e.zx],styles:["p-button[_ngcontent-%COMP%]{float:right;margin-top:15px}"],changeDetection:0})),i})();const wf=["channelActionsTemplate"];function Df(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-button",1),t.NdJ("onClick",function(){const r=t.CHM(e).channel,o=t.oxw();return t.KtG(o.openInviteUsersModal(r))}),t.qZA()}}let Tf=(()=>{class i{constructor(e,n,s,r,o){(0,p.Z)(this,"_dialog",void 0),(0,p.Z)(this,"_customTemplatesService",void 0),(0,p.Z)(this,"_notify",void 0),(0,p.Z)(this,"_channelService",void 0),(0,p.Z)(this,"_cdr",void 0),(0,p.Z)(this,"channelActionsTemplate",void 0),this._dialog=e,this._customTemplatesService=n,this._notify=s,this._channelService=r,this._cdr=o}ngOnInit(){this._channelService.activeChannel$.subscribe(()=>this._cdr.detectChanges())}ngAfterViewInit(){this._customTemplatesService.channelActionsTemplate$.next(this.channelActionsTemplate)}openInviteUsersModal(e){this._dialog.open(bf,{width:"400px",header:"Invite users"}).onClose.subscribe(s=>{!s||!s.length||e.inviteMembers(s.map(r=>r.id)).then(r=>{this._notify.addTemporaryNotification("User(s) successfully invited","success")}).catch(r=>{this._notify.addTemporaryNotification("User(s) couldn't be invited","error")}).finally(()=>this._cdr.detectChanges())})}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(Vn),t.Y36(je),t.Y36(lt),t.Y36(Be),t.Y36(t.sBO))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-channel-header"]],viewQuery:function(e,n){if(1&e&&t.Gf(wf,5),2&e){let s;t.iGM(s=t.CRH())&&(n.channelActionsTemplate=s.first)}},standalone:!0,features:[t.jDz],decls:3,vars:0,consts:[["channelActionsTemplate",""],["icon","pi pi-user-plus","styleClass","p-button-rounded p-button-text p-button-sm","pTooltip","Invite users","tooltipPosition","top",3,"onClick"]],template:function(e,n){1&e&&(t._UZ(0,"stream-channel-header"),t.YNc(1,Df,1,0,"ng-template",null,0,t.W1O))},dependencies:[Jn,rp,$e.hJ,$e.zx,Wt,Qn],changeDetection:0})),i})();function xf(i,a){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"app-channel-list"),t.TgZ(2,"stream-channel"),t._UZ(3,"app-channel-header")(4,"stream-message-list")(5,"stream-notification-list")(6,"stream-message-input"),t.qZA()()),2&i&&t.Q6J("@fadeInOut",void 0)}function Sf(i,a){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"p-progressSpinner",4),t.qZA()),2&i&&(t.xp6(1),t.Q6J("@fadeInOut",void 0))}let Mf=(()=>{class i{constructor(e,n,s,r){(0,p.Z)(this,"_chatService",void 0),(0,p.Z)(this,"_channelService",void 0),(0,p.Z)(this,"_streamI18nService",void 0),(0,p.Z)(this,"_auth",void 0),(0,p.Z)(this,"chatIsReady$",void 0),this._chatService=e,this._channelService=n,this._streamI18nService=s,this._auth=r}ngOnInit(){this._streamI18nService.setTranslation(),this.chatIsReady$=this._auth.getUserToken().pipe((0,E.w)(e=>this._chatService.init(O.Z.streamApp.key,this._auth.currentUser.uid,e)),(0,E.w)(()=>this._channelService.init({type:"messaging",members:{$in:[this._auth.currentUser.uid]}})),(0,b.U)(()=>!0),(0,D.K)(()=>(0,k.of)(!1)))}ngOnDestroy(){var e=this;return(0,g.Z)(function*(){e._channelService.reset(),yield e._chatService.disconnectUser()})()}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(Qe),t.Y36(Be),t.Y36(Xh),t.Y36(Qt.e8))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-chat-page"]],standalone:!0,features:[t._Bn([Vn]),t.jDz],decls:5,vars:4,consts:[["class","chat-container",4,"ngIf","ngIfElse"],["unavailable",""],[1,"chat-container"],[1,"spinner-container"],["strokeWidth","4"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-menubar"),t.YNc(1,xf,7,1,"div",0),t.ALo(2,"async"),t.YNc(3,Sf,2,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.chatIsReady$))("ngIfElse",s)}},dependencies:[x.O5,x.Ov,Bp,Jn,ap,ms,fp,Yn,_p,Cp,vp,$e.hJ,Wt,Ag,Eg,Tf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.chat-container[_ngcontent-%COMP%]{display:flex;flex:1}.chat-container[_ngcontent-%COMP%]   app-channel-list[_ngcontent-%COMP%]{width:30%}.chat-container[_ngcontent-%COMP%]   stream-channel[_ngcontent-%COMP%]{width:100%}.chat-container[_ngcontent-%COMP%]   stream-thread[_ngcontent-%COMP%]{width:45%}.chat-container[_ngcontent-%COMP%]   stream-message-input[_ngcontent-%COMP%]{padding-bottom:12px}.chat-container[_ngcontent-%COMP%]     .str-chat__channel-list-messenger__main{position:relative}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;display:flex;justify-content:center;align-items:center}.spinner-container[_ngcontent-%COMP%]     .p-progress-spinner-circle{stroke:#f5b622!important}"],data:{animation:[Qt.Ic]},changeDetection:0})),i})()},3014:(Z,K,_)=>{Z.exports=_(7114)},7729:(Z,K,_)=>{"use strict";var g=_(4701),p=_(858),E=_(5738),b=_(1625),D=_(5215),k=_(2099),O=_(6100),w=_(9252),t=_(3324),y=_(1413);Z.exports=function(S){return new Promise(function(H,W){var ae,X=S.data,se=S.headers,ce=S.responseType;function le(){S.cancelToken&&S.cancelToken.unsubscribe(ae),S.signal&&S.signal.removeEventListener("abort",ae)}g.isFormData(X)&&delete se["Content-Type"];var $=new XMLHttpRequest;if(S.auth){var J=S.auth.username||"",re=S.auth.password?unescape(encodeURIComponent(S.auth.password)):"";se.Authorization="Basic "+btoa(J+":"+re)}var Pe=D(S.baseURL,S.url);function I(){if($){var F="getAllResponseHeaders"in $?k($.getAllResponseHeaders()):null;p(function(h){H(h),le()},function(h){W(h),le()},{data:ce&&"text"!==ce&&"json"!==ce?$.response:$.responseText,status:$.status,statusText:$.statusText,headers:F,config:S,request:$}),$=null}}if($.open(S.method.toUpperCase(),b(Pe,S.params,S.paramsSerializer),!0),$.timeout=S.timeout,"onloadend"in $?$.onloadend=I:$.onreadystatechange=function(){!$||4!==$.readyState||0===$.status&&(!$.responseURL||0!==$.responseURL.indexOf("file:"))||setTimeout(I)},$.onabort=function(){$&&(W(w("Request aborted",S,"ECONNABORTED",$)),$=null)},$.onerror=function(){W(w("Network Error",S,null,$)),$=null},$.ontimeout=function(){var U="timeout of "+S.timeout+"ms exceeded";S.timeoutErrorMessage&&(U=S.timeoutErrorMessage),W(w(U,S,(S.transitional||t.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",$)),$=null},g.isStandardBrowserEnv()){var q=(S.withCredentials||O(Pe))&&S.xsrfCookieName?E.read(S.xsrfCookieName):void 0;q&&(se[S.xsrfHeaderName]=q)}"setRequestHeader"in $&&g.forEach(se,function(U,j){typeof X>"u"&&"content-type"===j.toLowerCase()?delete se[j]:$.setRequestHeader(j,U)}),g.isUndefined(S.withCredentials)||($.withCredentials=!!S.withCredentials),ce&&"json"!==ce&&($.responseType=S.responseType),"function"==typeof S.onDownloadProgress&&$.addEventListener("progress",S.onDownloadProgress),"function"==typeof S.onUploadProgress&&$.upload&&$.upload.addEventListener("progress",S.onUploadProgress),(S.cancelToken||S.signal)&&(ae=function(F){$&&(W(!F||F&&F.type?new y("canceled"):F),$.abort(),$=null)},S.cancelToken&&S.cancelToken.subscribe(ae),S.signal&&(S.signal.aborted?ae():S.signal.addEventListener("abort",ae))),X||(X=null),$.send(X)})}},7114:(Z,K,_)=>{"use strict";var g=_(4701),p=_(2414),E=_(6490),b=_(2971),O=function k(w){var t=new E(w),y=p(E.prototype.request,t);return g.extend(y,E.prototype,t),g.extend(y,t),y.create=function(S){return k(b(w,S))},y}(_(3324));O.Axios=E,O.Cancel=_(1413),O.CancelToken=_(3056),O.isCancel=_(8827),O.VERSION=_(1773).version,O.all=function(t){return Promise.all(t)},O.spread=_(9211),O.isAxiosError=_(4603),Z.exports=O,Z.exports.default=O},1413:Z=>{"use strict";function K(_){this.message=_}K.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},K.prototype.__CANCEL__=!0,Z.exports=K},3056:(Z,K,_)=>{"use strict";var g=_(1413);function p(E){if("function"!=typeof E)throw new TypeError("executor must be a function.");var b;this.promise=new Promise(function(O){b=O});var D=this;this.promise.then(function(k){if(D._listeners){var O,w=D._listeners.length;for(O=0;O<w;O++)D._listeners[O](k);D._listeners=null}}),this.promise.then=function(k){var O,w=new Promise(function(t){D.subscribe(t),O=t}).then(k);return w.cancel=function(){D.unsubscribe(O)},w},E(function(O){D.reason||(D.reason=new g(O),b(D.reason))})}p.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},p.prototype.subscribe=function(b){this.reason?b(this.reason):this._listeners?this._listeners.push(b):this._listeners=[b]},p.prototype.unsubscribe=function(b){if(this._listeners){var D=this._listeners.indexOf(b);-1!==D&&this._listeners.splice(D,1)}},p.source=function(){var b;return{token:new p(function(O){b=O}),cancel:b}},Z.exports=p},8827:Z=>{"use strict";Z.exports=function(_){return!(!_||!_.__CANCEL__)}},6490:(Z,K,_)=>{"use strict";var g=_(4701),p=_(1625),E=_(607),b=_(957),D=_(2971),k=_(4828),O=k.validators;function w(t){this.defaults=t,this.interceptors={request:new E,response:new E}}w.prototype.request=function(y){"string"==typeof y?(y=arguments[1]||{}).url=arguments[0]:y=y||{},(y=D(this.defaults,y)).method=y.method?y.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var L=y.transitional;void 0!==L&&k.assertOptions(L,{silentJSONParsing:O.transitional(O.boolean),forcedJSONParsing:O.transitional(O.boolean),clarifyTimeoutError:O.transitional(O.boolean)},!1);var S=[],ee=!0;this.interceptors.request.forEach(function($){"function"==typeof $.runWhen&&!1===$.runWhen(y)||(ee=ee&&$.synchronous,S.unshift($.fulfilled,$.rejected))});var W,H=[];if(this.interceptors.response.forEach(function($){H.push($.fulfilled,$.rejected)}),!ee){var X=[b,void 0];for(Array.prototype.unshift.apply(X,S),X=X.concat(H),W=Promise.resolve(y);X.length;)W=W.then(X.shift(),X.shift());return W}for(var se=y;S.length;){var ce=S.shift(),ae=S.shift();try{se=ce(se)}catch(le){ae(le);break}}try{W=b(se)}catch(le){return Promise.reject(le)}for(;H.length;)W=W.then(H.shift(),H.shift());return W},w.prototype.getUri=function(y){return y=D(this.defaults,y),p(y.url,y.params,y.paramsSerializer).replace(/^\?/,"")},g.forEach(["delete","get","head","options"],function(y){w.prototype[y]=function(L,S){return this.request(D(S||{},{method:y,url:L,data:(S||{}).data}))}}),g.forEach(["post","put","patch"],function(y){w.prototype[y]=function(L,S,ee){return this.request(D(ee||{},{method:y,url:L,data:S}))}}),Z.exports=w},607:(Z,K,_)=>{"use strict";var g=_(4701);function p(){this.handlers=[]}p.prototype.use=function(b,D,k){return this.handlers.push({fulfilled:b,rejected:D,synchronous:!!k&&k.synchronous,runWhen:k?k.runWhen:null}),this.handlers.length-1},p.prototype.eject=function(b){this.handlers[b]&&(this.handlers[b]=null)},p.prototype.forEach=function(b){g.forEach(this.handlers,function(k){null!==k&&b(k)})},Z.exports=p},5215:(Z,K,_)=>{"use strict";var g=_(8692),p=_(4554);Z.exports=function(b,D){return b&&!g(D)?p(b,D):D}},9252:(Z,K,_)=>{"use strict";var g=_(5124);Z.exports=function(E,b,D,k,O){var w=new Error(E);return g(w,b,D,k,O)}},957:(Z,K,_)=>{"use strict";var g=_(4701),p=_(5134),E=_(8827),b=_(3324),D=_(1413);function k(O){if(O.cancelToken&&O.cancelToken.throwIfRequested(),O.signal&&O.signal.aborted)throw new D("canceled")}Z.exports=function(w){return k(w),w.headers=w.headers||{},w.data=p.call(w,w.data,w.headers,w.transformRequest),w.headers=g.merge(w.headers.common||{},w.headers[w.method]||{},w.headers),g.forEach(["delete","get","head","post","put","patch","common"],function(L){delete w.headers[L]}),(w.adapter||b.adapter)(w).then(function(L){return k(w),L.data=p.call(w,L.data,L.headers,w.transformResponse),L},function(L){return E(L)||(k(w),L&&L.response&&(L.response.data=p.call(w,L.response.data,L.response.headers,w.transformResponse))),Promise.reject(L)})}},5124:Z=>{"use strict";Z.exports=function(_,g,p,E,b){return _.config=g,p&&(_.code=p),_.request=E,_.response=b,_.isAxiosError=!0,_.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},_}},2971:(Z,K,_)=>{"use strict";var g=_(4701);Z.exports=function(E,b){b=b||{};var D={};function k(S,ee){return g.isPlainObject(S)&&g.isPlainObject(ee)?g.merge(S,ee):g.isPlainObject(ee)?g.merge({},ee):g.isArray(ee)?ee.slice():ee}function O(S){return g.isUndefined(b[S])?g.isUndefined(E[S])?void 0:k(void 0,E[S]):k(E[S],b[S])}function w(S){if(!g.isUndefined(b[S]))return k(void 0,b[S])}function t(S){return g.isUndefined(b[S])?g.isUndefined(E[S])?void 0:k(void 0,E[S]):k(void 0,b[S])}function y(S){return S in b?k(E[S],b[S]):S in E?k(void 0,E[S]):void 0}var L={url:w,method:w,data:w,baseURL:t,transformRequest:t,transformResponse:t,paramsSerializer:t,timeout:t,timeoutMessage:t,withCredentials:t,adapter:t,responseType:t,xsrfCookieName:t,xsrfHeaderName:t,onUploadProgress:t,onDownloadProgress:t,decompress:t,maxContentLength:t,maxBodyLength:t,transport:t,httpAgent:t,httpsAgent:t,cancelToken:t,socketPath:t,responseEncoding:t,validateStatus:y};return g.forEach(Object.keys(E).concat(Object.keys(b)),function(ee){var H=L[ee]||O,W=H(ee);g.isUndefined(W)&&H!==y||(D[ee]=W)}),D}},858:(Z,K,_)=>{"use strict";var g=_(9252);Z.exports=function(E,b,D){var k=D.config.validateStatus;D.status&&k&&!k(D.status)?b(g("Request failed with status code "+D.status,D.config,null,D.request,D)):E(D)}},5134:(Z,K,_)=>{"use strict";var g=_(4701),p=_(3324);Z.exports=function(b,D,k){var O=this||p;return g.forEach(k,function(t){b=t.call(O,b,D)}),b}},3324:(Z,K,_)=>{"use strict";var g=_(4701),p=_(5620),E=_(5124),b={"Content-Type":"application/x-www-form-urlencoded"};function D(t,y){!g.isUndefined(t)&&g.isUndefined(t["Content-Type"])&&(t["Content-Type"]=y)}var w={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function k(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(t=_(7729)),t}(),transformRequest:[function(y,L){return p(L,"Accept"),p(L,"Content-Type"),g.isFormData(y)||g.isArrayBuffer(y)||g.isBuffer(y)||g.isStream(y)||g.isFile(y)||g.isBlob(y)?y:g.isArrayBufferView(y)?y.buffer:g.isURLSearchParams(y)?(D(L,"application/x-www-form-urlencoded;charset=utf-8"),y.toString()):g.isObject(y)||L&&"application/json"===L["Content-Type"]?(D(L,"application/json"),function O(t,y,L){if(g.isString(t))try{return(y||JSON.parse)(t),g.trim(t)}catch(S){if("SyntaxError"!==S.name)throw S}return(L||JSON.stringify)(t)}(y)):y}],transformResponse:[function(y){var L=this.transitional||w.transitional,H=!(L&&L.silentJSONParsing)&&"json"===this.responseType;if(H||L&&L.forcedJSONParsing&&g.isString(y)&&y.length)try{return JSON.parse(y)}catch(W){if(H)throw"SyntaxError"===W.name?E(W,this,"E_JSON_PARSE"):W}return y}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(y){return y>=200&&y<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};g.forEach(["delete","get","head"],function(y){w.headers[y]={}}),g.forEach(["post","put","patch"],function(y){w.headers[y]=g.merge(b)}),Z.exports=w},1773:Z=>{Z.exports={version:"0.22.0"}},2414:Z=>{"use strict";Z.exports=function(_,g){return function(){for(var E=new Array(arguments.length),b=0;b<E.length;b++)E[b]=arguments[b];return _.apply(g,E)}}},1625:(Z,K,_)=>{"use strict";var g=_(4701);function p(E){return encodeURIComponent(E).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Z.exports=function(b,D,k){if(!D)return b;var O;if(k)O=k(D);else if(g.isURLSearchParams(D))O=D.toString();else{var w=[];g.forEach(D,function(L,S){null===L||typeof L>"u"||(g.isArray(L)?S+="[]":L=[L],g.forEach(L,function(H){g.isDate(H)?H=H.toISOString():g.isObject(H)&&(H=JSON.stringify(H)),w.push(p(S)+"="+p(H))}))}),O=w.join("&")}if(O){var t=b.indexOf("#");-1!==t&&(b=b.slice(0,t)),b+=(-1===b.indexOf("?")?"?":"&")+O}return b}},4554:Z=>{"use strict";Z.exports=function(_,g){return g?_.replace(/\/+$/,"")+"/"+g.replace(/^\/+/,""):_}},5738:(Z,K,_)=>{"use strict";var g=_(4701);Z.exports=g.isStandardBrowserEnv()?{write:function(b,D,k,O,w,t){var y=[];y.push(b+"="+encodeURIComponent(D)),g.isNumber(k)&&y.push("expires="+new Date(k).toGMTString()),g.isString(O)&&y.push("path="+O),g.isString(w)&&y.push("domain="+w),!0===t&&y.push("secure"),document.cookie=y.join("; ")},read:function(b){var D=document.cookie.match(new RegExp("(^|;\\s*)("+b+")=([^;]*)"));return D?decodeURIComponent(D[3]):null},remove:function(b){this.write(b,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:Z=>{"use strict";Z.exports=function(_){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(_)}},4603:Z=>{"use strict";Z.exports=function(_){return"object"==typeof _&&!0===_.isAxiosError}},6100:(Z,K,_)=>{"use strict";var g=_(4701);Z.exports=g.isStandardBrowserEnv()?function(){var D,E=/(msie|trident)/i.test(navigator.userAgent),b=document.createElement("a");function k(O){var w=O;return E&&(b.setAttribute("href",w),w=b.href),b.setAttribute("href",w),{href:b.href,protocol:b.protocol?b.protocol.replace(/:$/,""):"",host:b.host,search:b.search?b.search.replace(/^\?/,""):"",hash:b.hash?b.hash.replace(/^#/,""):"",hostname:b.hostname,port:b.port,pathname:"/"===b.pathname.charAt(0)?b.pathname:"/"+b.pathname}}return D=k(window.location.href),function(w){var t=g.isString(w)?k(w):w;return t.protocol===D.protocol&&t.host===D.host}}():function(){return!0}},5620:(Z,K,_)=>{"use strict";var g=_(4701);Z.exports=function(E,b){g.forEach(E,function(k,O){O!==b&&O.toUpperCase()===b.toUpperCase()&&(E[b]=k,delete E[O])})}},2099:(Z,K,_)=>{"use strict";var g=_(4701),p=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Z.exports=function(b){var k,O,w,D={};return b&&g.forEach(b.split("\n"),function(y){if(w=y.indexOf(":"),k=g.trim(y.substr(0,w)).toLowerCase(),O=g.trim(y.substr(w+1)),k){if(D[k]&&p.indexOf(k)>=0)return;D[k]="set-cookie"===k?(D[k]?D[k]:[]).concat([O]):D[k]?D[k]+", "+O:O}}),D}},9211:Z=>{"use strict";Z.exports=function(_){return function(p){return _.apply(null,p)}}},4828:(Z,K,_)=>{"use strict";var g=_(1773).version,p={};["object","boolean","number","function","string","symbol"].forEach(function(D,k){p[D]=function(w){return typeof w===D||"a"+(k<1?"n ":" ")+D}});var E={};p.transitional=function(k,O,w){function t(y,L){return"[Axios v"+g+"] Transitional option '"+y+"'"+L+(w?". "+w:"")}return function(y,L,S){if(!1===k)throw new Error(t(L," has been removed"+(O?" in "+O:"")));return O&&!E[L]&&(E[L]=!0,console.warn(t(L," has been deprecated since v"+O+" and will be removed in the near future"))),!k||k(y,L,S)}},Z.exports={assertOptions:function b(D,k,O){if("object"!=typeof D)throw new TypeError("options must be an object");for(var w=Object.keys(D),t=w.length;t-- >0;){var y=w[t],L=k[y];if(L){var S=D[y],ee=void 0===S||L(S,y,D);if(!0!==ee)throw new TypeError("option "+y+" must be "+ee)}else if(!0!==O)throw Error("Unknown option "+y)}},validators:p}},4701:(Z,K,_)=>{"use strict";var g=_(2414),p=Object.prototype.toString;function E(I){return"[object Array]"===p.call(I)}function b(I){return typeof I>"u"}function L(I){return null!==I&&"object"==typeof I}function S(I){if("[object Object]"!==p.call(I))return!1;var q=Object.getPrototypeOf(I);return null===q||q===Object.prototype}function X(I){return"[object Function]"===p.call(I)}function $(I,q){if(!(null===I||typeof I>"u"))if("object"!=typeof I&&(I=[I]),E(I))for(var F=0,U=I.length;F<U;F++)q.call(null,I[F],F,I);else for(var j in I)Object.prototype.hasOwnProperty.call(I,j)&&q.call(null,I[j],j,I)}Z.exports={isArray:E,isArrayBuffer:function k(I){return"[object ArrayBuffer]"===p.call(I)},isBuffer:function D(I){return null!==I&&!b(I)&&null!==I.constructor&&!b(I.constructor)&&"function"==typeof I.constructor.isBuffer&&I.constructor.isBuffer(I)},isFormData:function O(I){return typeof FormData<"u"&&I instanceof FormData},isArrayBufferView:function w(I){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(I):I&&I.buffer&&I.buffer instanceof ArrayBuffer},isString:function t(I){return"string"==typeof I},isNumber:function y(I){return"number"==typeof I},isObject:L,isPlainObject:S,isUndefined:b,isDate:function ee(I){return"[object Date]"===p.call(I)},isFile:function H(I){return"[object File]"===p.call(I)},isBlob:function W(I){return"[object Blob]"===p.call(I)},isFunction:X,isStream:function se(I){return L(I)&&X(I.pipe)},isURLSearchParams:function ce(I){return typeof URLSearchParams<"u"&&I instanceof URLSearchParams},isStandardBrowserEnv:function le(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:$,merge:function J(){var I={};function q(j,N){I[N]=S(I[N])&&S(j)?J(I[N],j):S(j)?J({},j):E(j)?j.slice():j}for(var F=0,U=arguments.length;F<U;F++)$(arguments[F],q);return I},extend:function re(I,q,F){return $(q,function(j,N){I[N]=F&&"function"==typeof j?g(j,F):j}),I},trim:function ae(I){return I.trim?I.trim():I.replace(/^\s+|\s+$/g,"")},stripBOM:function Pe(I){return 65279===I.charCodeAt(0)&&(I=I.slice(1)),I}}},5343:(Z,K)=>{"use strict";K.JQ=function ee(H){for(var W,X=H.length,se=X%3,ce=[],le=0,$=X-se;le<$;le+=16383)ce.push(S(H,le,le+16383>$?$:le+16383));return 1===se?ce.push(g[(W=H[X-1])>>2]+g[W<<4&63]+"=="):2===se&&ce.push(g[(W=(H[X-2]<<8)+H[X-1])>>10]+g[W>>4&63]+g[W<<2&63]+"="),ce.join("")};for(var g=[],p=[],b=(typeof Uint8Array<"u"&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),D=0,k=b.length;D<k;++D)g[D]=b[D],p[b.charCodeAt(D)]=D;function L(H){return g[H>>18&63]+g[H>>12&63]+g[H>>6&63]+g[63&H]}function S(H,W,X){for(var ce=[],ae=W;ae<X;ae+=3)ce.push(L((H[ae]<<16&16711680)+(H[ae+1]<<8&65280)+(255&H[ae+2])));return ce.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},1764:function(Z){Z.exports=function(){"use strict";var _=6e4,g=36e5,p="millisecond",E="second",b="minute",D="hour",k="day",O="week",w="month",t="quarter",y="year",L="date",S="Invalid Date",ee=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,H=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,W={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var F=["th","st","nd","rd"],U=q%100;return"["+q+(F[(U-20)%10]||F[U]||F[0])+"]"}},X=function(q,F,U){var j=String(q);return!j||j.length>=F?q:""+Array(F+1-j.length).join(U)+q},se={s:X,z:function(q){var F=-q.utcOffset(),U=Math.abs(F),j=Math.floor(U/60),N=U%60;return(F<=0?"+":"-")+X(j,2,"0")+":"+X(N,2,"0")},m:function q(F,U){if(F.date()<U.date())return-q(U,F);var j=12*(U.year()-F.year())+(U.month()-F.month()),N=F.clone().add(j,w),h=U-N<0,T=F.clone().add(j+(h?-1:1),w);return+(-(j+(U-N)/(h?N-T:T-N))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:w,y,w:O,d:k,D:L,h:D,m:b,s:E,ms:p,Q:t}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return void 0===q}},ce="en",ae={};ae[ce]=W;var le=function(q){return q instanceof Pe},$=function q(F,U,j){var N;if(!F)return ce;if("string"==typeof F){var h=F.toLowerCase();ae[h]&&(N=h),U&&(ae[h]=U,N=h);var T=F.split("-");if(!N&&T.length>1)return q(T[0])}else{var M=F.name;ae[M]=F,N=M}return!j&&N&&(ce=N),N||!j&&ce},J=function(q,F){if(le(q))return q.clone();var U="object"==typeof F?F:{};return U.date=q,U.args=arguments,new Pe(U)},re=se;re.l=$,re.i=le,re.w=function(q,F){return J(q,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var Pe=function(){function q(U){this.$L=$(U.locale,null,!0),this.parse(U)}var F=q.prototype;return F.parse=function(U){this.$d=function(j){var N=j.date,h=j.utc;if(null===N)return new Date(NaN);if(re.u(N))return new Date;if(N instanceof Date)return new Date(N);if("string"==typeof N&&!/Z$/i.test(N)){var T=N.match(ee);if(T){var M=T[2]-1||0,z=(T[7]||"0").substring(0,3);return h?new Date(Date.UTC(T[1],M,T[3]||1,T[4]||0,T[5]||0,T[6]||0,z)):new Date(T[1],M,T[3]||1,T[4]||0,T[5]||0,T[6]||0,z)}}return new Date(N)}(U),this.$x=U.x||{},this.init()},F.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},F.$utils=function(){return re},F.isValid=function(){return this.$d.toString()!==S},F.isSame=function(U,j){var N=J(U);return this.startOf(j)<=N&&N<=this.endOf(j)},F.isAfter=function(U,j){return J(U)<this.startOf(j)},F.isBefore=function(U,j){return this.endOf(j)<J(U)},F.$g=function(U,j,N){return re.u(U)?this[j]:this.set(N,U)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(U,j){var N=this,h=!!re.u(j)||j,T=re.p(U),M=function(Ae,fe){var Ze=re.w(N.$u?Date.UTC(N.$y,fe,Ae):new Date(N.$y,fe,Ae),N);return h?Ze:Ze.endOf(k)},z=function(Ae,fe){return re.w(N.toDate()[Ae].apply(N.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(fe)),N)},V=this.$W,G=this.$M,de=this.$D,me="set"+(this.$u?"UTC":"");switch(T){case y:return h?M(1,0):M(31,11);case w:return h?M(1,G):M(0,G+1);case O:var we=this.$locale().weekStart||0,Fe=(V<we?V+7:V)-we;return M(h?de-Fe:de+(6-Fe),G);case k:case L:return z(me+"Hours",0);case D:return z(me+"Minutes",1);case b:return z(me+"Seconds",2);case E:return z(me+"Milliseconds",3);default:return this.clone()}},F.endOf=function(U){return this.startOf(U,!1)},F.$set=function(U,j){var N,h=re.p(U),T="set"+(this.$u?"UTC":""),M=(N={},N[k]=T+"Date",N[L]=T+"Date",N[w]=T+"Month",N[y]=T+"FullYear",N[D]=T+"Hours",N[b]=T+"Minutes",N[E]=T+"Seconds",N[p]=T+"Milliseconds",N)[h],z=h===k?this.$D+(j-this.$W):j;if(h===w||h===y){var V=this.clone().set(L,1);V.$d[M](z),V.init(),this.$d=V.set(L,Math.min(this.$D,V.daysInMonth())).$d}else M&&this.$d[M](z);return this.init(),this},F.set=function(U,j){return this.clone().$set(U,j)},F.get=function(U){return this[re.p(U)]()},F.add=function(U,j){var N,h=this;U=Number(U);var T=re.p(j),M=function(G){var de=J(h);return re.w(de.date(de.date()+Math.round(G*U)),h)};if(T===w)return this.set(w,this.$M+U);if(T===y)return this.set(y,this.$y+U);if(T===k)return M(1);if(T===O)return M(7);var z=(N={},N[b]=_,N[D]=g,N[E]=1e3,N)[T]||1,V=this.$d.getTime()+U*z;return re.w(V,this)},F.subtract=function(U,j){return this.add(-1*U,j)},F.format=function(U){var j=this,N=this.$locale();if(!this.isValid())return N.invalidDate||S;var h=U||"YYYY-MM-DDTHH:mm:ssZ",T=re.z(this),M=this.$H,z=this.$m,V=this.$M,G=N.weekdays,de=N.months,me=function(fe,Ze,Ft,Tt){return fe&&(fe[Ze]||fe(j,h))||Ft[Ze].slice(0,Tt)},we=function(fe){return re.s(M%12||12,fe,"0")},Fe=N.meridiem||function(fe,Ze,Ft){var Tt=fe<12?"AM":"PM";return Ft?Tt.toLowerCase():Tt},Ae={YY:String(this.$y).slice(-2),YYYY:this.$y,M:V+1,MM:re.s(V+1,2,"0"),MMM:me(N.monthsShort,V,de,3),MMMM:me(de,V),D:this.$D,DD:re.s(this.$D,2,"0"),d:String(this.$W),dd:me(N.weekdaysMin,this.$W,G,2),ddd:me(N.weekdaysShort,this.$W,G,3),dddd:G[this.$W],H:String(M),HH:re.s(M,2,"0"),h:we(1),hh:we(2),a:Fe(M,z,!0),A:Fe(M,z,!1),m:String(z),mm:re.s(z,2,"0"),s:String(this.$s),ss:re.s(this.$s,2,"0"),SSS:re.s(this.$ms,3,"0"),Z:T};return h.replace(H,function(fe,Ze){return Ze||Ae[fe]||T.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(U,j,N){var h,T=re.p(j),M=J(U),z=(M.utcOffset()-this.utcOffset())*_,V=this-M,G=re.m(this,M);return G=(h={},h[y]=G/12,h[w]=G,h[t]=G/3,h[O]=(V-z)/6048e5,h[k]=(V-z)/864e5,h[D]=V/g,h[b]=V/_,h[E]=V/1e3,h)[T]||V,N?G:re.a(G)},F.daysInMonth=function(){return this.endOf(w).$D},F.$locale=function(){return ae[this.$L]},F.locale=function(U,j){if(!U)return this.$L;var N=this.clone(),h=$(U,j,!0);return h&&(N.$L=h),N},F.clone=function(){return re.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},q}(),I=Pe.prototype;return J.prototype=I,[["$ms",p],["$s",E],["$m",b],["$H",D],["$W",k],["$M",w],["$y",y],["$D",L]].forEach(function(q){I[q[1]]=function(F){return this.$g(F,q[0],q[1])}}),J.extend=function(q,F){return q.$i||(q(F,Pe,J),q.$i=!0),J},J.locale=$,J.isDayjs=le,J.unix=function(q){return J(1e3*q)},J.en=ae[ce],J.Ls=ae,J.p={},J}()},563:function(Z){Z.exports=function(){"use strict";return function(K,_,g){var p="h:mm A",E={lastDay:"[Yesterday at] "+p,sameDay:"[Today at] "+p,nextDay:"[Tomorrow at] "+p,nextWeek:"dddd [at] "+p,lastWeek:"[Last] dddd [at] "+p,sameElse:"MM/DD/YYYY"};_.prototype.calendar=function(b,D){var k=D||this.$locale().calendar||E,O=g(b||void 0).startOf("d"),w=this.diff(O,"d",!0),t="sameElse",y=w<-6?t:w<-1?"lastWeek":w<0?"lastDay":w<1?"sameDay":w<2?"nextDay":w<7?"nextWeek":t,L=k[y]||E[y];return"function"==typeof L?L.call(this,g()):this.format(L)}}}()},593:Z=>{Z.exports="object"==typeof self?self.FormData:window.FormData},9151:Z=>{var K=null;typeof WebSocket<"u"?K=WebSocket:typeof MozWebSocket<"u"?K=MozWebSocket:typeof global<"u"?K=global.WebSocket||global.MozWebSocket:typeof window<"u"?K=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(K=self.WebSocket||self.MozWebSocket),Z.exports=K},2711:Z=>{var K=1/0,_="[object Symbol]",g=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,D=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),O="object"==typeof global&&global&&global.Object===Object&&global,w="object"==typeof self&&self&&self.Object===Object&&self,t=O||w||Function("return this")(),L=function y(J){return function(re){return J?.[re]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"ss"}),ee=Object.prototype.toString,H=t.Symbol,W=H?H.prototype:void 0,X=W?W.toString:void 0;Z.exports=function $(J){return(J=function le(J){return null==J?"":function se(J){if("string"==typeof J)return J;if(function ae(J){return"symbol"==typeof J||function ce(J){return!!J&&"object"==typeof J}(J)&&ee.call(J)==_}(J))return X?X.call(J):"";var re=J+"";return"0"==re&&1/J==-K?"-0":re}(J)}(J))&&J.replace(g,L).replace(D,"")}},3431:Z=>{"use strict";const K=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],_=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],g=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],p=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],E=(b,D,k)=>{let O=b;return"string"==typeof D||Array.isArray(D)?O=b.toLocaleString(D,k):(!0===D||void 0!==k)&&(O=b.toLocaleString(void 0,k)),O};Z.exports=(b,D)=>{if(!Number.isFinite(b))throw new TypeError(`Expected a finite number, got ${typeof b}: ${b}`);const k=(D=Object.assign({bits:!1,binary:!1},D)).bits?D.binary?p:g:D.binary?_:K;if(D.signed&&0===b)return` 0 ${k[0]}`;const O=b<0,w=O?"-":D.signed?"+":"";let t;if(O&&(b=-b),void 0!==D.minimumFractionDigits&&(t={minimumFractionDigits:D.minimumFractionDigits}),void 0!==D.maximumFractionDigits&&(t=Object.assign({maximumFractionDigits:D.maximumFractionDigits},t)),b<1)return w+E(b,D.locale,t)+" "+k[0];const y=Math.min(Math.floor(D.binary?Math.log(b)/Math.log(1024):Math.log10(b)/3),k.length-1);return b/=Math.pow(D.binary?1024:1e3,y),t||(b=b.toPrecision(3)),w+E(Number(b),D.locale,t)+" "+k[y]}},7061:(Z,K,_)=>{var g=_(8698).default;function p(){"use strict";Z.exports=p=function(){return E},Z.exports.__esModule=!0,Z.exports.default=Z.exports;var E={},b=Object.prototype,D=b.hasOwnProperty,k=Object.defineProperty||function(h,T,M){h[T]=M.value},O="function"==typeof Symbol?Symbol:{},w=O.iterator||"@@iterator",t=O.asyncIterator||"@@asyncIterator",y=O.toStringTag||"@@toStringTag";function L(h,T,M){return Object.defineProperty(h,T,{value:M,enumerable:!0,configurable:!0,writable:!0}),h[T]}try{L({},"")}catch{L=function(M,z,V){return M[z]=V}}function S(h,T,M,z){var G=Object.create((T&&T.prototype instanceof W?T:W).prototype),de=new U(z||[]);return k(G,"_invoke",{value:Pe(h,M,de)}),G}function ee(h,T,M){try{return{type:"normal",arg:h.call(T,M)}}catch(z){return{type:"throw",arg:z}}}E.wrap=S;var H={};function W(){}function X(){}function se(){}var ce={};L(ce,w,function(){return this});var ae=Object.getPrototypeOf,le=ae&&ae(ae(j([])));le&&le!==b&&D.call(le,w)&&(ce=le);var $=se.prototype=W.prototype=Object.create(ce);function J(h){["next","throw","return"].forEach(function(T){L(h,T,function(M){return this._invoke(T,M)})})}function re(h,T){function M(V,G,de,me){var we=ee(h[V],h,G);if("throw"!==we.type){var Fe=we.arg,Ae=Fe.value;return Ae&&"object"==g(Ae)&&D.call(Ae,"__await")?T.resolve(Ae.__await).then(function(fe){M("next",fe,de,me)},function(fe){M("throw",fe,de,me)}):T.resolve(Ae).then(function(fe){Fe.value=fe,de(Fe)},function(fe){return M("throw",fe,de,me)})}me(we.arg)}var z;k(this,"_invoke",{value:function(G,de){function me(){return new T(function(we,Fe){M(G,de,we,Fe)})}return z=z?z.then(me,me):me()}})}function Pe(h,T,M){var z="suspendedStart";return function(V,G){if("executing"===z)throw new Error("Generator is already running");if("completed"===z){if("throw"===V)throw G;return{value:void 0,done:!0}}for(M.method=V,M.arg=G;;){var de=M.delegate;if(de){var me=I(de,M);if(me){if(me===H)continue;return me}}if("next"===M.method)M.sent=M._sent=M.arg;else if("throw"===M.method){if("suspendedStart"===z)throw z="completed",M.arg;M.dispatchException(M.arg)}else"return"===M.method&&M.abrupt("return",M.arg);z="executing";var we=ee(h,T,M);if("normal"===we.type){if(z=M.done?"completed":"suspendedYield",we.arg===H)continue;return{value:we.arg,done:M.done}}"throw"===we.type&&(z="completed",M.method="throw",M.arg=we.arg)}}}function I(h,T){var M=T.method,z=h.iterator[M];if(void 0===z)return T.delegate=null,"throw"===M&&h.iterator.return&&(T.method="return",T.arg=void 0,I(h,T),"throw"===T.method)||"return"!==M&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+M+"' method")),H;var V=ee(z,h.iterator,T.arg);if("throw"===V.type)return T.method="throw",T.arg=V.arg,T.delegate=null,H;var G=V.arg;return G?G.done?(T[h.resultName]=G.value,T.next=h.nextLoc,"return"!==T.method&&(T.method="next",T.arg=void 0),T.delegate=null,H):G:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,H)}function q(h){var T={tryLoc:h[0]};1 in h&&(T.catchLoc=h[1]),2 in h&&(T.finallyLoc=h[2],T.afterLoc=h[3]),this.tryEntries.push(T)}function F(h){var T=h.completion||{};T.type="normal",delete T.arg,h.completion=T}function U(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(q,this),this.reset(!0)}function j(h){if(h){var T=h[w];if(T)return T.call(h);if("function"==typeof h.next)return h;if(!isNaN(h.length)){var M=-1,z=function V(){for(;++M<h.length;)if(D.call(h,M))return V.value=h[M],V.done=!1,V;return V.value=void 0,V.done=!0,V};return z.next=z}}return{next:N}}function N(){return{value:void 0,done:!0}}return X.prototype=se,k($,"constructor",{value:se,configurable:!0}),k(se,"constructor",{value:X,configurable:!0}),X.displayName=L(se,y,"GeneratorFunction"),E.isGeneratorFunction=function(h){var T="function"==typeof h&&h.constructor;return!!T&&(T===X||"GeneratorFunction"===(T.displayName||T.name))},E.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,se):(h.__proto__=se,L(h,y,"GeneratorFunction")),h.prototype=Object.create($),h},E.awrap=function(h){return{__await:h}},J(re.prototype),L(re.prototype,t,function(){return this}),E.AsyncIterator=re,E.async=function(h,T,M,z,V){void 0===V&&(V=Promise);var G=new re(S(h,T,M,z),V);return E.isGeneratorFunction(T)?G:G.next().then(function(de){return de.done?de.value:G.next()})},J($),L($,y,"Generator"),L($,w,function(){return this}),L($,"toString",function(){return"[object Generator]"}),E.keys=function(h){var T=Object(h),M=[];for(var z in T)M.push(z);return M.reverse(),function V(){for(;M.length;){var G=M.pop();if(G in T)return V.value=G,V.done=!1,V}return V.done=!0,V}},E.values=j,U.prototype={constructor:U,reset:function(T){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!T)for(var M in this)"t"===M.charAt(0)&&D.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=void 0)},stop:function(){this.done=!0;var T=this.tryEntries[0].completion;if("throw"===T.type)throw T.arg;return this.rval},dispatchException:function(T){if(this.done)throw T;var M=this;function z(Fe,Ae){return de.type="throw",de.arg=T,M.next=Fe,Ae&&(M.method="next",M.arg=void 0),!!Ae}for(var V=this.tryEntries.length-1;V>=0;--V){var G=this.tryEntries[V],de=G.completion;if("root"===G.tryLoc)return z("end");if(G.tryLoc<=this.prev){var me=D.call(G,"catchLoc"),we=D.call(G,"finallyLoc");if(me&&we){if(this.prev<G.catchLoc)return z(G.catchLoc,!0);if(this.prev<G.finallyLoc)return z(G.finallyLoc)}else if(me){if(this.prev<G.catchLoc)return z(G.catchLoc,!0)}else{if(!we)throw new Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return z(G.finallyLoc)}}}},abrupt:function(T,M){for(var z=this.tryEntries.length-1;z>=0;--z){var V=this.tryEntries[z];if(V.tryLoc<=this.prev&&D.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var G=V;break}}G&&("break"===T||"continue"===T)&&G.tryLoc<=M&&M<=G.finallyLoc&&(G=null);var de=G?G.completion:{};return de.type=T,de.arg=M,G?(this.method="next",this.next=G.finallyLoc,H):this.complete(de)},complete:function(T,M){if("throw"===T.type)throw T.arg;return"break"===T.type||"continue"===T.type?this.next=T.arg:"return"===T.type?(this.rval=this.arg=T.arg,this.method="return",this.next="end"):"normal"===T.type&&M&&(this.next=M),H},finish:function(T){for(var M=this.tryEntries.length-1;M>=0;--M){var z=this.tryEntries[M];if(z.finallyLoc===T)return this.complete(z.completion,z.afterLoc),F(z),H}},catch:function(T){for(var M=this.tryEntries.length-1;M>=0;--M){var z=this.tryEntries[M];if(z.tryLoc===T){var V=z.completion;if("throw"===V.type){var G=V.arg;F(z)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(T,M,z){return this.delegate={iterator:j(T),resultName:M,nextLoc:z},"next"===this.method&&(this.arg=void 0),H}},E}Z.exports=p,Z.exports.__esModule=!0,Z.exports.default=Z.exports},8698:Z=>{function K(_){return Z.exports=K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Z.exports.__esModule=!0,Z.exports.default=Z.exports,K(_)}Z.exports=K,Z.exports.__esModule=!0,Z.exports.default=Z.exports},4687:(Z,K,_)=>{var g=_(7061)();Z.exports=g;try{regeneratorRuntime=g}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}}}]);