(self.webpackChunkgetstream_chat=self.webpackChunkgetstream_chat||[]).push([[66],{1066:(L,W,_)=>{"use strict";_.r(W),_.d(W,{ChatModule:()=>eg});var h=_(4942),I=_(9101),t=_(4650),y=_(3238),f=_(6895),T=_(9646),F=(_(2843),_(4128),_(8505)),w=_(4004),E=_(262);_(8746),_(3099),_(529),_(1481);let be=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[y.BQ,y.BQ]}),i})();var pe=_(2722),ke=_(5698),_e=_(1281),Qe=_(9521),Tt=_(3353),ot=_(3948),Us=_(445),fn=_(8184),Wn=_(8605),Zs=_(4080),nt=_(7579);_(7340);const Rs=["tooltip"],Kn=new t.OlP("mat-tooltip-scroll-strategy"),Ns={provide:Kn,deps:[fn.aV],useFactory:function Bs(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},$s=new t.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function js(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),Xn="tooltip-panel",ei=(0,Tt.i$)({passive:!0});let Qs=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=(0,_e.Ig)(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,_e.Ig)(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=(0,_e.su)(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=(0,_e.su)(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,s,r,o,l,c,u,d,g,m,v){this._overlay=e,this._elementRef=n,this._scrollDispatcher=s,this._viewContainerRef=r,this._ngZone=o,this._platform=l,this._ariaDescriber=c,this._focusMonitor=u,this._dir=g,this._defaultOptions=m,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new nt.x,this._scrollStrategy=d,this._document=v,m&&(m.position&&(this.position=m.position),m.positionAtOrigin&&(this.positionAtOrigin=m.positionAtOrigin),m.touchGestures&&(this.touchGestures=m.touchGestures)),g.change.pipe((0,pe.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,pe.R)(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,s])=>{e.removeEventListener(n,s,ei)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const s=this._createOverlay(n);this._detach(),this._portal=this._portal||new Zs.C5(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=s.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe((0,pe.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&r._origin instanceof t.SBq)return this._overlayRef;this._detach()}const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),s=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return s.positionChanges.pipe((0,pe.R)(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:s,panelClass:`${this._cssClassPrefix}-${Xn}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,pe.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,pe.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,pe.R)(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&r.keyCode===Qe.hY&&!(0,Qe.Vb)(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const n=e.getConfig().positionStrategy,s=this._getOrigin(),r=this._getOverlayPosition();n.withPositions([this._addOffset({...s.main,...r.main}),this._addOffset({...s.fallback,...r.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let s;"above"==n||"below"==n?s={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&e||"right"==n&&!e?s={originX:"start",originY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(s={originX:"end",originY:"center"});const{x:r,y:o}=this._invertPosition(s.originX,s.originY);return{main:s,fallback:{originX:r,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let s;"above"==n?s={overlayX:"center",overlayY:"bottom"}:"below"==n?s={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&e||"right"==n&&!e?s={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(s={overlayX:"start",overlayY:"center"});const{x:r,y:o}=this._invertPosition(s.overlayX,s.overlayY);return{main:s,fallback:{overlayX:r,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,ke.q)(1),(0,pe.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){const{overlayY:n,originX:s,originY:r}=e;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===s?"left":"right":"start"===s?"left":"right":"bottom"===n&&"top"===r?"above":"below",o!==this._currentPosition){const l=this._overlayRef;if(l){const c=`${this._cssClassPrefix}-${Xn}-`;l.removePanelClass(c+this._currentPosition),l.addPanelClass(c+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let n;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(n=e),this.show(void 0,n)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const n=e.targetTouches?.[0],s=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,s),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{const s=n.relatedTarget;(!s||!this._overlayRef?.overlayElement.contains(s))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,s])=>{this._elementRef.nativeElement.addEventListener(n,s,ei)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(e.clientX,e.clientY),s=this._elementRef.nativeElement;n!==s&&!s.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const n=this._elementRef.nativeElement,s=n.style;("on"===e||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(s.userSelect=s.msUserSelect=s.webkitUserSelect=s.MozUserSelect="none"),("on"===e||!n.draggable)&&(s.webkitUserDrag="none"),s.touchAction="none",s.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(e){t.$Z()},i.\u0275dir=t.lG2({type:i,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Gs=(()=>{class i extends Qs{constructor(e,n,s,r,o,l,c,u,d,g,m,v){super(e,n,s,r,o,l,c,u,d,g,m,v),this._tooltipComponent=Ws,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const s=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=s?-8:8:"end"===e.originX&&(e.offsetX=s?8:-8),e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(fn.aV),t.Y36(t.SBq),t.Y36(Wn.mF),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(Tt.t4),t.Y36(ot.$s),t.Y36(ot.tE),t.Y36(Kn),t.Y36(Us.Is,8),t.Y36($s,8),t.Y36(f.K0))},i.\u0275dir=t.lG2({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[t.qOj]}),i})(),zs=(()=>{class i{constructor(e,n){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new nt.x,this._animationsDisabled="NoopAnimations"===n}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const n=this._tooltip.nativeElement,s=this._showAnimation,r=this._hideAnimation;if(n.classList.remove(e?r:s),n.classList.add(e?s:r),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(t.QbO,8))},i.\u0275dir=t.lG2({type:i}),i})(),Ws=(()=>{class i extends zs{constructor(e,n,s){super(e,s),this._elementRef=n,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.QbO,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(Rs,7),2&e){let s;t.iGM(s=t.CRH())&&(n._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("mouseleave",function(r){return n._handleMouseLeave(r)}),2&e&&t.Udp("zoom",n.isVisible()?1:null)},features:[t.qOj],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0,1),t.NdJ("animationend",function(r){return n._handleAnimationEnd(r)}),t.TgZ(2,"div",2),t._uU(3),t.qZA()()),2&e&&(t.ekj("mdc-tooltip--multiline",n._isMultiline),t.Q6J("ngClass",n.tooltipClass),t.xp6(3),t.Oqu(n.message))},dependencies:[f.mk],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),i})(),Ks=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Ns],imports:[ot.rt,f.ez,fn.U8,y.BQ,y.BQ,Wn.ZD]}),i})();var ti=_(5072),b=_(5861),ni=_(3900),Xs=_(2340),re=_(655),ae=_(1135),zt=_(4707),ii=_(9841),_n=_(5963),ea=_(5343);function Mt(){return Mt=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Mt.apply(this,arguments)}var mt=_(1002);function si(i,a){if(null==i)return{};var n,s,e=function ta(i,a){if(null==i)return{};var s,r,e={},n=Object.keys(i);for(r=0;r<n.length;r++)!(a.indexOf(s=n[r])>=0)&&(e[s]=i[s]);return e}(i,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)!(a.indexOf(n=r[s])>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function vn(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function ai(i,a){if(i){if("string"==typeof i)return vn(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vn(i,a)}}function Re(i){return function na(i){if(Array.isArray(i))return vn(i)}(i)||function ia(i){if(typeof Symbol<"u"&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||ai(i)||function sa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}var aa=_(3997);function ri(i,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,(0,aa.Z)(n.key),n)}}function xt(i,a,e){return a&&ri(i.prototype,a),e&&ri(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}var ra=_(4687),p=_.n(ra),oa=_(3014),Wt=_.n(oa);function oi(i,a){return function la(i){if(Array.isArray(i))return i}(i)||function ca(i,a){var e=null==i?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(null!=e){var n,s,r,o,l=[],c=!0,u=!1;try{if(r=(e=e.call(i)).next,0===a){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=r.call(e)).done)&&(l.push(n.value),l.length!==a);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}(i,a)||ai(i,a)||function ua(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var da=_(593),ha=_.n(da),pa=_(9151),ga=_.n(pa);function Kt(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zt(i,a){return(Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n})(i,a)}function Rt(i){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(i)}function Xt(i,a,e){return(Xt=function va(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(s,r,o){var l=[null];l.push.apply(l,r);var u=new(Function.bind.apply(s,l));return o&&Zt(u,o.prototype),u}).apply(null,arguments)}function Cn(i){var a="function"==typeof Map?new Map:void 0;return Cn=function(n){if(null===n||!function _a(i){return-1!==Function.toString.call(i).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(n))return a.get(n);a.set(n,s)}function s(){return Xt(n,arguments,Rt(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Zt(s,n)},Cn(i)}function yn(i){return"string"==typeof i}function li(i,a){return!!a&&yn(i)}var ya=function(a){return(0,ea.JQ)(new Uint8Array(function Ca(i,a){var e=[];if(yn(i)&&li(i,a)){for(var n=0,s=i.length;n<s;n++)if(i.charAt(n)){var o=a(i.charAt(n),n,i);e[n]=o}}else if(!yn(i)&&!li(i,a))for(var l=0,c=i.length;l<c;l++)if(l in i){var d=a(i[l],l,i);e[l]=d}return e}(a,function(e){return e.charCodeAt(0)})))},Da=null;function ci(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function $e(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?ci(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ci(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var ba=function(){function i(a){var n,e=this;We(this,i),(0,h.Z)(this,"_channel",void 0),(0,h.Z)(this,"watcher_count",void 0),(0,h.Z)(this,"typing",void 0),(0,h.Z)(this,"read",void 0),(0,h.Z)(this,"pinnedMessages",void 0),(0,h.Z)(this,"pending_messages",void 0),(0,h.Z)(this,"threads",void 0),(0,h.Z)(this,"mutedUsers",void 0),(0,h.Z)(this,"watchers",void 0),(0,h.Z)(this,"members",void 0),(0,h.Z)(this,"unreadCount",void 0),(0,h.Z)(this,"membership",void 0),(0,h.Z)(this,"last_message_at",void 0),(0,h.Z)(this,"isUpToDate",void 0),(0,h.Z)(this,"messageSets",[]),(0,h.Z)(this,"setIsUpToDate",function(s){e.isUpToDate=s}),(0,h.Z)(this,"removeMessageFromArray",function(s,r){var o=s.filter(function(l){return!(l.id&&r.id&&l.id===r.id)});return{removed:o.length<s.length,result:o}}),(0,h.Z)(this,"updateUserMessages",function(s){var r=function(c,u){for(var d=0;d<c.length;d++){var g,m=c[d];(null===(g=m.user)||void 0===g?void 0:g.id)===u.id&&(c[d]=$e($e({},m),{},{user:u}))}};for(var o in e.messageSets.forEach(function(l){return r(l.messages,s)}),e.threads)r(e.threads[o],s);r(e.pinnedMessages,s)}),(0,h.Z)(this,"deleteUserMessages",function(s){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=function(u,d){for(var g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],m=0;m<u.length;m++){var v,C=u[m];(null===(v=C.user)||void 0===v?void 0:v.id)===d.id&&(u[m]=g?{cid:C.cid,created_at:C.created_at,deleted_at:d.deleted_at,id:C.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:C.parent_id,reply_count:C.reply_count,status:C.status,thread_participants:C.thread_participants,type:"deleted",updated_at:C.updated_at,user:C.user}:$e($e({},C),{},{type:"deleted",deleted_at:d.deleted_at}))}};for(var l in e.messageSets.forEach(function(c){return o(c.messages,s,r)}),e.threads)o(e.threads[l],s,r);o(e.pinnedMessages,s,r)}),this._channel=a,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=null!=(null==a||null===(n=a.state)||void 0===n?void 0:n.last_message_at)?new Date(a.state.last_message_at):null}return xt(i,[{key:"messages",get:function(){var e;return(null===(e=this.messageSets.find(function(n){return n.isCurrent}))||void 0===e?void 0:e.messages)||[]},set:function(e){var n=this.messageSets.findIndex(function(s){return s.isCurrent});this.messageSets[n].messages=e}},{key:"latestMessages",get:function(){var e;return(null===(e=this.messageSets.find(function(n){return n.isLatest}))||void 0===e?void 0:e.messages)||[]},set:function(e){var n=this.messageSets.findIndex(function(s){return s.isLatest});this.messageSets[n].messages=e}},{key:"addMessageSorted",value:function(e){return this.addMessagesSorted([e],arguments.length>1&&void 0!==arguments[1]&&arguments[1],!1,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest")}},{key:"formatMessage",value:function(e){return $e($e({},e),{},{__html:e.html,pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"})}},{key:"addMessagesSorted",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=this.findTargetMessageSet(e,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:"current"),c=l.messagesToAdd,u=l.targetMessageSetIndex,d=0;d<c.length;d+=1)if(!c[d].shadowed){var C,v=void 0;c[d].created_at instanceof Date?v=c[d]:((v=this.formatMessage(c[d])).user&&null!==(C=this._channel)&&void 0!==C&&C.cid&&this._channel.getClient().state.updateUserReference(v.user,this._channel.cid),s&&v.id&&this.threads[v.id]&&delete this.threads[v.id],this.last_message_at||(this.last_message_at=new Date(v.created_at.getTime())),v.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(v.created_at.getTime())));var B=v.parent_id;if((!B||v.show_in_channel)&&-1!==u&&(this.messageSets[u].messages=this._addToMessageList(this.messageSets[u].messages,v,n,"created_at",r)),B&&!s){var te=this._addToMessageList(this.threads[B]||[],v,n,"created_at",r);this.threads[B]=te}}return{messageSet:this.messageSets[u]}}},{key:"addPinnedMessages",value:function(e){for(var n=0;n<e.length;n+=1)this.addPinnedMessage(e[n])}},{key:"addPinnedMessage",value:function(e){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(e),!1,"pinned_at")}},{key:"removePinnedMessage",value:function(e){var n=this.removeMessageFromArray(this.pinnedMessages,e);this.pinnedMessages=n.result}},{key:"addReaction",value:function(e,n,s){var r=this;if(n){var o=n;return this._updateMessage(n,function(l){return o.own_reactions=r._addOwnReactionToMessage(l.own_reactions,e,s),r.formatMessage(o)}),o}}},{key:"_addOwnReactionToMessage",value:function(e,n,s){return e=(e=s?[]:this._removeOwnReactionFromMessage(e,n))||[],this._channel.getClient().userID===n.user_id&&e.push(n),e}},{key:"_removeOwnReactionFromMessage",value:function(e,n){return e&&e.filter(function(s){return s.user_id!==n.user_id||s.type!==n.type})}},{key:"removeReaction",value:function(e,n){var s=this;if(n){var r=n;return this._updateMessage(n,function(o){return r.own_reactions=s._removeOwnReactionFromMessage(o.own_reactions,e),s.formatMessage(r)}),r}}},{key:"removeQuotedMessageReferences",value:function(e){var n=this,s=function(o){var l,c;return $e($e({},o),{},{created_at:o.created_at.toString(),pinned_at:null===(l=o.pinned_at)||void 0===l?void 0:l.toString(),updated_at:null===(c=o.updated_at)||void 0===c?void 0:c.toString()})};this.messageSets.forEach(function(r){var o=r.messages.filter(function(l){return l.quoted_message_id===e.id}).map(s).map(function(l){return $e($e({},l),{},{quoted_message:$e($e({},e),{},{attachments:[]})})});n.addMessagesSorted(o,!0)})}},{key:"_updateMessage",value:function(e,n){var s=e.parent_id,r=e.show_in_channel,o=e.pinned;if(s&&this.threads[s]){var l=this.threads[s],c=l.findIndex(function(m){return m.id===e.id});-1!==c&&(l[c]=n(l[c]),this.threads[s]=l)}if(!r&&!s||r){var u=this.findMessageSetIndex(e);if(-1!==u){var d=this.messageSets[u].messages.findIndex(function(m){return m.id===e.id});-1!==d&&(this.messageSets[u].messages[d]=n(this.messageSets[u].messages[d]))}}if(o){var g=this.pinnedMessages.findIndex(function(m){return m.id===e.id});-1!==g&&(this.pinnedMessages[g]=n(this.pinnedMessages[g]))}}},{key:"_addToMessageList",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"created_at",l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4]||s,c=e;s&&(c=c.filter(function(B){return!(B.id&&n.id===B.id)}));var u=c.length;if(0===u&&l)return c.concat(n);if(0===u)return Re(c);var d=n[r].getTime(),g=c[u-1][r].getTime()<d;if(g&&l)return c.concat(n);if(g)return Re(c);for(var m=0,v=0,C=u-1;m<=C;)c[v=Math.floor((C+m)/2)][r].getTime()<=d?m=v+1:C=v-1;if(!s&&n.id){if(c[m]&&n.id===c[m].id)return c[m]=n,Re(c);if(c[m-1]&&n.id===c[m-1].id)return c[m-1]=n,Re(c)}return l&&c.splice(m,0,n),Re(c)}},{key:"removeMessage",value:function(e){var n=!1;if(e.parent_id&&this.threads[e.parent_id]){var s=this.removeMessageFromArray(this.threads[e.parent_id],e),r=s.removed;this.threads[e.parent_id]=s.result,n=r}else{var l,c=null!==(l=e.messageSetIndex)&&void 0!==l?l:this.findMessageSetIndex(e);if(-1!==c){var u=this.removeMessageFromArray(this.messageSets[c].messages,e),d=u.removed;this.messageSets[c].messages=u.result,n=d}}return n}},{key:"filterErrorMessages",value:function(){var e=this.latestMessages.filter(function(n){return"error"!==n.type});this.latestMessages=e}},{key:"clean",value:function(){for(var e=new Date,n=0,s=Object.entries(this.typing);n<s.length;n++){var r=oi(s[n],2),o=r[0],l=r[1],c="string"==typeof l.received_at?new Date(l.received_at):l.received_at||new Date;e.getTime()-c.getTime()>7e3&&(delete this.typing[o],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:o}}))}}},{key:"clearMessages",value:function(){this.initMessages(),this.pinnedMessages=[]}},{key:"initMessages",value:function(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0}]}},{key:"loadMessageIntoState",value:(a=(0,b.Z)(p().mark(function n(s,r){var o,l,c,u,d,g,m=arguments;return p().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(l=m.length>2&&void 0!==m[2]?m[2]:25,u=!1,d=!1,g=r||s,"latest"!==s){C.next=10;break}if(this.messages!==this.latestMessages){C.next=7;break}return C.abrupt("return");case 7:c=this.messageSets.findIndex(function(B){return B.isLatest}),C.next=11;break;case 10:c=this.findMessageSetIndex({id:g});case 11:if(-1!==c&&(this.switchToMessageSet(c),u=!0),d=!r||!(null===(o=this.threads[r])||void 0===o||!o.find(function(B){return B.id===s})),!u||!d){C.next=15;break}return C.abrupt("return");case 15:if(u){C.next=18;break}return C.next=18,this._channel.query({messages:{id_around:g,limit:l}},"new");case 18:if(d||!r){C.next=21;break}return C.next=21,this._channel.getReplies(r,{id_around:s,limit:l});case 21:-1!==(c=this.findMessageSetIndex({id:g}))&&this.switchToMessageSet(c);case 23:case"end":return C.stop()}},n,this)})),function e(n,s){return a.apply(this,arguments)})},{key:"findMessage",value:function(e,n){if(n){var s=this.threads[n];return s?s.find(function(o){return o.id===e}):void 0}var r=this.findMessageSetIndex({id:e});if(-1!==r)return this.messageSets[r].messages.find(function(o){return o.id===e})}},{key:"switchToMessageSet",value:function(e){var n=this.messageSets.find(function(s){return s.isCurrent});n&&(n.isCurrent=!1,this.messageSets[e].isCurrent=!0)}},{key:"areMessageSetsOverlap",value:function(e,n){return e.some(function(s){return n.find(function(r){return s.id===r.id})})}},{key:"findMessageSetIndex",value:function(e){return this.messageSets.findIndex(function(n){return!!n.messages.find(function(s){return s.id===e.id})})}},{key:"findTargetMessageSet",value:function(e){var l,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"current",o=e;if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1])l=this.findMessageSetIndex(e[0]);else{var c=this.messageSets.map(function(C,B){return B}).filter(function(C){return n.areMessageSetsOverlap(n.messageSets[C].messages,e)});switch(r){case"new":c.length>0?l=c[0]:e.some(function(C){return!C.parent_id})&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1}),l=this.messageSets.length-1);break;case"current":l=this.messageSets.findIndex(function(C){return C.isCurrent});break;case"latest":l=this.messageSets.findIndex(function(C){return C.isLatest});break;default:l=-1}var u=c.splice(0,1)[0],d=Re(c);if(void 0!==u&&u!==l&&d.push(l),d.length>0){var g=this.messageSets[u],m=this.messageSets.filter(function(C,B){return-1!==d.indexOf(B)});m.forEach(function(C){g.isLatest=g.isLatest||C.isLatest,g.isCurrent=g.isCurrent||C.isCurrent,o=[].concat(Re(o),Re(C.messages))}),m.forEach(function(C){return n.messageSets.splice(n.messageSets.indexOf(C),1)}),l=this.messageSets.findIndex(function(C){return n.areMessageSetsOverlap(C.messages,e)})}}return{targetMessageSetIndex:l,messagesToAdd:o}}}]),i;var a}();function ui(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}var ft=function(a){return new Promise(function(e){return setTimeout(e,a)})};function wn(i){return i&&("[object Function]"===Object.prototype.toString.call(i)||"function"==typeof i||i instanceof Function)}var Pt={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function Ea(i){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,invisible:!0,roles:!0}[i]}function _t(i){var s,a=[],n=function Ta(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Ma(i,a){if(i){if("string"==typeof i)return ui(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ui(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(c){function u(d){return c.apply(this,arguments)}return u.toString=function(){return c.toString()},u}(function(c){throw c}),f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(c){function u(d){return c.apply(this,arguments)}return u.toString=function(){return c.toString()},u}(function(c){o=!0,l=c}),f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}(Array.isArray(i)?i:[i]);try{for(n.s();!(s=n.n()).done;){var o=Object.entries(s.value);o.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(var l=0,c=o;l<c.length;l++){var u=oi(c[l],2);a.push({field:u[0],direction:u[1]})}}}catch(m){n.e(m)}finally{n.f()}return a}function en(i){var a=Math.min(500+2e3*i,25e3),e=Math.min(Math.max(250,2e3*(i-1)),25e3);return Math.floor(Math.random()*(a-e)+e)}function St(){return function Oa(){var i=function Za(i){var a=new Uint8Array(i);return Ua(a),a}(16);return i[6]=15&i[6]|64,i[8]=191&i[8]|128,Bt(i.subarray(0,4))+"-"+Bt(i.subarray(4,6))+"-"+Bt(i.subarray(6,8))+"-"+Bt(i.subarray(8,10))+"-"+Bt(i.subarray(10,16))}()}function Bt(i){for(var a="",e=0;e<i.length;e++)a+=i[e].toString(16).padStart(2,"0");return a}var i,Ua=typeof crypto<"u"&&typeof(null===(i=crypto)||void 0===i?void 0:i.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):function La(i){for(var a=Math.pow(2,8*i.byteLength/i.length),e=0;e<i.length;e++)i[e]=Math.random()*a};function Ra(i){var a={};if(!i)return a;try{Object.getOwnPropertyNames(i).forEach(function(e){a[e]=Object.getOwnPropertyDescriptor(i,e)})}catch{return{error:"failed to serialize the error"}}return a}function Pa(){var i=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return i?"boolean"!=typeof i.onLine||i.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function di(i){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",i),window.addEventListener("online",i))}function hi(i){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",i),window.removeEventListener("online",i))}function Dn(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Ba(i,a){if(i){if("string"==typeof i)return pi(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pi(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}function pi(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function gi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function he(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?gi(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):gi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var bn=function(){function i(a,e,n,s){var r=this;if(We(this,i),(0,h.Z)(this,"_client",void 0),(0,h.Z)(this,"type",void 0),(0,h.Z)(this,"id",void 0),(0,h.Z)(this,"data",void 0),(0,h.Z)(this,"_data",void 0),(0,h.Z)(this,"cid",void 0),(0,h.Z)(this,"listeners",void 0),(0,h.Z)(this,"state",void 0),(0,h.Z)(this,"initialized",void 0),(0,h.Z)(this,"offlineMode",void 0),(0,h.Z)(this,"lastKeyStroke",void 0),(0,h.Z)(this,"lastTypingEvent",void 0),(0,h.Z)(this,"isTyping",void 0),(0,h.Z)(this,"disconnected",void 0),(0,h.Z)(this,"create",(0,b.Z)(p().mark(function c(){var u;return p().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u={watch:!1,state:!1,presence:!1},g.next=3,r.query(u,"latest");case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}},c)}))),(0,h.Z)(this,"_callChannelListeners",function(c){var u=r,d=[];u.listeners.all&&d.push.apply(d,Re(u.listeners.all)),u.listeners[c.type]&&d.push.apply(d,Re(u.listeners[c.type]));for(var g=0,m=d;g<m.length;g++){var v=m[g];"string"!=typeof v&&v(c)}}),(0,h.Z)(this,"_channelURL",function(){if(!r.id)throw new Error("channel id is not defined");return"".concat(r.getClient().baseURL,"/channels/").concat(r.type,"/").concat(r.id)}),!/^[\w_-]+$/.test(e))throw new Error("Invalid chat type ".concat(e,', letters, numbers and "_-" are allowed'));if("string"==typeof n&&!/^[\w!_-]+$/.test(n))throw new Error("Invalid chat id ".concat(n,', letters, numbers and "!-_" are allowed'));this._client=a,this.type=e,this.id=n,this.data=s,this._data=he({},s),this.cid="".concat(e,":").concat(n),this.listeners={},this.state=new ba(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1}return xt(i,[{key:"getClient",value:function(){if(!0===this.disconnected)throw Error("You can't use a channel after client.disconnect() was called");return this._client}},{key:"getConfig",value:function(){return this.getClient().configs[this.cid]}},{key:"sendMessage",value:(a=(0,b.Z)(p().mark(function n(s,r){var o;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.getClient().post(this._channelURL()+"/message",he({message:s},r));case 2:return o=c.sent,this.state.unreadCount=0,c.abrupt("return",o);case 5:case"end":return c.stop()}},n,this)})),function e(n,s){return a.apply(this,arguments)})},{key:"sendFile",value:function(e,n,s,r){return this.getClient().sendFile("".concat(this._channelURL(),"/file"),e,n,s,r)}},{key:"sendImage",value:function(e,n,s,r){return this.getClient().sendFile("".concat(this._channelURL(),"/image"),e,n,s,r)}},{key:"deleteFile",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/file"),{url:e})}},{key:"deleteImage",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/image"),{url:e})}},{key:"sendEvent",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().post(this._channelURL()+"/event",{event:s});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"search",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(r=l.length>1&&void 0!==l[1]?l[1]:{}).offset||!r.sort&&!r.next){u.next=3;break}throw Error("Cannot specify offset with sort or next parameters");case 3:if(o=he(he({filter_conditions:{cid:this.cid}},r),{},{sort:r.sort?_t(r.sort):void 0}),"string"!=typeof s){u.next=8;break}o.query=s,u.next=13;break;case 8:if("object"!==(0,mt.Z)(s)){u.next=12;break}o.message_filter_conditions=s,u.next=13;break;case 12:throw Error("Invalid type ".concat((0,mt.Z)(s)," for query parameter"));case 13:return u.next=15,this.getClient().wsPromise;case 15:return u.next=17,this.getClient().get(this.getClient().baseURL+"/search",{payload:o});case 17:return u.abrupt("return",u.sent);case 18:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryMembers",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l,c,u,d,g=arguments;return p().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=g.length>1&&void 0!==g[1]?g[1]:[],l=g.length>2&&void 0!==g[2]?g[2]:{},u=this.type,this.id?c=this.id:null!==(r=this.data)&&void 0!==r&&r.members&&Array.isArray(this.data.members)&&(d=this.data.members),v.next=6,this.getClient().get(this.getClient().baseURL+"/members",{payload:he({type:u,id:c,members:d,sort:_t(o),filter_conditions:s},l)});case 6:return v.abrupt("return",v.sent);case 7:case"end":return v.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"sendReaction",value:function(){var a=(0,b.Z)(p().mark(function n(s,r,o){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s){c.next=2;break}throw Error("Message id is missing");case 2:if(r&&0!==Object.keys(r).length){c.next=4;break}throw Error("Reaction object is missing");case 4:return c.next=6,this.getClient().post(this.getClient().baseURL+"/messages/".concat(s,"/reaction"),he({reaction:r},o));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));return function e(n,s,r){return a.apply(this,arguments)}}()},{key:"deleteReaction",value:function(e,n,s){if(this._checkInitialized(),!n||!e)throw Error("Deleting a reaction requires specifying both the message and reaction type");var r=this.getClient().baseURL+"/messages/".concat(e,"/reaction/").concat(n);return s?this.getClient().delete(r,{user_id:s}):this.getClient().delete(r,{})}},{key:"update",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o,c=arguments;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1?c[1]:void 0,o=c.length>2?c[2]:void 0,["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(function(g){delete s[g]}),d.next=7,this._update(he({message:r,data:s},o));case 7:return d.abrupt("return",d.sent);case 8:case"end":return d.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"updatePartial",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().patch(this._channelURL(),s);case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"enableSlowMode",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),{cooldown:s});case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"disableSlowMode",value:function(){var a=(0,b.Z)(p().mark(function n(){var s;return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL(),{cooldown:0});case 2:return this.data=(s=o.sent).channel,o.abrupt("return",s);case 5:case"end":return o.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"delete",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().delete(this._channelURL(),he({},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"truncate",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this._channelURL()+"/truncate",s);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"acceptInvite",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this._update(he({accept_invite:!0},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"rejectInvite",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this._update(he({reject_invite:!0},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"addMembers",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({add_members:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"addModerators",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({add_moderators:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"assignRoles",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({assign_roles:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"inviteMembers",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({invites:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeMembers",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({remove_members:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"demoteModerators",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(he({demote_moderators:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_update",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),s);case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"mute",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",he({channel_cid:this.cid},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"unmute",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",he({channel_cid:this.cid},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"muteStatus",value:function(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}},{key:"sendAction",value:function(e,n){if(this._checkInitialized(),!e)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+"/messages/".concat(e,"/action"),{message_id:e,form_data:n,id:this.id,type:this.type})}},{key:"keystroke",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(null!==(r=this.getConfig())&&void 0!==r&&r.typing_events){u.next=2;break}return u.abrupt("return");case 2:if(o=new Date,l=this.lastTypingEvent&&o.getTime()-this.lastTypingEvent.getTime(),this.lastKeyStroke=o,this.isTyping=!0,!(null===l||l>2e3)){u.next=10;break}return this.lastTypingEvent=new Date,u.next=10,this.sendEvent({type:"typing.start",parent_id:s});case 10:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"stopTyping",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(null!==(r=this.getConfig())&&void 0!==r&&r.typing_events){l.next=2;break}return l.abrupt("return");case 2:return this.lastTypingEvent=null,this.isTyping=!1,l.next=6,this.sendEvent({type:"typing.stop",parent_id:s});case 6:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"lastMessage",value:function(){var e=this.state.latestMessages.length-5;e<0&&(e=0);var s=this.state.latestMessages.slice(e,this.state.latestMessages.length+1);return s.sort(function(r,o){return o.created_at.getTime()-r.created_at.getTime()}),s[0]}},{key:"markRead",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=o.length>0&&void 0!==o[0]?o[0]:{},this._checkInitialized(),null!==(s=this.getConfig())&&void 0!==s&&s.read_events){c.next=4;break}return c.abrupt("return",Promise.resolve(null));case 4:return c.next=6,this.getClient().post(this._channelURL()+"/read",he({},r));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"markUnread",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._checkInitialized(),null!==(r=this.getConfig())&&void 0!==r&&r.read_events){l.next=3;break}return l.abrupt("return",Promise.resolve(null));case 3:return l.next=5,this.getClient().post(this._channelURL()+"/unread",he({},s));case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"clean",value:function(){this.lastKeyStroke&&(new Date).getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&function xa(i,a){i.then().catch(function(e){console.warn("failed to do ".concat(a,", ran into error: "),e)})}(this.stopTyping(),"stop typing event"),this.state.clean()}},{key:"watch",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r={state:!0,watch:!0,presence:!1},u.next=3,this.getClient().wsPromise;case 3:return this.getClient()._hasConnectionID()||(r.watch=!1),o=he(he({},r),s),u.next=7,this.query(o,"latest");case 7:return l=u.sent,this.initialized=!0,this.data=l.channel,this._client.logger("info","channel:watch() - started watching channel ".concat(this.cid),{tags:["channel"],channel:this}),u.abrupt("return",l);case 12:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"stopWatching",value:function(){var a=(0,b.Z)(p().mark(function n(){var s;return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL()+"/stop-watching",{});case 2:return s=o.sent,this._client.logger("info","channel:watch() - stopped watching channel ".concat(this.cid),{tags:["channel"],channel:this}),o.abrupt("return",s);case 5:case"end":return o.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"getReplies",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.getClient().get(this.getClient().baseURL+"/messages/".concat(s,"/replies"),he({},r));case 2:return(o=c.sent).messages&&this.state.addMessagesSorted(o.messages),c.abrupt("return",o);case 5:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getPinnedMessages",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:[],c.next=3,this.getClient().get(this.getClient().baseURL+"/channels/".concat(this.type,"/").concat(this.id,"/pinned_messages"),{payload:he(he({},s),{},{sort:_t(r)})});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getReactions",value:function(e,n){return this.getClient().get(this.getClient().baseURL+"/messages/".concat(e,"/reactions"),he({},n))}},{key:"getMessagesById",value:function(e){return this.getClient().get(this._channelURL()+"/messages",{ids:e.join(",")})}},{key:"lastRead",value:function(){this._checkInitialized();var n=this.getClient().userID;if(n)return this.state.read[n]?this.state.read[n].last_read:null}},{key:"_countMessageAsUnread",value:function(e){var n,s,r,o;return!(e.shadowed||e.silent||e.parent_id&&!e.show_in_channel||(null===(n=e.user)||void 0===n?void 0:n.id)===this.getClient().userID||null!==(s=e.user)&&void 0!==s&&s.id&&this.getClient().userMuteStatus(e.user.id)||"system"===e.type||Array.isArray(null===(r=this.data)||void 0===r?void 0:r.own_capabilities)&&(null===(o=this.data)||void 0===o||!o.own_capabilities.includes("read-events"))||this.muteStatus().muted)}},{key:"countUnread",value:function(e){if(!e)return this.state.unreadCount;for(var n=0,s=0;s<this.state.latestMessages.length;s+=1){var r=this.state.latestMessages[s];r.created_at>e&&this._countMessageAsUnread(r)&&n++}return n}},{key:"countUnreadMentions",value:function(){for(var e=this.lastRead(),n=this.getClient().userID,s=0,r=0;r<this.state.latestMessages.length;r+=1){var o,l=this.state.latestMessages[r];this._countMessageAsUnread(l)&&(!e||l.created_at>e)&&null!==(o=l.mentioned_users)&&void 0!==o&&o.some(function(c){return c.id===n})&&s++}return s}},{key:"query",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l,c,u,d,g,m=arguments;return p().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:"current",C.next=3,this.getClient().wsPromise;case 3:return o="".concat(this.getClient().baseURL,"/channels/").concat(this.type),this.id&&(o+="/".concat(this.id)),C.next=7,this.getClient().post(o+"/query",he({data:this._data,state:!0},s));case 7:return l=C.sent,this.id||(this.id=l.channel.id,this.cid=l.channel.cid,c=l.members.map(function(B){var z;return B.user_id||(null===(z=B.user)||void 0===z?void 0:z.id)}).sort().join(","),(u="".concat(this.type,":!members-").concat(c))in this.getClient().activeChannels&&delete this.getClient().activeChannels[u],this.cid in this.getClient().activeChannels||(this.getClient().activeChannels[this.cid]=this)),this.getClient()._addChannelConfig(l.channel),d=this._initializeState(l,r),g=d.messageSet,this.data=l.channel,this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[l],isLatestMessageSet:g.isLatest}}),C.abrupt("return",l);case 14:case"end":return C.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"banUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().banUser(s,he(he({},r),{},{type:this.type,id:this.id}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"hide",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:null,r=o.length>1&&void 0!==o[1]&&o[1],this._checkInitialized(),c.next=5,this.getClient().post("".concat(this._channelURL(),"/hide"),{user_id:s,clear_history:r});case 5:return c.abrupt("return",c.sent);case 6:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"show",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:null,this._checkInitialized(),l.next=4,this.getClient().post("".concat(this._channelURL(),"/show"),{user_id:s});case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"unbanUser",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().unbanUser(s,{type:this.type,id:this.id});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"shadowBan",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().shadowBan(s,he(he({},r),{},{type:this.type,id:this.id}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeShadowBan",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().removeShadowBan(s,{type:this.type,id:this.id});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"createCall",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL()+"/call",s);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"on",value:function(e,n){var s=this,r=n?e:"all",o=n||e;return r in this.listeners||(this.listeners[r]=[]),this._client.logger("info","Attaching listener for ".concat(r," event on channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[r].push(o),{unsubscribe:function(){s._client.logger("info","Removing listener for ".concat(r," event from channel ").concat(s.cid),{tags:["event","channel"],channel:s}),s.listeners[r]=s.listeners[r].filter(function(c){return c!==o})}}}},{key:"off",value:function(e,n){var s=n?e:"all",r=n||e;s in this.listeners||(this.listeners[s]=[]),this._client.logger("info","Removing listener for ".concat(s," event from channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[s]=this.listeners[s].filter(function(o){return o!==r})}},{key:"_handleChannelEvent",value:function(e){var n,s,r,o,l,c,u,d,g=this;this._client.logger("info","channel:_handleChannelEvent - Received event of type { ".concat(e.type," } on ").concat(this.cid),{tags:["event","channel"],channel:this});var m=g.state;switch(e.type){case"typing.start":null!==(n=e.user)&&void 0!==n&&n.id&&(m.typing[e.user.id]=e);break;case"typing.stop":null!==(s=e.user)&&void 0!==s&&s.id&&delete m.typing[e.user.id];break;case"message.read":var v,C;null!==(r=e.user)&&void 0!==r&&r.id&&e.created_at&&(m.read[e.user.id]={last_read:new Date(e.created_at),user:e.user,unread_messages:0},(null===(v=e.user)||void 0===v?void 0:v.id)===(null===(C=this.getClient().user)||void 0===C?void 0:C.id)&&(m.unreadCount=0));break;case"user.watching.start":case"user.updated":null!==(o=e.user)&&void 0!==o&&o.id&&(m.watchers[e.user.id]=e.user);break;case"user.watching.stop":null!==(l=e.user)&&void 0!==l&&l.id&&delete m.watchers[e.user.id];break;case"message.deleted":e.message&&(this._extendEventWithOwnReactions(e),e.hard_delete?m.removeMessage(e.message):m.addMessageSorted(e.message,!1,!1),m.removeQuotedMessageReferences(e.message),e.message.pinned&&m.removePinnedMessage(e.message));break;case"message.new":if(e.message){var B,z,te,R=(null===(B=e.user)||void 0===B?void 0:B.id)===(null===(z=this.getClient().user)||void 0===z?void 0:z.id);if((this.state.isUpToDate||e.message.parent_id&&!e.message.show_in_channel)&&m.addMessageSorted(e.message,R),e.message.pinned&&m.addPinnedMessage(e.message),null!==(te=e.user)&&void 0!==te&&te.id)for(var oe in m.read)oe===e.user.id?m.read[e.user.id]={last_read:new Date(e.created_at),user:e.user,unread_messages:0}:m.read[oe].unread_messages+=1;R?m.unreadCount=0:this._countMessageAsUnread(e.message)&&(m.unreadCount=m.unreadCount+1)}break;case"message.updated":e.message&&(this._extendEventWithOwnReactions(e),m.addMessageSorted(e.message,!1,!1),e.message.pinned?m.addPinnedMessage(e.message):m.removePinnedMessage(e.message));break;case"channel.truncated":if(null!==(c=e.channel)&&void 0!==c&&c.truncated_at){var se=+new Date(e.channel.truncated_at);m.messageSets.forEach(function(xe,De){xe.messages.forEach(function(Oe){se>+Oe.created_at&&m.removeMessage({id:Oe.id,messageSetIndex:De})})}),m.pinnedMessages.forEach(function(xe){se>+xe.created_at&&m.removePinnedMessage({id:xe.id})})}else m.clearMessages();m.unreadCount=0,e.message&&(m.addMessageSorted(e.message),e.message.pinned&&m.addPinnedMessage(e.message));break;case"member.added":case"member.updated":null!==(u=e.member)&&void 0!==u&&u.user_id&&(m.members[e.member.user_id]=e.member);break;case"member.removed":null!==(d=e.user)&&void 0!==d&&d.id&&delete m.members[e.user.id];break;case"channel.updated":var ee,de,ve,Ce,ye,fe;e.channel&&(g.data=he(he({},e.channel),{},{hidden:null!==(ee=null===(de=e.channel)||void 0===de?void 0:de.hidden)&&void 0!==ee?ee:null===(ve=g.data)||void 0===ve?void 0:ve.hidden,own_capabilities:null!==(Ce=null===(ye=e.channel)||void 0===ye?void 0:ye.own_capabilities)&&void 0!==Ce?Ce:null===(fe=g.data)||void 0===fe?void 0:fe.own_capabilities}));break;case"reaction.new":e.message&&e.reaction&&(e.message=m.addReaction(e.reaction,e.message));break;case"reaction.deleted":e.reaction&&(e.message=m.removeReaction(e.reaction,e.message));break;case"reaction.updated":e.reaction&&(e.message=m.addReaction(e.reaction,e.message,!0));break;case"channel.hidden":e.clear_history&&m.clearMessages()}void 0!==e.watcher_count&&(g.state.watcher_count=e.watcher_count)}},{key:"_checkInitialized",value:function(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error("Channel ".concat(this.cid," hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve"))}},{key:"_initializeState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest",s=this.getClient(),r=s.state,o=s.user,l=s.userID;if(e.members){var u,c=Dn(e.members);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.user&&r.updateUserReference(d.user,this.cid)}}catch(ee){c.e(ee)}finally{c.f()}}this.state.membership=e.membership||{};var g=e.messages||[];this.state.messages||this.state.initMessages();var v=this.state.addMessagesSorted(g,!1,!0,!0,n).messageSet;if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(e.pinned_messages||[]),e.pending_messages&&(this.state.pending_messages=e.pending_messages),this.state.watcher_count=e.watcher_count||0,e.watchers){var B,C=Dn(e.watchers);try{for(C.s();!(B=C.n()).done;){var z=B.value;z&&(r.updateUserReference(z,this.cid),this.state.watchers[z.id]=z)}}catch(ee){C.e(ee)}finally{C.f()}}if(null!=l&&o&&(this.state.read[o.id]={user:o,last_read:this.state.last_message_at||new Date,unread_messages:0}),e.read){var me,R=Dn(e.read);try{for(R.s();!(me=R.n()).done;){var oe,se=me.value;this.state.read[se.user.id]={last_read:new Date(se.last_read),unread_messages:null!==(oe=se.unread_messages)&&void 0!==oe?oe:0,user:se.user},se.user.id===o?.id&&(this.state.unreadCount=this.state.read[se.user.id].unread_messages)}}catch(ee){R.e(ee)}finally{R.f()}}return e.members&&(this.state.members=e.members.reduce(function(ee,de){return de.user&&(ee[de.user.id]=de),ee},{})),{messageSet:v}}},{key:"_extendEventWithOwnReactions",value:function(e){if(e.message){var n=this.state.findMessage(e.message.id,e.message.parent_id);n&&(e.message.own_reactions=n.own_reactions)}}},{key:"_disconnect",value:function(){this._client.logger("info","channel:disconnect() - Disconnecting the channel ".concat(this.cid),{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}}]),i;var a}();function mi(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}var fi=function(){function i(){We(this,i),(0,h.Z)(this,"users",void 0),(0,h.Z)(this,"userChannelReferences",void 0),this.users={},this.userChannelReferences={}}return xt(i,[{key:"updateUsers",value:function(e){var s,n=function Na(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function ja(i,a){if(i){if("string"==typeof i)return mi(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mi(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}(e);try{for(n.s();!(s=n.n()).done;)this.updateUser(s.value)}catch(o){n.e(o)}finally{n.f()}}},{key:"updateUser",value:function(e){null!=e&&(this.users[e.id]=e)}},{key:"updateUserReference",value:function(e,n){null!=e&&(this.updateUser(e),this.userChannelReferences[e.id]||(this.userChannelReferences[e.id]={}),this.userChannelReferences[e.id][n]=!0)}},{key:"deleteAllChannelReference",value:function(e){for(var n in this.userChannelReferences)delete this.userChannelReferences[n][e]}}]),i}();function _i(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function vi(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?_i(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):_i(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var $a=function i(){We(this,i),(0,h.Z)(this,"connectionStartTimestamp",void 0),(0,h.Z)(this,"wsConsecutiveFailures",void 0),(0,h.Z)(this,"wsTotalFailures",void 0),(0,h.Z)(this,"instanceClientId",void 0),this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=St()},Nt=function(){var i=(0,b.Z)(p().mark(function a(e,n){var s,r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:s=3,r=0;case 2:if(!(r<s)){l.next=17;break}return l.prev=3,l.next=6,Wt().post("https://chat-insights.getstream.io/insights/".concat(e),n);case 6:l.next=13;break;case 8:return l.prev=8,l.t0=l.catch(3),l.next=12,ft(3e3*(r+1));case 12:return l.abrupt("continue",14);case 13:return l.abrupt("break",17);case 14:r++,l.next=2;break;case 17:case"end":return l.stop()}},a,null,[[3,8]])}));return function(e,n){return i.apply(this,arguments)}}();function Ha(i,a){return vi(vi({},a),Ci(i))}function Ci(i){var a,e,n,s=i.client;return{ready_state:null===(a=i.ws)||void 0===a?void 0:a.readyState,url:i._buildUrl(),api_key:s.key,start_ts:s.insightMetrics.connectionStartTimestamp,end_ts:(new Date).getTime(),auth_type:s.getAuthType(),token:s.tokenManager.token,user_id:s.userID,user_details:s._user,device:s.options.device,client_id:i.connectionID,ws_details:i.ws,ws_consecutive_failures:s.insightMetrics.wsConsecutiveFailures,ws_total_failures:s.insightMetrics.wsTotalFailures,request_id:i.requestID,online:typeof navigator<"u"?null===(e=navigator)||void 0===e?void 0:e.onLine:null,user_agent:typeof navigator<"u"?null===(n=navigator)||void 0===n?void 0:n.userAgent:null,instance_client_id:s.insightMetrics.instanceClientId}}function qa(i){return Ci(i)}function yi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}var Ja=function(a){return void 0!==a.code},Va=function(a){return void 0!==a.error},Qa=function(){function i(a){var e=this,n=a.client;We(this,i),(0,h.Z)(this,"client",void 0),(0,h.Z)(this,"connectionID",void 0),(0,h.Z)(this,"connectionOpen",void 0),(0,h.Z)(this,"consecutiveFailures",void 0),(0,h.Z)(this,"pingInterval",void 0),(0,h.Z)(this,"healthCheckTimeoutRef",void 0),(0,h.Z)(this,"isConnecting",void 0),(0,h.Z)(this,"isDisconnected",void 0),(0,h.Z)(this,"isHealthy",void 0),(0,h.Z)(this,"isResolved",void 0),(0,h.Z)(this,"lastEvent",void 0),(0,h.Z)(this,"connectionCheckTimeout",void 0),(0,h.Z)(this,"connectionCheckTimeoutRef",void 0),(0,h.Z)(this,"rejectPromise",void 0),(0,h.Z)(this,"requestID",void 0),(0,h.Z)(this,"resolvePromise",void 0),(0,h.Z)(this,"totalFailures",void 0),(0,h.Z)(this,"ws",void 0),(0,h.Z)(this,"wsID",void 0),(0,h.Z)(this,"_buildUrl",function(){var s=encodeURIComponent(e.client._buildWSPayload(e.requestID)),r=e.client.tokenManager.getToken();return"".concat(e.client.wsBaseURL,"/connect?json=").concat(s,"&api_key=").concat(e.client.key,"&authorization=").concat(r,"&stream-auth-type=").concat(e.client.getAuthType(),"&X-Stream-Client=").concat(e.client.getUserAgent())}),(0,h.Z)(this,"onlineStatusChanged",function(s){"offline"===s.type?(e._log("onlineStatusChanged() - Status changing to offline"),e._setHealth(!1)):"online"===s.type&&(e._log("onlineStatusChanged() - Status changing to online. isHealthy: ".concat(e.isHealthy)),e.isHealthy||e._reconnect({interval:10}))}),(0,h.Z)(this,"onopen",function(s){e.wsID===s&&e._log("onopen() - onopen callback",{wsID:s})}),(0,h.Z)(this,"onmessage",function(s,r){if(e.wsID===s){e._log("onmessage() - onmessage callback",{event:r,wsID:s});var o="string"==typeof r.data?JSON.parse(r.data):null;if(!e.isResolved&&o){var l,c;if(e.isResolved=!0,o.error)return void(null===(c=e.rejectPromise)||void 0===c||c.call(e,e._errorFromWSEvent(o,!1)));null===(l=e.resolvePromise)||void 0===l||l.call(e,o),e._setHealth(!0)}e.lastEvent=new Date,o&&"health.check"===o.type&&e.scheduleNextPing(),e.client.handleEvent(r),e.scheduleConnectionCheck()}}),(0,h.Z)(this,"onclose",function(s,r){if(e.wsID===s)if(e._log("onclose() - onclose callback - "+r.code,{event:r,wsID:s}),r.code===Pt.WS_CLOSED_SUCCESS){var o,l=new Error("WS connection reject with error ".concat(r.reason));l.reason=r.reason,l.code=r.code,l.wasClean=r.wasClean,l.target=r.target,null===(o=e.rejectPromise)||void 0===o||o.call(e,l),e._log("onclose() - WS connection reject with error ".concat(r.reason),{event:r})}else{var c;e.consecutiveFailures+=1,e.totalFailures+=1,e._setHealth(!1),e.isConnecting=!1,null===(c=e.rejectPromise)||void 0===c||c.call(e,e._errorFromWSEvent(r)),e._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),e._reconnect()}}),(0,h.Z)(this,"onerror",function(s,r){var o;e.wsID===s&&(e.consecutiveFailures+=1,e.totalFailures+=1,e._setHealth(!1),e.isConnecting=!1,null===(o=e.rejectPromise)||void 0===o||o.call(e,e._errorFromWSEvent(r)),e._log("onerror() - WS connection resulted into error",{event:r}),e._reconnect())}),(0,h.Z)(this,"_setHealth",function(s){if(s!==e.isHealthy){if(e.isHealthy=s,e.isHealthy)return void e.client.dispatchEvent({type:"connection.changed",online:e.isHealthy});setTimeout(function(){e.isHealthy||e.client.dispatchEvent({type:"connection.changed",online:e.isHealthy})},5e3)}}),(0,h.Z)(this,"_errorFromWSEvent",function(s){var o,l,c,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ja(s)&&(o=s.code,l="unknown",c=s.reason),Va(s)&&(o=s.error.code,l=s.error.StatusCode,c=s.error.message),e._log("_errorFromWSEvent() - WS failed with code ".concat(o),{event:s},"warn");var u=new Error("WS failed with code ".concat(o," and reason - ").concat(c));return u.code=o,u.StatusCode=l,u.isWSFailure=r,u}),(0,h.Z)(this,"_setupConnectionPromise",function(){e.isResolved=!1,e.connectionOpen=new Promise(function(s,r){e.resolvePromise=s,e.rejectPromise=r})}),(0,h.Z)(this,"scheduleNextPing",function(){e.healthCheckTimeoutRef&&clearTimeout(e.healthCheckTimeoutRef),e.healthCheckTimeoutRef=setTimeout(function(){var s=[{type:"health.check",client_id:e.client.clientID}];try{var r;null===(r=e.ws)||void 0===r||r.send(JSON.stringify(s))}catch{}},e.pingInterval)}),(0,h.Z)(this,"scheduleConnectionCheck",function(){e.connectionCheckTimeoutRef&&clearTimeout(e.connectionCheckTimeoutRef),e.connectionCheckTimeoutRef=setTimeout(function(){e.lastEvent&&(new Date).getTime()-e.lastEvent.getTime()>e.connectionCheckTimeout&&(e._log("scheduleConnectionCheck - going to reconnect"),e._setHealth(!1),e._reconnect())},e.connectionCheckTimeout)}),this.client=n,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25e3,this.connectionCheckTimeout=this.pingInterval+1e4,di(this.onlineStatusChanged)}return xt(i,[{key:"_log",value:function(e){this.client.logger(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info","connection:"+e,function Ya(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?yi(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):yi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}({tags:["connection"]},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"setClient",value:function(e){this.client=e}},{key:"connect",value:(a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=o.length>0&&void 0!==o[0]?o[0]:15e3,!this.isConnecting){c.next=3;break}throw Error("You've called connect twice, can only attempt 1 connection at the time");case 3:return this.isDisconnected=!1,c.prev=4,c.next=7,this._connect();case 7:r=c.sent,this.consecutiveFailures=0,this._log("connect() - Established ws connection with healthcheck: ".concat(r)),c.next=23;break;case 12:if(c.prev=12,c.t0=c.catch(4),this.isHealthy=!1,this.consecutiveFailures+=1,c.t0.code!==Pt.TOKEN_EXPIRED||this.client.tokenManager.isStatic()){c.next=21;break}this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}),c.next=23;break;case 21:if(c.t0.isWSFailure){c.next=23;break}throw new Error(JSON.stringify({code:c.t0.code,StatusCode:c.t0.StatusCode,message:c.t0.message,isWSFailure:c.t0.isWSFailure}));case 23:return c.next=25,this._waitForHealthy(s);case 25:return c.abrupt("return",c.sent);case 26:case"end":return c.stop()}},n,this,[[4,12]])})),function e(){return a.apply(this,arguments)})},{key:"_waitForHealthy",value:function(){var a=(0,b.Z)(p().mark(function n(){var r,s=this,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:15e3,c.abrupt("return",Promise.race([(0,b.Z)(p().mark(function u(){var d,g;return p().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:d=50,g=0;case 2:if(!(g<=r)){v.next=18;break}return v.prev=3,v.next=6,s.connectionOpen;case 6:return v.abrupt("return",v.sent);case 9:if(v.prev=9,v.t0=v.catch(3),g!==r){v.next=13;break}throw new Error(JSON.stringify({code:v.t0.code,StatusCode:v.t0.StatusCode,message:v.t0.message,isWSFailure:v.t0.isWSFailure}));case 13:return v.next=15,ft(d);case 15:g+=d,v.next=2;break;case 18:case"end":return v.stop()}},u,null,[[3,9]])}))(),(0,b.Z)(p().mark(function u(){return p().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,ft(r);case 2:throw s.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}));case 4:case"end":return g.stop()}},u)}))()]));case 2:case"end":return c.stop()}},n)}));return function e(){return a.apply(this,arguments)}}()},{key:"disconnect",value:function(e){var n=this;this._log("disconnect() - Closing the websocket connection for wsID ".concat(this.wsID)),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),hi(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();var s,r=this.ws;return r&&r.close&&r.readyState===r.OPEN?(s=new Promise(function(o){var l=function(u){n._log("disconnect() - resolving isClosedPromise ".concat(u?"with":"without"," close frame"),{event:u}),o()};r.onclose=l,setTimeout(l,e??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(Pt.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),s=Promise.resolve()),delete this.ws,s}},{key:"_connect",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o,l;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)){u.next=2;break}return u.abrupt("return");case 2:return this.isConnecting=!0,this.requestID=St(),this.client.insightMetrics.connectionStartTimestamp=(new Date).getTime(),s=!1,u.prev=6,this._log("_connect() - waiting for token"),u.next=10,this.client.tokenManager.tokenReady();case 10:s=!0,u.next=15;break;case 13:u.prev=13,u.t0=u.catch(6);case 15:if(u.prev=15,s){u.next=20;break}return this._log("_connect() - tokenProvider failed before, so going to retry"),u.next=20,this.client.tokenManager.loadToken();case 20:return this._setupConnectionPromise(),r=this._buildUrl(),this._log("_connect() - Connecting to ".concat(r),{wsURL:r,requestID:this.requestID}),this.ws=new(ga())(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID),u.next=30,this.connectionOpen;case 30:if(o=u.sent,this.isConnecting=!1,!o){u.next=36;break}return this.connectionID=o.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Nt("ws_success_after_failure",qa(this)),this.client.insightMetrics.wsConsecutiveFailures=0),u.abrupt("return",o);case 36:u.next=44;break;case 38:throw u.prev=38,u.t1=u.catch(15),this.isConnecting=!1,this._log("_connect() - Error - ",u.t1),this.client.options.enableInsights&&(this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++,l=Ha(this,Ra(u.t1)),Nt?.("ws_fatal",l)),u.t1;case 44:case"end":return u.stop()}},n,this,[[6,13],[15,38]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_reconnect",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=o.length>0&&void 0!==o[0]?o[0]:{},this._log("_reconnect() - Initiating the reconnect"),!this.isConnecting&&!this.isHealthy){c.next=5;break}return this._log("_reconnect() - Abort (1) since already connecting or healthy"),c.abrupt("return");case 5:return(r=s.interval)||(r=en(this.consecutiveFailures)),c.next=9,ft(r);case 9:if(!this.isConnecting&&!this.isHealthy){c.next=12;break}return this._log("_reconnect() - Abort (2) since already connecting or healthy"),c.abrupt("return");case 12:if(!this.isDisconnected||!this.client.options.enableWSFallback){c.next=15;break}return this._log("_reconnect() - Abort (3) since disconnect() is called"),c.abrupt("return");case 15:if(this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),!s.refreshToken){c.next=20;break}return c.next=20,this.client.tokenManager.loadToken();case 20:return c.prev=20,c.next=23,this._connect();case 23:return this._log("_reconnect() - Waiting for recoverCallBack"),c.next=26,this.client.recoverState();case 26:this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0,c.next=38;break;case 30:if(c.prev=30,c.t0=c.catch(20),this.isHealthy=!1,this.consecutiveFailures+=1,c.t0.code!==Pt.TOKEN_EXPIRED||this.client.tokenManager.isStatic()){c.next=37;break}return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),c.abrupt("return",this._reconnect({refreshToken:!0}));case 37:c.t0.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect());case 38:this._log("_reconnect() - == END ==");case 39:case"end":return c.stop()}},n,this,[[20,30]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_destroyCurrentWSConnection",value:function(){this.wsID+=1;try{var e,n;null==this||null===(e=this.ws)||void 0===e||e.removeAllListeners(),null==this||null===(n=this.ws)||void 0===n||n.close()}catch{}}}]),i;var a}(),Ga=null;function wi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Di(i,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof a)throw new TypeError("userId should be a string");throw function Wa(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?wi(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):wi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}}({user_id:a},e),Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.")}function bi(i){var n=Mt({algorithm:"HS256",noTimestamp:!0},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return Ga.sign({server:!0},i,n)}var tr=function i(a){var e=this;We(this,i),(0,h.Z)(this,"loadTokenPromise",void 0),(0,h.Z)(this,"type",void 0),(0,h.Z)(this,"secret",void 0),(0,h.Z)(this,"token",void 0),(0,h.Z)(this,"tokenProvider",void 0),(0,h.Z)(this,"user",void 0),(0,h.Z)(this,"setTokenOrProvider",function(){var n=(0,b.Z)(p().mark(function s(r,o){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e.validateToken(r,o),e.user=o,wn(r)&&(e.tokenProvider=r,e.type="provider"),"string"==typeof r&&(e.token=r,e.type="static"),!r&&e.user&&e.secret&&(e.token=Di(e.secret,o.id,{},{}),e.type="static"),c.next=7,e.loadToken();case 7:case"end":return c.stop()}},s)}));return function(s,r){return n.apply(this,arguments)}}()),(0,h.Z)(this,"reset",function(){e.token=void 0,e.user=void 0,e.loadTokenPromise=null}),(0,h.Z)(this,"validateToken",function(n,s){if(!s||!s.anon||n){if(!e.secret&&!n)throw new Error("User token can not be empty");if(n&&"string"!=typeof n&&!wn(n))throw new Error("user token should either be a string or a function");if("string"==typeof n){if(s.anon&&""===n)return;var r=function Ka(i){var a=i.split(".");if(3!==a.length)return"";var n=function(a){var r,c,d,e={},n=String.fromCharCode,s=a.length,o=0,u=0,g="";for(r=0;r<64;r++)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r)]=r;for(c=0;c<s;c++)for(o=(o<<6)+e[a.charAt(c)],u+=6;u>=8;)((d=o>>>(u-=8)&255)||c<s-2)&&(g+=n(d));return g}(a[1]);return JSON.parse(n).user_id}(n);if(null!=n&&(null==r||""===r||r!==s.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}}),(0,h.Z)(this,"tokenReady",function(){return e.loadTokenPromise}),(0,h.Z)(this,"loadToken",function(){return e.loadTokenPromise=new Promise(function(){var n=(0,b.Z)(p().mark(function s(r,o){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("static"!==e.type){c.next=2;break}return c.abrupt("return",r(e.token));case 2:if(!e.tokenProvider||"string"==typeof e.tokenProvider){c.next=13;break}return c.prev=3,c.next=6,e.tokenProvider();case 6:e.token=c.sent,c.next=12;break;case 9:return c.prev=9,c.t0=c.catch(3),c.abrupt("return",o(new Error("Call to tokenProvider failed with message: ".concat(c.t0))));case 12:r(e.token);case 13:case"end":return c.stop()}},s,null,[[3,9]])}));return function(s,r){return n.apply(this,arguments)}}()),e.loadTokenPromise}),(0,h.Z)(this,"getToken",function(){if(e.token||e.user&&e.user.anon&&!e.token)return e.token;if(e.secret)return bi(e.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")}),(0,h.Z)(this,"isStatic",function(){return"static"===e.type}),this.loadTokenPromise=null,a&&(this.secret=a),this.type="static",this.secret&&(this.token=bi(this.secret))},nr={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function ir(i){return void 0!==i.code}function Ti(i){if(!i.code)return!1;var a=nr["".concat(i.code)];return!!a&&a.retryable}function sr(i){return 46===i.code}function ar(i){if("boolean"==typeof i.isWSFailure)return i.isWSFailure;try{return JSON.parse(i.message).isWSFailure}catch{return!1}}function Mi(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Tn(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?Mi(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Mi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var Te=(()=>(function(i){i.Closed="CLOSED",i.Connected="CONNECTED",i.Connecting="CONNECTING",i.Disconnected="DISCONNECTED",i.Init="INIT"}(Te||(Te={})),Te))(),or=function(){function i(a){var e=this,n=a.client;We(this,i),(0,h.Z)(this,"client",void 0),(0,h.Z)(this,"state",void 0),(0,h.Z)(this,"consecutiveFailures",void 0),(0,h.Z)(this,"connectionID",void 0),(0,h.Z)(this,"cancelToken",void 0),(0,h.Z)(this,"_onlineStatusChanged",function(s){var r;if(e._log("_onlineStatusChanged() - ".concat(s.type)),"offline"===s.type)return e._setState(Te.Closed),null===(r=e.cancelToken)||void 0===r||r.cancel("disconnect() is called"),void(e.cancelToken=void 0);"online"===s.type&&e.state===Te.Closed&&e.connect(!0)}),(0,h.Z)(this,"_req",function(){var s=(0,b.Z)(p().mark(function r(o,l,c){var u,d;return p().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return!e.cancelToken&&!o.close&&(e.cancelToken=Wt().CancelToken.source()),m.prev=1,m.next=4,e.client.doAxiosRequest("get",e.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:Tn(Tn({},l),{},{cancelToken:null===(u=e.cancelToken)||void 0===u?void 0:u.token}),params:o});case 4:return d=m.sent,e.consecutiveFailures=0,m.abrupt("return",d);case 9:if(m.prev=9,m.t0=m.catch(1),e.consecutiveFailures+=1,!c||!Ti(m.t0)){m.next=17;break}return e._log("_req() - Retryable error, retrying request"),m.next=16,ft(en(e.consecutiveFailures));case 16:return m.abrupt("return",e._req(o,l,c));case 17:throw m.t0;case 18:case"end":return m.stop()}},r,null,[[1,9]])}));return function(r,o,l){return s.apply(this,arguments)}}()),(0,h.Z)(this,"_poll",(0,b.Z)(p().mark(function s(){var r,o,l;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e.state!==Te.Connected){u.next=25;break}return u.prev=1,u.next=4,e._req({},{timeout:3e4},!0);case 4:if(null!==(r=(o=u.sent).events)&&void 0!==r&&r.length)for(l=0;l<o.events.length;l++)e.client.dispatchEvent(o.events[l]);u.next=23;break;case 8:if(u.prev=8,u.t0=u.catch(1),!Wt().isCancel(u.t0)){u.next=13;break}return e._log("_poll() - axios canceled request"),u.abrupt("return");case 13:if(!sr(u.t0)){u.next=18;break}return e._log("_poll() - ConnectionID error, connecting without ID..."),e._setState(Te.Disconnected),e.connect(!0),u.abrupt("return");case 18:if(!ir(u.t0)||Ti(u.t0)){u.next=21;break}return e._setState(Te.Closed),u.abrupt("return");case 21:return u.next=23,ft(en(e.consecutiveFailures));case 23:u.next=0;break;case 25:case"end":return u.stop()}},s,null,[[1,8]])}))),(0,h.Z)(this,"connect",(0,b.Z)(p().mark(function s(){var r,l,c=arguments;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r=c.length>0&&void 0!==c[0]&&c[0],e.state!==Te.Connecting){d.next=4;break}return e._log("connect() - connecting already in progress",{reconnect:r},"warn"),d.abrupt("return");case 4:if(e.state!==Te.Connected){d.next=7;break}return e._log("connect() - already connected and polling",{reconnect:r},"warn"),d.abrupt("return");case 7:return e._setState(Te.Connecting),e.connectionID=void 0,d.prev=9,d.next=12,e._req({json:e.client._buildWSPayload()},{timeout:8e3},r);case 12:return l=d.sent.event,e._setState(Te.Connected),e.connectionID=l.connection_id,e.client.dispatchEvent(l),e._poll(),r&&e.client.recoverState(),d.abrupt("return",l);case 22:throw d.prev=22,d.t0=d.catch(9),e._setState(Te.Closed),d.t0;case 26:case"end":return d.stop()}},s,null,[[9,22]])}))),(0,h.Z)(this,"isHealthy",function(){return!!e.connectionID&&e.state===Te.Connected}),(0,h.Z)(this,"disconnect",(0,b.Z)(p().mark(function s(){var r,o,l,c=arguments;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=c.length>0&&void 0!==c[0]?c[0]:2e3,hi(e._onlineStatusChanged),e._setState(Te.Disconnected),null===(r=e.cancelToken)||void 0===r||r.cancel("disconnect() is called"),e.cancelToken=void 0,l=e.connectionID,e.connectionID=void 0,d.prev=7,d.next=10,e._req({close:!0,connection_id:l},{timeout:o},!1);case 10:e._log("disconnect() - Closed connectionID"),d.next=16;break;case 13:d.prev=13,d.t0=d.catch(7),e._log("disconnect() - Failed",{err:d.t0},"error");case 16:case"end":return d.stop()}},s,null,[[7,13]])}))),this.client=n,this.state=Te.Init,this.consecutiveFailures=0,di(this._onlineStatusChanged)}return xt(i,[{key:"_log",value:function(e){this.client.logger(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info","WSConnectionFallback:"+e,Tn({tags:["connection_fallback","connection"]},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"_setState",value:function(e){this._log("_setState() - ".concat(e)),this.state===Te.Connecting&&e===Te.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(e===Te.Closed||e===Te.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=e}}]),i}();var ur=function(i){!function ma(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),a&&Zt(i,a)}(e,i);var a=function lr(i){var a=function cr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var s,n=Rt(i);if(a){var r=Rt(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return function fa(i,a){if(a&&("object"===(0,mt.Z)(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return Kt(i)}(this,s)}}(e);function e(){var n;We(this,e);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=a.call.apply(a,[this].concat(r)),(0,h.Z)(Kt(n),"code",void 0),(0,h.Z)(Kt(n),"response",void 0),(0,h.Z)(Kt(n),"status",void 0),n}return e}(Cn(Error)),dr=["created_at","updated_at","last_active","online"],hr=["params","headers"];function jt(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function pr(i,a){if(i){if("string"==typeof i)return xi(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xi(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}function xi(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function Si(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function $(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?Si(Object(e),!0).forEach(function(n){(0,h.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Si(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function At(i){return"string"==typeof i||i instanceof String}var Ai=function(){function i(a,e,n){var r,s=this;We(this,i),(0,h.Z)(this,"_user",void 0),(0,h.Z)(this,"activeChannels",void 0),(0,h.Z)(this,"anonymous",void 0),(0,h.Z)(this,"persistUserOnConnectionFailure",void 0),(0,h.Z)(this,"axiosInstance",void 0),(0,h.Z)(this,"baseURL",void 0),(0,h.Z)(this,"browser",void 0),(0,h.Z)(this,"cleaningIntervalRef",void 0),(0,h.Z)(this,"clientID",void 0),(0,h.Z)(this,"configs",void 0),(0,h.Z)(this,"key",void 0),(0,h.Z)(this,"listeners",void 0),(0,h.Z)(this,"logger",void 0),(0,h.Z)(this,"recoverStateOnReconnect",void 0),(0,h.Z)(this,"mutedChannels",void 0),(0,h.Z)(this,"mutedUsers",void 0),(0,h.Z)(this,"node",void 0),(0,h.Z)(this,"options",void 0),(0,h.Z)(this,"secret",void 0),(0,h.Z)(this,"setUserPromise",void 0),(0,h.Z)(this,"state",void 0),(0,h.Z)(this,"tokenManager",void 0),(0,h.Z)(this,"user",void 0),(0,h.Z)(this,"userAgent",void 0),(0,h.Z)(this,"userID",void 0),(0,h.Z)(this,"wsBaseURL",void 0),(0,h.Z)(this,"wsConnection",void 0),(0,h.Z)(this,"wsFallback",void 0),(0,h.Z)(this,"wsPromise",void 0),(0,h.Z)(this,"consecutiveFailures",void 0),(0,h.Z)(this,"insightMetrics",void 0),(0,h.Z)(this,"defaultWSTimeoutWithFallback",void 0),(0,h.Z)(this,"defaultWSTimeout",void 0),(0,h.Z)(this,"nextRequestAbortController",null),(0,h.Z)(this,"_getConnectionID",function(){var l,c;return(null===(l=s.wsConnection)||void 0===l?void 0:l.connectionID)||(null===(c=s.wsFallback)||void 0===c?void 0:c.connectionID)}),(0,h.Z)(this,"_hasConnectionID",function(){return Boolean(s._getConnectionID())}),(0,h.Z)(this,"connectUser",function(){var l=(0,b.Z)(p().mark(function c(u,d){var g,m;return p().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(u.id){C.next=2;break}throw new Error('The "id" field on the user is missing');case 2:if(s.userID!==u.id||!s.setUserPromise){C.next=5;break}return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),C.abrupt("return",s.setUserPromise);case 5:if(!s.userID){C.next=7;break}throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");case 7:return(s._isUsingServerAuth()||s.node)&&!s.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.userID=u.id,s.anonymous=!1,g=s._setToken(u,d),s._setUser(u),m=s.openConnection(),s.setUserPromise=Promise.all([g,m]).then(function(B){return B[1]}),C.prev=14,C.next=17,s.setUserPromise;case 17:return C.abrupt("return",C.sent);case 20:throw C.prev=20,C.t0=C.catch(14),s.persistUserOnConnectionFailure?s.closeConnection():s.disconnectUser(),C.t0;case 24:case"end":return C.stop()}},c,null,[[14,20]])}));return function(c,u){return l.apply(this,arguments)}}()),(0,h.Z)(this,"setUser",this.connectUser),(0,h.Z)(this,"_setToken",function(l,c){return s.tokenManager.setTokenOrProvider(c,l)}),(0,h.Z)(this,"closeConnection",function(){var l=(0,b.Z)(p().mark(function c(u){var d,g;return p().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return null!=s.cleaningIntervalRef&&(clearInterval(s.cleaningIntervalRef),s.cleaningIntervalRef=void 0),v.next=3,Promise.all([null===(d=s.wsConnection)||void 0===d?void 0:d.disconnect(u),null===(g=s.wsFallback)||void 0===g?void 0:g.disconnect(u)]);case 3:return v.abrupt("return",Promise.resolve());case 4:case"end":return v.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),(0,h.Z)(this,"openConnection",(0,b.Z)(p().mark(function l(){var c,u,d;return p().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s.userID){m.next=2;break}throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");case 2:if(null===(c=s.wsConnection)||void 0===c||!c.isConnecting||!s.wsPromise){m.next=5;break}return s.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),m.abrupt("return",s.wsPromise);case 5:if(!(null!==(u=s.wsConnection)&&void 0!==u&&u.isHealthy||null!==(d=s.wsFallback)&&void 0!==d&&d.isHealthy())||!s._hasConnectionID()){m.next=8;break}return s.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]}),m.abrupt("return",Promise.resolve());case 8:return s.clientID="".concat(s.userID,"--").concat(St()),s.wsPromise=s.connect(),s._startCleaning(),m.abrupt("return",s.wsPromise);case 12:case"end":return m.stop()}},l)}))),(0,h.Z)(this,"_setupConnection",this.openConnection),(0,h.Z)(this,"_normalizeDate",function(l){if(l instanceof Date&&(l=l.toISOString()),""===l)throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return l}),(0,h.Z)(this,"disconnectUser",function(){var l=(0,b.Z)(p().mark(function c(u){var d,g,m;return p().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:for(s.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete s.user,delete s._user,delete s.userID,s.anonymous=!1,d=s.closeConnection(u),g=0,m=Object.values(s.activeChannels);g<m.length;g++)m[g]._disconnect();return s.activeChannels={},s.state=new fi,setTimeout(s.tokenManager.reset),B.abrupt("return",d);case 11:case"end":return B.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),(0,h.Z)(this,"disconnect",this.disconnectUser),(0,h.Z)(this,"connectAnonymousUser",function(){(s._isUsingServerAuth()||s.node)&&!s.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.anonymous=!0,s.userID=St();var l={id:s.userID,anon:!0};return s._setToken(l,""),s._setUser(l),s._setupConnection()}),(0,h.Z)(this,"setAnonymousUser",this.connectAnonymousUser),(0,h.Z)(this,"doAxiosRequest",function(){var l=(0,b.Z)(p().mark(function c(u,d,g){var m,v,C,B,z=arguments;return p().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return m=z.length>3&&void 0!==z[3]?z[3]:{},R.next=3,s.tokenManager.tokenReady();case 3:v=s._enrichAxiosOptions(m),R.prev=4,s._logApiRequest(u,d,g,v),R.t0=u,R.next="get"===R.t0?9:"delete"===R.t0?13:"post"===R.t0?17:"put"===R.t0?21:"patch"===R.t0?25:"options"===R.t0?29:33;break;case 9:return R.next=11,s.axiosInstance.get(d,v);case 11:case 15:case 19:case 23:case 27:case 31:return C=R.sent,R.abrupt("break",34);case 13:return R.next=15,s.axiosInstance.delete(d,v);case 17:return R.next=19,s.axiosInstance.post(d,g,v);case 21:return R.next=23,s.axiosInstance.put(d,g,v);case 25:return R.next=27,s.axiosInstance.patch(d,g,v);case 29:return R.next=31,s.axiosInstance.options(d,v);case 33:throw new Error("Invalid request type");case 34:return s._logApiResponse(u,d,C),s.consecutiveFailures=0,R.abrupt("return",s.handleResponse(C));case 39:if(R.prev=39,R.t1=R.catch(4),R.t1.client_request_id=null===(B=v.headers)||void 0===B?void 0:B["x-client-request-id"],s._logApiError(u,d,R.t1),s.consecutiveFailures+=1,!R.t1.response){R.next=56;break}if(R.t1.response.data.code!==Pt.TOKEN_EXPIRED||s.tokenManager.isStatic()){R.next=53;break}if(!(s.consecutiveFailures>1)){R.next=49;break}return R.next=49,ft(en(s.consecutiveFailures));case 49:return s.tokenManager.loadToken(),R.next=52,s.doAxiosRequest(u,d,g,m);case 52:return R.abrupt("return",R.sent);case 53:return R.abrupt("return",s.handleResponse(R.t1.response));case 56:throw R.t1;case 57:case"end":return R.stop()}},c,null,[[4,39]])}));return function(c,u,d){return l.apply(this,arguments)}}()),(0,h.Z)(this,"dispatchEvent",function(l){l.received_at||(l.received_at=new Date);var c=s._handleClientEvent(l),u=l.cid,d=u?s.activeChannels[u]:void 0;d&&d._handleChannelEvent(l),s._callClientListeners(l),d&&d._callChannelListeners(l),c.forEach(function(g){return g()})}),(0,h.Z)(this,"handleEvent",function(l){var u=JSON.parse(l.data);s.dispatchEvent(u)}),(0,h.Z)(this,"_updateMemberWatcherReferences",function(l){var c=s.state.userChannelReferences[l.id]||{};for(var u in c){var d=s.activeChannels[u];null!=d&&d.state&&(d.state.members[l.id]&&(d.state.members[l.id].user=l),d.state.watchers[l.id]&&(d.state.watchers[l.id]=l))}}),(0,h.Z)(this,"_updateUserReferences",this._updateMemberWatcherReferences),(0,h.Z)(this,"_updateUserMessageReferences",function(l){var c=s.state.userChannelReferences[l.id]||{};for(var u in c)s.activeChannels[u].state?.updateUserMessages(l)}),(0,h.Z)(this,"_deleteUserMessageReference",function(l){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=s.state.userChannelReferences[l.id]||{};for(var d in u)s.activeChannels[d].state?.deleteUserMessages(l,c)}),(0,h.Z)(this,"_handleUserEvent",function(l){if(l.user){if("user.presence.changed"===l.type||"user.updated"===l.type){if(l.user.id===s.userID){var c=$({},s.user||{}),u=$({},s._user||{});for(var d in s.user)d in l.user||Ea(d)||(delete c[d],delete u[d]);for(var g in l.user)u&&g in u&&(u[g]=l.user[g]);s._user=$({},u),s.user=$($({},c),l.user)}s.state.updateUser(l.user),s._updateMemberWatcherReferences(l.user)}"user.updated"===l.type&&s._updateUserMessageReferences(l.user),"user.deleted"===l.type&&l.user.deleted_at&&(l.mark_messages_deleted||l.hard_delete)&&s._deleteUserMessageReference(l.user,l.hard_delete)}}),(0,h.Z)(this,"_callClientListeners",function(l){var c=s,u=[];c.listeners.all&&u.push.apply(u,Re(c.listeners.all)),c.listeners[l.type]&&u.push.apply(u,Re(c.listeners[l.type]));for(var d=0,g=u;d<g.length;d++)(0,g[d])(l)}),(0,h.Z)(this,"recoverState",(0,b.Z)(p().mark(function l(){var c;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s.logger("info","client:recoverState() - Start of recoverState with connectionID ".concat(s._getConnectionID()),{tags:["connection"]}),!(c=Object.keys(s.activeChannels)).length||!s.recoverStateOnReconnect){d.next=10;break}return s.logger("info","client:recoverState() - Start the querying of ".concat(c.length," channels"),{tags:["connection","client"]}),d.next=6,s.queryChannels({cid:{$in:c}},{last_message_at:-1},{limit:30});case 6:s.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),s.dispatchEvent({type:"connection.recovered"}),d.next=11;break;case 10:s.dispatchEvent({type:"connection.recovered"});case 11:s.wsPromise=Promise.resolve(),s.setUserPromise=Promise.resolve();case 13:case"end":return d.stop()}},l)}))),(0,h.Z)(this,"getChannelByMembers",function(l,c){var u=Re(c.members||[]).sort().join(","),d="".concat(l,":!members-").concat(u);if(!u)throw Error("Please specify atleast one member when creating unique conversation");for(var g in s.activeChannels){var m=s.activeChannels[g];if(!m.disconnected){if(g===d)return m;if(0===g.indexOf("".concat(l,":!members-"))&&Object.keys(m.state.members).sort().join(",")===u)return m}}var C=new bn(s,l,void 0,c);return s.activeChannels[d]=C,C}),(0,h.Z)(this,"getChannelById",function(l,c,u){if("string"==typeof c&&~c.indexOf(":"))throw Error("Invalid channel id ".concat(c,", can't contain the : character"));var d="".concat(l,":").concat(c);if(d in s.activeChannels&&!s.activeChannels[d].disconnected){var g=s.activeChannels[d];return Object.keys(u).length>0&&(g.data=u,g._data=u),g}var m=new bn(s,l,c,u);return s.activeChannels[m.cid]=m,m}),(0,h.Z)(this,"updateUsers",this.upsertUsers),(0,h.Z)(this,"updateUser",this.upsertUser),(0,h.Z)(this,"markAllRead",this.markChannelsRead),(0,h.Z)(this,"_isUsingServerAuth",function(){return!!s.secret}),(0,h.Z)(this,"_buildWSPayload",function(l){return JSON.stringify({user_id:s.userID,user_details:s._user,device:s.options.device,client_request_id:l})}),this.key=a,this.listeners={},this.state=new fi,this.mutedChannels=[],this.mutedUsers=[],e&&At(e)&&(this.secret=e);var o=n||(e&&!At(e)?e:{});this.browser=typeof o.browser<"u"?o.browser:typeof window<"u",this.node=!this.browser,this.options=$({timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0},o),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new Da.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=Wt().create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+process.env.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=null===(r=this.options)||void 0===r?void 0:r.persistUserOnConnectionFailure,this.tokenManager=new tr(this.secret),this.consecutiveFailures=0,this.insightMetrics=new $a,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.logger=wn(o.logger)?o.logger:function(){return null},this.recoverStateOnReconnect=this.options.recoverStateOnReconnect}return xt(i,[{key:"devToken",value:function(e){return function Xa(i){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",ya(JSON.stringify({user_id:i})),"devtoken"].join(".")}(e)}},{key:"getAuthType",value:function(){return this.anonymous?"anonymous":"jwt"}},{key:"setBaseURL",value:function(e){this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}},{key:"_setUser",value:function(e){this.user=e,this.userID=e.id,this._user=$({},e)}},{key:"updateAppSettings",value:(a=(0,b.Z)(p().mark(function n(s){var r;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return null!=(r=s.apn_config)&&r.p12_cert&&(s=$($({},s),{},{apn_config:$($({},r),{},{p12_cert:Buffer.from(r.p12_cert).toString("base64")})})),l.next=4,this.patch(this.baseURL+"/app",s);case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}},n,this)})),function e(n){return a.apply(this,arguments)})},{key:"revokeTokens",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(s)});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"revokeUserToken",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.revokeUsersToken([s],r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"revokeUsersToken",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l,c;return p().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:r=void 0===r?(new Date).toISOString():this._normalizeDate(r),o=[],l=jt(s);try{for(l.s();!(c=l.n()).done;)o.push({id:c.value,set:{revoke_tokens_issued_before:r}})}catch(m){l.e(m)}finally{l.f()}return g.next=6,this.partialUpdateUsers(o);case 6:return g.abrupt("return",g.sent);case 7:case"end":return g.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getAppSettings",value:function(){var a=(0,b.Z)(p().mark(function n(){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(this.baseURL+"/app");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"testPushSettings",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/check_push",$($($($($($($({user_id:s},r.messageID?{message_id:r.messageID}:{}),r.apnTemplate?{apn_template:r.apnTemplate}:{}),r.firebaseTemplate?{firebase_template:r.firebaseTemplate}:{}),r.firebaseDataTemplate?{firebase_data_template:r.firebaseDataTemplate}:{}),r.skipDevices?{skip_devices:!0}:{}),r.pushProviderName?{push_provider_name:r.pushProviderName}:{}),r.pushProviderType?{push_provider_type:r.pushProviderType}:{}));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"testSQSSettings",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.post(this.baseURL+"/check_sqs",s);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"setGuestUser",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,l;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.anonymous=!0,u.prev=1,u.next=4,this.post(this.baseURL+"/guest",{user:s});case 4:r=u.sent,u.next=11;break;case 7:throw u.prev=7,u.t0=u.catch(1),this.anonymous=!1,u.t0;case 11:return this.anonymous=!1,l=si(r.user,dr),u.next=15,this.connectUser(l,r.access_token);case 15:return u.abrupt("return",u.sent);case 16:case"end":return u.stop()}},n,this,[[1,7]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"createToken",value:function(e,n,s){if(null==this.secret)throw Error("tokens can only be created server-side using the API Secret");var r={};return n&&(r.exp=n),s&&(r.iat=s),Di(this.secret,e,r,{})}},{key:"on",value:function(e,n){var s=this,r=n?e:"all",o=n||e;return r in this.listeners||(this.listeners[r]=[]),this.logger("info","Attaching listener for ".concat(r," event"),{tags:["event","client"]}),this.listeners[r].push(o),{unsubscribe:function(){s.logger("info","Removing listener for ".concat(r," event"),{tags:["event","client"]}),s.listeners[r]=s.listeners[r].filter(function(c){return c!==o})}}}},{key:"off",value:function(e,n){var s=n?e:"all",r=n||e;s in this.listeners||(this.listeners[s]=[]),this.logger("info","Removing listener for ".concat(s," event"),{tags:["event","client"]}),this.listeners[s]=this.listeners[s].filter(function(o){return o!==r})}},{key:"_logApiRequest",value:function(e,n,s,r){this.logger("info","client: ".concat(e," - Request - ").concat(n),{tags:["api","api_request","client"],url:n,payload:s,config:r})}},{key:"_logApiResponse",value:function(e,n,s){this.logger("info","client:".concat(e," - Response - url: ").concat(n," > status ").concat(s.status),{tags:["api","api_response","client"],url:n,response:s})}},{key:"_logApiError",value:function(e,n,s){this.logger("error","client:".concat(e," - Error - url: ").concat(n),{tags:["api","api_response","client"],url:n,error:s})}},{key:"get",value:function(e,n){return this.doAxiosRequest("get",e,null,{params:n})}},{key:"put",value:function(e,n){return this.doAxiosRequest("put",e,n)}},{key:"post",value:function(e,n){return this.doAxiosRequest("post",e,n)}},{key:"patch",value:function(e,n){return this.doAxiosRequest("patch",e,n)}},{key:"delete",value:function(e,n){return this.doAxiosRequest("delete",e,null,{params:n})}},{key:"sendFile",value:function(e,n,s,r,o){var l=function Ia(i,a,e){var n=new(ha());return function Sa(i){return null!==i&&"object"===(0,mt.Z)(i)&&(i.readable||"function"==typeof i._read)}(i)||function Aa(i){return null!=i&&null!=i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}(i)||function Fa(i){return typeof window<"u"&&"File"in window&&i instanceof File}(i)||function ka(i){return typeof window<"u"&&"Blob"in window&&i instanceof Blob}(i)?a?n.append("file",i,a):n.append("file",i):n.append("file",{uri:i,name:a||i.split("/").reverse()[0],contentType:e||void 0,type:e||void 0}),n}(n,s,r);return null!=o&&l.append("user",JSON.stringify(o)),this.doAxiosRequest("post",e,l,{headers:l.getHeaders?l.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}},{key:"errorFromResponse",value:function(e){var n;return n=new ur("StreamChat error HTTP code: ".concat(e.status)),e.data&&e.data.code&&((n=new Error("StreamChat error code ".concat(e.data.code,": ").concat(e.data.message))).code=e.data.code),n.response=e,n.status=e.status,n}},{key:"handleResponse",value:function(e){var n=e.data;if(function rr(i){return!i.status||i.status<200||300<=i.status}(e))throw this.errorFromResponse(e);return n}},{key:"_handleClientEvent",value:function(e){var n,r,g,s=this,o=this,l=[];if(this.logger("info","client:_handleClientEvent - Received event of type { ".concat(e.type," }"),{tags:["event","client"],event:e}),("user.presence.changed"===e.type||"user.updated"===e.type||"user.deleted"===e.type)&&this._handleUserEvent(e),"health.check"===e.type&&e.me&&(o.user=e.me,o.state.updateUser(e.me),o.mutedChannels=e.me.channel_mutes,o.mutedUsers=e.me.mutes),e.channel&&"notification.message_new"===e.type&&this._addChannelConfig(e.channel),"notification.channel_mutes_updated"===e.type&&null!==(n=e.me)&&void 0!==n&&n.channel_mutes){var c=[],u=[];this.mutedChannels.forEach(function(m){return m.channel&&c.push(m.channel.cid)}),e.me.channel_mutes.forEach(function(m){return m.channel&&u.push(m.channel.cid)}),c.forEach(function(m){!u.includes(m)&&s.activeChannels[m]&&(s.activeChannels[m].state.unreadCount=0)}),this.mutedChannels=e.me.channel_mutes}return"notification.mutes_updated"===e.type&&null!==(r=e.me)&&void 0!==r&&r.mutes&&(this.mutedUsers=e.me.mutes),"notification.mark_read"===e.type&&0===e.unread_channels&&Object.keys(this.activeChannels).forEach(function(m){return s.activeChannels[m].state.unreadCount=0}),"channel.deleted"!==e.type&&"notification.channel_deleted"!==e.type||!e.cid||(o.state.deleteAllChannelReference(e.cid),null===(g=this.activeChannels[e.cid])||void 0===g||g._disconnect(),l.push(function(){e.cid&&delete s.activeChannels[e.cid]})),l}},{key:"_muteStatus",value:function(e){for(var n,s=0;s<this.mutedChannels.length;s++){var r,o=this.mutedChannels[s];if((null===(r=o.channel)||void 0===r?void 0:r.cid)===e){n={muted:!o.expires||new Date(o.expires).getTime()>(new Date).getTime(),createdAt:o.created_at?new Date(o.created_at):new Date,expiresAt:o.expires?new Date(o.expires):null};break}}return n||{muted:!1,createdAt:null,expiresAt:null}}},{key:"connect",value:function(){var a=(0,b.Z)(p().mark(function n(){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.userID&&this._user){r.next=2;break}throw Error("Call connectUser or connectAnonymousUser before starting the connection");case 2:if(this.wsBaseURL){r.next=4;break}throw Error("Websocket base url not set");case 4:if(this.clientID){r.next=6;break}throw Error("clientID is not set");case 6:if(!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new Qa({client:this}),r.prev=8,!this.wsFallback){r.next=13;break}return r.next=12,this.wsFallback.connect();case 12:case 15:case 28:return r.abrupt("return",r.sent);case 13:return r.next=15,this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout);case 18:if(r.prev=18,r.t0=r.catch(8),!(this.options.enableWSFallback&&ar(r.t0)&&Pa())){r.next=29;break}return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new or({client:this}),r.next=28,this.wsFallback.connect();case 29:throw r.t0;case 30:case"end":return r.stop()}},n,this,[[8,18]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_sayHi",value:function(){var e=this,n=St();this.doAxiosRequest("get",this.baseURL+"/hi",null,{headers:{"x-client-request-id":n}}).catch(function(r){e.options.enableInsights&&Nt("http_hi_failed",{api_key:e.key,err:r,client_request_id:n})})}},{key:"queryUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l,c,u=arguments;return p().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:[],o=u.length>2&&void 0!==u[2]?u[2]:{},l={presence:!1},g.next=5,this.wsPromise;case 5:return this._hasConnectionID()||(l.presence=!1),g.next=8,this.get(this.baseURL+"/users",{payload:$($({filter_conditions:s,sort:_t(r)},l),o)});case 8:return this.state.updateUsers((c=g.sent).users),g.abrupt("return",c);case 11:case"end":return g.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryBannedUsers",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=l.length>0&&void 0!==l[0]?l[0]:{},r=l.length>1&&void 0!==l[1]?l[1]:[],o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=5,this.get(this.baseURL+"/query_banned_users",{payload:$({filter_conditions:s,sort:_t(r)},o)});case 5:return u.abrupt("return",u.sent);case 6:case"end":return u.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"queryMessageFlags",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.get(this.baseURL+"/moderation/flags/message",{payload:$({filter_conditions:s},r)});case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"queryChannels",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l,c,u,d,g=arguments;return p().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:[],o=g.length>2&&void 0!==g[2]?g[2]:{},l=g.length>3&&void 0!==g[3]?g[3]:{},c={state:!0,watch:!0,presence:!1},v.next=6,this.wsPromise;case 6:return this._hasConnectionID()||(c.watch=!1),u=$($({filter_conditions:s,sort:_t(r)},c),o),v.next=10,this.post(this.baseURL+"/channels",u);case 10:return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:(d=v.sent).channels,isLatestMessageSet:!0}}),v.abrupt("return",this.hydrateActiveChannels(d.channels,l));case 13:case"end":return v.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"hydrateActiveChannels",value:function(){var c,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.skipInitialization,r=n.offlineMode,o=void 0!==r&&r,l=jt(e);try{for(l.s();!(c=l.n()).done;)this._addChannelConfig(c.value.channel)}catch(te){l.e(te)}finally{l.f()}var m,d=[],g=jt(e);try{for(g.s();!(m=g.n()).done;){var v=m.value,C=this.channel(v.channel.type,v.channel.id);C.data=v.channel,C.offlineMode=o,C.initialized=!o,void 0===s?C._initializeState(v,"latest"):s.includes(v.channel.id)||(C.state.clearMessages(),C._initializeState(v,"latest")),d.push(C)}}catch(te){g.e(te)}finally{g.f()}if(!o)for(var B in this.activeChannels)this.activeChannels[B].offlineMode&&delete this.activeChannels[B];return d}},{key:"search",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l,c=arguments;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(o=c.length>2&&void 0!==c[2]?c[2]:{}).offset||!o.sort&&!o.next){d.next=3;break}throw Error("Cannot specify offset with sort or next parameters");case 3:if(l=$($({filter_conditions:s},o),{},{sort:o.sort?_t(o.sort):void 0}),"string"!=typeof r){d.next=8;break}l.query=r,d.next=13;break;case 8:if("object"!==(0,mt.Z)(r)){d.next=12;break}l.message_filter_conditions=r,d.next=13;break;case 12:throw Error("Invalid type ".concat((0,mt.Z)(r)," for query parameter"));case 13:return d.next=15,this.wsPromise;case 15:return d.next=17,this.get(this.baseURL+"/search",{payload:l});case 17:return d.abrupt("return",d.sent);case 18:case"end":return d.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"setLocalDevice",value:function(e){var n,s,r;if(null!==(n=this.wsConnection)&&void 0!==n&&n.isConnecting&&this.wsPromise||(null!==(s=this.wsConnection)&&void 0!==s&&s.isHealthy||null!==(r=this.wsFallback)&&void 0!==r&&r.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=e}},{key:"addDevice",value:function(){var a=(0,b.Z)(p().mark(function n(s,r,o,l){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.post(this.baseURL+"/devices",$($({id:s,push_provider:r},null!=o?{user_id:o}:{}),null!=l?{push_provider_name:l}:{}));case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},n,this)}));return function e(n,s,r,o){return a.apply(this,arguments)}}()},{key:"getDevices",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/devices",s?{user_id:s}:{});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"removeDevice",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/devices",$({id:s},r?{user_id:r}:{}));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getRateLimits",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,d;return p().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.get(this.baseURL+"/rate_limits",{server_side:(r=s||{}).serverSide,web:r.web,android:r.android,ios:r.ios,endpoints:(d=r.endpoints)?d.join(","):void 0}));case 2:case"end":return m.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_addChannelConfig",value:function(e){this.configs[e.cid]=e.config}},{key:"channel",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~e.indexOf(":"))throw Error("Invalid channel group ".concat(e,", can't contain the : character"));return null==n||""===n?new bn(this,e,void 0,s):"object"===(0,mt.Z)(n)?this.getChannelByMembers(e,n):this.getChannelById(e,n,s)}},{key:"partialUpdateUser",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.partialUpdateUsers([s]);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o,l,c;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r={},o=jt(s),d.prev=2,o.s();case 4:if((l=o.n()).done){d.next=11;break}if((c=l.value).id){d.next=8;break}throw Error("User ID is required when updating a user");case 8:r[c.id]=c;case 9:d.next=4;break;case 11:d.next=16;break;case 13:d.prev=13,d.t0=d.catch(2),o.e(d.t0);case 16:return d.prev=16,o.f(),d.finish(16);case 19:return d.next=21,this.post(this.baseURL+"/users",{users:r});case 21:return d.abrupt("return",d.sent);case 22:case"end":return d.stop()}},n,this,[[2,13,16,19]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertUser",value:function(e){return this.upsertUsers([e])}},{key:"partialUpdateUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=jt(s),u.prev=1,r.s();case 3:if((o=r.n()).done){u.next=9;break}if(o.value.id){u.next=7;break}throw Error("User ID is required when updating a user");case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),r.e(u.t0);case 14:return u.prev=14,r.f(),u.finish(14);case 17:return u.next=19,this.patch(this.baseURL+"/users",{users:s});case 19:return u.abrupt("return",u.sent);case 20:case"end":return u.stop()}},n,this,[[1,11,14,17]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/users/".concat(s),r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"restoreUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/users/restore",{user_ids:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"reactivateUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/".concat(s,"/reactivate"),$({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"reactivateUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/reactivate",$({user_ids:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deactivateUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/".concat(s,"/deactivate"),$({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deactivateUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/deactivate",$({user_ids:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"exportUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/users/".concat(s,"/export"),$({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"banUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/moderation/ban",$({target_user_id:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"unbanUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/moderation/ban",$({target_user_id:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"shadowBan",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.banUser(s,$({shadow:!0},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeShadowBan",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.unbanUser(s,$({shadow:!0},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"muteUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this.post(this.baseURL+"/moderation/mute",$($({target_id:s},r?{user_id:r}:{}),o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"unmuteUser",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/moderation/unmute",$({target_id:s},r?{user_id:r}:{}));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"userMuteStatus",value:function(e){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(var n=0;n<this.mutedUsers.length;n+=1)if(this.mutedUsers[n].target.id===e)return!0;return!1}},{key:"flagMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/flag",$({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"flagUser",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/flag",$({target_user_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"unflagMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unflag",$({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"unflagUser",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unflag",$({target_user_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getCallToken",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/calls/".concat(s),$({},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_queryFlags",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.post(this.baseURL+"/moderation/flags",$({filter_conditions:s},r));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"_queryFlagReports",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.post(this.baseURL+"/moderation/reports",$({filter_conditions:s},r));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"_reviewFlagReport",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o,l=arguments;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this.patch(this.baseURL+"/moderation/reports/".concat(s),$({review_result:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_unblockMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unblock_message",$({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"markChannelsRead",value:function(){var a=(0,b.Z)(p().mark(function n(){var s,r=arguments;return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.post(this.baseURL+"/channels/read",$({},s));case 3:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"createCommand",value:function(e){return this.post(this.baseURL+"/commands",e)}},{key:"getCommand",value:function(e){return this.get(this.baseURL+"/commands/".concat(e))}},{key:"updateCommand",value:function(e,n){return this.put(this.baseURL+"/commands/".concat(e),n)}},{key:"deleteCommand",value:function(e){return this.delete(this.baseURL+"/commands/".concat(e))}},{key:"listCommands",value:function(){return this.get(this.baseURL+"/commands")}},{key:"createChannelType",value:function(e){var n=Mt({},{commands:["all"]},e);return this.post(this.baseURL+"/channeltypes",n)}},{key:"getChannelType",value:function(e){return this.get(this.baseURL+"/channeltypes/".concat(e))}},{key:"updateChannelType",value:function(e,n){return this.put(this.baseURL+"/channeltypes/".concat(e),n)}},{key:"deleteChannelType",value:function(e){return this.delete(this.baseURL+"/channeltypes/".concat(e))}},{key:"listChannelTypes",value:function(){return this.get(this.baseURL+"/channeltypes")}},{key:"translateMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/messages/".concat(s,"/translate"),{language:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_normalizeExpiration",value:function(e){var n=null;if("number"==typeof e){var s=new Date;s.setSeconds(s.getSeconds()+e),n=s.toISOString()}else At(e)?n=e:e instanceof Date&&(n=e.toISOString());return n}},{key:"_validateAndGetMessageId",value:function(e,n){var s;if("string"==typeof e)s=e;else{if(!e.id)throw Error(n);s=e.id}return s}},{key:"pinMessage",value:function(e,n,s,r){var o=this._validateAndGetMessageId(e,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(o,{set:{pinned:!0,pin_expires:this._normalizeExpiration(n),pinned_at:this._normalizeExpiration(r)}},s)}},{key:"unpinMessage",value:function(e,n){var s=this._validateAndGetMessageId(e,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(s,{set:{pinned:!1}},n)}},{key:"updateMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s,r,o){var l;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s.id){d.next=2;break}throw Error("Please specify the message id when calling updateMessage");case 2:return delete(l=Mt({},s)).id,["command","created_at","html","latest_reactions","own_reactions","quoted_message","reaction_counts","reply_count","type","updated_at","user","__html"].forEach(function(g){null!=l[g]&&delete l[g]}),null!=r&&(At(r)?l.user_id=r:l.user={id:r.id}),Array.isArray(l.mentioned_users)&&!At(l.mentioned_users[0])&&(l.mentioned_users=l.mentioned_users.map(function(g){return g.id})),d.next=10,this.post(this.baseURL+"/messages/".concat(s.id),$({message:l},o));case 10:return d.abrupt("return",d.sent);case 11:case"end":return d.stop()}},n,this)}));return function e(n,s,r){return a.apply(this,arguments)}}()},{key:"partialUpdateMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s,r,o,l){var c;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s){d.next=2;break}throw Error("Please specify the message id when calling partialUpdateMessage");case 2:return c=o,null!=o&&At(o)&&(c={id:o}),d.next=6,this.put(this.baseURL+"/messages/".concat(s),$($($({},r),l),{},{user:c}));case 6:return d.abrupt("return",d.sent);case 7:case"end":return d.stop()}},n,this)}));return function e(n,s,r,o){return a.apply(this,arguments)}}()},{key:"deleteMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o={},r&&(o={hard:!0}),c.next=4,this.delete(this.baseURL+"/messages/".concat(s),o);case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/messages/".concat(s));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getUserAgent",value:function(){return this.userAgent||"stream-chat-javascript-client-".concat(this.node?"node":"browser","-","8.4.1")}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"_enrichAxiosOptions",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}},s=this._getToken(),r=s?{Authorization:s}:void 0,o=null;null!==this.nextRequestAbortController&&(o=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),null!==(e=n.headers)&&void 0!==e&&e["x-client-request-id"]||(n.headers=$($({},n.headers),{},{"x-client-request-id":St()}));var l=this.options.axiosRequestConfig||{},c=l.params,u=l.headers,d=si(l,hr);return $($($({params:$($({user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key},n.params),c||{}),headers:$($($({},r),{},{"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent()},n.headers),u||{})},o?{signal:o}:{}),n.config),d||{})}},{key:"_getToken",value:function(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}},{key:"_startCleaning",value:function(){var e=this;null==this.cleaningIntervalRef&&(this.cleaningIntervalRef=setInterval(function(){for(var n=0,s=Object.values(e.activeChannels);n<s.length;n++)s[n].clean()},500))}},{key:"verifyWebhook",value:function(e,n){return!!this.secret&&function er(i,a,e){var n=Buffer.from(a,"ascii");return null.createHmac("sha256",n).update(i).digest("hex")===e}(e,this.secret,n)}},{key:"getPermission",value:function(e){return this.get("".concat(this.baseURL,"/permissions/").concat(e))}},{key:"createPermission",value:function(e){return this.post("".concat(this.baseURL,"/permissions"),$({},e))}},{key:"updatePermission",value:function(e,n){return this.put("".concat(this.baseURL,"/permissions/").concat(e),$({},n))}},{key:"deletePermission",value:function(e){return this.delete("".concat(this.baseURL,"/permissions/").concat(e))}},{key:"listPermissions",value:function(){return this.get("".concat(this.baseURL,"/permissions"))}},{key:"createRole",value:function(e){return this.post("".concat(this.baseURL,"/roles"),{name:e})}},{key:"listRoles",value:function(){return this.get("".concat(this.baseURL,"/roles"))}},{key:"deleteRole",value:function(e){return this.delete("".concat(this.baseURL,"/roles/").concat(e))}},{key:"sync",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.post("".concat(this.baseURL,"/sync"),$({channel_cids:e,last_sync_at:n},s))}},{key:"sendUserCustomEvent",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post("".concat(this.baseURL,"/users/").concat(s,"/event"),{event:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"createBlockList",value:function(e){return this.post("".concat(this.baseURL,"/blocklists"),e)}},{key:"listBlockLists",value:function(){return this.get("".concat(this.baseURL,"/blocklists"))}},{key:"getBlockList",value:function(e){return this.get("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"updateBlockList",value:function(e,n){return this.put("".concat(this.baseURL,"/blocklists/").concat(e),n)}},{key:"deleteBlockList",value:function(e){return this.delete("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"exportChannels",value:function(e){var s=$({channels:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return this.post("".concat(this.baseURL,"/export_channels"),s)}},{key:"exportUsers",value:function(e){return this.post("".concat(this.baseURL,"/export/users"),e)}},{key:"exportChannel",value:function(e,n){return this.exportChannels([e],n)}},{key:"getExportChannelStatus",value:function(e){return this.get("".concat(this.baseURL,"/export_channels/").concat(e))}},{key:"createSegment",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post(this.baseURL+"/segments",{segment:s});case 2:return c.abrupt("return",c.sent.segment);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"querySegments",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/segments",{payload:$({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"updateSegment",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.put(this.baseURL+"/segments/".concat(s),{segment:r});case 2:return u.abrupt("return",u.sent.segment);case 5:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deleteSegment",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.delete(this.baseURL+"/segments/".concat(s)));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"createCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post(this.baseURL+"/campaigns",{campaign:s});case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryCampaigns",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/campaigns",{payload:$({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"updateCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.put(this.baseURL+"/campaigns/".concat(s),{campaign:r});case 2:return u.abrupt("return",u.sent.campaign);case 5:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deleteCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.abrupt("return",this.delete(this.baseURL+"/campaigns/".concat(s),r));case 2:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"scheduleCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o;return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=r.scheduledFor,d.next=3,this.patch(this.baseURL+"/campaigns/".concat(s,"/schedule"),{scheduled_for:o});case 3:return d.abrupt("return",d.sent.campaign);case 6:case"end":return d.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"stopCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.patch(this.baseURL+"/campaigns/".concat(s,"/stop"));case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"resumeCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.patch(this.baseURL+"/campaigns/".concat(s,"/resume"));case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"testCampaign",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){var o;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=r.users,c.next=3,this.post(this.baseURL+"/campaigns/".concat(s,"/test"),{users:o});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"queryRecipients",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/recipients",{payload:$({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"enrichURL",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.get(this.baseURL+"/og",{url:s}));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getTask",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.get("".concat(this.baseURL,"/tasks/").concat(s)));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteChannels",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/channels/delete",$({cids:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteUsers",value:function(){var a=(0,b.Z)(p().mark(function n(s,r){return p().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if("soft"===r?.user||"hard"===r?.user){l.next=2;break}throw new Error("Invalid delete user options. user must be one of [soft hard]");case 2:if(void 0===r.messages||"soft"===r.messages||"hard"===r.messages){l.next=4;break}throw new Error("Invalid delete user options. messages must be one of [soft hard]");case 4:if(void 0===r.conversations||"soft"===r.conversations||"hard"===r.conversations){l.next=6;break}throw new Error("Invalid delete user options. conversations must be one of [soft hard]");case 6:return l.next=8,this.post(this.baseURL+"/users/delete",$({user_ids:s},r));case 8:return l.abrupt("return",l.sent);case 9:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_createImportURL",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/import_urls",{filename:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_createImport",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o=arguments;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{mode:"upsert"},c.next=3,this.post(this.baseURL+"/imports",$({path:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_getImport",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/imports/".concat(s));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_listImports",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/imports",s);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertPushProvider",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/push_providers",{push_provider:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deletePushProvider",value:function(){var a=(0,b.Z)(p().mark(function n(s){var r,o;return p().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=s.type,o=s.name,c.next=3,this.delete(this.baseURL+"/push_providers/".concat(r,"/").concat(o));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"listPushProviders",value:function(){var a=(0,b.Z)(p().mark(function n(){return p().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(this.baseURL+"/push_providers");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"createAbortControllerForNextRequest",value:function(){return this.nextRequestAbortController=new AbortController}},{key:"commitMessage",value:function(){var a=(0,b.Z)(p().mark(function n(s){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/messages/".concat(s,"/commit"));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e,n,s){return i._instance||(i._instance="string"==typeof n?new i(e,n,s):new i(e,n)),i._instance}}]),i;var a}();(0,h.Z)(Ai,"_instance",void 0);var nn,Fi="Allow",Mn=["*"],xn=["*"],ki=function i(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mn,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xn,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fi;We(this,i),(0,h.Z)(this,"name",void 0),(0,h.Z)(this,"action",void 0),(0,h.Z)(this,"owner",void 0),(0,h.Z)(this,"priority",void 0),(0,h.Z)(this,"resources",void 0),(0,h.Z)(this,"roles",void 0),this.name=a,this.action=o,this.owner=r,this.priority=e,this.resources=n,this.roles=s},_r=(new ki("Allow all",999,Mn,xn,!1,Fi),new ki("Deny all",1,Mn,xn,!1,"Deny"),_(4782)),Ft=_(590),tn=_(9300),Ei=_(8675),Ii=_(1884),vr=_(8372),Cr=new Uint8Array(16);function yr(){if(!nn&&!(nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nn(Cr)}const wr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,br=function Dr(i){return"string"==typeof i&&wr.test(i)};for(var Ee=[],Sn=0;Sn<256;++Sn)Ee.push((Sn+256).toString(16).substr(1));const An=function xr(i,a,e){var n=(i=i||{}).random||(i.rng||yr)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,a){e=e||0;for(var s=0;s<16;++s)a[e+s]=n[s];return a}return function Tr(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Ee[i[a+0]]+Ee[i[a+1]]+Ee[i[a+2]]+Ee[i[a+3]]+"-"+Ee[i[a+4]]+Ee[i[a+5]]+"-"+Ee[i[a+6]]+Ee[i[a+7]]+"-"+Ee[i[a+8]]+Ee[i[a+9]]+"-"+Ee[i[a+10]]+Ee[i[a+11]]+Ee[i[a+12]]+Ee[i[a+13]]+Ee[i[a+14]]+Ee[i[a+15]]).toLowerCase();if(!br(e))throw TypeError("Stringified UUID is invalid");return e}(n)};var Me=_(6188),Sr=_(3431),Ar=_.n(Sr),Fr=_(1764),Oi=_.n(Fr),kr=_(563),Er=_.n(kr);function Pe(i){if(null==i)return window;if("[object Window]"!==i.toString()){var a=i.ownerDocument;return a&&a.defaultView||window}return i}function vt(i){return i instanceof Pe(i).Element||i instanceof Element}function He(i){return i instanceof Pe(i).HTMLElement||i instanceof HTMLElement}function Fn(i){return!(typeof ShadowRoot>"u")&&(i instanceof Pe(i).ShadowRoot||i instanceof ShadowRoot)}var Ct=Math.max,sn=Math.min,kt=Math.round;function kn(){var i=navigator.userAgentData;return null!=i&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function Li(){return!/^((?!chrome|android).)*safari/i.test(kn())}function Et(i,a,e){void 0===a&&(a=!1),void 0===e&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;a&&He(i)&&(s=i.offsetWidth>0&&kt(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&kt(n.height)/i.offsetHeight||1);var l=(vt(i)?Pe(i):window).visualViewport,c=!Li()&&e,u=(n.left+(c&&l?l.offsetLeft:0))/s,d=(n.top+(c&&l?l.offsetTop:0))/r,g=n.width/s,m=n.height/r;return{width:g,height:m,top:d,right:u+g,bottom:d+m,left:u,x:u,y:d}}function En(i){var a=Pe(i);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function Ke(i){return i?(i.nodeName||"").toLowerCase():null}function lt(i){return((vt(i)?i.ownerDocument:i.document)||window.document).documentElement}function In(i){return Et(lt(i)).left+En(i).scrollLeft}function st(i){return Pe(i).getComputedStyle(i)}function On(i){var a=st(i);return/auto|scroll|overlay|hidden/.test(a.overflow+a.overflowY+a.overflowX)}function Zr(i,a,e){void 0===e&&(e=!1);var n=He(a),s=He(a)&&function Ur(i){var a=i.getBoundingClientRect(),e=kt(a.width)/i.offsetWidth||1,n=kt(a.height)/i.offsetHeight||1;return 1!==e||1!==n}(a),r=lt(a),o=Et(i,s,e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!e)&&(("body"!==Ke(a)||On(r))&&(l=function Lr(i){return i!==Pe(i)&&He(i)?function Or(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}(i):En(i)}(a)),He(a)?((c=Et(a,!0)).x+=a.clientLeft,c.y+=a.clientTop):r&&(c.x=In(r))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Ln(i){var a=Et(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(a.width-e)<=1&&(e=a.width),Math.abs(a.height-n)<=1&&(n=a.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function an(i){return"html"===Ke(i)?i:i.assignedSlot||i.parentNode||(Fn(i)?i.host:null)||lt(i)}function Ui(i){return["html","body","#document"].indexOf(Ke(i))>=0?i.ownerDocument.body:He(i)&&On(i)?i:Ui(an(i))}function $t(i,a){var e;void 0===a&&(a=[]);var n=Ui(i),s=n===(null==(e=i.ownerDocument)?void 0:e.body),r=Pe(n),o=s?[r].concat(r.visualViewport||[],On(n)?n:[]):n,l=a.concat(o);return s?l:l.concat($t(an(o)))}function Rr(i){return["table","td","th"].indexOf(Ke(i))>=0}function Zi(i){return He(i)&&"fixed"!==st(i).position?i.offsetParent:null}function Ht(i){for(var a=Pe(i),e=Zi(i);e&&Rr(e)&&"static"===st(e).position;)e=Zi(e);return e&&("html"===Ke(e)||"body"===Ke(e)&&"static"===st(e).position)?a:e||function Pr(i){var a=/firefox/i.test(kn());if(/Trident/i.test(kn())&&He(i)&&"fixed"===st(i).position)return null;var s=an(i);for(Fn(s)&&(s=s.host);He(s)&&["html","body"].indexOf(Ke(s))<0;){var r=st(s);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||a&&"filter"===r.willChange||a&&r.filter&&"none"!==r.filter)return s;s=s.parentNode}return null}(i)||a}var Ue="top",qe="bottom",Ye="right",Ze="left",Un="auto",qt=[Ue,qe,Ye,Ze],It="start",Yt="end",Br="clippingParents",Ri="viewport",Jt="popper",Nr="reference",Pi=qt.reduce(function(i,a){return i.concat([a+"-"+It,a+"-"+Yt])},[]),Bi=[].concat(qt,[Un]).reduce(function(i,a){return i.concat([a,a+"-"+It,a+"-"+Yt])},[]),zr=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Wr(i){var a=new Map,e=new Set,n=[];function s(r){e.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach(function(l){if(!e.has(l)){var c=a.get(l);c&&s(c)}}),n.push(r)}return i.forEach(function(r){a.set(r.name,r)}),i.forEach(function(r){e.has(r.name)||s(r)}),n}function Xr(i){var a;return function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}}var Ni={placement:"bottom",modifiers:[],strategy:"absolute"};function ji(){for(var i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return!a.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function to(i){void 0===i&&(i={});var e=i.defaultModifiers,n=void 0===e?[]:e,s=i.defaultOptions,r=void 0===s?Ni:s;return function(l,c,u){void 0===u&&(u=r);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ni,r),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},g=[],m=!1,v={state:d,setOptions:function(te){var R="function"==typeof te?te(d.options):te;B(),d.options=Object.assign({},r,d.options,R),d.scrollParents={reference:vt(l)?$t(l):l.contextElement?$t(l.contextElement):[],popper:$t(c)};var me=function Kr(i){var a=Wr(i);return zr.reduce(function(e,n){return e.concat(a.filter(function(s){return s.phase===n}))},[])}(function eo(i){var a=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(a).map(function(e){return a[e]})}([].concat(n,d.options.modifiers)));return d.orderedModifiers=me.filter(function(fe){return fe.enabled}),function C(){d.orderedModifiers.forEach(function(z){var R=z.options,oe=z.effect;if("function"==typeof oe){var se=oe({state:d,name:z.name,instance:v,options:void 0===R?{}:R});g.push(se||function(){})}})}(),v.update()},forceUpdate:function(){if(!m){var te=d.elements,R=te.reference,me=te.popper;if(ji(R,me)){d.rects={reference:Zr(R,Ht(me),"fixed"===d.options.strategy),popper:Ln(me)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(fe){return d.modifiersData[fe.name]=Object.assign({},fe.data)});for(var se=0;se<d.orderedModifiers.length;se++)if(!0!==d.reset){var ee=d.orderedModifiers[se],de=ee.fn,ve=ee.options;"function"==typeof de&&(d=de({state:d,options:void 0===ve?{}:ve,name:ee.name,instance:v})||d)}else d.reset=!1,se=-1}}},update:Xr(function(){return new Promise(function(z){v.forceUpdate(),z(d)})}),destroy:function(){B(),m=!0}};if(!ji(l,c))return v;function B(){g.forEach(function(z){return z()}),g=[]}return v.setOptions(u).then(function(z){!m&&u.onFirstUpdate&&u.onFirstUpdate(z)}),v}}var rn={passive:!0};const io={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function no(i){var a=i.state,e=i.instance,n=i.options,s=n.scroll,r=void 0===s||s,o=n.resize,l=void 0===o||o,c=Pe(a.elements.popper),u=[].concat(a.scrollParents.reference,a.scrollParents.popper);return r&&u.forEach(function(d){d.addEventListener("scroll",e.update,rn)}),l&&c.addEventListener("resize",e.update,rn),function(){r&&u.forEach(function(d){d.removeEventListener("scroll",e.update,rn)}),l&&c.removeEventListener("resize",e.update,rn)}},data:{}};function Xe(i){return i.split("-")[0]}function Ot(i){return i.split("-")[1]}function Zn(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function $i(i){var c,a=i.reference,e=i.element,n=i.placement,s=n?Xe(n):null,r=n?Ot(n):null,o=a.x+a.width/2-e.width/2,l=a.y+a.height/2-e.height/2;switch(s){case Ue:c={x:o,y:a.y-e.height};break;case qe:c={x:o,y:a.y+a.height};break;case Ye:c={x:a.x+a.width,y:l};break;case Ze:c={x:a.x-e.width,y:l};break;default:c={x:a.x,y:a.y}}var u=s?Zn(s):null;if(null!=u){var d="y"===u?"height":"width";switch(r){case It:c[u]=c[u]-(a[d]/2-e[d]/2);break;case Yt:c[u]=c[u]+(a[d]/2-e[d]/2)}}return c}const ao={name:"popperOffsets",enabled:!0,phase:"read",fn:function so(i){var a=i.state;a.modifiersData[i.name]=$i({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})},data:{}};var ro={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hi(i){var a,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,l=i.position,c=i.gpuAcceleration,u=i.adaptive,d=i.roundOffsets,g=i.isFixed,m=o.x,v=void 0===m?0:m,C=o.y,B=void 0===C?0:C,z="function"==typeof d?d({x:v,y:B}):{x:v,y:B};v=z.x,B=z.y;var te=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),me=Ze,oe=Ue,se=window;if(u){var ee=Ht(e),de="clientHeight",ve="clientWidth";ee===Pe(e)&&"static"!==st(ee=lt(e)).position&&"absolute"===l&&(de="scrollHeight",ve="scrollWidth"),(s===Ue||(s===Ze||s===Ye)&&r===Yt)&&(oe=qe,B-=(g&&ee===se&&se.visualViewport?se.visualViewport.height:ee[de])-n.height,B*=c?1:-1),s!==Ze&&(s!==Ue&&s!==qe||r!==Yt)||(me=Ye,v-=(g&&ee===se&&se.visualViewport?se.visualViewport.width:ee[ve])-n.width,v*=c?1:-1)}var De,fe=Object.assign({position:l},u&&ro),xe=!0===d?function oo(i,a){var n=i.y,s=a.devicePixelRatio||1;return{x:kt(i.x*s)/s||0,y:kt(n*s)/s||0}}({x:v,y:B},Pe(e)):{x:v,y:B};return v=xe.x,B=xe.y,Object.assign({},fe,c?((De={})[oe]=R?"0":"",De[me]=te?"0":"",De.transform=(se.devicePixelRatio||1)<=1?"translate("+v+"px, "+B+"px)":"translate3d("+v+"px, "+B+"px, 0)",De):((a={})[oe]=R?B+"px":"",a[me]=te?v+"px":"",a.transform="",a))}const co={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function lo(i){var a=i.state,e=i.options,n=e.gpuAcceleration,s=void 0===n||n,r=e.adaptive,o=void 0===r||r,l=e.roundOffsets,c=void 0===l||l,d={placement:Xe(a.placement),variation:Ot(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:s,isFixed:"fixed"===a.options.strategy};null!=a.modifiersData.popperOffsets&&(a.styles.popper=Object.assign({},a.styles.popper,Hi(Object.assign({},d,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:o,roundOffsets:c})))),null!=a.modifiersData.arrow&&(a.styles.arrow=Object.assign({},a.styles.arrow,Hi(Object.assign({},d,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}},po={name:"applyStyles",enabled:!0,phase:"write",fn:function uo(i){var a=i.state;Object.keys(a.elements).forEach(function(e){var n=a.styles[e]||{},s=a.attributes[e]||{},r=a.elements[e];!He(r)||!Ke(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var l=s[o];!1===l?r.removeAttribute(o):r.setAttribute(o,!0===l?"":l)}))})},effect:function ho(i){var a=i.state,e={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,e.popper),a.styles=e,a.elements.arrow&&Object.assign(a.elements.arrow.style,e.arrow),function(){Object.keys(a.elements).forEach(function(n){var s=a.elements[n],r=a.attributes[n]||{},l=Object.keys(a.styles.hasOwnProperty(n)?a.styles[n]:e[n]).reduce(function(c,u){return c[u]="",c},{});!He(s)||!Ke(s)||(Object.assign(s.style,l),Object.keys(r).forEach(function(c){s.removeAttribute(c)}))})}},requires:["computeStyles"]},fo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function mo(i){var a=i.state,n=i.name,s=i.options.offset,r=void 0===s?[0,0]:s,o=Bi.reduce(function(d,g){return d[g]=function go(i,a,e){var n=Xe(i),s=[Ze,Ue].indexOf(n)>=0?-1:1,r="function"==typeof e?e(Object.assign({},a,{placement:i})):e,o=r[0],l=r[1];return o=o||0,l=(l||0)*s,[Ze,Ye].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}(g,a.rects,r),d},{}),l=o[a.placement],u=l.y;null!=a.modifiersData.popperOffsets&&(a.modifiersData.popperOffsets.x+=l.x,a.modifiersData.popperOffsets.y+=u),a.modifiersData[n]=o}};var _o={left:"right",right:"left",bottom:"top",top:"bottom"};function on(i){return i.replace(/left|right|bottom|top/g,function(a){return _o[a]})}var vo={start:"end",end:"start"};function qi(i){return i.replace(/start|end/g,function(a){return vo[a]})}function Yi(i,a){var e=a.getRootNode&&a.getRootNode();if(i.contains(a))return!0;if(e&&Fn(e)){var n=a;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Rn(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Ji(i,a,e){return a===Ri?Rn(function Co(i,a){var e=Pe(i),n=lt(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){r=s.width,o=s.height;var u=Li();(u||!u&&"fixed"===a)&&(l=s.offsetLeft,c=s.offsetTop)}return{width:r,height:o,x:l+In(i),y:c}}(i,e)):vt(a)?function wo(i,a){var e=Et(i,!1,"fixed"===a);return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}(a,e):Rn(function yo(i){var a,e=lt(i),n=En(i),s=null==(a=i.ownerDocument)?void 0:a.body,r=Ct(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ct(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-n.scrollLeft+In(i),c=-n.scrollTop;return"rtl"===st(s||e).direction&&(l+=Ct(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:l,y:c}}(lt(i)))}function Qi(i){return Object.assign({},{top:0,right:0,bottom:0,left:0},i)}function Gi(i,a){return a.reduce(function(e,n){return e[n]=i,e},{})}function Vt(i,a){void 0===a&&(a={});var n=a.placement,s=void 0===n?i.placement:n,r=a.strategy,o=void 0===r?i.strategy:r,l=a.boundary,c=void 0===l?Br:l,u=a.rootBoundary,d=void 0===u?Ri:u,g=a.elementContext,m=void 0===g?Jt:g,v=a.altBoundary,C=void 0!==v&&v,B=a.padding,z=void 0===B?0:B,te=Qi("number"!=typeof z?z:Gi(z,qt)),me=i.rects.popper,oe=i.elements[C?m===Jt?Nr:Jt:m],se=function bo(i,a,e,n){var s="clippingParents"===a?function Do(i){var a=$t(an(i)),n=["absolute","fixed"].indexOf(st(i).position)>=0&&He(i)?Ht(i):i;return vt(n)?a.filter(function(s){return vt(s)&&Yi(s,n)&&"body"!==Ke(s)}):[]}(i):[].concat(a),r=[].concat(s,[e]),l=r.reduce(function(c,u){var d=Ji(i,u,n);return c.top=Ct(d.top,c.top),c.right=sn(d.right,c.right),c.bottom=sn(d.bottom,c.bottom),c.left=Ct(d.left,c.left),c},Ji(i,r[0],n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(vt(oe)?oe:oe.contextElement||lt(i.elements.popper),c,d,o),ee=Et(i.elements.reference),de=$i({reference:ee,element:me,strategy:"absolute",placement:s}),ve=Rn(Object.assign({},me,de)),Ce=m===Jt?ve:ee,ye={top:se.top-Ce.top+te.top,bottom:Ce.bottom-se.bottom+te.bottom,left:se.left-Ce.left+te.left,right:Ce.right-se.right+te.right},fe=i.modifiersData.offset;if(m===Jt&&fe){var xe=fe[s];Object.keys(ye).forEach(function(De){var Oe=[Ye,qe].indexOf(De)>=0?1:-1,je=[Ue,qe].indexOf(De)>=0?"y":"x";ye[De]+=xe[je]*Oe})}return ye}const So={name:"flip",enabled:!0,phase:"main",fn:function xo(i){var a=i.state,e=i.options,n=i.name;if(!a.modifiersData[n]._skip){for(var s=e.mainAxis,r=void 0===s||s,o=e.altAxis,l=void 0===o||o,c=e.fallbackPlacements,u=e.padding,d=e.boundary,g=e.rootBoundary,m=e.altBoundary,v=e.flipVariations,C=void 0===v||v,B=e.allowedAutoPlacements,z=a.options.placement,te=Xe(z),me=c||(te!==z&&C?function Mo(i){if(Xe(i)===Un)return[];var a=on(i);return[qi(i),a,qi(a)]}(z):[on(z)]),oe=[z].concat(me).reduce(function(tt,Ve){return tt.concat(Xe(Ve)===Un?function To(i,a){void 0===a&&(a={});var s=a.boundary,r=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,u=void 0===c?Bi:c,d=Ot(a.placement),g=d?l?Pi:Pi.filter(function(C){return Ot(C)===d}):qt,m=g.filter(function(C){return u.indexOf(C)>=0});0===m.length&&(m=g);var v=m.reduce(function(C,B){return C[B]=Vt(i,{placement:B,boundary:s,rootBoundary:r,padding:o})[Xe(B)],C},{});return Object.keys(v).sort(function(C,B){return v[C]-v[B]})}(a,{placement:Ve,boundary:d,rootBoundary:g,padding:u,flipVariations:C,allowedAutoPlacements:B}):Ve)},[]),se=a.rects.reference,ee=a.rects.popper,de=new Map,ve=!0,Ce=oe[0],ye=0;ye<oe.length;ye++){var fe=oe[ye],xe=Xe(fe),De=Ot(fe)===It,Oe=[Ue,qe].indexOf(xe)>=0,je=Oe?"width":"height",Ae=Vt(a,{placement:fe,boundary:d,rootBoundary:g,altBoundary:m,padding:u}),Le=Oe?De?Ye:Ze:De?qe:Ue;se[je]>ee[je]&&(Le=on(Le));var dt=on(Le),Ge=[];if(r&&Ge.push(Ae[xe]<=0),l&&Ge.push(Ae[Le]<=0,Ae[dt]<=0),Ge.every(function(tt){return tt})){Ce=fe,ve=!1;break}de.set(fe,Ge)}if(ve)for(var Dt=function(Ve){var rt=oe.find(function(gt){var ze=de.get(gt);if(ze)return ze.slice(0,Ve).every(function(Fe){return Fe})});if(rt)return Ce=rt,"break"},at=C?3:1;at>0&&"break"!==Dt(at);at--);a.placement!==Ce&&(a.modifiersData[n]._skip=!0,a.placement=Ce,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Qt(i,a,e){return Ct(i,sn(a,e))}const Eo={name:"preventOverflow",enabled:!0,phase:"main",fn:function ko(i){var a=i.state,e=i.options,n=i.name,s=e.mainAxis,r=void 0===s||s,o=e.altAxis,l=void 0!==o&&o,m=e.tether,v=void 0===m||m,C=e.tetherOffset,B=void 0===C?0:C,z=Vt(a,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),te=Xe(a.placement),R=Ot(a.placement),me=!R,oe=Zn(te),se=function Ao(i){return"x"===i?"y":"x"}(oe),ee=a.modifiersData.popperOffsets,de=a.rects.reference,ve=a.rects.popper,Ce="function"==typeof B?B(Object.assign({},a.rects,{placement:a.placement})):B,ye="number"==typeof Ce?{mainAxis:Ce,altAxis:Ce}:Object.assign({mainAxis:0,altAxis:0},Ce),fe=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,xe={x:0,y:0};if(ee){if(r){var De,Oe="y"===oe?Ue:Ze,je="y"===oe?qe:Ye,Ae="y"===oe?"height":"width",Le=ee[oe],dt=Le+z[Oe],Ge=Le-z[je],ht=v?-ve[Ae]/2:0,Dt=R===It?de[Ae]:ve[Ae],at=R===It?-ve[Ae]:-de[Ae],pt=a.elements.arrow,tt=v&&pt?Ln(pt):{width:0,height:0},Ve=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},rt=Ve[Oe],gt=Ve[je],ze=Qt(0,de[Ae],tt[Ae]),Fe=me?de[Ae]/2-ht-ze-rt-ye.mainAxis:Dt-ze-rt-ye.mainAxis,tg=me?-de[Ae]/2+ht+ze+gt+ye.mainAxis:at+ze+gt+ye.mainAxis,Gn=a.elements.arrow&&Ht(a.elements.arrow),xs=null!=(De=fe?.[oe])?De:0,sg=Le+tg-xs,Ss=Qt(v?sn(dt,Le+Fe-xs-(Gn?"y"===oe?Gn.clientTop||0:Gn.clientLeft||0:0)):dt,Le,v?Ct(Ge,sg):Ge);ee[oe]=Ss,xe[oe]=Ss-Le}if(l){var As,bt=ee[se],mn="y"===se?"height":"width",Fs=bt+z["x"===oe?Ue:Ze],ks=bt-z["x"===oe?qe:Ye],zn=-1!==[Ue,Ze].indexOf(te),Es=null!=(As=fe?.[se])?As:0,Is=zn?Fs:bt-de[mn]-ve[mn]-Es+ye.altAxis,Os=zn?bt+de[mn]+ve[mn]-Es-ye.altAxis:ks,Ls=v&&zn?function Fo(i,a,e){var n=Qt(i,a,e);return n>e?e:n}(Is,bt,Os):Qt(v?Is:Fs,bt,v?Os:ks);ee[se]=Ls,xe[se]=Ls-bt}a.modifiersData[n]=xe}},requiresIfExists:["offset"]};const Uo={name:"arrow",enabled:!0,phase:"main",fn:function Oo(i){var a,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,l=Xe(e.placement),c=Zn(l),d=[Ze,Ye].indexOf(l)>=0?"height":"width";if(r&&o){var g=function(a,e){return Qi("number"!=typeof(a="function"==typeof a?a(Object.assign({},e.rects,{placement:e.placement})):a)?a:Gi(a,qt))}(s.padding,e),m=Ln(r),v="y"===c?Ue:Ze,C="y"===c?qe:Ye,B=e.rects.reference[d]+e.rects.reference[c]-o[c]-e.rects.popper[d],z=o[c]-e.rects.reference[c],te=Ht(r),R=te?"y"===c?te.clientHeight||0:te.clientWidth||0:0,ee=R/2-m[d]/2+(B/2-z/2),de=Qt(g[v],ee,R-m[d]-g[C]);e.modifiersData[n]=((a={})[c]=de,a.centerOffset=de-ee,a)}},effect:function Lo(i){var a=i.state,n=i.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"==typeof s&&!(s=a.elements.popper.querySelector(s))||Yi(a.elements.popper,s)&&(a.elements.arrow=s))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zi(i,a,e){return void 0===e&&(e={x:0,y:0}),{top:i.top-a.height-e.y,right:i.right-a.width+e.x,bottom:i.bottom-a.height+e.y,left:i.left-a.width-e.x}}function Wi(i){return[Ue,Ye,qe,Ze].some(function(a){return i[a]>=0})}var Ro=[io,ao,co,po,fo,So,Eo,Uo,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function Zo(i){var a=i.state,e=i.name,n=a.rects.reference,s=a.rects.popper,r=a.modifiersData.preventOverflow,o=Vt(a,{elementContext:"reference"}),l=Vt(a,{altBoundary:!0}),c=zi(o,n),u=zi(l,s,r),d=Wi(c),g=Wi(u);a.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:g},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":g})}}],Po=to({defaultModifiers:Ro}),Pn=_(4968);const Bo=["popperViewRef"];function No(i,a){if(1&i&&(t.TgZ(0,"div",5),t.Hsn(1),t.qZA()),2&i){const e=t.oxw();t.Q6J("innerHTML",e.text,t.oJD)}}function jo(i,a){1&i&&(t.TgZ(0,"div",6),t.Hsn(1,1),t.qZA())}const Ki=["*","*"];var yt=(()=>(function(i){i.TOP="top",i.BOTTOM="bottom",i.LEFT="left",i.RIGHT="right",i.TOPSTART="top-start",i.BOTTOMSTART="bottom-start",i.LEFTSTART="left-start",i.RIGHTSTART="right-start",i.TOPEND="top-end",i.BOTTOMEND="bottom-end",i.LEFTEND="left-end",i.RIGHTEND="right-end",i.AUTO="auto",i.AUTOSTART="auto-start",i.AUTOEND="auto-end"}(yt||(yt={})),yt))(),Be=(()=>(function(i){i.click="click",i.hover="hover",i.mousedown="mousedown",i.none="none"}(Be||(Be={})),Be))();let Bn=(()=>{class i{constructor(e,n,s,r){this.elRef=e,this._renderer=n,this._viewRef=s,this._changeDetectorRef=r,this.ariaHidden="true",this.arrowColor=null,this.displayType="none",this.id="ngx_poppperjs_"+ ++i.nextId,this.isMouseOver=!1,this.onHidden=new t.vpe,this.opacity=0,this.popperOptions={disableAnimation:!1,disableDefaultStyling:!1,placement:yt.AUTO,boundariesElement:"",trigger:Be.hover,positionFixed:!1,appendToBody:!1,popperModifiers:[]},this.state=!0,this._styleId=`${this.id}_style`}clean(){this.toggleVisibility(!1),this.popperInstance&&this.popperInstance.destroy()}extractAppliedClassListExpr(e=[]){return(Array.isArray(e)?e:"string"==typeof e?e.replace(/ /,"").split(","):[]).reduce((s,r)=>(s[r]=!0,s),{})}hide(){this.popperInstance&&this.popperInstance.destroy(),this.toggleVisibility(!1),this.onHidden.emit()}ngOnDestroy(){this.clean(),this.popperOptions.appendTo&&this.elRef&&this.elRef.nativeElement&&this.elRef.nativeElement.parentNode&&(this._viewRef.detach(),this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement))}onDocumentResize(){this.update()}onMouseOver(){this.isMouseOver=!0}show(){if(!this.referenceObject)return;const e=this.popperOptions.appendTo&&document.querySelector(this.popperOptions.appendTo);e&&this.elRef.nativeElement.parentNode!==e&&(this.elRef.nativeElement.parentNode&&this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement),e.appendChild(this.elRef.nativeElement));const n={strategy:this.popperOptions.positionFixed?"fixed":"absolute",placement:this.popperOptions.placement,modifiers:[{name:"offset",enabled:!0,options:{offset:[0,8]}},{name:"arrow",enabled:!0,options:{element:".ngxp__arrow",padding:3},requires:["arrow"]}]};this.onUpdate&&(n.onFirstUpdate=this.onUpdate);const s=this.popperOptions.boundariesElement&&document.querySelector(this.popperOptions.boundariesElement);if(n.modifiers&&s&&n.modifiers.push({name:"preventOverflow",enabled:this.popperOptions.preventOverflow,options:{boundary:s}}),n.modifiers){const r=n.modifiers.find(o=>"preventOverflow"===o.name);if(r&&!r.enabled){const o=n.modifiers.find(l=>"preventOverflow"===l.name);o&&(o.enabled=!1)}}this._determineArrowColor(),n.modifiers=n.modifiers.concat(this.popperOptions.popperModifiers),this.popperInstance=Po(this.referenceObject,this.popperViewRef.nativeElement,n),this.toggleVisibility(!0),this._globalResize=this._renderer.listen("document","resize",this.onDocumentResize.bind(this))}showOnLeave(){this.isMouseOver=!1,(this.popperOptions.trigger===Be.hover||this.popperOptions.hideOnMouseLeave)&&this.hide()}toggleVisibility(e){e?(this.opacity=1,this.displayType="block",this.ariaHidden="false",this.state=!0):(this.opacity=0,this.displayType="none",this.ariaHidden="true",this.state=!1),this._changeDetectorRef.destroyed||this._changeDetectorRef.detectChanges()}update(){this.popperInstance&&this.popperInstance.update()}_createArrowSelector(){return`div#${this.id}.ngxp__container > .ngxp__arrow.ngxp__force-arrow`}_determineArrowColor(){if(!this.popperOptions.styles||this.arrowColor)return!1;const e=this.popperOptions.styles["background-color"]||this.popperOptions.styles.backgroundColor;if(this.arrowColor===e)return!1;this.arrowColor=e;let n=document.querySelector(`#${this._styleId}`);const s=this.arrowColor?`${this._createArrowSelector()}:before { background-color: ${this.arrowColor}; }`:"";n||(n=document.createElement("style"),n.id=this._styleId,n.setAttribute("type","text/css"),document.head.appendChild(n)),n.styleSheet?n.styleSheet.cssText=s:n.innerHTML=s}}return i.nextId=0,i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.s_b),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["popper-content"]],viewQuery:function(e,n){if(1&e&&t.Gf(Bo,7),2&e){let s;t.iGM(s=t.CRH())&&(n.popperViewRef=s.first)}},hostBindings:function(e,n){1&e&&t.NdJ("mouseover",function(){return n.onMouseOver()})("mouseleave",function(){return n.showOnLeave()})},exportAs:["ngxPopperjsContent"],ngContentSelectors:Ki,decls:5,vars:19,consts:[[3,"ngStyle","ngClass"],["popperViewRef",""],["class","ngxp__inner",3,"innerHTML",4,"ngIf"],["class","ngxp__inner",4,"ngIf"],["data-popper-arrow","",1,"ngxp__arrow",3,"ngClass"],[1,"ngxp__inner",3,"innerHTML"],[1,"ngxp__inner"]],template:function(e,n){1&e&&(t.F$t(Ki),t.TgZ(0,"div",0,1),t.YNc(2,No,2,1,"div",2),t.YNc(3,jo,2,0,"div",3),t._UZ(4,"div",4),t.qZA()),2&e&&(t.Udp("display",n.displayType)("opacity",n.opacity),t.ekj("ngxp__container",!n.popperOptions.disableDefaultStyling)("ngxp__animation",!n.popperOptions.disableAnimation),t.Q6J("ngStyle",n.popperOptions.styles)("ngClass",n.extractAppliedClassListExpr(n.popperOptions.applyClass)),t.uIk("id",n.id)("aria-hidden",n.ariaHidden)("aria-describedby",n.popperOptions.ariaDescribe||null)("role",n.popperOptions.ariaRole),t.xp6(2),t.Q6J("ngIf",n.text),t.xp6(1),t.Q6J("ngIf",!n.text),t.xp6(1),t.ekj("ngxp__force-arrow",n.arrowColor),t.Q6J("ngClass",n.extractAppliedClassListExpr(n.popperOptions.applyArrowClass)))},dependencies:[f.mk,f.O5,f.PC],styles:['popper-content{position:relative;display:block}.ngxp__container{display:none;position:absolute;border-radius:3px;border:1px solid grey;box-shadow:0 0 2px #00000080;padding:10px}.ngxp__container.ngxp__animation{animation:ngxp-fadeIn .15s ease-out}.ngxp__container>.ngxp__arrow,.ngxp__container>.ngxp__arrow:before{position:absolute;width:10px;height:10px;z-index:-1}.ngxp__container>.ngxp__arrow:before{transform:rotate(45deg);content:"";background-color:#fff;top:0;left:0}.ngxp__container[data-popper-placement^=top]>.ngxp__arrow{bottom:-4px}.ngxp__container[data-popper-placement^=bottom]>.ngxp__arrow{top:-4px}.ngxp__container[data-popper-placement^=left]>.ngxp__arrow{right:-4px}.ngxp__container[data-popper-placement^=right]>.ngxp__arrow{left:-4px}@keyframes ngxp-fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{display:block;opacity:1}}\n'],encapsulation:2,changeDetection:0}),i})();const Xi=new t.OlP("NGX_POPPERJS_DEFAULTS");class $o{static coerceBooleanProperty(a){return null!=a&&"false"!=`${a}`}}class Ie{constructor(a,e,n,s={}){this._changeDetectorRef=a,this._elementRef=e,this._vcr=n,this._popperDefaults=s,this.hideTimeout=0,this.popperOnHidden=new t.vpe,this.popperOnShown=new t.vpe,this.popperOnUpdate=new t.vpe,this.timeoutAfterShow=0,this._destroy$=new nt.x,this._globalEventListenersCtrl$=new nt.x,this._popperContentClass=Bn,this._scheduledHideTimeoutCtrl$=new nt.x,this._scheduledShowTimeoutCtrl$=new nt.x,this._shown=!1,Ie.baseOptions={...Ie.baseOptions,...this._popperDefaults}}set applyClass(a){a!==this._applyClass&&(this._applyClass=a,this._checkExisting("applyClass",a))}get applyClass(){return this._applyClass}set content(a){a!==this._content&&(this._content=a,this._popperContent&&("string"==typeof a?this._popperContent.text=a:this._popperContent=a))}get content(){return this._content}set disabled(a){a!==this._disabled&&(this._disabled=!!a,this._shown&&this.hide())}get disabled(){return this._disabled}set placement(a){this._popperPlacement=a,this._checkExisting("placement",a)}get placement(){return this._popperPlacement}set popperApplyArrowClass(a){if(a!==this._popperApplyArrowClass&&(this._popperApplyArrowClass=a,this._popperContent)){if(this._popperContent.popperOptions.applyArrowClass=a,!this._shown)return;this._popperContent.popperInstance.setOptions(this._popperContent.popperOptions)}}get popperApplyArrowClass(){return this._popperApplyArrowClass}set preventOverflow(a){this._popperPreventOverflow=$o.coerceBooleanProperty(a),this._checkExisting("preventOverflow",this._popperPreventOverflow)}get preventOverflow(){return this._popperPreventOverflow}static assignDefined(a,...e){for(const n of e)for(const s of Object.keys(n)){const r=n[s];void 0!==r&&(a[s]=r)}return a}applyTriggerListeners(){switch(this.showTrigger){case Be.click:this._addListener("click",this.toggle.bind(this));break;case Be.mousedown:this._addListener("mousedown",this.toggle.bind(this));break;case Be.hover:this._addListener("mouseenter",this.scheduledShow.bind(this,this.showDelay)),["touchend","touchcancel","mouseleave"].forEach(a=>{this._addListener(a,this.scheduledHide.bind(this,null,this.hideTimeout))})}this.showTrigger!==Be.hover&&this.hideOnMouseLeave&&["touchend","touchcancel","mouseleave"].forEach(a=>{this._addListener(a,this.scheduledHide.bind(this,null,this.hideTimeout))})}getRefElement(){return this.targetElement||this._elementRef.nativeElement}hide(){if(!this.disabled){if(!this._shown)return void this._scheduledShowTimeoutCtrl$.next();this._shown=!1,this._popperContentRef?this._popperContentRef.instance.hide():this._popperContent.hide(),this.popperOnHidden.emit(this),this._globalEventListenersCtrl$.next()}}hideOnClickOutsideHandler(a){this.disabled||!this.hideOnClickOutside||a.target===this._popperContent.elRef.nativeElement||this._popperContent.elRef.nativeElement.contains(a.target)||this.scheduledHide(a,this.hideTimeout)}hideOnScrollHandler(a){this.disabled||!this.hideOnScroll||this.scheduledHide(a,this.hideTimeout)}ngOnDestroy(){this._destroy$.next(),this._popperContent&&this._popperContent.clean()}ngOnInit(){this.hideOnClickOutside=typeof this.hideOnClickOutside>"u"?this.closeOnClickOutside:this.hideOnClickOutside,"string"==typeof this.content?(this._popperContent=this._constructContent(),this._popperContent.text=this.content):typeof this.content>"u"?(this._popperContent=this._constructContent(),this._popperContent.text=""):this._popperContent=this.content;const a=this._popperContent;a.referenceObject=this.getRefElement(),this._setContentProperties(a),this._setDefaults(),this.applyTriggerListeners(),this.showOnStart&&this.scheduledShow()}scheduledHide(a=null,e=this.hideTimeout){this.disabled||(this._scheduledShowTimeoutCtrl$.next(),(0,_n.H)(e).pipe((0,pe.R)(this._scheduledHideTimeoutCtrl$),(0,pe.R)(this._destroy$)).subscribe({next:()=>{const n=a?a.toElement:null,s=!!this._popperContent.popperViewRef&&this._popperContent.popperViewRef.nativeElement;!s||s===n||s.contains(n)||this.content&&this.content.isMouseOver||(this.hide(),this._applyChanges())}}))}scheduledShow(a=this.showDelay){this.disabled||(this._scheduledHideTimeoutCtrl$.next(),(0,_n.H)(a).pipe((0,pe.R)(this._scheduledShowTimeoutCtrl$),(0,pe.R)(this._destroy$)).subscribe({next:()=>{this.show(),this._applyChanges()}}))}show(){if(this._shown)return void this._scheduledHideTimeoutCtrl$.next();this._shown=!0;const a=this._popperContent,e=this.getRefElement();a.referenceObject!==e&&(a.referenceObject=e),this._setContentProperties(a),a.show(),this.popperOnShown.emit(this),this.timeoutAfterShow>0&&this.scheduledHide(null,this.timeoutAfterShow),(0,Pn.R)(document,"click").pipe((0,pe.R)(this._globalEventListenersCtrl$),(0,pe.R)(this._destroy$)).subscribe({next:n=>this.hideOnClickOutsideHandler(n)}),(0,Pn.R)(this._getScrollParent(this.getRefElement()),"scroll").pipe((0,pe.R)(this._globalEventListenersCtrl$),(0,pe.R)(this._destroy$)).subscribe({next:n=>this.hideOnScrollHandler(n)})}toggle(){this.disabled||(this._shown?this.scheduledHide(null,this.hideTimeout):this.scheduledShow())}_addListener(a,e){(0,Pn.R)(this._elementRef.nativeElement,a).pipe((0,pe.R)(this._destroy$)).subscribe({next:e})}_applyChanges(){this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges()}_checkExisting(a,e){if(this._popperContent){if(this._popperContent.popperOptions[a]=e,!this._shown)return;this._popperContent.popperInstance.setOptions(this._popperContent.popperOptions)}}_constructContent(){return this._popperContentRef=this._vcr.createComponent(this._popperContentClass),this._popperContentRef.instance}_getScrollParent(a){const n=a instanceof HTMLElement&&window.getComputedStyle(a).overflowY;return a?"visible"!==n&&"hidden"!==n&&a.scrollHeight>=a.clientHeight?a:this._getScrollParent(a.parentNode)||document:null}_onPopperUpdate(a){this.popperOnUpdate.emit(a)}_setContentProperties(a){a.popperOptions=Ie.assignDefined(a.popperOptions,Ie.baseOptions,{showDelay:this.showDelay,disableAnimation:this.disableAnimation,disableDefaultStyling:this.disableStyle,placement:this.placement,boundariesElement:this.boundariesElement,trigger:this.showTrigger,positionFixed:this.positionFixed,popperModifiers:this.popperModifiers,ariaDescribe:this.ariaDescribe,ariaRole:this.ariaRole,applyClass:this.applyClass,applyArrowClass:this.popperApplyArrowClass,hideOnMouseLeave:this.hideOnMouseLeave,styles:this.styles,appendTo:this.popperAppendTo,preventOverflow:this.preventOverflow}),a.onUpdate=this._onPopperUpdate.bind(this),a.onHidden.pipe((0,pe.R)(this._destroy$)).subscribe(this.hide.bind(this))}_setDefaults(){["showDelay","hideOnScroll","hideOnMouseLeave","hideOnClickOutside","ariaRole","ariaDescribe"].forEach(a=>{this[a]=void 0===this[a]?Ie.baseOptions[a]:this[a]}),this.showTrigger=this.showTrigger||Ie.baseOptions.trigger,this.styles=void 0===this.styles?{...Ie.baseOptions.styles}:this.styles}}function es(i={}){return[{provide:Xi,useValue:i}]}Ie.baseOptions={showDelay:0,placement:yt.AUTO,hideOnClickOutside:!0,hideOnMouseLeave:!1,hideOnScroll:!1,appendTo:void 0,ariaRole:"popper",ariaDescribe:"",styles:{},trigger:Be.click},Ie.nextId=0,Ie.\u0275fac=function(a){return new(a||Ie)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Xi))},Ie.\u0275dir=t.lG2({type:Ie,selectors:[["","popper",""]],inputs:{applyClass:["popperApplyClass","applyClass"],ariaDescribe:["popperAriaDescribeBy","ariaDescribe"],ariaRole:["popperAriaRole","ariaRole"],boundariesElement:["popperBoundaries","boundariesElement"],closeOnClickOutside:["popperCloseOnClickOutside","closeOnClickOutside"],content:["popper","content"],disableAnimation:["popperDisableAnimation","disableAnimation"],disabled:["popperDisabled","disabled"],disableStyle:["popperDisableStyle","disableStyle"],hideOnClickOutside:["popperHideOnClickOutside","hideOnClickOutside"],hideOnMouseLeave:["popperHideOnMouseLeave","hideOnMouseLeave"],hideOnScroll:["popperHideOnScroll","hideOnScroll"],hideTimeout:["popperTimeout","hideTimeout"],placement:["popperPlacement","placement"],popperAppendTo:"popperAppendTo",popperApplyArrowClass:"popperApplyArrowClass",popperModifiers:"popperModifiers",positionFixed:["popperPositionFixed","positionFixed"],preventOverflow:["popperPreventOverflow","preventOverflow"],showDelay:["popperDelay","showDelay"],showOnStart:["popperShowOnStart","showOnStart"],showTrigger:["popperTrigger","showTrigger"],styles:["popperStyles","styles"],targetElement:["popperTarget","targetElement"],timeoutAfterShow:["popperTimeoutAfterShow","timeoutAfterShow"]},outputs:{popperOnHidden:"popperOnHidden",popperOnShown:"popperOnShown",popperOnUpdate:"popperOnUpdate"},exportAs:["popper"]});let Ho=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[es(e)]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[es()],imports:[f.ez]}),i})();var qo=_(2711);function Nn(){return Nn=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Nn.apply(this,arguments)}var Yo=/[|\\{}()[\]^$+*?.]/g,Jo=function(i){if("string"!=typeof i)throw new TypeError("Expected a string");return i.replace(Yo,"\\$&")};const Vo=[["\xdf","ss"],["\u1e9e","Ss"],["\xe4","ae"],["\xc4","Ae"],["\xf6","oe"],["\xd6","Oe"],["\xfc","ue"],["\xdc","Ue"],["\xc0","A"],["\xc1","A"],["\xc2","A"],["\xc3","A"],["\xc4","Ae"],["\xc5","A"],["\xc6","AE"],["\xc7","C"],["\xc8","E"],["\xc9","E"],["\xca","E"],["\xcb","E"],["\xcc","I"],["\xcd","I"],["\xce","I"],["\xcf","I"],["\xd0","D"],["\xd1","N"],["\xd2","O"],["\xd3","O"],["\xd4","O"],["\xd5","O"],["\xd6","Oe"],["\u0150","O"],["\xd8","O"],["\xd9","U"],["\xda","U"],["\xdb","U"],["\xdc","Ue"],["\u0170","U"],["\xdd","Y"],["\xde","TH"],["\xdf","ss"],["\xe0","a"],["\xe1","a"],["\xe2","a"],["\xe3","a"],["\xe4","ae"],["\xe5","a"],["\xe6","ae"],["\xe7","c"],["\xe8","e"],["\xe9","e"],["\xea","e"],["\xeb","e"],["\xec","i"],["\xed","i"],["\xee","i"],["\xef","i"],["\xf0","d"],["\xf1","n"],["\xf2","o"],["\xf3","o"],["\xf4","o"],["\xf5","o"],["\xf6","oe"],["\u0151","o"],["\xf8","o"],["\xf9","u"],["\xfa","u"],["\xfb","u"],["\xfc","ue"],["\u0171","u"],["\xfd","y"],["\xfe","th"],["\xff","y"],["\u1e9e","SS"],["\xe0","a"],["\xc0","A"],["\xe1","a"],["\xc1","A"],["\xe2","a"],["\xc2","A"],["\xe3","a"],["\xc3","A"],["\xe8","e"],["\xc8","E"],["\xe9","e"],["\xc9","E"],["\xea","e"],["\xca","E"],["\xec","i"],["\xcc","I"],["\xed","i"],["\xcd","I"],["\xf2","o"],["\xd2","O"],["\xf3","o"],["\xd3","O"],["\xf4","o"],["\xd4","O"],["\xf5","o"],["\xd5","O"],["\xf9","u"],["\xd9","U"],["\xfa","u"],["\xda","U"],["\xfd","y"],["\xdd","Y"],["\u0103","a"],["\u0102","A"],["\u0110","D"],["\u0111","d"],["\u0129","i"],["\u0128","I"],["\u0169","u"],["\u0168","U"],["\u01a1","o"],["\u01a0","O"],["\u01b0","u"],["\u01af","U"],["\u1ea1","a"],["\u1ea0","A"],["\u1ea3","a"],["\u1ea2","A"],["\u1ea5","a"],["\u1ea4","A"],["\u1ea7","a"],["\u1ea6","A"],["\u1ea9","a"],["\u1ea8","A"],["\u1eab","a"],["\u1eaa","A"],["\u1ead","a"],["\u1eac","A"],["\u1eaf","a"],["\u1eae","A"],["\u1eb1","a"],["\u1eb0","A"],["\u1eb3","a"],["\u1eb2","A"],["\u1eb5","a"],["\u1eb4","A"],["\u1eb7","a"],["\u1eb6","A"],["\u1eb9","e"],["\u1eb8","E"],["\u1ebb","e"],["\u1eba","E"],["\u1ebd","e"],["\u1ebc","E"],["\u1ebf","e"],["\u1ebe","E"],["\u1ec1","e"],["\u1ec0","E"],["\u1ec3","e"],["\u1ec2","E"],["\u1ec5","e"],["\u1ec4","E"],["\u1ec7","e"],["\u1ec6","E"],["\u1ec9","i"],["\u1ec8","I"],["\u1ecb","i"],["\u1eca","I"],["\u1ecd","o"],["\u1ecc","O"],["\u1ecf","o"],["\u1ece","O"],["\u1ed1","o"],["\u1ed0","O"],["\u1ed3","o"],["\u1ed2","O"],["\u1ed5","o"],["\u1ed4","O"],["\u1ed7","o"],["\u1ed6","O"],["\u1ed9","o"],["\u1ed8","O"],["\u1edb","o"],["\u1eda","O"],["\u1edd","o"],["\u1edc","O"],["\u1edf","o"],["\u1ede","O"],["\u1ee1","o"],["\u1ee0","O"],["\u1ee3","o"],["\u1ee2","O"],["\u1ee5","u"],["\u1ee4","U"],["\u1ee7","u"],["\u1ee6","U"],["\u1ee9","u"],["\u1ee8","U"],["\u1eeb","u"],["\u1eea","U"],["\u1eed","u"],["\u1eec","U"],["\u1eef","u"],["\u1eee","U"],["\u1ef1","u"],["\u1ef0","U"],["\u1ef3","y"],["\u1ef2","Y"],["\u1ef5","y"],["\u1ef4","Y"],["\u1ef7","y"],["\u1ef6","Y"],["\u1ef9","y"],["\u1ef8","Y"],["\u0621","e"],["\u0622","a"],["\u0623","a"],["\u0624","w"],["\u0625","i"],["\u0626","y"],["\u0627","a"],["\u0628","b"],["\u0629","t"],["\u062a","t"],["\u062b","th"],["\u062c","j"],["\u062d","h"],["\u062e","kh"],["\u062f","d"],["\u0630","dh"],["\u0631","r"],["\u0632","z"],["\u0633","s"],["\u0634","sh"],["\u0635","s"],["\u0636","d"],["\u0637","t"],["\u0638","z"],["\u0639","e"],["\u063a","gh"],["\u0640","_"],["\u0641","f"],["\u0642","q"],["\u0643","k"],["\u0644","l"],["\u0645","m"],["\u0646","n"],["\u0647","h"],["\u0648","w"],["\u0649","a"],["\u064a","y"],["\u064e\u200e","a"],["\u064f","u"],["\u0650\u200e","i"],["\u0660","0"],["\u0661","1"],["\u0662","2"],["\u0663","3"],["\u0664","4"],["\u0665","5"],["\u0666","6"],["\u0667","7"],["\u0668","8"],["\u0669","9"],["\u0686","ch"],["\u06a9","k"],["\u06af","g"],["\u067e","p"],["\u0698","zh"],["\u06cc","y"],["\u06f0","0"],["\u06f1","1"],["\u06f2","2"],["\u06f3","3"],["\u06f4","4"],["\u06f5","5"],["\u06f6","6"],["\u06f7","7"],["\u06f8","8"],["\u06f9","9"],["\u067c","p"],["\u0681","z"],["\u0685","c"],["\u0689","d"],["\ufeab","d"],["\ufead","r"],["\u0693","r"],["\ufeaf","z"],["\u0696","g"],["\u069a","x"],["\u06ab","g"],["\u06bc","n"],["\u06c0","e"],["\u06d0","e"],["\u06cd","ai"],["\u0679","t"],["\u0688","d"],["\u0691","r"],["\u06ba","n"],["\u06c1","h"],["\u06be","h"],["\u06d2","e"],["\u0410","A"],["\u0430","a"],["\u0411","B"],["\u0431","b"],["\u0412","V"],["\u0432","v"],["\u0413","G"],["\u0433","g"],["\u0414","D"],["\u0434","d"],["\u044a\u0435","ye"],["\u042a\u0435","Ye"],["\u044a\u0415","yE"],["\u042a\u0415","YE"],["\u0415","E"],["\u0435","e"],["\u0401","Yo"],["\u0451","yo"],["\u0416","Zh"],["\u0436","zh"],["\u0417","Z"],["\u0437","z"],["\u0418","I"],["\u0438","i"],["\u044b\u0439","iy"],["\u042b\u0439","Iy"],["\u042b\u0419","IY"],["\u044b\u0419","iY"],["\u0419","Y"],["\u0439","y"],["\u041a","K"],["\u043a","k"],["\u041b","L"],["\u043b","l"],["\u041c","M"],["\u043c","m"],["\u041d","N"],["\u043d","n"],["\u041e","O"],["\u043e","o"],["\u041f","P"],["\u043f","p"],["\u0420","R"],["\u0440","r"],["\u0421","S"],["\u0441","s"],["\u0422","T"],["\u0442","t"],["\u0423","U"],["\u0443","u"],["\u0424","F"],["\u0444","f"],["\u0425","Kh"],["\u0445","kh"],["\u0426","Ts"],["\u0446","ts"],["\u0427","Ch"],["\u0447","ch"],["\u0428","Sh"],["\u0448","sh"],["\u0429","Sch"],["\u0449","sch"],["\u042a",""],["\u044a",""],["\u042b","Y"],["\u044b","y"],["\u042c",""],["\u044c",""],["\u042d","E"],["\u044d","e"],["\u042e","Yu"],["\u044e","yu"],["\u042f","Ya"],["\u044f","ya"],["\u0103","a"],["\u0102","A"],["\u0219","s"],["\u0218","S"],["\u021b","t"],["\u021a","T"],["\u0163","t"],["\u0162","T"],["\u015f","s"],["\u015e","S"],["\xe7","c"],["\xc7","C"],["\u011f","g"],["\u011e","G"],["\u0131","i"],["\u0130","I"],["\u0561","a"],["\u0531","A"],["\u0562","b"],["\u0532","B"],["\u0563","g"],["\u0533","G"],["\u0564","d"],["\u0534","D"],["\u0565","ye"],["\u0535","Ye"],["\u0566","z"],["\u0536","Z"],["\u0567","e"],["\u0537","E"],["\u0568","y"],["\u0538","Y"],["\u0569","t"],["\u0539","T"],["\u056a","zh"],["\u053a","Zh"],["\u056b","i"],["\u053b","I"],["\u056c","l"],["\u053c","L"],["\u056d","kh"],["\u053d","Kh"],["\u056e","ts"],["\u053e","Ts"],["\u056f","k"],["\u053f","K"],["\u0570","h"],["\u0540","H"],["\u0571","dz"],["\u0541","Dz"],["\u0572","gh"],["\u0542","Gh"],["\u0573","tch"],["\u0543","Tch"],["\u0574","m"],["\u0544","M"],["\u0575","y"],["\u0545","Y"],["\u0576","n"],["\u0546","N"],["\u0577","sh"],["\u0547","Sh"],["\u0578","vo"],["\u0548","Vo"],["\u0579","ch"],["\u0549","Ch"],["\u057a","p"],["\u054a","P"],["\u057b","j"],["\u054b","J"],["\u057c","r"],["\u054c","R"],["\u057d","s"],["\u054d","S"],["\u057e","v"],["\u054e","V"],["\u057f","t"],["\u054f","T"],["\u0580","r"],["\u0550","R"],["\u0581","c"],["\u0551","C"],["\u0578\u0582","u"],["\u0548\u0552","U"],["\u0548\u0582","U"],["\u0583","p"],["\u0553","P"],["\u0584","q"],["\u0554","Q"],["\u0585","o"],["\u0555","O"],["\u0586","f"],["\u0556","F"],["\u0587","yev"],["\u10d0","a"],["\u10d1","b"],["\u10d2","g"],["\u10d3","d"],["\u10d4","e"],["\u10d5","v"],["\u10d6","z"],["\u10d7","t"],["\u10d8","i"],["\u10d9","k"],["\u10da","l"],["\u10db","m"],["\u10dc","n"],["\u10dd","o"],["\u10de","p"],["\u10df","zh"],["\u10e0","r"],["\u10e1","s"],["\u10e2","t"],["\u10e3","u"],["\u10e4","ph"],["\u10e5","q"],["\u10e6","gh"],["\u10e7","k"],["\u10e8","sh"],["\u10e9","ch"],["\u10ea","ts"],["\u10eb","dz"],["\u10ec","ts"],["\u10ed","tch"],["\u10ee","kh"],["\u10ef","j"],["\u10f0","h"],["\u010d","c"],["\u010f","d"],["\u011b","e"],["\u0148","n"],["\u0159","r"],["\u0161","s"],["\u0165","t"],["\u016f","u"],["\u017e","z"],["\u010c","C"],["\u010e","D"],["\u011a","E"],["\u0147","N"],["\u0158","R"],["\u0160","S"],["\u0164","T"],["\u016e","U"],["\u017d","Z"],["\u0780","h"],["\u0781","sh"],["\u0782","n"],["\u0783","r"],["\u0784","b"],["\u0785","lh"],["\u0786","k"],["\u0787","a"],["\u0788","v"],["\u0789","m"],["\u078a","f"],["\u078b","dh"],["\u078c","th"],["\u078d","l"],["\u078e","g"],["\u078f","gn"],["\u0790","s"],["\u0791","d"],["\u0792","z"],["\u0793","t"],["\u0794","y"],["\u0795","p"],["\u0796","j"],["\u0797","ch"],["\u0798","tt"],["\u0799","hh"],["\u079a","kh"],["\u079b","th"],["\u079c","z"],["\u079d","sh"],["\u079e","s"],["\u079f","d"],["\u07a0","t"],["\u07a1","z"],["\u07a2","a"],["\u07a3","gh"],["\u07a4","q"],["\u07a5","w"],["\u07a6","a"],["\u07a7","aa"],["\u07a8","i"],["\u07a9","ee"],["\u07aa","u"],["\u07ab","oo"],["\u07ac","e"],["\u07ad","ey"],["\u07ae","o"],["\u07af","oa"],["\u07b0",""],["\u03b1","a"],["\u03b2","v"],["\u03b3","g"],["\u03b4","d"],["\u03b5","e"],["\u03b6","z"],["\u03b7","i"],["\u03b8","th"],["\u03b9","i"],["\u03ba","k"],["\u03bb","l"],["\u03bc","m"],["\u03bd","n"],["\u03be","ks"],["\u03bf","o"],["\u03c0","p"],["\u03c1","r"],["\u03c3","s"],["\u03c4","t"],["\u03c5","y"],["\u03c6","f"],["\u03c7","x"],["\u03c8","ps"],["\u03c9","o"],["\u03ac","a"],["\u03ad","e"],["\u03af","i"],["\u03cc","o"],["\u03cd","y"],["\u03ae","i"],["\u03ce","o"],["\u03c2","s"],["\u03ca","i"],["\u03b0","y"],["\u03cb","y"],["\u0390","i"],["\u0391","A"],["\u0392","B"],["\u0393","G"],["\u0394","D"],["\u0395","E"],["\u0396","Z"],["\u0397","I"],["\u0398","TH"],["\u0399","I"],["\u039a","K"],["\u039b","L"],["\u039c","M"],["\u039d","N"],["\u039e","KS"],["\u039f","O"],["\u03a0","P"],["\u03a1","R"],["\u03a3","S"],["\u03a4","T"],["\u03a5","Y"],["\u03a6","F"],["\u03a7","X"],["\u03a8","PS"],["\u03a9","O"],["\u0386","A"],["\u0388","E"],["\u038a","I"],["\u038c","O"],["\u038e","Y"],["\u0389","I"],["\u038f","O"],["\u03aa","I"],["\u03ab","Y"],["\u0101","a"],["\u0113","e"],["\u0123","g"],["\u012b","i"],["\u0137","k"],["\u013c","l"],["\u0146","n"],["\u016b","u"],["\u0100","A"],["\u0112","E"],["\u0122","G"],["\u012a","I"],["\u0136","K"],["\u013b","L"],["\u0145","N"],["\u016a","U"],["\u010d","c"],["\u0161","s"],["\u017e","z"],["\u010c","C"],["\u0160","S"],["\u017d","Z"],["\u0105","a"],["\u010d","c"],["\u0119","e"],["\u0117","e"],["\u012f","i"],["\u0161","s"],["\u0173","u"],["\u016b","u"],["\u017e","z"],["\u0104","A"],["\u010c","C"],["\u0118","E"],["\u0116","E"],["\u012e","I"],["\u0160","S"],["\u0172","U"],["\u016a","U"],["\u040c","Kj"],["\u045c","kj"],["\u0409","Lj"],["\u0459","lj"],["\u040a","Nj"],["\u045a","nj"],["\u0422\u0441","Ts"],["\u0442\u0441","ts"],["\u0105","a"],["\u0107","c"],["\u0119","e"],["\u0142","l"],["\u0144","n"],["\u015b","s"],["\u017a","z"],["\u017c","z"],["\u0104","A"],["\u0106","C"],["\u0118","E"],["\u0141","L"],["\u0143","N"],["\u015a","S"],["\u0179","Z"],["\u017b","Z"],["\u0404","Ye"],["\u0406","I"],["\u0407","Yi"],["\u0490","G"],["\u0454","ye"],["\u0456","i"],["\u0457","yi"],["\u0491","g"],["\u0132","IJ"],["\u0133","ij"],["\xa2","c"],["\xa5","Y"],["\u07ff","b"],["\u09f3","t"],["\u0af1","Bo"],["\u0e3f","B"],["\u20a0","CE"],["\u20a1","C"],["\u20a2","Cr"],["\u20a3","F"],["\u20a5","m"],["\u20a6","N"],["\u20a7","Pt"],["\u20a8","Rs"],["\u20a9","W"],["\u20ab","s"],["\u20ac","E"],["\u20ad","K"],["\u20ae","T"],["\u20af","Dp"],["\u20b0","S"],["\u20b1","P"],["\u20b2","G"],["\u20b3","A"],["\u20b4","S"],["\u20b5","C"],["\u20b6","tt"],["\u20b7","S"],["\u20b8","T"],["\u20b9","R"],["\u20ba","L"],["\u20bd","P"],["\u20bf","B"],["\ufe69","$"],["\uffe0","c"],["\uffe5","Y"],["\uffe6","W"],["\u{1d400}","A"],["\u{1d401}","B"],["\u{1d402}","C"],["\u{1d403}","D"],["\u{1d404}","E"],["\u{1d405}","F"],["\u{1d406}","G"],["\u{1d407}","H"],["\u{1d408}","I"],["\u{1d409}","J"],["\u{1d40a}","K"],["\u{1d40b}","L"],["\u{1d40c}","M"],["\u{1d40d}","N"],["\u{1d40e}","O"],["\u{1d40f}","P"],["\u{1d410}","Q"],["\u{1d411}","R"],["\u{1d412}","S"],["\u{1d413}","T"],["\u{1d414}","U"],["\u{1d415}","V"],["\u{1d416}","W"],["\u{1d417}","X"],["\u{1d418}","Y"],["\u{1d419}","Z"],["\u{1d41a}","a"],["\u{1d41b}","b"],["\u{1d41c}","c"],["\u{1d41d}","d"],["\u{1d41e}","e"],["\u{1d41f}","f"],["\u{1d420}","g"],["\u{1d421}","h"],["\u{1d422}","i"],["\u{1d423}","j"],["\u{1d424}","k"],["\u{1d425}","l"],["\u{1d426}","m"],["\u{1d427}","n"],["\u{1d428}","o"],["\u{1d429}","p"],["\u{1d42a}","q"],["\u{1d42b}","r"],["\u{1d42c}","s"],["\u{1d42d}","t"],["\u{1d42e}","u"],["\u{1d42f}","v"],["\u{1d430}","w"],["\u{1d431}","x"],["\u{1d432}","y"],["\u{1d433}","z"],["\u{1d434}","A"],["\u{1d435}","B"],["\u{1d436}","C"],["\u{1d437}","D"],["\u{1d438}","E"],["\u{1d439}","F"],["\u{1d43a}","G"],["\u{1d43b}","H"],["\u{1d43c}","I"],["\u{1d43d}","J"],["\u{1d43e}","K"],["\u{1d43f}","L"],["\u{1d440}","M"],["\u{1d441}","N"],["\u{1d442}","O"],["\u{1d443}","P"],["\u{1d444}","Q"],["\u{1d445}","R"],["\u{1d446}","S"],["\u{1d447}","T"],["\u{1d448}","U"],["\u{1d449}","V"],["\u{1d44a}","W"],["\u{1d44b}","X"],["\u{1d44c}","Y"],["\u{1d44d}","Z"],["\u{1d44e}","a"],["\u{1d44f}","b"],["\u{1d450}","c"],["\u{1d451}","d"],["\u{1d452}","e"],["\u{1d453}","f"],["\u{1d454}","g"],["\u{1d456}","i"],["\u{1d457}","j"],["\u{1d458}","k"],["\u{1d459}","l"],["\u{1d45a}","m"],["\u{1d45b}","n"],["\u{1d45c}","o"],["\u{1d45d}","p"],["\u{1d45e}","q"],["\u{1d45f}","r"],["\u{1d460}","s"],["\u{1d461}","t"],["\u{1d462}","u"],["\u{1d463}","v"],["\u{1d464}","w"],["\u{1d465}","x"],["\u{1d466}","y"],["\u{1d467}","z"],["\u{1d468}","A"],["\u{1d469}","B"],["\u{1d46a}","C"],["\u{1d46b}","D"],["\u{1d46c}","E"],["\u{1d46d}","F"],["\u{1d46e}","G"],["\u{1d46f}","H"],["\u{1d470}","I"],["\u{1d471}","J"],["\u{1d472}","K"],["\u{1d473}","L"],["\u{1d474}","M"],["\u{1d475}","N"],["\u{1d476}","O"],["\u{1d477}","P"],["\u{1d478}","Q"],["\u{1d479}","R"],["\u{1d47a}","S"],["\u{1d47b}","T"],["\u{1d47c}","U"],["\u{1d47d}","V"],["\u{1d47e}","W"],["\u{1d47f}","X"],["\u{1d480}","Y"],["\u{1d481}","Z"],["\u{1d482}","a"],["\u{1d483}","b"],["\u{1d484}","c"],["\u{1d485}","d"],["\u{1d486}","e"],["\u{1d487}","f"],["\u{1d488}","g"],["\u{1d489}","h"],["\u{1d48a}","i"],["\u{1d48b}","j"],["\u{1d48c}","k"],["\u{1d48d}","l"],["\u{1d48e}","m"],["\u{1d48f}","n"],["\u{1d490}","o"],["\u{1d491}","p"],["\u{1d492}","q"],["\u{1d493}","r"],["\u{1d494}","s"],["\u{1d495}","t"],["\u{1d496}","u"],["\u{1d497}","v"],["\u{1d498}","w"],["\u{1d499}","x"],["\u{1d49a}","y"],["\u{1d49b}","z"],["\u{1d49c}","A"],["\u{1d49e}","C"],["\u{1d49f}","D"],["\u{1d4a2}","g"],["\u{1d4a5}","J"],["\u{1d4a6}","K"],["\u{1d4a9}","N"],["\u{1d4aa}","O"],["\u{1d4ab}","P"],["\u{1d4ac}","Q"],["\u{1d4ae}","S"],["\u{1d4af}","T"],["\u{1d4b0}","U"],["\u{1d4b1}","V"],["\u{1d4b2}","W"],["\u{1d4b3}","X"],["\u{1d4b4}","Y"],["\u{1d4b5}","Z"],["\u{1d4b6}","a"],["\u{1d4b7}","b"],["\u{1d4b8}","c"],["\u{1d4b9}","d"],["\u{1d4bb}","f"],["\u{1d4bd}","h"],["\u{1d4be}","i"],["\u{1d4bf}","j"],["\u{1d4c0}","h"],["\u{1d4c1}","l"],["\u{1d4c2}","m"],["\u{1d4c3}","n"],["\u{1d4c5}","p"],["\u{1d4c6}","q"],["\u{1d4c7}","r"],["\u{1d4c8}","s"],["\u{1d4c9}","t"],["\u{1d4ca}","u"],["\u{1d4cb}","v"],["\u{1d4cc}","w"],["\u{1d4cd}","x"],["\u{1d4ce}","y"],["\u{1d4cf}","z"],["\u{1d4d0}","A"],["\u{1d4d1}","B"],["\u{1d4d2}","C"],["\u{1d4d3}","D"],["\u{1d4d4}","E"],["\u{1d4d5}","F"],["\u{1d4d6}","G"],["\u{1d4d7}","H"],["\u{1d4d8}","I"],["\u{1d4d9}","J"],["\u{1d4da}","K"],["\u{1d4db}","L"],["\u{1d4dc}","M"],["\u{1d4dd}","N"],["\u{1d4de}","O"],["\u{1d4df}","P"],["\u{1d4e0}","Q"],["\u{1d4e1}","R"],["\u{1d4e2}","S"],["\u{1d4e3}","T"],["\u{1d4e4}","U"],["\u{1d4e5}","V"],["\u{1d4e6}","W"],["\u{1d4e7}","X"],["\u{1d4e8}","Y"],["\u{1d4e9}","Z"],["\u{1d4ea}","a"],["\u{1d4eb}","b"],["\u{1d4ec}","c"],["\u{1d4ed}","d"],["\u{1d4ee}","e"],["\u{1d4ef}","f"],["\u{1d4f0}","g"],["\u{1d4f1}","h"],["\u{1d4f2}","i"],["\u{1d4f3}","j"],["\u{1d4f4}","k"],["\u{1d4f5}","l"],["\u{1d4f6}","m"],["\u{1d4f7}","n"],["\u{1d4f8}","o"],["\u{1d4f9}","p"],["\u{1d4fa}","q"],["\u{1d4fb}","r"],["\u{1d4fc}","s"],["\u{1d4fd}","t"],["\u{1d4fe}","u"],["\u{1d4ff}","v"],["\u{1d500}","w"],["\u{1d501}","x"],["\u{1d502}","y"],["\u{1d503}","z"],["\u{1d504}","A"],["\u{1d505}","B"],["\u{1d507}","D"],["\u{1d508}","E"],["\u{1d509}","F"],["\u{1d50a}","G"],["\u{1d50d}","J"],["\u{1d50e}","K"],["\u{1d50f}","L"],["\u{1d510}","M"],["\u{1d511}","N"],["\u{1d512}","O"],["\u{1d513}","P"],["\u{1d514}","Q"],["\u{1d516}","S"],["\u{1d517}","T"],["\u{1d518}","U"],["\u{1d519}","V"],["\u{1d51a}","W"],["\u{1d51b}","X"],["\u{1d51c}","Y"],["\u{1d51e}","a"],["\u{1d51f}","b"],["\u{1d520}","c"],["\u{1d521}","d"],["\u{1d522}","e"],["\u{1d523}","f"],["\u{1d524}","g"],["\u{1d525}","h"],["\u{1d526}","i"],["\u{1d527}","j"],["\u{1d528}","k"],["\u{1d529}","l"],["\u{1d52a}","m"],["\u{1d52b}","n"],["\u{1d52c}","o"],["\u{1d52d}","p"],["\u{1d52e}","q"],["\u{1d52f}","r"],["\u{1d530}","s"],["\u{1d531}","t"],["\u{1d532}","u"],["\u{1d533}","v"],["\u{1d534}","w"],["\u{1d535}","x"],["\u{1d536}","y"],["\u{1d537}","z"],["\u{1d538}","A"],["\u{1d539}","B"],["\u{1d53b}","D"],["\u{1d53c}","E"],["\u{1d53d}","F"],["\u{1d53e}","G"],["\u{1d540}","I"],["\u{1d541}","J"],["\u{1d542}","K"],["\u{1d543}","L"],["\u{1d544}","M"],["\u{1d546}","N"],["\u{1d54a}","S"],["\u{1d54b}","T"],["\u{1d54c}","U"],["\u{1d54d}","V"],["\u{1d54e}","W"],["\u{1d54f}","X"],["\u{1d550}","Y"],["\u{1d552}","a"],["\u{1d553}","b"],["\u{1d554}","c"],["\u{1d555}","d"],["\u{1d556}","e"],["\u{1d557}","f"],["\u{1d558}","g"],["\u{1d559}","h"],["\u{1d55a}","i"],["\u{1d55b}","j"],["\u{1d55c}","k"],["\u{1d55d}","l"],["\u{1d55e}","m"],["\u{1d55f}","n"],["\u{1d560}","o"],["\u{1d561}","p"],["\u{1d562}","q"],["\u{1d563}","r"],["\u{1d564}","s"],["\u{1d565}","t"],["\u{1d566}","u"],["\u{1d567}","v"],["\u{1d568}","w"],["\u{1d569}","x"],["\u{1d56a}","y"],["\u{1d56b}","z"],["\u{1d56c}","A"],["\u{1d56d}","B"],["\u{1d56e}","C"],["\u{1d56f}","D"],["\u{1d570}","E"],["\u{1d571}","F"],["\u{1d572}","G"],["\u{1d573}","H"],["\u{1d574}","I"],["\u{1d575}","J"],["\u{1d576}","K"],["\u{1d577}","L"],["\u{1d578}","M"],["\u{1d579}","N"],["\u{1d57a}","O"],["\u{1d57b}","P"],["\u{1d57c}","Q"],["\u{1d57d}","R"],["\u{1d57e}","S"],["\u{1d57f}","T"],["\u{1d580}","U"],["\u{1d581}","V"],["\u{1d582}","W"],["\u{1d583}","X"],["\u{1d584}","Y"],["\u{1d585}","Z"],["\u{1d586}","a"],["\u{1d587}","b"],["\u{1d588}","c"],["\u{1d589}","d"],["\u{1d58a}","e"],["\u{1d58b}","f"],["\u{1d58c}","g"],["\u{1d58d}","h"],["\u{1d58e}","i"],["\u{1d58f}","j"],["\u{1d590}","k"],["\u{1d591}","l"],["\u{1d592}","m"],["\u{1d593}","n"],["\u{1d594}","o"],["\u{1d595}","p"],["\u{1d596}","q"],["\u{1d597}","r"],["\u{1d598}","s"],["\u{1d599}","t"],["\u{1d59a}","u"],["\u{1d59b}","v"],["\u{1d59c}","w"],["\u{1d59d}","x"],["\u{1d59e}","y"],["\u{1d59f}","z"],["\u{1d5a0}","A"],["\u{1d5a1}","B"],["\u{1d5a2}","C"],["\u{1d5a3}","D"],["\u{1d5a4}","E"],["\u{1d5a5}","F"],["\u{1d5a6}","G"],["\u{1d5a7}","H"],["\u{1d5a8}","I"],["\u{1d5a9}","J"],["\u{1d5aa}","K"],["\u{1d5ab}","L"],["\u{1d5ac}","M"],["\u{1d5ad}","N"],["\u{1d5ae}","O"],["\u{1d5af}","P"],["\u{1d5b0}","Q"],["\u{1d5b1}","R"],["\u{1d5b2}","S"],["\u{1d5b3}","T"],["\u{1d5b4}","U"],["\u{1d5b5}","V"],["\u{1d5b6}","W"],["\u{1d5b7}","X"],["\u{1d5b8}","Y"],["\u{1d5b9}","Z"],["\u{1d5ba}","a"],["\u{1d5bb}","b"],["\u{1d5bc}","c"],["\u{1d5bd}","d"],["\u{1d5be}","e"],["\u{1d5bf}","f"],["\u{1d5c0}","g"],["\u{1d5c1}","h"],["\u{1d5c2}","i"],["\u{1d5c3}","j"],["\u{1d5c4}","k"],["\u{1d5c5}","l"],["\u{1d5c6}","m"],["\u{1d5c7}","n"],["\u{1d5c8}","o"],["\u{1d5c9}","p"],["\u{1d5ca}","q"],["\u{1d5cb}","r"],["\u{1d5cc}","s"],["\u{1d5cd}","t"],["\u{1d5ce}","u"],["\u{1d5cf}","v"],["\u{1d5d0}","w"],["\u{1d5d1}","x"],["\u{1d5d2}","y"],["\u{1d5d3}","z"],["\u{1d5d4}","A"],["\u{1d5d5}","B"],["\u{1d5d6}","C"],["\u{1d5d7}","D"],["\u{1d5d8}","E"],["\u{1d5d9}","F"],["\u{1d5da}","G"],["\u{1d5db}","H"],["\u{1d5dc}","I"],["\u{1d5dd}","J"],["\u{1d5de}","K"],["\u{1d5df}","L"],["\u{1d5e0}","M"],["\u{1d5e1}","N"],["\u{1d5e2}","O"],["\u{1d5e3}","P"],["\u{1d5e4}","Q"],["\u{1d5e5}","R"],["\u{1d5e6}","S"],["\u{1d5e7}","T"],["\u{1d5e8}","U"],["\u{1d5e9}","V"],["\u{1d5ea}","W"],["\u{1d5eb}","X"],["\u{1d5ec}","Y"],["\u{1d5ed}","Z"],["\u{1d5ee}","a"],["\u{1d5ef}","b"],["\u{1d5f0}","c"],["\u{1d5f1}","d"],["\u{1d5f2}","e"],["\u{1d5f3}","f"],["\u{1d5f4}","g"],["\u{1d5f5}","h"],["\u{1d5f6}","i"],["\u{1d5f7}","j"],["\u{1d5f8}","k"],["\u{1d5f9}","l"],["\u{1d5fa}","m"],["\u{1d5fb}","n"],["\u{1d5fc}","o"],["\u{1d5fd}","p"],["\u{1d5fe}","q"],["\u{1d5ff}","r"],["\u{1d600}","s"],["\u{1d601}","t"],["\u{1d602}","u"],["\u{1d603}","v"],["\u{1d604}","w"],["\u{1d605}","x"],["\u{1d606}","y"],["\u{1d607}","z"],["\u{1d608}","A"],["\u{1d609}","B"],["\u{1d60a}","C"],["\u{1d60b}","D"],["\u{1d60c}","E"],["\u{1d60d}","F"],["\u{1d60e}","G"],["\u{1d60f}","H"],["\u{1d610}","I"],["\u{1d611}","J"],["\u{1d612}","K"],["\u{1d613}","L"],["\u{1d614}","M"],["\u{1d615}","N"],["\u{1d616}","O"],["\u{1d617}","P"],["\u{1d618}","Q"],["\u{1d619}","R"],["\u{1d61a}","S"],["\u{1d61b}","T"],["\u{1d61c}","U"],["\u{1d61d}","V"],["\u{1d61e}","W"],["\u{1d61f}","X"],["\u{1d620}","Y"],["\u{1d621}","Z"],["\u{1d622}","a"],["\u{1d623}","b"],["\u{1d624}","c"],["\u{1d625}","d"],["\u{1d626}","e"],["\u{1d627}","f"],["\u{1d628}","g"],["\u{1d629}","h"],["\u{1d62a}","i"],["\u{1d62b}","j"],["\u{1d62c}","k"],["\u{1d62d}","l"],["\u{1d62e}","m"],["\u{1d62f}","n"],["\u{1d630}","o"],["\u{1d631}","p"],["\u{1d632}","q"],["\u{1d633}","r"],["\u{1d634}","s"],["\u{1d635}","t"],["\u{1d636}","u"],["\u{1d637}","v"],["\u{1d638}","w"],["\u{1d639}","x"],["\u{1d63a}","y"],["\u{1d63b}","z"],["\u{1d63c}","A"],["\u{1d63d}","B"],["\u{1d63e}","C"],["\u{1d63f}","D"],["\u{1d640}","E"],["\u{1d641}","F"],["\u{1d642}","G"],["\u{1d643}","H"],["\u{1d644}","I"],["\u{1d645}","J"],["\u{1d646}","K"],["\u{1d647}","L"],["\u{1d648}","M"],["\u{1d649}","N"],["\u{1d64a}","O"],["\u{1d64b}","P"],["\u{1d64c}","Q"],["\u{1d64d}","R"],["\u{1d64e}","S"],["\u{1d64f}","T"],["\u{1d650}","U"],["\u{1d651}","V"],["\u{1d652}","W"],["\u{1d653}","X"],["\u{1d654}","Y"],["\u{1d655}","Z"],["\u{1d656}","a"],["\u{1d657}","b"],["\u{1d658}","c"],["\u{1d659}","d"],["\u{1d65a}","e"],["\u{1d65b}","f"],["\u{1d65c}","g"],["\u{1d65d}","h"],["\u{1d65e}","i"],["\u{1d65f}","j"],["\u{1d660}","k"],["\u{1d661}","l"],["\u{1d662}","m"],["\u{1d663}","n"],["\u{1d664}","o"],["\u{1d665}","p"],["\u{1d666}","q"],["\u{1d667}","r"],["\u{1d668}","s"],["\u{1d669}","t"],["\u{1d66a}","u"],["\u{1d66b}","v"],["\u{1d66c}","w"],["\u{1d66d}","x"],["\u{1d66e}","y"],["\u{1d66f}","z"],["\u{1d670}","A"],["\u{1d671}","B"],["\u{1d672}","C"],["\u{1d673}","D"],["\u{1d674}","E"],["\u{1d675}","F"],["\u{1d676}","G"],["\u{1d677}","H"],["\u{1d678}","I"],["\u{1d679}","J"],["\u{1d67a}","K"],["\u{1d67b}","L"],["\u{1d67c}","M"],["\u{1d67d}","N"],["\u{1d67e}","O"],["\u{1d67f}","P"],["\u{1d680}","Q"],["\u{1d681}","R"],["\u{1d682}","S"],["\u{1d683}","T"],["\u{1d684}","U"],["\u{1d685}","V"],["\u{1d686}","W"],["\u{1d687}","X"],["\u{1d688}","Y"],["\u{1d689}","Z"],["\u{1d68a}","a"],["\u{1d68b}","b"],["\u{1d68c}","c"],["\u{1d68d}","d"],["\u{1d68e}","e"],["\u{1d68f}","f"],["\u{1d690}","g"],["\u{1d691}","h"],["\u{1d692}","i"],["\u{1d693}","j"],["\u{1d694}","k"],["\u{1d695}","l"],["\u{1d696}","m"],["\u{1d697}","n"],["\u{1d698}","o"],["\u{1d699}","p"],["\u{1d69a}","q"],["\u{1d69b}","r"],["\u{1d69c}","s"],["\u{1d69d}","t"],["\u{1d69e}","u"],["\u{1d69f}","v"],["\u{1d6a0}","w"],["\u{1d6a1}","x"],["\u{1d6a2}","y"],["\u{1d6a3}","z"],["\u{1d6a4}","l"],["\u{1d6a5}","j"],["\u{1d6e2}","A"],["\u{1d6e3}","B"],["\u{1d6e4}","G"],["\u{1d6e5}","D"],["\u{1d6e6}","E"],["\u{1d6e7}","Z"],["\u{1d6e8}","I"],["\u{1d6e9}","TH"],["\u{1d6ea}","I"],["\u{1d6eb}","K"],["\u{1d6ec}","L"],["\u{1d6ed}","M"],["\u{1d6ee}","N"],["\u{1d6ef}","KS"],["\u{1d6f0}","O"],["\u{1d6f1}","P"],["\u{1d6f2}","R"],["\u{1d6f3}","TH"],["\u{1d6f4}","S"],["\u{1d6f5}","T"],["\u{1d6f6}","Y"],["\u{1d6f7}","F"],["\u{1d6f8}","x"],["\u{1d6f9}","PS"],["\u{1d6fa}","O"],["\u{1d6fb}","D"],["\u{1d6fc}","a"],["\u{1d6fd}","b"],["\u{1d6fe}","g"],["\u{1d6ff}","d"],["\u{1d700}","e"],["\u{1d701}","z"],["\u{1d702}","i"],["\u{1d703}","th"],["\u{1d704}","i"],["\u{1d705}","k"],["\u{1d706}","l"],["\u{1d707}","m"],["\u{1d708}","n"],["\u{1d709}","ks"],["\u{1d70a}","o"],["\u{1d70b}","p"],["\u{1d70c}","r"],["\u{1d70d}","s"],["\u{1d70e}","s"],["\u{1d70f}","t"],["\u{1d710}","y"],["\u{1d711}","f"],["\u{1d712}","x"],["\u{1d713}","ps"],["\u{1d714}","o"],["\u{1d715}","d"],["\u{1d716}","E"],["\u{1d717}","TH"],["\u{1d718}","K"],["\u{1d719}","f"],["\u{1d71a}","r"],["\u{1d71b}","p"],["\u{1d71c}","A"],["\u{1d71d}","V"],["\u{1d71e}","G"],["\u{1d71f}","D"],["\u{1d720}","E"],["\u{1d721}","Z"],["\u{1d722}","I"],["\u{1d723}","TH"],["\u{1d724}","I"],["\u{1d725}","K"],["\u{1d726}","L"],["\u{1d727}","M"],["\u{1d728}","N"],["\u{1d729}","KS"],["\u{1d72a}","O"],["\u{1d72b}","P"],["\u{1d72c}","S"],["\u{1d72d}","TH"],["\u{1d72e}","S"],["\u{1d72f}","T"],["\u{1d730}","Y"],["\u{1d731}","F"],["\u{1d732}","X"],["\u{1d733}","PS"],["\u{1d734}","O"],["\u{1d735}","D"],["\u{1d736}","a"],["\u{1d737}","v"],["\u{1d738}","g"],["\u{1d739}","d"],["\u{1d73a}","e"],["\u{1d73b}","z"],["\u{1d73c}","i"],["\u{1d73d}","th"],["\u{1d73e}","i"],["\u{1d73f}","k"],["\u{1d740}","l"],["\u{1d741}","m"],["\u{1d742}","n"],["\u{1d743}","ks"],["\u{1d744}","o"],["\u{1d745}","p"],["\u{1d746}","r"],["\u{1d747}","s"],["\u{1d748}","s"],["\u{1d749}","t"],["\u{1d74a}","y"],["\u{1d74b}","f"],["\u{1d74c}","x"],["\u{1d74d}","ps"],["\u{1d74e}","o"],["\u{1d74f}","a"],["\u{1d750}","e"],["\u{1d751}","i"],["\u{1d752}","k"],["\u{1d753}","f"],["\u{1d754}","r"],["\u{1d755}","p"],["\u{1d756}","A"],["\u{1d757}","B"],["\u{1d758}","G"],["\u{1d759}","D"],["\u{1d75a}","E"],["\u{1d75b}","Z"],["\u{1d75c}","I"],["\u{1d75d}","TH"],["\u{1d75e}","I"],["\u{1d75f}","K"],["\u{1d760}","L"],["\u{1d761}","M"],["\u{1d762}","N"],["\u{1d763}","KS"],["\u{1d764}","O"],["\u{1d765}","P"],["\u{1d766}","R"],["\u{1d767}","TH"],["\u{1d768}","S"],["\u{1d769}","T"],["\u{1d76a}","Y"],["\u{1d76b}","F"],["\u{1d76c}","X"],["\u{1d76d}","PS"],["\u{1d76e}","O"],["\u{1d76f}","D"],["\u{1d770}","a"],["\u{1d771}","v"],["\u{1d772}","g"],["\u{1d773}","d"],["\u{1d774}","e"],["\u{1d775}","z"],["\u{1d776}","i"],["\u{1d777}","th"],["\u{1d778}","i"],["\u{1d779}","k"],["\u{1d77a}","l"],["\u{1d77b}","m"],["\u{1d77c}","n"],["\u{1d77d}","ks"],["\u{1d77e}","o"],["\u{1d77f}","p"],["\u{1d780}","r"],["\u{1d781}","s"],["\u{1d782}","s"],["\u{1d783}","t"],["\u{1d784}","y"],["\u{1d785}","f"],["\u{1d786}","x"],["\u{1d787}","ps"],["\u{1d788}","o"],["\u{1d789}","a"],["\u{1d78a}","e"],["\u{1d78b}","i"],["\u{1d78c}","k"],["\u{1d78d}","f"],["\u{1d78e}","r"],["\u{1d78f}","p"],["\u{1d790}","A"],["\u{1d791}","V"],["\u{1d792}","G"],["\u{1d793}","D"],["\u{1d794}","E"],["\u{1d795}","Z"],["\u{1d796}","I"],["\u{1d797}","TH"],["\u{1d798}","I"],["\u{1d799}","K"],["\u{1d79a}","L"],["\u{1d79b}","M"],["\u{1d79c}","N"],["\u{1d79d}","KS"],["\u{1d79e}","O"],["\u{1d79f}","P"],["\u{1d7a0}","S"],["\u{1d7a1}","TH"],["\u{1d7a2}","S"],["\u{1d7a3}","T"],["\u{1d7a4}","Y"],["\u{1d7a5}","F"],["\u{1d7a6}","X"],["\u{1d7a7}","PS"],["\u{1d7a8}","O"],["\u{1d7a9}","D"],["\u{1d7aa}","av"],["\u{1d7ab}","g"],["\u{1d7ac}","d"],["\u{1d7ad}","e"],["\u{1d7ae}","z"],["\u{1d7af}","i"],["\u{1d7b0}","i"],["\u{1d7b1}","th"],["\u{1d7b2}","i"],["\u{1d7b3}","k"],["\u{1d7b4}","l"],["\u{1d7b5}","m"],["\u{1d7b6}","n"],["\u{1d7b7}","ks"],["\u{1d7b8}","o"],["\u{1d7b9}","p"],["\u{1d7ba}","r"],["\u{1d7bb}","s"],["\u{1d7bc}","s"],["\u{1d7bd}","t"],["\u{1d7be}","y"],["\u{1d7bf}","f"],["\u{1d7c0}","x"],["\u{1d7c1}","ps"],["\u{1d7c2}","o"],["\u{1d7c3}","a"],["\u{1d7c4}","e"],["\u{1d7c5}","i"],["\u{1d7c6}","k"],["\u{1d7c7}","f"],["\u{1d7c8}","r"],["\u{1d7c9}","p"],["\u{1d7ca}","F"],["\u{1d7cb}","f"],["\u249c","(a)"],["\u249d","(b)"],["\u249e","(c)"],["\u249f","(d)"],["\u24a0","(e)"],["\u24a1","(f)"],["\u24a2","(g)"],["\u24a3","(h)"],["\u24a4","(i)"],["\u24a5","(j)"],["\u24a6","(k)"],["\u24a7","(l)"],["\u24a8","(m)"],["\u24a9","(n)"],["\u24aa","(o)"],["\u24ab","(p)"],["\u24ac","(q)"],["\u24ad","(r)"],["\u24ae","(s)"],["\u24af","(t)"],["\u24b0","(u)"],["\u24b1","(v)"],["\u24b2","(w)"],["\u24b3","(x)"],["\u24b4","(y)"],["\u24b5","(z)"],["\u24b6","(A)"],["\u24b7","(B)"],["\u24b8","(C)"],["\u24b9","(D)"],["\u24ba","(E)"],["\u24bb","(F)"],["\u24bc","(G)"],["\u24bd","(H)"],["\u24be","(I)"],["\u24bf","(J)"],["\u24c0","(K)"],["\u24c1","(L)"],["\u24c3","(N)"],["\u24c4","(O)"],["\u24c5","(P)"],["\u24c6","(Q)"],["\u24c7","(R)"],["\u24c8","(S)"],["\u24c9","(T)"],["\u24ca","(U)"],["\u24cb","(V)"],["\u24cc","(W)"],["\u24cd","(X)"],["\u24ce","(Y)"],["\u24cf","(Z)"],["\u24d0","(a)"],["\u24d1","(b)"],["\u24d2","(b)"],["\u24d3","(c)"],["\u24d4","(e)"],["\u24d5","(f)"],["\u24d6","(g)"],["\u24d7","(h)"],["\u24d8","(i)"],["\u24d9","(j)"],["\u24da","(k)"],["\u24db","(l)"],["\u24dc","(m)"],["\u24dd","(n)"],["\u24de","(o)"],["\u24df","(p)"],["\u24e0","(q)"],["\u24e1","(r)"],["\u24e2","(s)"],["\u24e3","(t)"],["\u24e4","(u)"],["\u24e5","(v)"],["\u24e6","(w)"],["\u24e7","(x)"],["\u24e8","(y)"],["\u24e9","(z)"],["\u010a","C"],["\u010b","c"],["\u0120","G"],["\u0121","g"],["\u0126","H"],["\u0127","h"],["\u017b","Z"],["\u017c","z"],["\u{1d7ce}","0"],["\u{1d7cf}","1"],["\u{1d7d0}","2"],["\u{1d7d1}","3"],["\u{1d7d2}","4"],["\u{1d7d3}","5"],["\u{1d7d4}","6"],["\u{1d7d5}","7"],["\u{1d7d6}","8"],["\u{1d7d7}","9"],["\u{1d7d8}","0"],["\u{1d7d9}","1"],["\u{1d7da}","2"],["\u{1d7db}","3"],["\u{1d7dc}","4"],["\u{1d7dd}","5"],["\u{1d7de}","6"],["\u{1d7df}","7"],["\u{1d7e0}","8"],["\u{1d7e1}","9"],["\u{1d7e2}","0"],["\u{1d7e3}","1"],["\u{1d7e4}","2"],["\u{1d7e5}","3"],["\u{1d7e6}","4"],["\u{1d7e7}","5"],["\u{1d7e8}","6"],["\u{1d7e9}","7"],["\u{1d7ea}","8"],["\u{1d7eb}","9"],["\u{1d7ec}","0"],["\u{1d7ed}","1"],["\u{1d7ee}","2"],["\u{1d7ef}","3"],["\u{1d7f0}","4"],["\u{1d7f1}","5"],["\u{1d7f2}","6"],["\u{1d7f3}","7"],["\u{1d7f4}","8"],["\u{1d7f5}","9"],["\u{1d7f6}","0"],["\u{1d7f7}","1"],["\u{1d7f8}","2"],["\u{1d7f9}","3"],["\u{1d7fa}","4"],["\u{1d7fb}","5"],["\u{1d7fc}","6"],["\u{1d7fd}","7"],["\u{1d7fe}","8"],["\u{1d7ff}","9"],["\u2460","1"],["\u2461","2"],["\u2462","3"],["\u2463","4"],["\u2464","5"],["\u2465","6"],["\u2466","7"],["\u2467","8"],["\u2468","9"],["\u2469","10"],["\u246a","11"],["\u246b","12"],["\u246c","13"],["\u246d","14"],["\u246e","15"],["\u246f","16"],["\u2470","17"],["\u2471","18"],["\u2472","19"],["\u2473","20"],["\u2474","1"],["\u2475","2"],["\u2476","3"],["\u2477","4"],["\u2478","5"],["\u2479","6"],["\u247a","7"],["\u247b","8"],["\u247c","9"],["\u247d","10"],["\u247e","11"],["\u247f","12"],["\u2480","13"],["\u2481","14"],["\u2482","15"],["\u2483","16"],["\u2484","17"],["\u2485","18"],["\u2486","19"],["\u2487","20"],["\u2488","1."],["\u2489","2."],["\u248a","3."],["\u248b","4."],["\u248c","5."],["\u248d","6."],["\u248e","7."],["\u248f","8."],["\u2490","9."],["\u2491","10."],["\u2492","11."],["\u2493","12."],["\u2494","13."],["\u2495","14."],["\u2496","15."],["\u2497","16."],["\u2498","17."],["\u2499","18."],["\u249a","19."],["\u249b","20."],["\u24ea","0"],["\u24eb","11"],["\u24ec","12"],["\u24ed","13"],["\u24ee","14"],["\u24ef","15"],["\u24f0","16"],["\u24f1","17"],["\u24f2","18"],["\u24f3","19"],["\u24f4","20"],["\u24f5","1"],["\u24f6","2"],["\u24f7","3"],["\u24f8","4"],["\u24f9","5"],["\u24fa","6"],["\u24fb","7"],["\u24fc","8"],["\u24fd","9"],["\u24fe","10"],["\u24ff","0"],["\u{1f670}","&"],["\u{1f671}","&"],["\u{1f672}","&"],["\u{1f673}","&"],["\u{1f674}","&"],["\u{1f675}","&"],["\u{1f676}",'"'],["\u{1f677}",'"'],["\u{1f678}",'"'],["\u203d","?!"],["\u{1f679}","?!"],["\u{1f67a}","?!"],["\u{1f67b}","?!"],["\u{1f67c}","/"],["\u{1f67d}","\\"],["\u{1f707}","AR"],["\u{1f708}","V"],["\u{1f709}","V"],["\u{1f706}","VR"],["\u{1f705}","VF"],["\u{1f729}","2"],["\u{1f72a}","5"],["\u{1f761}","f"],["\u{1f762}","W"],["\u{1f763}","U"],["\u{1f767}","V"],["\u{1f768}","T"],["\u{1f76a}","V"],["\u{1f76b}","MB"],["\u{1f76c}","VB"],["\u{1f772}","3B"],["\u{1f773}","3B"],["\u{1f4af}","100"],["\u{1f519}","BACK"],["\u{1f51a}","END"],["\u{1f51b}","ON!"],["\u{1f51c}","SOON"],["\u{1f51d}","TOP"],["\u{1f51e}","18"],["\u{1f524}","abc"],["\u{1f520}","ABCD"],["\u{1f521}","abcd"],["\u{1f522}","1234"],["\u{1f523}","T&@%"],["#\ufe0f\u20e3","#"],["*\ufe0f\u20e3","*"],["0\ufe0f\u20e3","0"],["1\ufe0f\u20e3","1"],["2\ufe0f\u20e3","2"],["3\ufe0f\u20e3","3"],["4\ufe0f\u20e3","4"],["5\ufe0f\u20e3","5"],["6\ufe0f\u20e3","6"],["7\ufe0f\u20e3","7"],["8\ufe0f\u20e3","8"],["9\ufe0f\u20e3","9"],["\u{1f51f}","10"],["\u{1f170}\ufe0f","A"],["\u{1f171}\ufe0f","B"],["\u{1f18e}","AB"],["\u{1f191}","CL"],["\u{1f17e}\ufe0f","O"],["\u{1f17f}","P"],["\u{1f198}","SOS"],["\u{1f172}","C"],["\u{1f173}","D"],["\u{1f174}","E"],["\u{1f175}","F"],["\u{1f176}","G"],["\u{1f177}","H"],["\u{1f178}","I"],["\u{1f179}","J"],["\u{1f17a}","K"],["\u{1f17b}","L"],["\u{1f17c}","M"],["\u{1f17d}","N"],["\u{1f180}","Q"],["\u{1f181}","R"],["\u{1f182}","S"],["\u{1f183}","T"],["\u{1f184}","U"],["\u{1f185}","V"],["\u{1f186}","W"],["\u{1f187}","X"],["\u{1f188}","Y"],["\u{1f189}","Z"]],Go=["list"],zo=["defaultItemTemplate"];function Wo(i,a){if(1&i&&t._uU(0),2&i){const e=a.item,n=t.oxw();t.hij(" ",e[n.labelKey]," ")}}function Ko(i,a){}const Xo=function(i){return{item:i}};function el(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"a",4),t.NdJ("mousedown",function(s){const o=t.CHM(e).index,l=t.oxw();return l.activeIndex=o,l.itemClick.emit(),t.KtG(s.preventDefault())}),t.YNc(2,Ko,0,0,"ng-template",5),t.qZA()()}if(2&i){const e=a.$implicit,n=a.index,s=t.oxw();t.ekj("active",s.activeIndex==n)("mention-active",!s.styleOff&&s.activeIndex==n),t.xp6(1),t.ekj("mention-item",!s.styleOff),t.xp6(1),t.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",t.VKq(8,Xo,e))}}function ts(i){return Gt(i)?i.value:i.textContent}function jn(i,a,e,n,s,r=!1){if(function nl(i){return null!=i&&("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName||"#text"==i.nodeName)}(i)){let u=ts(i);(function tl(i,a){Gt(i)?i.value=a:i.textContent=a})(i,u.substring(0,a)+n+u.substring(e,u.length)),ns(i,a+n.length,s)}else if(!r){let u=ln(s);if(u&&u.rangeCount>0){var l=u.getRangeAt(0).startOffset;jn(u.anchorNode,l-(e-a),l,n,s,!0)}}}function Gt(i){return null!=i&&("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName)}function ns(i,a,e=null){if(Gt(i)&&i.selectionStart)i.focus(),i.setSelectionRange(a,a);else{let n=$n(e).createRange();n.setStart(i,a),n.collapse(!0);let s=ln(e);s.removeAllRanges(),s.addRange(n)}}function is(i,a=null){if(Gt(i))return i.value.slice(0,i.selectionStart).length;var n=ln(a);if(n.rangeCount>0){var s=n.getRangeAt(0),r=s.cloneRange();return r.selectNodeContents(i),r.setEnd(s.endContainer,s.endOffset),r.toString().length}}function $n(i){return i?i.contentWindow.document:document}function ln(i){return i?i.contentWindow.getSelection():window.getSelection()}function ss(i){let e="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),n=$n(i?i.iframe:null),s=ln(i?i.iframe:null),r=s.getRangeAt(0),o=n.createRange();o.setStart(s.anchorNode,r.startOffset),o.setEnd(s.anchorNode,r.startOffset),o.collapse(!1);let l=n.createElement("span");l.id=e,l.appendChild(n.createTextNode("\ufeff")),o.insertNode(l),s.removeAllRanges(),s.addRange(r);let c={left:0,top:l.offsetHeight};return function il(i,a,e){let n=a,s=i?i.iframe:null;for(;n&&(null==i.parent||i.parent!=n);)e.left+=n.offsetLeft+n.clientLeft,e.top+=n.offsetTop+n.clientTop,n=n.offsetParent,!n&&s&&(n=s,s=null);for(n=a,s=i?i.iframe:null;n!==$n(null).body&&null!=n&&(null==i.parent||i.parent!=n);)n.scrollTop&&n.scrollTop>0&&(e.top-=n.scrollTop),n.scrollLeft&&n.scrollLeft>0&&(e.left-=n.scrollLeft),n=n.parentNode,!n&&s&&(n=s,s=null)}(i,l,c),l.parentNode.removeChild(l),c}var sl=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],as=typeof window<"u",al=as&&null!=window.mozInnerScreenX;let ol=(()=>{class i{constructor(e){this.element=e,this.labelKey="label",this.itemClick=new t.vpe,this.items=[],this.activeIndex=0,this.hidden=!1,this.dropUp=!1,this.styleOff=!1,this.coords={top:0,left:0},this.offset=0}ngAfterContentChecked(){this.itemTemplate||(this.itemTemplate=this.defaultItemTemplate)}position(e,n=null){if(Gt(e))this.coords=function rl(i,a,e){if(!as)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var n=e&&e.debug||!1;if(n){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var r=document.createElement("div");r.id="input-textarea-caret-position-mirror-div",document.body.appendChild(r);var o=r.style,l=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,c="INPUT"===i.nodeName;o.whiteSpace="pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",n||(o.visibility="hidden"),sl.forEach(function(g){if(c&&"lineHeight"===g)if("border-box"===l.boxSizing){var m=parseInt(l.height),v=parseInt(l.paddingTop)+parseInt(l.paddingBottom)+parseInt(l.borderTopWidth)+parseInt(l.borderBottomWidth),C=v+parseInt(l.lineHeight);o.lineHeight=m>C?m-v+"px":m===C?l.lineHeight:"0"}else o.lineHeight=l.height;else o[g]=l[g]}),al?i.scrollHeight>parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",r.textContent=i.value.substring(0,a),c&&(r.textContent=r.textContent.replace(/\s/g,"\xa0"));var u=document.createElement("span");u.textContent=i.value.substring(a)||".",r.appendChild(u);var d={top:u.offsetTop+parseInt(l.borderTopWidth),left:u.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return n?u.style.backgroundColor="#aaa":document.body.removeChild(r),d}(e,e.selectionStart,null),this.coords.top=e.offsetTop+this.coords.top-e.scrollTop,this.coords.left=e.offsetLeft+this.coords.left-e.scrollLeft,this.offset=this.getBlockCursorDimensions(e).height;else if(n)this.coords=ss({iframe:n,parent:n.offsetParent});else{let s=document.documentElement,r=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),o=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),l=ss({iframe:n}),c=e.getBoundingClientRect();this.coords.top=l.top-c.top+e.offsetTop-o,this.coords.left=l.left-c.left+e.offsetLeft-r}this.positionElement()}get activeItem(){return this.items[this.activeIndex]}activateNextItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.nextSibling;if(s&&"LI"==s.nodeName){let r=s.getBoundingClientRect();r.bottom>e.getBoundingClientRect().bottom&&(e.scrollTop=s.offsetTop+r.height-e.clientHeight)}}this.activeIndex=Math.max(Math.min(this.activeIndex+1,this.items.length-1),0)}activatePreviousItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.previousSibling;s&&"LI"==s.nodeName&&s.getBoundingClientRect().top<e.getBoundingClientRect().top&&(e.scrollTop=s.offsetTop)}this.activeIndex=Math.max(Math.min(this.activeIndex-1,this.items.length-1),0)}reset(){this.list.nativeElement.scrollTop=0,this.checkBounds()}checkBounds(){let e=this.coords.left,n=this.coords.top,s=this.dropUp;const r=this.list.nativeElement.getBoundingClientRect();r.left+r.width>window.innerWidth&&(e-=r.left+r.width-window.innerWidth+10),r.top<0&&(s=!1),this.positionElement(e,n,s)}positionElement(e=this.coords.left,n=this.coords.top,s=this.dropUp){const r=this.element.nativeElement;n+=s?0:this.offset,r.className=s?"dropup":null,r.style.position="absolute",r.style.left=e+"px",r.style.top=n+"px"}getBlockCursorDimensions(e){const n=window.getComputedStyle(e);return{height:parseFloat(n.lineHeight),width:parseFloat(n.fontSize)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mention-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Go,7),t.Gf(zo,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.list=s.first),t.iGM(s=t.CRH())&&(n.defaultItemTemplate=s.first)}},inputs:{labelKey:"labelKey",itemTemplate:"itemTemplate"},outputs:{itemClick:"itemClick"},decls:5,vars:6,consts:[["defaultItemTemplate",""],[1,"dropdown-menu","scrollable-menu",3,"hidden"],["list",""],[3,"active","mention-active",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t.YNc(0,Wo,1,1,"ng-template",null,0,t.W1O),t.TgZ(2,"ul",1,2),t.YNc(4,el,3,10,"li",3),t.qZA()),2&e&&(t.xp6(2),t.ekj("mention-menu",!n.styleOff)("mention-dropdown",!n.styleOff&&n.dropUp),t.Q6J("hidden",n.hidden),t.xp6(2),t.Q6J("ngForOf",n.items))},dependencies:[f.sg,f.tP],styles:[".mention-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:11em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25em}.mention-item[_ngcontent-%COMP%]{display:block;padding:.2em 1.5em;line-height:1.5em;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.scrollable-menu[_ngcontent-%COMP%]{display:block;height:auto;max-height:292px;overflow:auto}[hidden][_ngcontent-%COMP%]{display:none}.mention-dropdown[_ngcontent-%COMP%]{bottom:100%;top:auto;margin-bottom:2px}"]}),i})(),pl=(()=>{class i{constructor(e,n,s){this._element=e,this._componentResolver=n,this._viewContainerRef=s,this.mentionConfig={items:[]},this.DEFAULT_CONFIG={items:[],triggerChar:"@",labelKey:"label",maxItems:-1,allowSpace:!1,returnTrigger:!1,mentionSelect:(r,o)=>this.activeConfig.triggerChar+r[this.activeConfig.labelKey],mentionFilter:(r,o)=>{const l=r.toLowerCase();return o.filter(c=>c[this.activeConfig.labelKey].toLowerCase().startsWith(l))}},this.searchTerm=new t.vpe,this.itemSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.triggerChars={}}set mention(e){this.mentionItems=e}ngOnChanges(e){(e.mention||e.mentionConfig)&&this.updateConfig()}updateConfig(){let e=this.mentionConfig;this.triggerChars={},this.mentionItems&&(e.items=this.mentionItems),this.addConfig(e),e.mentions&&e.mentions.forEach(n=>this.addConfig(n))}addConfig(e){let n=Object.assign({},this.DEFAULT_CONFIG),s=(e=Object.assign(n,e)).items;s&&s.length>0&&("string"==typeof s[0]&&(s=s.map(r=>{let o={};return o[e.labelKey]=r,o})),e.labelKey&&(s=s.filter(r=>r[e.labelKey]),e.disableSort||s.sort((r,o)=>r[e.labelKey].localeCompare(o[e.labelKey])))),e.items=s,this.triggerChars[e.triggerChar]=e,this.activeConfig&&this.activeConfig.triggerChar==e.triggerChar&&(this.activeConfig=e,this.updateSearchList())}setIframe(e){this.iframe=e}stopEvent(e){e.wasClick||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}blurHandler(e){this.stopEvent(e),this.stopSearch()}inputHandler(e,n=this._element.nativeElement){if(229===this.lastKeyCode&&e.data){let s=e.data.charCodeAt(0);this.keyHandler({keyCode:s,inputEvent:!0},n)}}keyHandler(e,n=this._element.nativeElement){if(this.lastKeyCode=e.keyCode,e.isComposing||229===e.keyCode)return;let s=ts(n),r=is(n,this.iframe),o=e.key;if(!o){let c=e.which||e.keyCode;o=String.fromCharCode(!e.shiftKey&&c>=65&&c<=90?c+32:e.which||e.keyCode)}13==e.keyCode&&e.wasClick&&r<this.startPos&&(r=this.startNode.length,ns(this.startNode,r,this.iframe));let l=this.triggerChars[o];if(l)this.activeConfig=l,this.startPos=e.inputEvent?r-1:r,this.startNode=(this.iframe?this.iframe.contentWindow.getSelection():window.getSelection()).anchorNode,this.searching=!0,this.searchString=null,this.showSearchList(n),this.updateSearchList(),l.returnTrigger&&this.searchTerm.emit(l.triggerChar);else if(this.startPos>=0&&this.searching)if(r<=this.startPos)this.searchList.hidden=!0;else if(16!==e.keyCode&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&r>this.startPos){if(this.activeConfig.allowSpace||32!==e.keyCode){if(8===e.keyCode&&r>0)r--,r==this.startPos&&this.stopSearch();else if(this.searchList.hidden){if(9===e.keyCode||13===e.keyCode)return void this.stopSearch()}else if(!this.searchList.hidden){if(9===e.keyCode||13===e.keyCode){this.stopEvent(e),this.itemSelected.emit(this.searchList.activeItem);const c=this.activeConfig.mentionSelect(this.searchList.activeItem,this.activeConfig.triggerChar);if(jn(n,this.startPos,r,c,this.iframe),"createEvent"in document){let u=document.createEvent("HTMLEvents");u.initEvent(this.iframe?"change":"input",!0,!1),this._element.nativeElement.dispatchEvent(u)}return this.startPos=-1,this.stopSearch(),!1}if(27===e.keyCode)return this.stopEvent(e),this.stopSearch(),!1;if(40===e.keyCode)return this.stopEvent(e),this.searchList.activateNextItem(),!1;if(38===e.keyCode)return this.stopEvent(e),this.searchList.activatePreviousItem(),!1}}else this.startPos=-1;if(1!=o.length&&8!=e.keyCode)return this.stopEvent(e),!1;if(this.searching){let c=s.substring(this.startPos+1,r);if(8!==e.keyCode&&!e.inputEvent&&(c+=o),this.searchString=c,this.activeConfig.returnTrigger){const u=this.searchString||8===e.keyCode?s.substring(this.startPos,this.startPos+1):"";this.searchTerm.emit(u+this.searchString)}else this.searchTerm.emit(this.searchString);this.updateSearchList()}}}startSearch(e,n=this._element.nativeElement){e=e||this.mentionConfig.triggerChar||this.DEFAULT_CONFIG.triggerChar;const s=is(n,this.iframe);jn(n,s,s,e,this.iframe),this.keyHandler({key:e,inputEvent:!0},n)}stopSearch(){this.searchList&&!this.searchList.hidden&&(this.searchList.hidden=!0,this.closed.emit()),this.activeConfig=null,this.searching=!1}updateSearchList(){let e=[];if(this.activeConfig&&this.activeConfig.items){let n=this.activeConfig.items;!this.activeConfig.disableSearch&&this.searchString&&this.activeConfig.labelKey&&this.activeConfig.mentionFilter&&(n=this.activeConfig.mentionFilter(this.searchString,n)),e=n,this.activeConfig.maxItems>0&&(e=e.slice(0,this.activeConfig.maxItems))}this.searchList&&(this.searchList.items=e,this.searchList.hidden=0==e.length)}showSearchList(e){if(this.opened.emit(),null==this.searchList){let n=this._componentResolver.resolveComponentFactory(ol),s=this._viewContainerRef.createComponent(n);this.searchList=s.instance,this.searchList.itemTemplate=this.mentionListTemplate,s.instance.itemClick.subscribe(()=>{e.focus(),this.keyHandler({key:"Enter",keyCode:13,wasClick:!0},e)})}this.searchList.labelKey=this.activeConfig.labelKey,this.searchList.dropUp=this.activeConfig.dropUp,this.searchList.styleOff=this.mentionConfig.disableStyle,this.searchList.activeIndex=0,this.searchList.position(e,this.iframe),window.requestAnimationFrame(()=>this.searchList.reset())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t._Vd),t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","mention",""],["","mentionConfig",""]],hostAttrs:["autocomplete","off"],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(r){return n.keyHandler(r)})("input",function(r){return n.inputHandler(r)})("blur",function(r){return n.blurHandler(r)})},inputs:{mention:"mention",mentionConfig:"mentionConfig",mentionListTemplate:"mentionListTemplate"},outputs:{searchTerm:"searchTerm",itemSelected:"itemSelected",opened:"opened",closed:"closed"},features:[t.TTD]}),i})(),gl=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.ez]}),i})();const ml=function(i,a,e){return{flexBasis:i,height:a,objectFit:"cover",width:e}};function fl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("load",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isLoaded=!0)})("error",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isError=!0)}),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.kEZ(7,ml,"calc(var(--str-chat__spacing-px, 1px) * "+e.size+")","calc(var(--str-chat__spacing-px, 1px) * "+e.size+")","calc(var(--str-chat__spacing-px, 1px) * "+e.size+")")),t.Gre("str-chat__avatar-image str-chat__avatar-image",e.isLoaded?" str-chat__avatar-image--loaded":"",""),t.s9C("src",e.imageUrl||e.fallbackChannelImage,t.LSH),t.s9C("alt",e.initials)}}function _l(i,a){if(1&i&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.initials," ")}}function vl(i,a){1&i&&t._UZ(0,"div",6)}const Cl=function(i,a,e,n,s){return{flexBasis:i,fontSize:a,height:e,lineHeight:n,width:s}};function yl(i,a){if(1&i&&t._UZ(0,"stream-avatar",2),2&i){const n=a.imageUrl,s=a.size,r=a.type,o=a.channel,l=a.user,c=a.location;t.Q6J("name",a.name)("imageUrl",n)("size",s)("type",r)("channel",o)("user",l)("location",c)}}function wl(i,a){1&i&&t.GkF(0)}function Dl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",22),t._UZ(1,"path",23),t.qZA())}function bl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",24),t._UZ(1,"path",25),t.qZA())}function Tl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",26)(1,"g",27),t._UZ(2,"path",28)(3,"path",29),t.qZA()())}function Ml(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",30)(1,"title"),t._uU(2,"Combined Shape"),t.qZA(),t.TgZ(3,"desc"),t._uU(4,"Created with Sketch."),t.qZA(),t.TgZ(5,"g",31)(6,"g",32)(7,"g",33),t._UZ(8,"path",34),t.qZA()()()())}function xl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",35)(1,"title",36),t._uU(2,"streamChat.Send"),t.qZA(),t._UZ(3,"path",37),t.qZA())}function Sl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",38)(1,"title",36),t._uU(2,"streamChat.Attach files"),t.qZA(),t._UZ(3,"path",39),t.qZA())}function Al(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",40),t._UZ(1,"path",41),t.qZA())}function Fl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",42),t._UZ(1,"rect",43)(2,"circle",44)(3,"path",45),t.qZA())}function kl(i,a){if(1&i&&(t.O4$(),t.TgZ(0,"svg",46),t._UZ(1,"path",47),t.qZA()),2&i){const e=t.oxw();t.uIk("height",e.size||20)("width",e.size||20)}}function El(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",48),t._UZ(1,"path",49)(2,"path",50)(3,"path",51)(4,"path",52)(5,"path",53),t.TgZ(6,"defs")(7,"linearGradient",54),t._UZ(8,"stop",55)(9,"stop",56),t.qZA()()())}function Il(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",57),t._UZ(1,"path",58),t.qZA())}function Ol(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",59),t._UZ(1,"path",60),t.qZA())}function Ll(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",61),t._UZ(1,"path",62),t.qZA())}function Ul(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",63),t._UZ(1,"path",64),t.qZA())}function Zl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",65),t._UZ(1,"path",66),t.qZA())}function Rl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",67),t._UZ(1,"path",68),t.qZA())}function Pl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",69),t._UZ(1,"path",70),t.qZA())}function Bl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",71),t._UZ(1,"path",72),t.qZA())}function Nl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",73),t._UZ(1,"path",74),t.qZA())}function jl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",75)(1,"g",76),t._UZ(2,"path",77),t.qZA(),t.TgZ(3,"defs")(4,"clipPath",78),t._UZ(5,"rect",79),t.qZA()()())}function $l(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",80),t._UZ(1,"path",81),t.qZA())}function Hl(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",82),t._UZ(1,"path",83)(2,"path",84),t.qZA())}function ql(i,a){if(1&i&&t._UZ(0,"stream-icon",2),2&i){const n=a.size;t.Q6J("icon",a.icon)("size",n)}}function Yl(i,a){1&i&&t.GkF(0)}const Jl=function(i){return{stopColor:i}};function Vl(i,a){if(1&i&&t._UZ(0,"stream-loading-indicator",2),2&i){const n=a.color;t.Q6J("size",a.size)("color",n)}}function Ql(i,a){1&i&&t.GkF(0)}const Gl=["modalInner"];function zl(i,a){1&i&&t.GkF(0)}function Wl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,zl,1,0,"ng-container",7),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function Kl(i,a){1&i&&t.Hsn(0)}const Hn=["*"],ls=["modalContent"],dn=function(i,a){return{height:i,width:a}};function Xl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"img",13,14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openImageModal([s]))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openImageModal([s]))}),t.qZA()}if(2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(2);t.Udp("--original-height",s.getImageAttachmentConfiguration(n,"single",e).originalHeight)("--original-width",s.getImageAttachmentConfiguration(n,"single",e).originalWidth),t.Q6J("src",s.getImageAttachmentConfiguration(n,"single",e).url,t.LSH)("alt",null==n?null:n.fallback)("ngStyle",t.WLB(7,dn,s.getImageAttachmentConfiguration(n,"single",e).height,s.getImageAttachmentConfiguration(n,"single",e).width))}}function ec(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))}),t._UZ(1,"img",19,14),t.qZA()}if(2&i){const e=t.MAs(2),n=t.oxw().$implicit,s=t.oxw(4);t.ekj("str-chat__message-attachment--svg-image",s.isSvg(n)),t.xp6(1),t.Udp("--original-height",s.getImageAttachmentConfiguration(n,"gallery",e).originalHeight)("--original-width",s.getImageAttachmentConfiguration(n,"gallery",e).originalWidth),t.Q6J("src",s.getImageAttachmentConfiguration(n,"gallery",e).url,t.LSH)("alt",n.fallback)("ngStyle",t.WLB(9,dn,s.getImageAttachmentConfiguration(n,"gallery",e).height,s.getImageAttachmentConfiguration(n,"gallery",e).width))}}const tc=function(i,a,e){return{"background-image":i,height:a,width:e}},nc=function(i){return{imageCount:i}};function ic(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",20,21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))}),t._UZ(2,"p",22),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(2).$implicit,r=t.oxw(2);t.Udp("--original-height",r.getImageAttachmentConfiguration(n,"gallery",e).originalHeight)("--original-width",r.getImageAttachmentConfiguration(n,"gallery",e).originalWidth),t.ekj("str-chat__message-attachment--svg-image",r.isSvg(n)),t.Q6J("ngStyle",t.kEZ(11,tc,"url("+r.getImageAttachmentConfiguration(n,"gallery",e).url+")",r.getImageAttachmentConfiguration(n,"gallery",e).height,r.getImageAttachmentConfiguration(n,"gallery",e).width)),t.xp6(2),t.Q6J("innerHTML",t.xi3(3,8,"streamChat.{{ imageCount }} more",t.VKq(15,nc,s.images.length-4)),t.oJD)}}function sc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ec,3,12,"button",16),t.YNc(2,ic,4,17,"button",17),t.BQk()),2&i){const e=a.index,n=a.last;t.xp6(1),t.Q6J("ngIf",e<3||3===e&&n),t.xp6(1),t.Q6J("ngIf",3===e&&!n)}}function ac(i,a){if(1&i&&(t.TgZ(0,"div",15),t.YNc(1,sc,3,2,"ng-container",4),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.ekj("str-chat__gallery--square",(null==e?null:e.images.length)>3)("str-chat__gallery-two-rows",(null==e?null:e.images.length)>2),t.xp6(1),t.Q6J("ngForOf",e.images)("ngForTrackBy",n.trackByImageUrl)}}function rc(i,a){if(1&i&&(t.TgZ(0,"div",23),t._UZ(1,"video",24,25),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw().$implicit,s=t.oxw(2);t.Udp("--original-height",s.getVideoAttachmentConfiguration(n,e).originalHeight)("--original-width",s.getVideoAttachmentConfiguration(n,e).originalWidth),t.Q6J("ngStyle",t.WLB(7,dn,s.getVideoAttachmentConfiguration(n,e).height,s.getVideoAttachmentConfiguration(n,e).width)),t.xp6(1),t.Q6J("src",s.getVideoAttachmentConfiguration(n,e).url,t.LSH)("poster",s.getVideoAttachmentConfiguration(n,e).thumbUrl,t.LSH)}}function oc(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",33),2&i&&t.Q6J("size",30)}function lc(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",34),2&i&&t.Q6J("size",30)}function cc(i,a){if(1&i&&(t.TgZ(0,"span",35),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.getFileSize(e))}}function uc(i,a){if(1&i&&(t.TgZ(0,"a",26),t.YNc(1,oc,1,1,"stream-icon-placeholder",27),t.YNc(2,lc,1,1,"stream-icon-placeholder",28),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t._uU(6),t.qZA()(),t.YNc(7,cc,2,1,"span",32),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("href",e.asset_url,t.LSH),t.xp6(1),t.Q6J("ngIf","1"===n.themeVersion),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion),t.xp6(4),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",n.hasFileSize(e))}}function dc(i,a){if(1&i&&(t.TgZ(0,"div",42),t._UZ(1,"img",43),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.s9C("alt",e.url),t.s9C("src",e.url,t.LSH),t.Q6J("ngStyle",t.WLB(3,dn,e.height,e.width))}}function hc(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function pc(i,a){if(1&i&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function gc(i,a){if(1&i&&(t.TgZ(0,"a",46),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.s9C("href",e.title_link||e.og_scrape_url,t.LSH),t.xp6(1),t.hij(" ",n.trimUrl(e.title_link||e.og_scrape_url)," ")}}function mc(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,dc,2,6,"div",36),t.TgZ(2,"div",37)(3,"div",38),t.YNc(4,hc,2,1,"div",39),t.YNc(5,pc,2,1,"div",40),t.YNc(6,gc,2,2,"a",41),t.qZA()()()),2&i){const e=a.ngIf,n=t.oxw().$implicit;t.Gre("str-chat__message-attachment-card str-chat__message-attachment-card--",n.type,""),t.xp6(1),t.Q6J("ngIf",e.url),t.xp6(3),t.Q6J("ngIf",n.title),t.xp6(1),t.Q6J("ngIf",n.text),t.xp6(1),t.Q6J("ngIf",n.title_link||n.og_scrape_url)}}function fc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(4);return t.KtG(o.sendAction(r))})("keyup.enter",function(){const r=t.CHM(e).$implicit,o=t.oxw(4);return t.KtG(o.sendAction(r))}),t._uU(1),t.qZA()}if(2&i){const e=a.$implicit;t.Gre("str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--",e.style,""),t.xp6(1),t.hij(" ",e.text," ")}}function _c(i,a){if(1&i&&(t.TgZ(0,"div",47)(1,"div",48),t.YNc(2,fc,2,4,"button",49),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.actions)("ngForTrackBy",n.trackByActionValue)}}function vc(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6),t.YNc(2,Xl,2,10,"img",7),t.YNc(3,ac,2,6,"div",8),t.YNc(4,rc,3,10,"div",9),t.YNc(5,uc,8,5,"a",10),t.YNc(6,mc,7,7,"div",11),t.YNc(7,_c,3,2,"div",12),t.qZA(),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.Gre("str-chat__message-attachment str-chat__message-attachment--",e.type," str-chat__message-attachment-dynamic-size"),t.ekj("str-chat__message-attachment--card",n.isCard(e))("str-chat-angular__message-attachment-file-single",n.isFile(e))("str-chat__message-attachment-with-actions",e.actions&&e.actions.length>0)("str-chat__message-attachment--svg-image",n.isSvg(e)),t.xp6(1),t.Q6J("ngIf",n.isImage(e)),t.xp6(1),t.Q6J("ngIf",n.isGallery(e)),t.xp6(1),t.Q6J("ngIf",n.isVideo(e)),t.xp6(1),t.Q6J("ngIf",n.isFile(e)),t.xp6(1),t.Q6J("ngIf",n.isCard(e)&&n.getCardAttachmentConfiguration(e)),t.xp6(1),t.Q6J("ngIf",e.actions&&e.actions.length>0)}}function Cc(i,a){1&i&&t.GkF(0)}function yc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Cc,1,0,"ng-container",51),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw(2),n=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",t.lcZ(2,2,e.customTemplatesService.modalTemplate$)||n)("ngTemplateOutletContext",e.getModalContext())}}function wc(i,a){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,vc,8,17,"ng-container",4),t.YNc(2,yc,3,4,"ng-container",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.orderedAttachments)("ngForTrackBy",e.trackByUrl),t.xp6(1),t.Q6J("ngIf",e.imagesToView&&e.imagesToView.length>0)}}function Dc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-modal",52),t.NdJ("isOpenChange",function(s){const o=t.CHM(e).isOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.content;t.Q6J("isOpen",a.isOpen)("content",n)}}const cs=function(i){return{visibility:i}},bc=function(i,a){return{width:i,height:a}};function Tc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",54),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(-1))})("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(-1))}),t._UZ(2,"stream-icon-placeholder",55),t.qZA(),t._UZ(3,"img",56,14),t.TgZ(5,"button",57),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(1))})("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(1))}),t._UZ(6,"stream-icon-placeholder",58),t.qZA()()}if(2&i){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(9,cs,n.isImageModalPrevButtonVisible?"visible":"hidden")),t.xp6(2),t.Udp("--original-height",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).originalHeight)("--original-width",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).originalWidth),t.Q6J("src",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).url,t.LSH)("alt",n.imagesToView[n.imagesToViewCurrentIndex].fallback)("ngStyle",t.WLB(11,bc,n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).width,n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).height)),t.xp6(2),t.Q6J("ngStyle",t.VKq(14,cs,n.isImageModalNextButtonVisible?"visible":"hidden"))}}function Mc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._UZ(1,"stream-icon-placeholder",17),t.qZA()}}function xc(i,a){if(1&i&&t._UZ(0,"img",18),2&i){const e=t.oxw(2).$implicit;t.s9C("src",e.url?e.url:e.previewUri,t.LSH),t.s9C("alt",e.file.name)}}function Sc(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder",19)}function Ac(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,Mc,2,0,"div",9),t.TgZ(2,"div",10)(3,"div",11)(4,"div",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))}),t._UZ(5,"stream-icon-placeholder",13),t.qZA()(),t.YNc(6,xc,1,2,"img",14),t.qZA(),t.YNc(7,Sc,1,0,"stream-loading-indicator-placeholder",15),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.ekj("rfu-image-previewer__image--loaded","success"===e.state),t.xp6(1),t.Q6J("ngIf","error"===e.state),t.xp6(5),t.Q6J("ngIf",e.url||e.previewUri),t.xp6(1),t.Q6J("ngIf","uploading"===e.state)}}function Fc(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._uU(2," streamChat.failed "),t.qZA(),t.TgZ(3,"div",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._uU(4," streamChat.retry "),t.qZA(),t.BQk()}}function kc(i,a){1&i&&(t.TgZ(0,"div",29),t._UZ(1,"stream-loading-indicator-placeholder"),t.qZA())}function Ec(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",20)(1,"ol")(2,"li",21),t._UZ(3,"stream-icon-placeholder",22),t.TgZ(4,"a",23),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.url?null:s.preventDefault())})("keyup.enter",function(s){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.url?null:s.preventDefault())}),t._uU(5),t.YNc(6,Fc,5,0,"ng-container",24),t.qZA(),t.TgZ(7,"span",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))}),t._UZ(8,"stream-icon-placeholder",13),t.qZA(),t.YNc(9,kc,2,0,"div",26),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(2),t.ekj("rfu-file-previewer__file--uploading","uploading"===e.state)("rfu-file-previewer__file--failed","error"===e.state),t.xp6(2),t.s9C("href",e.url,t.LSH),t.xp6(1),t.hij(" ",e.file.name," "),t.xp6(1),t.Q6J("ngIf","error"===e.state),t.xp6(3),t.Q6J("ngIf","uploading"===e.state)}}function Ic(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ac,8,5,"div",6),t.YNc(2,Ec,10,8,"div",7),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","image"===e.type),t.xp6(1),t.Q6J("ngIf","file"===e.type||"video"===e.type)}}function Oc(i,a){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,Ic,3,2,"ng-container",5),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,e.attachmentUploads$))("ngForTrackBy",e.trackByFile)}}function Lc(i,a){1&i&&t.GkF(0)}function Uc(i,a){1&i&&(t.TgZ(0,"div",38),t._UZ(1,"stream-loading-indicator-placeholder",39),t.qZA()),2&i&&(t.xp6(1),t.Q6J("size",18))}function Zc(i,a){1&i&&t.GkF(0)}function Rc(i,a){if(1&i&&t._UZ(0,"img",40),2&i){const e=t.oxw(2).$implicit;t.s9C("src",e.url?e.url:e.previewUri,t.LSH),t.s9C("alt",e.file.name)}}const hn=function(i){return{attachmentUpload:i}};function Pc(i,a){if(1&i&&(t.TgZ(0,"div",34),t.YNc(1,Lc,1,0,"ng-container",35),t.YNc(2,Uc,2,1,"div",36),t.YNc(3,Zc,1,0,"ng-container",35),t.YNc(4,Rc,1,2,"img",37),t.qZA()),2&i){const e=t.oxw().$implicit;t.oxw(2);const n=t.MAs(5),s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(6,hn,e)),t.xp6(1),t.Q6J("ngIf","uploading"===e.state),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(8,hn,e)),t.xp6(1),t.Q6J("ngIf",e.url||e.previewUri)}}function Bc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r.url?null:s.preventDefault())})("keyup.enter",function(s){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r.url?null:s.preventDefault())}),t._UZ(1,"stream-icon-placeholder",48),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.s9C("href",e.url,t.LSH)}}function Nc(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder",39),2&i&&t.Q6J("size",18)}function jc(i,a){1&i&&t.GkF(0)}function $c(i,a){1&i&&t.GkF(0)}function Hc(i,a){if(1&i&&(t.TgZ(0,"div",41),t._UZ(1,"stream-icon-placeholder",42),t.TgZ(2,"div",43)(3,"div",44),t._uU(4),t.qZA(),t.YNc(5,Bc,2,1,"a",45),t.YNc(6,Nc,1,1,"stream-loading-indicator-placeholder",46),t.qZA(),t.YNc(7,jc,1,0,"ng-container",35),t.YNc(8,$c,1,0,"ng-container",35),t.qZA()),2&i){const e=t.oxw().$implicit;t.oxw(2);const n=t.MAs(5),s=t.MAs(7);t.xp6(4),t.hij(" ",e.file.name," "),t.xp6(1),t.Q6J("ngIf","success"===e.state),t.xp6(1),t.Q6J("ngIf","uploading"===e.state),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(7,hn,e)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(9,hn,e))}}function qc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Pc,5,10,"div",32),t.YNc(2,Hc,9,11,"div",33),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","image"===e.type),t.xp6(1),t.Q6J("ngIf","file"===e.type||"video"===e.type)}}function Yc(i,a){if(1&i&&(t.TgZ(0,"div",30)(1,"div",31),t.YNc(2,qc,3,2,"ng-container",5),t.ALo(3,"async"),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,e.attachmentUploads$))("ngForTrackBy",e.trackByFile)}}function Jc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",49),t.NdJ("click",function(){const r=t.CHM(e).attachmentUpload,o=t.oxw();return t.KtG(o.attachmentDeleted(r))})("keyup.enter",function(){const r=t.CHM(e).attachmentUpload,o=t.oxw();return t.KtG(o.attachmentDeleted(r))}),t._UZ(1,"stream-icon-placeholder",13),t.qZA()}}function Vc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().attachmentUpload,r=t.oxw();return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().attachmentUpload,r=t.oxw();return t.KtG(r.attachmentUploadRetried(s.file))}),t._UZ(1,"stream-icon-placeholder",17),t.qZA()}if(2&i){const e=t.oxw().attachmentUpload;t.Gre("str-chat__attachment-preview-error str-chat__attachment-preview-error-","image"===e.type?"image":"file","")}}function Qc(i,a){1&i&&t.YNc(0,Vc,2,3,"div",50),2&i&&t.Q6J("ngIf","error"===a.attachmentUpload.state)}const Gc=["fileInput"];function zc(i,a){if(1&i&&t._UZ(0,"stream-attachment-list",22),2&i){const e=t.oxw(3);t.Q6J("attachments",e.quotedMessageAttachments)("messageId",null==e.quotedMessage?null:e.quotedMessage.id)}}function Wc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())}),t._UZ(6,"stream-icon-placeholder",16),t.qZA()(),t.TgZ(7,"div",17),t._UZ(8,"stream-avatar-placeholder",18),t.TgZ(9,"div",19),t.YNc(10,zc,1,2,"stream-attachment-list",20),t._UZ(11,"div",21),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,7,"streamChat.Reply to Message")),t.xp6(5),t.Q6J("imageUrl",null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.image)("name",(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.name)||(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.id))("size",20)("user",(null==e.quotedMessage?null:e.quotedMessage.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.quotedMessage?null:e.quotedMessage.attachments)&&(null==e.quotedMessage||null==e.quotedMessage.attachments?null:e.quotedMessage.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.translation)||(null==e.quotedMessage?null:e.quotedMessage.html)||(null==e.quotedMessage?null:e.quotedMessage.text),t.oJD)}}function Kc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-preview-list",23),t.NdJ("retryAttachmentUpload",function(s){const o=t.CHM(e).retryUploadHandler;return t.KtG(o(s))})("deleteAttachment",function(s){const o=t.CHM(e).deleteUploadHandler;return t.KtG(o(s))}),t.qZA()}2&i&&t.Q6J("attachmentUploads$",a.attachmentUploads$)}function Xc(i,a){1&i&&t.GkF(0)}function eu(i,a){1&i&&t.GkF(0)}function tu(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"div",25),t.YNc(2,eu,1,0,"ng-container",5),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngTemplateOutlet",e.emojiPickerTemplate)("ngTemplateOutletContext",e.getEmojiPickerContext())}}function nu(i,a){if(1&i){const e=t.EpF();t.ynx(0)(1,26),t.NdJ("valueChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.textareaValue=s)})("valueChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.typingStart$.next())})("send",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("userMentions",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.mentionedUsers=s)}),t.BQk()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("value",e.textareaValue)("componentRef",e.textareaRef)("areMentionsEnabled",e.areMentionsEnabled)("mentionScope",e.mentionScope)("placeholder",e.textareaPlaceholder)("inputMode",e.inputMode)}}function iu(i,a){if(1&i&&(t._UZ(0,"textarea",27),t.ALo(1,"translate")),2&i){const e=t.oxw(2);t.Q6J("value",t.lcZ(1,1,e.disabledTextareaText))}}function su(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",30)(5,"label")(6,"input",31,32),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(7),r=t.oxw(2);return t.KtG(r.filesSelected(s.files))}),t.qZA(),t.TgZ(8,"span",33),t._UZ(9,"stream-icon-placeholder",34),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"streamChat.Attach files")," "),t.xp6(4),t.Q6J("multiple",e.isMultipleFileUploadEnabled)}}function au(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())}),t._UZ(1,"stream-icon-placeholder",36),t.qZA()}}function ru(i,a){if(1&i&&(t.TgZ(0,"div",37)(1,"div",38),t._uU(2),t.ALo(3,"async"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,1,e.cooldown$)," ")}}function ou(i,a){if(1&i&&(t.TgZ(0,"div"),t.ALo(1,"async"),t.YNc(2,Wc,12,9,"div",2),t.TgZ(3,"div",3)(4,"div"),t.YNc(5,Kc,1,1,"ng-template",null,4,t.W1O),t.YNc(7,Xc,1,0,"ng-container",5),t.TgZ(8,"div",6),t.YNc(9,tu,3,2,"ng-container",7),t.YNc(10,nu,2,6,"ng-container",8),t.YNc(11,iu,2,3,"ng-template",null,9,t.W1O),t.qZA(),t.YNc(13,su,10,4,"div",10),t.qZA(),t.YNc(14,au,2,0,"button",11),t.YNc(15,ru,4,3,"div",12),t.qZA()()),2&i){const e=t.MAs(6),n=t.MAs(12),s=t.oxw();t.Tol("main"===s.mode?"str-chat__input-flat":"str-chat__small-message-input"),t.ekj("str-chat__input-flat-has-attachments",t.lcZ(1,19,s.attachmentUploads$).length>0)("str-chat__input-flat-quoted",!!s.quotedMessage),t.xp6(2),t.Q6J("ngIf",s.quotedMessage),t.xp6(2),t.Tol("main"===s.mode?"str-chat__input-flat--textarea-wrapper":"str-chat__small-message-input--textarea-wrapper"),t.xp6(3),t.Q6J("ngTemplateOutlet",s.attachmentPreviewListTemplate||e)("ngTemplateOutletContext",s.getAttachmentPreviewListContext()),t.xp6(2),t.Q6J("ngIf",s.emojiPickerTemplate),t.xp6(1),t.Q6J("ngIf",s.canSendMessages)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",s.isFileUploadEnabled&&s.isFileUploadAuthorized&&s.canSendMessages),t.xp6(1),t.Q6J("ngIf",s.canSendMessages&&!s.isCooldownInProgress),t.xp6(1),t.Q6J("ngIf",s.isCooldownInProgress)}}function lu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())}),t._UZ(5,"stream-icon-placeholder",45),t.qZA()()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"streamChat.Reply to Message")," "))}function cu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",55)(1,"input",56,32),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(2),r=t.oxw(3);return t.KtG(r.filesSelected(s.files))}),t.qZA(),t.TgZ(3,"label",57),t._UZ(4,"stream-icon-placeholder",58),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.s9C("id",e.fileInputId),t.Q6J("multiple",e.isMultipleFileUploadEnabled),t.xp6(2),t.s9C("for",e.fileInputId)}}function uu(i,a){if(1&i&&t._UZ(0,"stream-attachment-list",22),2&i){const e=t.oxw(4);t.Q6J("attachments",e.quotedMessageAttachments)("messageId",null==e.quotedMessage?null:e.quotedMessage.id)}}function du(i,a){if(1&i&&(t.TgZ(0,"div",59),t._UZ(1,"stream-avatar-placeholder",60),t.TgZ(2,"div",61),t.YNc(3,uu,1,2,"stream-attachment-list",20),t._UZ(4,"div",62),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("imageUrl",null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.image)("name",(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.name)||(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.id))("size",20)("user",(null==e.quotedMessage?null:e.quotedMessage.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.quotedMessage?null:e.quotedMessage.attachments)&&(null==e.quotedMessage||null==e.quotedMessage.attachments?null:e.quotedMessage.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.quotedMessage?null:e.quotedMessage.translation)||(null==e.quotedMessage?null:e.quotedMessage.html)||(null==e.quotedMessage?null:e.quotedMessage.text),t.oJD)}}function hu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-preview-list",63),t.NdJ("retryAttachmentUpload",function(s){const o=t.CHM(e).retryUploadHandler;return t.KtG(o(s))})("deleteAttachment",function(s){const o=t.CHM(e).deleteUploadHandler;return t.KtG(o(s))}),t.qZA()}2&i&&t.Q6J("attachmentUploads$",a.attachmentUploads$)}function pu(i,a){1&i&&t.GkF(0)}function gu(i,a){1&i&&t.GkF(0)}function mu(i,a){if(1&i&&(t.ynx(0,24),t.YNc(1,gu,1,0,"ng-container",5),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngTemplateOutlet",e.emojiPickerTemplate)("ngTemplateOutletContext",e.getEmojiPickerContext())}}function fu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.messageSent())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.messageSent())}),t.ALo(1,"async"),t.ALo(2,"async"),t._UZ(3,"stream-icon-placeholder",65),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",t.lcZ(1,1,e.attachmentUploadInProgressCounter$)>0||!e.textareaValue&&0===t.lcZ(2,3,e.attachmentUploads$).length)}}function _u(i,a){if(1&i&&(t.TgZ(0,"div",66),t._uU(1),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.cooldown$)," ")}}function vu(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",46),t.YNc(2,cu,5,3,"div",47),t.TgZ(3,"div",48),t.YNc(4,du,5,6,"div",49),t.YNc(5,hu,1,1,"ng-template",null,4,t.W1O),t.YNc(7,pu,1,0,"ng-container",5),t.TgZ(8,"div",50),t.ynx(9,51),t.NdJ("valueChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.textareaValue=s)})("valueChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.typingStart$.next())})("send",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("userMentions",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.mentionedUsers=s)}),t.BQk(),t.TgZ(10,"div",52),t.YNc(11,mu,2,2,"ng-container",7),t.qZA()()(),t.YNc(12,fu,4,5,"button",53),t.YNc(13,_u,3,3,"div",54),t.qZA(),t.BQk()}if(2&i){const e=t.MAs(6),n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.isFileUploadEnabled&&n.isFileUploadAuthorized&&n.canSendMessages),t.xp6(2),t.Q6J("ngIf",n.quotedMessage),t.xp6(3),t.Q6J("ngTemplateOutlet",n.attachmentPreviewListTemplate||e)("ngTemplateOutletContext",n.getAttachmentPreviewListContext()),t.xp6(2),t.Q6J("value",n.textareaValue)("componentRef",n.textareaRef)("areMentionsEnabled",n.areMentionsEnabled)("mentionScope",n.mentionScope)("inputMode",n.inputMode)("placeholder",n.textareaPlaceholder),t.xp6(2),t.Q6J("ngIf",n.emojiPickerTemplate),t.xp6(1),t.Q6J("ngIf",n.canSendMessages&&!n.isCooldownInProgress&&!n.message),t.xp6(1),t.Q6J("ngIf",n.isCooldownInProgress)}}function Cu(i,a){if(1&i&&(t.TgZ(0,"div",67),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.disabledTextareaText)," ")}}function yu(i,a){if(1&i&&(t.TgZ(0,"div",39),t.YNc(1,lu,6,3,"div",40),t.YNc(2,vu,14,13,"ng-container",8),t.YNc(3,Cu,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.quotedMessage),t.xp6(1),t.Q6J("ngIf",n.canSendMessages)("ngIfElse",e)}}function wu(i,a){1&i&&t.GkF(0)}function Du(i,a){if(1&i&&(t.ynx(0),t.YNc(1,wu,1,0,"ng-container",3),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function bu(i,a){1&i&&t.Hsn(0)}function Tu(i,a){if(1&i&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.text,e.translateParams)," ")}}function Mu(i,a){1&i&&t.GkF(0)}function xu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Mu,1,0,"ng-container",4),t.BQk()),2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.getNotificationContentContext(e))}}function Su(i,a){if(1&i&&(t.YNc(0,Tu,3,4,"div",5),t.YNc(1,xu,2,2,"ng-container",6)),2&i){const e=t.oxw().$implicit;t.Q6J("ngIf",void 0!==e.text),t.xp6(1),t.Q6J("ngIf",void 0!==e.template)}}function Au(i,a){1&i&&t.GkF(0)}const Fu=function(i,a){return{type:i,content:a}};function ku(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Su,2,2,"ng-template",null,3,t.W1O),t.YNc(3,Au,1,0,"ng-container",4),t.ALo(4,"async"),t.BQk()),2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(),r=t.MAs(5);t.xp6(3),t.Q6J("ngTemplateOutlet",t.lcZ(4,2,s.customTemplatesService.notificationTemplate$)||r)("ngTemplateOutletContext",t.WLB(4,Fu,e.type,n))}}function Eu(i,a){if(1&i&&t._UZ(0,"stream-notification",8),2&i){const n=a.content;t.Q6J("type",a.type)("content",n)}}function Iu(i,a){1&i&&t.GkF(0)}function Ou(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Iu,1,0,"ng-container",5),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(),s=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n.messageActionItemTemplate||s)("ngTemplateOutletContext",e)}}function Lu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){const r=t.CHM(e).actionHandler,o=t.oxw();return t.KtG(r(o.message,o.isMine))}),t.TgZ(1,"li",9),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=a.actionName,n=a.actionLabelOrTranslationKey,s=t.oxw();t.uIk("data-testid",e+"-action"),t.xp6(2),t.hij(" ",t.lcZ(3,2,s.getActionLabel(n))," ")}}function Uu(i,a){1&i&&t.GkF(0)}function Zu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-modal",10),t.NdJ("isOpenChange",function(s){const o=t.CHM(e).isOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.content;t.Q6J("isOpen",a.isOpen)("content",n)}}function Ru(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-input",18),t.NdJ("messageUpdate",function(){const r=t.CHM(e).messageUpdateHandler;return t.KtG(r())}),t.qZA()}if(2&i){const n=a.sendMessage$;t.Q6J("message",a.message)("sendMessage$",n)}}function Pu(i,a){1&i&&t.GkF(0)}function Bu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",12),t.YNc(1,Ru,1,2,"ng-template",null,13,t.W1O),t.YNc(3,Pu,1,0,"ng-container",5),t._UZ(4,"stream-notification-list"),t.TgZ(5,"div",14)(6,"div",15)(7,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.modalClosed())}),t._uU(8," streamChat.Cancel "),t.qZA(),t.TgZ(9,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendClicked())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendClicked())}),t._uU(10," streamChat.Send "),t.qZA()()()()}if(2&i){const e=t.MAs(2),n=t.oxw(2);t.xp6(3),t.Q6J("ngTemplateOutlet",n.messageInputTemplate||e)("ngTemplateOutletContext",n.getMessageInputContext())}}function Nu(i,a){if(1&i&&t.YNc(0,Bu,11,2,"div",11),2&i){const e=t.oxw();t.Q6J("ngIf",e.isEditModalOpen)}}function ju(i,a){1&i&&t.Hsn(0,1,["*ngIf","isActiveThread$ | async"])}function $u(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3),t.Hsn(2),t.qZA(),t.YNc(3,ju,1,0,"ng-content",4),t.ALo(4,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,e.isActiveThread$))}}function Hu(i,a){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"stream-icon",8),t.TgZ(2,"p",9),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",10),t._UZ(6,"stream-notification-list"),t.qZA()()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"streamChat.No chats here yet\u2026")," "))}function qu(i,a){1&i&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"div",13),t.TgZ(3,"div",14),t._UZ(4,"div",15)(5,"div",16),t.qZA()(),t.TgZ(6,"div",17)(7,"div",18),t._UZ(8,"div",19),t.TgZ(9,"div",20),t._UZ(10,"div",21),t.TgZ(11,"div",22),t._UZ(12,"div",23)(13,"div",24),t.qZA()()(),t.TgZ(14,"div",18),t._UZ(15,"div",19),t.TgZ(16,"div",20),t._UZ(17,"div",21),t.TgZ(18,"div",22),t._UZ(19,"div",23)(20,"div",24),t.qZA()()(),t.TgZ(21,"div",18),t._UZ(22,"div",19),t.TgZ(23,"div",20),t._UZ(24,"div",21),t.TgZ(25,"div",22),t._UZ(26,"div",23)(27,"div",24),t.qZA()()()(),t.TgZ(28,"div",25),t._UZ(29,"div",26)(30,"div",27),t.qZA()())}function Yu(i,a){if(1&i&&(t.YNc(0,Hu,7,3,"div",5),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,qu,31,0,"div",6),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",!1===t.lcZ(1,2,e.isInitializing$)&&(!0===t.lcZ(2,4,e.isError$)||!1===t.lcZ(3,6,e.isActiveChannel$))),t.xp6(4),t.Q6J("ngIf",!0===t.lcZ(5,8,e.isInitializing$)&&!1===t.lcZ(6,10,e.isError$)&&!1===t.lcZ(7,12,e.isActiveChannel$))}}const Ju=["*",[["","name","thread"]]],Vu=["*",'[name="thread"]'];function Qu(i,a){1&i&&t.GkF(0)}function Gu(i,a){if(1&i&&(t.TgZ(0,"p",9),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.xi3(2,2,"streamChat.{{ memberCount }} members",e.memberCountParam)," ",e.canReceiveConnectEvents?t.xi3(3,5,"streamChat.{{ watcherCount }} online",e.watcherCountParam):""," ")}}function zu(i,a){1&i&&t.GkF(0)}function Wu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,zu,1,0,"ng-container",6),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.channelActionsTemplate)("ngTemplateOutletContext",e.getChannelActionsContext())}}function Ku(i,a){if(1&i&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.unreadCount," ")}}const us=["container"];function Xu(i,a){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"stream-icon",14),t.TgZ(2,"p",15),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"streamChat.You have no channels currently")," "))}function ed(i,a){1&i&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"streamChat.You have no channels currently")," "))}function td(i,a){1&i&&t._UZ(0,"stream-channel-preview",20),2&i&&t.Q6J("channel",a.channel)}function nd(i,a){1&i&&t.GkF(0)}function id(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.YNc(1,td,1,1,"ng-template",null,17,t.W1O),t.TgZ(3,"div",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.channelSelected())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.channelSelected())}),t.YNc(4,nd,1,0,"ng-container",19),t.qZA(),t.BQk()}if(2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(2);t.xp6(4),t.Q6J("ngTemplateOutlet",s.customChannelPreviewTemplate||n)("ngTemplateOutletContext",s.getChannelPreviewContext(e))}}function sd(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Load more")))}function ad(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder")}function rd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreChannels())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreChannels())}),t.TgZ(1,"button",22),t.YNc(2,sd,3,3,"span",23),t.YNc(3,ad,1,0,"ng-template",null,24,t.W1O),t.qZA()()}if(2&i){const e=t.MAs(4),n=t.oxw(2);t.xp6(1),t.Q6J("disabled",n.isLoadingMoreChannels),t.xp6(1),t.Q6J("ngIf",!n.isLoadingMoreChannels)("ngIfElse",e)}}function od(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,Xu,5,3,"div",9),t.ALo(3,"async"),t.YNc(4,ed,3,3,"p",10),t.ALo(5,"async"),t.Hsn(6),t.YNc(7,id,5,2,"ng-container",11),t.ALo(8,"async"),t.YNc(9,rd,5,3,"div",12),t.ALo(10,"async"),t.Hsn(11,1),t.qZA()()),2&i){const e=t.oxw();let n,s;t.xp6(2),t.Q6J("ngIf",!(null!=(n=t.lcZ(3,5,e.channels$))&&n.length)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=t.lcZ(5,7,e.channels$))&&s.length)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(8,9,e.channels$))("ngForTrackBy",e.trackByChannelId),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,e.hasMoreChannels$))}}function ld(i,a){1&i&&t.GkF(0)}function cd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ld,1,0,"ng-container",26),t.BQk()),2&i){t.oxw(2);const e=t.MAs(10);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function ud(i,a){1&i&&t.GkF(0)}function dd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ud,1,0,"ng-container",26),t.BQk()),2&i){t.oxw(2);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function hd(i,a){if(1&i&&(t.YNc(0,cd,2,1,"ng-container",25),t.ALo(1,"async"),t.YNc(2,dd,2,1,"ng-container",25),t.ALo(3,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,e.isError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,e.isInitializing$))}}function pd(i,a){1&i&&t.GkF(0)}function gd(i,a){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,pd,1,0,"ng-container",26),t.TgZ(2,"div",28),t._UZ(3,"stream-icon-placeholder",29),t.TgZ(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()),2&i){t.oxw();const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(4),t.Oqu(t.lcZ(6,3,"streamChat.Connection error")),t.xp6(3),t.hij(" ",t.lcZ(9,5,"streamChat.Error connecting to chat, refresh the page to try again.")," ")}}function md(i,a){1&i&&t.GkF(0)}function fd(i,a){1&i&&t.GkF(0)}function _d(i,a){1&i&&t.GkF(0)}function vd(i,a){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,md,1,0,"ng-container",26),t.YNc(2,fd,1,0,"ng-container",26),t.YNc(3,_d,1,0,"ng-container",26),t.qZA()),2&i){t.oxw();const e=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Cd(i,a){1&i&&(t.TgZ(0,"div",31),t._UZ(1,"div",32),t.TgZ(2,"div",33),t._UZ(3,"div",34)(4,"div",35),t.qZA()())}const yd=[[["","channel-list-top",""]],[["","channel-list-bottom",""]]],wd=["[channel-list-top]","[channel-list-bottom]"],Dd=["selectorContainer"],bd=["selectorTooltip"];function Td(i,a){if(1&i&&(t.TgZ(0,"li",6),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,7)(3,"div",8)(4,"span"),t._uU(5),t.qZA()()(),t.TgZ(6,"span",9),t._uU(7),t.qZA(),t.TgZ(8,"span",10),t._uU(9),t.qZA()()),2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(2);t.ekj("str-chat__message-reaction-own",s.isOwnReaction(e)),t.Q6J("popper",n)("popperTrigger",s.popperTriggerHover)("popperPlacement",s.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(5),t.hij(" ",s.getUsersByReaction(e)," "),t.xp6(2),t.hij(" ",s.getEmojiByReaction(e),"\xa0 "),t.xp6(2),t.hij(" ",s.messageReactionCounts[e]," ")}}function Md(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"ul",3),t.YNc(2,Td,10,10,"li",4),t.TgZ(3,"li")(4,"span",5),t._uU(5),t.qZA()()()()),2&i){const e=t.oxw();t.ekj("str-chat__reaction-list--reverse",!0)("str-chat__reaction-list-hidden",e.isSelectorOpen),t.xp6(2),t.Q6J("ngForOf",e.existingReactions)("ngForTrackBy",e.trackByMessageReaction),t.xp6(3),t.Oqu(e.reactionsCount)}}const xd=function(i,a){return{left:i,visibility:a}},Sd=function(i){return{left:i}};function Ad(i,a){if(1&i&&(t.TgZ(0,"div",16,17),t._UZ(2,"div",18),t.TgZ(3,"span",19),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.Q6J("ngStyle",t.WLB(3,xd,(null==e.tooltipPositions?null:e.tooltipPositions.tooltip)+"px",e.tooltipPositions?"visible":"hidden")),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,Sd,(null==e.tooltipPositions?null:e.tooltipPositions.arrow)+"px")),t.xp6(2),t.hij(" ",e.tooltipText," ")}}function Fd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())})("mouseenter",function(s){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.showTooltip(s,r))})("mouseleave",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())}),t._UZ(1,"stream-avatar-placeholder",25),t.qZA()}if(2&i){const e=a.ngIf,n=t.oxw().$implicit;t.Q2q("data-testid","",n,"-last-user"),t.xp6(1),t.Q2q("data-testid","",n,"-avatar"),t.Q6J("imageUrl",e.image)("name",e.name||e.id)("size",20)}}function kd(i,a){if(1&i&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q2q("data-testid","",e,"-reaction-count"),t.xp6(1),t.hij(" ",n.messageReactionCounts[e]," ")}}function Ed(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",20),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.react(r))})("keyup.enter",function(){const r=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.react(r))}),t.YNc(1,Fd,2,5,"div",21),t.TgZ(2,"span",22),t._uU(3),t.qZA(),t.YNc(4,kd,2,2,"span",23),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.ekj("str-chat__message-reactions-option-selected",n.isOwnReaction(e)),t.xp6(1),t.Q6J("ngIf",n.getLatestUserByReaction(e)),t.xp6(2),t.hij(" ",n.getEmojiByReaction(e)," "),t.xp6(1),t.Q6J("ngIf",n.messageReactionCounts[e]&&n.messageReactionCounts[e]>0)}}function Id(i,a){if(1&i&&(t.TgZ(0,"div",11,12),t.YNc(2,Ad,5,8,"div",13),t.TgZ(3,"ul",14),t.YNc(4,Ed,5,5,"li",15),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.tooltipText),t.xp6(2),t.Q6J("ngForOf",e.reactionOptions)("ngForTrackBy",e.trackByMessageReaction)}}function Od(i,a){1&i&&t.GkF(0)}function Ld(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Od,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Ud(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-actions-box",29),t.NdJ("displayedActionsCount",function(s){const o=t.CHM(e).displayedActionsCountChaneHanler;return t.KtG(o(s))})("isEditing",function(s){const o=t.CHM(e).isEditingChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.isMine,s=a.enabledActions,r=a.message;t.Q6J("isOpen",a.isOpen)("isMine",n)("enabledActions",s)("message",r)}}function Zd(i,a){1&i&&t.GkF(0)}function Rd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isActionBoxOpen=!s.isActionBoxOpen)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isActionBoxOpen=!s.isActionBoxOpen)}),t._UZ(1,"stream-icon-placeholder",31),t.qZA()}}function Pd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setAsActiveParentMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setAsActiveParentMessage())}),t._UZ(1,"stream-icon-placeholder",33),t.qZA()}}function Bd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isReactionSelectorOpen=!s.isReactionSelectorOpen)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isReactionSelectorOpen=!s.isReactionSelectorOpen)}),t._UZ(1,"stream-icon-placeholder",35),t.qZA()}}function Nd(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22,23)(3,"popper-content",null,24),t.YNc(5,Ud,1,4,"ng-template",null,25,t.W1O),t.YNc(7,Zd,1,0,"ng-container",16),t.qZA(),t.YNc(8,Rd,2,0,"div",26),t.qZA(),t.YNc(9,Pd,2,0,"div",27),t.YNc(10,Bd,2,0,"div",28),t.qZA()),2&i){const e=t.MAs(4),n=t.MAs(6),s=t.oxw(3);t.ekj("str-chat__message-edit-in-progress",s.isEditing),t.xp6(1),t.ekj("str-chat-angular__message-simple__actions__action--options--editing",s.isEditing),t.Q6J("popper",e)("popperTrigger",s.popperTriggerClick)("popperPlacement",s.popperPlacementAuto)("popperHideOnScroll",!0)("popperHideOnClickOutside",!0)("popperHideOnMouseLeave",!1),t.xp6(6),t.Q6J("ngTemplateOutlet",s.messageActionsBoxTemplate||n)("ngTemplateOutletContext",s.getMessageActionsBoxContext()),t.xp6(1),t.Q6J("ngIf",s.visibleMessageActionsCount>0),t.xp6(1),t.Q6J("ngIf",-1!==s.enabledMessageActions.indexOf("send-reply")&&"main"===s.mode),t.xp6(1),t.Q6J("ngIf",s.canReactToMessage)}}function jd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-reactions",36),t.NdJ("isSelectorOpenChange",function(s){const o=t.CHM(e).isSelectorOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.latestReactions,s=a.isSelectorOpen,r=a.messageId,o=a.ownReactions;t.Q6J("messageReactionCounts",a.messageReactionCounts)("latestReactions",n)("isSelectorOpen",s)("messageId",r)("ownReactions",o)}}function $d(i,a){1&i&&t.GkF(0)}function Hd(i,a){1&i&&t.GkF(0)}function qd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Hd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Yd(i,a){1&i&&t.GkF(0)}function Jd(i,a){1&i&&t.GkF(0)}function Vd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Jd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(4);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Qd(i,a){1&i&&(t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"streamChat.Error \xb7 Unsent")," "))}function Gd(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,1,403===(null==e.message?null:e.message.errorStatusCode)?"streamChat.Message Failed \xb7 Unauthorized":"streamChat.Message Failed \xb7 Click to try again")," ")}}function zd(i,a){if(1&i&&t._UZ(0,"span",47),2&i){const e=t.oxw().$implicit;t.Q6J("innerHTML",e.content,t.oJD)}}function Wd(i,a){if(1&i&&(t.TgZ(0,"span",49),t._uU(1),t.qZA()),2&i){const e=a.content;t.xp6(1),t.Oqu(e)}}function Kd(i,a){1&i&&t.GkF(0)}function Xd(i,a){if(1&i&&(t.YNc(0,Wd,2,1,"ng-template",null,48,t.W1O),t.YNc(2,Kd,1,0,"ng-container",16)),2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(4);t.xp6(2),t.Q6J("ngTemplateOutlet",s.mentionTemplate||e)("ngTemplateOutletContext",s.getMentionContext(n))}}function eh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,zd,1,1,"span",45),t.YNc(2,Xd,3,2,"ng-template",null,46,t.W1O),t.BQk()),2&i){const e=a.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf","text"===e.type)("ngIfElse",n)}}function th(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",37)(1,"div",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG("failed"===(null==s.message?null:s.message.status)&&403!==(null==s.message?null:s.message.errorStatusCode)?s.resendMessage():void 0)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG("failed"===(null==s.message?null:s.message.status)&&403!==(null==s.message?null:s.message.errorStatusCode)?s.resendMessage():void 0)}),t.YNc(2,Yd,1,0,"ng-container",20),t.YNc(3,Vd,2,1,"ng-container",10),t.YNc(4,Qd,3,3,"div",39),t.YNc(5,Gd,3,3,"div",40),t.TgZ(6,"div",41)(7,"p"),t.YNc(8,eh,4,2,"ng-container",42),t.qZA()()()()}if(2&i){const e=t.oxw(3),n=t.MAs(8);t.xp6(1),t.ekj("str-chat__message-light-text-inner--has-attachment",e.hasAttachment),t.xp6(1),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("ngIf",e.hasAttachment&&(null==e.message?null:e.message.quoted_message)),t.xp6(1),t.Q6J("ngIf","error"===(null==e.message?null:e.message.type)),t.xp6(1),t.Q6J("ngIf","failed"===(null==e.message?null:e.message.status)),t.xp6(3),t.Q6J("ngForOf",e.messageTextParts)}}function nh(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",50)}function ih(i,a){1&i&&t.GkF(0)}function sh(i,a){1&i&&t.GkF(0)}function ah(i,a){1&i&&t.GkF(0)}function rh(i,a){1&i&&t.GkF(0)}const ds=function(){return{position:"inside-message-bubble"}},oh=function(i){return{position:"outside-message-bubble",message:i}},lh=function(){return{position:"outside-message-bubble"}};function ch(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ld,2,1,"ng-container",10),t._UZ(2,"stream-avatar-placeholder",11),t.TgZ(3,"div",12),t.YNc(4,Nd,11,15,"div",13),t.TgZ(5,"div",14),t.YNc(6,jd,1,5,"ng-template",null,15,t.W1O),t.YNc(8,$d,1,0,"ng-container",16),t.qZA(),t.TgZ(9,"div",17),t.YNc(10,qd,2,1,"ng-container",10),t.YNc(11,th,9,7,"div",18),t.YNc(12,nh,1,0,"stream-icon-placeholder",19),t.qZA(),t.YNc(13,ih,1,0,"ng-container",16),t.YNc(14,sh,1,0,"ng-container",16),t.qZA(),t.YNc(15,ah,1,0,"ng-container",16),t.YNc(16,rh,1,0,"ng-container",16),t.BQk()),2&i){const e=t.MAs(7),n=t.oxw(2),s=t.MAs(14),r=t.MAs(10);t.xp6(1),t.Q6J("ngIf","1"===n.themeVersion),t.xp6(1),t.Q6J("imageUrl",null==n.message||null==n.message.user?null:n.message.user.image)("name",(null==n.message||null==n.message.user?null:n.message.user.name)||(null==n.message||null==n.message.user?null:n.message.user.id))("user",(null==n.message?null:n.message.user)||void 0),t.xp6(2),t.Q6J("ngIf",n.areOptionsVisible),t.xp6(4),t.Q6J("ngTemplateOutlet",n.messageReactionsTemplate||e)("ngTemplateOutletContext",n.getMessageReactionsContext()),t.xp6(1),t.Jzz("transform: ","opened"===n.imageAttachmentModalState?"none":"translate3d(0, 0, 0)",""),t.xp6(1),t.Q6J("ngIf",n.hasAttachment&&!(null!=n.message&&n.message.quoted_message)),t.xp6(1),t.Q6J("ngIf",(null==n.message?null:n.message.text)||(null==n.message?null:n.message.quoted_message)&&n.hasAttachment),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.DdM(21,ds)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(22,ds)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(23,oh,n.message)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(25,lh))}}function uh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ch,17,26,"ng-container",2),t.BQk()),2&i){const e=t.oxw(),n=t.MAs(6);t.xp6(1),t.Q6J("ngIf","system"!==(null==e.message?null:e.message.type))("ngIfElse",n)}}function dh(i,a){1&i&&(t.TgZ(0,"div",51)(1,"div",52),t._uU(2," streamChat.This message was deleted... "),t.qZA()())}function hh(i,a){if(1&i&&(t.TgZ(0,"div",53)(1,"div",54),t._UZ(2,"div",55),t.TgZ(3,"p"),t._uU(4),t.qZA(),t._UZ(5,"div",55),t.qZA(),t.TgZ(6,"div",56),t._uU(7),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(null==e.message?null:e.message.text),t.xp6(3),t.hij(" ",e.parsedDate," ")}}function ph(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-list",63),t.NdJ("imageModalStateChange",function(s){const o=t.CHM(e).imageModalStateChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.attachments,s=a.parentMessageId;t.Q6J("messageId",a.messageId)("attachments",n)("parentMessageId",s)}}function gh(i,a){1&i&&t.GkF(0)}function mh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ph,1,3,"ng-template",null,62,t.W1O),t.YNc(3,gh,1,0,"ng-container",16),t.BQk()),2&i){const e=t.MAs(2),n=t.oxw(3);t.xp6(3),t.Q6J("ngTemplateOutlet",n.attachmentListTemplate||e)("ngTemplateOutletContext",n.getQuotedMessageAttachmentListContext())}}function fh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",58),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.jumpToMessage(null==s.message?null:s.message.quoted_message.id,null==s.message||null==s.message.quoted_message?null:s.message.quoted_message.parent_id))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.jumpToMessage(null==s.message?null:s.message.quoted_message.id,null==s.message||null==s.message.quoted_message?null:s.message.quoted_message.parent_id))}),t._UZ(1,"stream-avatar-placeholder",59),t.TgZ(2,"div",60),t.YNc(3,mh,4,2,"ng-container",10),t._UZ(4,"div",61),t.qZA()()}if(2&i){const e=t.oxw(2);t.ekj("mine",e.isSentByCurrentUser),t.xp6(1),t.Q6J("imageUrl",null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.image)("name",(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.name)||(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.id))("size",20)("user",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.attachments)&&(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.attachments?null:e.message.quoted_message.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.translation)||(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.html)||(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.text),t.oJD)}}function _h(i,a){if(1&i&&t.YNc(0,fh,5,8,"div",57),2&i){const e=t.oxw();t.Q6J("ngIf",null==e.message?null:e.message.quoted_message)}}function vh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayOriginalMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayOriginalMessage())}),t._uU(1," streamChat.See original (automatically translated) "),t.qZA()}}function Ch(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayTranslatedMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayTranslatedMessage())}),t._uU(1," streamChat.See translation "),t.qZA()}}function yh(i,a){if(1&i&&(t.TgZ(0,"div",68),t.YNc(1,vh,2,0,"button",69),t.YNc(2,Ch,2,0,"button",70),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","translation"===e.displayedMessageTextContent),t.xp6(1),t.Q6J("ngIf","original"===e.displayedMessageTextContent)}}function wh(i,a){1&i&&t.GkF(0)}function Dh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,wh,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function bh(i,a){if(1&i&&(t.TgZ(0,"span",73),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",null!=e.message&&null!=e.message.user&&e.message.user.name?null==e.message||null==e.message.user?null:e.message.user.name:null==e.message||null==e.message.user?null:e.message.user.id," ")}}function Th(i,a){if(1&i&&(t.ynx(0),t.YNc(1,yh,3,2,"div",64),t.TgZ(2,"div",65),t.YNc(3,Dh,2,1,"ng-container",10),t.YNc(4,bh,2,1,"span",66),t.TgZ(5,"span",67),t._uU(6),t.qZA()(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shouldDisplayTranslationNotice),t.xp6(2),t.Q6J("ngIf","2"===e.themeVersion),t.xp6(1),t.Q6J("ngIf",!e.isSentByCurrentUser),t.xp6(2),t.hij(" ",e.parsedDate," ")}}function Mh(i,a){if(1&i&&t.YNc(0,Th,7,4,"ng-container",10),2&i){const e=a.position,n=t.oxw();t.Q6J("ngIf","inside-message-bubble"===e&&"1"===n.themeVersion||"outside-message-bubble"===e&&"2"===n.themeVersion)}}function xh(i,a){1&i&&t.GkF(0)}function Sh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,xh,1,0,"ng-container",20),t.BQk()),2&i){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Ah(i,a){1&i&&t.GkF(0)}function Fh(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ah,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(2);const e=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function kh(i,a){if(1&i&&t.YNc(0,Fh,2,1,"ng-container",2),2&i){t.oxw();const e=t.MAs(5),n=t.oxw(2);t.Q6J("ngIf","main"===n.mode&&n.isMessageDeliveredAndRead&&n.canDisplayReadStatus)("ngIfElse",e)}}function Eh(i,a){1&i&&t.GkF(0)}function Ih(i,a){if(1&i&&t.YNc(0,Eh,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(7),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customDeliveredStatusTemplate||e)("ngTemplateOutletContext",n.getDeliveredStatusContext())}}function Oh(i,a){if(1&i&&(t.TgZ(0,"span",82),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",83),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"stream-icon-placeholder",84),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(4);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",t.lcZ(5,6,"streamChat.Delivered")," ")}}function Lh(i,a){if(1&i&&t.YNc(0,Oh,7,8,"span",81),2&i){const e=t.oxw(3);t.Q6J("ngIf","main"===e.mode)}}function Uh(i,a){1&i&&t.GkF(0)}function Zh(i,a){if(1&i&&t.YNc(0,Uh,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(11),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customSendingStatusTemplate||e)("ngTemplateOutletContext",n.getSendingStatusContext())}}function Rh(i,a){if(1&i&&(t.TgZ(0,"span",85),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",83),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"stream-loading-indicator-placeholder",86),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",t.lcZ(5,6,"streamChat.Sending...")," ")}}function Ph(i,a){1&i&&t.GkF(0)}function Bh(i,a){if(1&i&&t.YNc(0,Ph,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(15),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customReadStatusTemplate||e)("ngTemplateOutletContext",n.getReadStatusContext())}}function Nh(i,a){if(1&i&&(t.TgZ(0,"span",91),t._uU(1),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",null==e.message?null:e.message.readBy.length," ")}}function jh(i,a){if(1&i&&(t.TgZ(0,"span",87),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",88),t._uU(4),t.qZA()(),t._UZ(5,"stream-avatar-placeholder",89),t.YNc(6,Nh,2,1,"span",90),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",n.readByText," "),t.xp6(1),t.Q6J("size",15)("imageUrl",null==n.lastReadUser?null:n.lastReadUser.image)("name",(null==n.lastReadUser?null:n.lastReadUser.name)||(null==n.lastReadUser?null:n.lastReadUser.id))("user",n.lastReadUser),t.xp6(1),t.Q6J("ngIf",n.isReadByMultipleUsers)}}function $h(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Sh,2,1,"ng-container",2),t.YNc(2,kh,1,2,"ng-template",null,74,t.W1O),t.YNc(4,Ih,1,2,"ng-template",null,75,t.W1O),t.YNc(6,Lh,1,1,"ng-template",null,76,t.W1O),t.YNc(8,Zh,1,2,"ng-template",null,77,t.W1O),t.YNc(10,Rh,7,8,"ng-template",null,78,t.W1O),t.YNc(12,Bh,1,2,"ng-template",null,79,t.W1O),t.YNc(14,jh,7,11,"ng-template",null,80,t.W1O),t.BQk()),2&i){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf","sending"===(null==n.message?null:n.message.status))("ngIfElse",e)}}function Hh(i,a){if(1&i&&t.YNc(0,$h,16,2,"ng-container",10),2&i){const e=t.oxw();t.Q6J("ngIf",e.isSentByCurrentUser&&(e.isLastSentMessage&&"received"===(null==e.message?null:e.message.status)||"sending"===(null==e.message?null:e.message.status)))}}function qh(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",97)}function Yh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",95),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.setAsActiveParentMessage())}),t.YNc(1,qh,1,0,"stream-icon-placeholder",96),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","1"===e.themeVersion),t.xp6(1),t.hij(" ",1===(null==e.message?null:e.message.reply_count)?t.lcZ(3,2,"streamChat.1 reply"):t.xi3(4,4,"streamChat.{{ replyCount }} replies",e.replyCountParam)," ")}}function Jh(i,a){if(1&i&&(t.TgZ(0,"div",93),t.YNc(1,Yh,5,7,"button",94),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shouldDisplayThreadLink)}}function Vh(i,a){if(1&i&&t.YNc(0,Jh,2,1,"div",92),2&i){const e=a.position,n=t.oxw();t.Q6J("ngIf","inside-message-bubble"===e&&"1"===n.themeVersion||"outside-message-bubble"===e&&"2"===n.themeVersion)}}function Qh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-list",63),t.NdJ("imageModalStateChange",function(s){const o=t.CHM(e).imageModalStateChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.attachments,s=a.parentMessageId;t.Q6J("messageId",a.messageId)("attachments",n)("parentMessageId",s)}}function Gh(i,a){1&i&&t.GkF(0)}function zh(i,a){if(1&i&&(t.YNc(0,Qh,1,3,"ng-template",null,62,t.W1O),t.YNc(2,Gh,1,0,"ng-container",16)),2&i){const e=t.MAs(1),n=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",n.attachmentListTemplate||e)("ngTemplateOutletContext",n.getAttachmentListContext())}}const Wh=["input"];function Kh(i,a){1&i&&t.GkF(0)}const hs=function(i){return{item:i}};function Xh(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,Kh,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw().item,n=t.oxw(),s=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",n.mentionAutocompleteItemTemplate||s)("ngTemplateOutletContext",t.VKq(2,hs,e))}}function ep(i,a){1&i&&t.GkF(0)}function tp(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,ep,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw().item,n=t.oxw(),s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",n.commandAutocompleteItemTemplate||s)("ngTemplateOutletContext",t.VKq(2,hs,e))}}function np(i,a){1&i&&(t.TgZ(0,"div",5),t.YNc(1,Xh,2,4,"div",6),t.YNc(2,tp,2,4,"div",6),t.qZA()),2&i&&(t.Q6J("ngSwitch",a.item.type),t.xp6(1),t.Q6J("ngSwitchCase","mention"),t.xp6(1),t.Q6J("ngSwitchCase","command"))}function ip(i,a){if(1&i&&(t.TgZ(0,"div",9)(1,"span",10)(2,"strong",11),t._uU(3),t.qZA(),t.TgZ(4,"span",12),t._uU(5),t.qZA()(),t._UZ(6,"br"),t.qZA()),2&i){const e=a.item;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.AsE("/",e.name," ",e.args,"")}}function sp(i,a){1&i&&(t.TgZ(0,"div",17),t._uU(1,"@"),t.qZA())}function ap(i,a){if(1&i&&(t.TgZ(0,"div",13),t._UZ(1,"stream-avatar-placeholder",14),t.TgZ(2,"span",15),t._uU(3),t.qZA(),t.YNc(4,sp,2,0,"div",16),t.qZA()),2&i){const e=a.item,n=t.oxw();t.xp6(1),t.Akn("height: "+n.themeVersion=="2"?56:"20px"),t.Q6J("size","2"===n.themeVersion?56:20)("imageUrl",e.image||(null==e.user?null:e.user.image))("name",e.autocompleteLabel)("user",e.user||e),t.xp6(2),t.Oqu(e.autocompleteLabel),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion)}}const rp=["scrollContainer"],op=["parentMessageElement"];function lp(i,a){1&i&&t.GkF(0)}const ps=function(i){return{message:i}};function cp(i,a){if(1&i&&(t.TgZ(0,"li",13,14),t.YNc(2,lp,1,0,"ng-container",9),t.TgZ(3,"div",15),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA()()),2&i){const e=t.oxw(),n=t.MAs(15);t.xp6(2),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(8,ps,e.parentMessage)),t.xp6(2),t.hij(" ",1===(null==e.parentMessage?null:e.parentMessage.reply_count)?t.lcZ(5,3,"streamChat.1 reply"):t.xi3(6,5,"streamChat.{{ replyCount }} replies",e.replyCountParam)," ")}}function up(i,a){1&i&&t._UZ(0,"stream-loading-indicator",16)}function dp(i,a){1&i&&t.GkF(0)}function hp(i,a){if(1&i&&(t.TgZ(0,"li",17),t.YNc(1,dp,1,0,"ng-container",9),t.qZA()),2&i){const e=a.$implicit,n=a.index,s=t.oxw(),r=t.MAs(15);t.Gre("str-chat__li str-chat__li--",s.groupStyles[n],""),t.s9C("id",e.id),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(6,ps,e))}}function pp(i,a){1&i&&t._UZ(0,"stream-loading-indicator",18)}const gp=function(i){return{user:i}},mp=function(i){return{users:i}};function fp(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23)(3,"span",23)(4,"span",23),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()()),2&i){const e=t.oxw().ngIf,n=t.oxw(2);t.xp6(6),t.hij(" ",1===e.length?t.xi3(7,1,"streamChat.user is typing",t.VKq(7,gp,n.getTypingIndicatorText(e))):t.xi3(8,4,"streamChat.users are typing",t.VKq(9,mp,n.getTypingIndicatorText(e)))," ")}}function _p(i,a){if(1&i&&(t.ynx(0),t.YNc(1,fp,9,11,"div",20),t.BQk()),2&i){const e=a.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function vp(i,a){1&i&&(t.YNc(0,_p,2,1,"ng-container",19),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.usersTyping$))}function Cp(i,a){1&i&&t.GkF(0)}function yp(i,a){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessageCount," ")}}function wp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.jumpToLatestMessage())})("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.jumpToLatestMessage())}),t._UZ(1,"stream-icon",26),t.YNc(2,yp,2,1,"div",27),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon","bottom-to-top"===e.direction?"arrow-down":"arrow-up"),t.xp6(1),t.Q6J("ngIf",e.unreadMessageCount>0)}}function Dp(i,a){if(1&i&&t._UZ(0,"stream-message",30),2&i){const n=a.isLastSentMessage,s=a.enabledMessageActions,r=a.mode,o=a.isHighlighted;t.Q6J("message",a.message)("isLastSentMessage",n)("enabledMessageActions",s)("mode",r)("isHighlighted",o)}}function bp(i,a){1&i&&t.GkF(0)}function Tp(i,a){if(1&i&&(t.YNc(0,Dp,1,5,"ng-template",null,29,t.W1O),t.YNc(2,bp,1,0,"ng-container",9)),2&i){const e=a.message,n=t.MAs(1),s=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",s.messageTemplate||n)("ngTemplateOutletContext",s.getMessageContext(e))}}let Lt=(()=>{class i{constructor(){this.notificationsSubject=new ae.X([]),this.notifications$=this.notificationsSubject.asObservable()}addTemporaryNotification(e,n="error",s=5e3,r,o){const l=this.createNotification(e,n,r,o),c=setTimeout(()=>this.removeNotification(l.id),s);return l.dismissFn=()=>{clearTimeout(c),this.removeNotification(l.id)},this.notificationsSubject.next([...this.notificationsSubject.getValue(),l]),l.dismissFn}addPermanentNotification(e,n="error",s,r){const o=this.createNotification(e,n,s,r);return this.notificationsSubject.next([...this.notificationsSubject.getValue(),o]),o.dismissFn}createNotification(e,n,s,r){const o=(new Date).getTime().toString()+Math.random().toString();return{id:o,["string"==typeof e?"text":"template"]:e,type:n,translateParams:s,templateContext:r,dismissFn:()=>this.removeNotification(o)}}removeNotification(e){const n=this.notificationsSubject.getValue(),s=n.findIndex(r=>r.id===e);-1!==s&&(n.splice(s,1),this.notificationsSubject.next([...n]))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),et=(()=>{class i{constructor(e,n){this.ngZone=e,this.notificationService=n,this.notificationSubject=new zt.t(1),this.connectionStateSubject=new zt.t(1),this.appSettingsSubject=new ae.X(void 0),this.pendingInvitesSubject=new ae.X([]),this.userSubject=new zt.t(1),this.subscriptions=[],this.events$=this.notificationSubject.asObservable(),this.connectionState$=this.connectionStateSubject.asObservable(),this.appSettings$=this.appSettingsSubject.asObservable(),this.pendingInvites$=this.pendingInvitesSubject.asObservable(),this.user$=this.userSubject.asObservable()}init(e,n,s){var r;return(0,re.mG)(this,void 0,void 0,function*(){let o;this.chatClient=Ai.getInstance(e),yield this.ngZone.runOutsideAngular(()=>(0,re.mG)(this,void 0,void 0,function*(){const u="string"==typeof n?{id:n}:n;try{o="guest"===s?yield this.chatClient.setGuestUser(u):yield this.chatClient.connectUser(u,s)}catch(g){throw this.notificationService.addPermanentNotification("streamChat.Error connecting to chat, refresh the page to try again.","error"),g}this.userSubject.next(this.chatClient.user);const d="stream-chat-angular";this.chatClient.getUserAgent().includes(d)||this.chatClient.setUserAgent(`${d}-4.17.0-test.1-${this.chatClient.getUserAgent()}`)}));const l=yield this.chatClient.queryChannels({invite:"pending"},{},{user_id:null===(r=this.chatClient.user)||void 0===r?void 0:r.id});let c;return this.pendingInvitesSubject.next(l),this.appSettingsSubject.next(void 0),this.subscriptions.push(this.chatClient.on(u=>{this.updatePendingInvites(u),this.notificationSubject.next({eventType:u.type,event:u})})),this.subscriptions.push(this.chatClient.on("connection.changed",u=>{this.ngZone.run(()=>{const d=u.online;d?c&&c():c=this.notificationService.addPermanentNotification("streamChat.Connection failure, reconnecting now..."),this.connectionStateSubject.next(d?"online":"offline")})})),o})}disconnectUser(){return(0,re.mG)(this,void 0,void 0,function*(){this.pendingInvitesSubject.next([]),yield this.chatClient.disconnectUser(),this.userSubject.next(void 0),this.subscriptions.forEach(e=>e.unsubscribe())})}getAppSettings(){return(0,re.mG)(this,void 0,void 0,function*(){if(this.appSettingsSubject.getValue())return;const e=yield this.chatClient.getAppSettings();this.appSettingsSubject.next(e.app||{})})}flagMessage(e){return(0,re.mG)(this,void 0,void 0,function*(){yield this.chatClient.flagMessage(e)})}autocompleteUsers(e){return(0,re.mG)(this,void 0,void 0,function*(){return e?(yield this.chatClient.queryUsers({$or:[{id:{$autocomplete:e}},{name:{$autocomplete:e}}],id:{$ne:this.chatClient.userID}})).users:[]})}updatePendingInvites(e){var n,s,r;if((null===(s=null===(n=e.member)||void 0===n?void 0:n.user)||void 0===s?void 0:s.id)===(null===(r=this.chatClient.user)||void 0===r?void 0:r.id)&&e.channel){const o=this.pendingInvitesSubject.getValue();if("notification.invited"===e.type)this.pendingInvitesSubject.next([...o,e.channel]);else if("notification.invite_accepted"===e.type||"notification.invite_rejected"===e.type){const l=o.findIndex(c=>{var u;return c?.cid===(null===(u=e.channel)||void 0===u?void 0:u.cid)});-1!==l&&(o.splice(l,1),this.pendingInvitesSubject.next([...o]))}}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.R0b),t.LFG(Lt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ct=(i,a,e)=>{var n,s;const r=e?.language||(null===(n=a?.data)||void 0===n?void 0:n.auto_translation_language);if(r&&i?.i18n&&(null===(s=i?.user)||void 0===s?void 0:s.id)!==e?.id)return i.i18n[`${r}_text`]},pn=(i,a)=>{const e=[];return Object.keys(a.state.read).forEach(n=>{var s;a.state.read[n].last_read.getTime()>=i.created_at.getTime()&&(null===(s=i.user)||void 0===s?void 0:s.id)!==n&&e.push(a.state.read[n].user)}),e};let Ne=(()=>{class i{constructor(e,n,s){this.chatClientService=e,this.ngZone=n,this.notificationService=s,this.channelsSubject=new ae.X(void 0),this.activeChannelSubject=new ae.X(void 0),this.activeChannelMessagesSubject=new ae.X([]),this.activeChannelPinnedMessagesSubject=new ae.X([]),this.hasMoreChannelsSubject=new zt.t(1),this.activeChannelSubscriptions=[],this.activeParentMessageIdSubject=new ae.X(void 0),this.activeThreadMessagesSubject=new ae.X([]),this.jumpToMessageSubject=new ae.X({id:void 0,parentId:void 0}),this.latestMessageDateByUserByChannelsSubject=new ae.X({}),this.messagePageSize=25,this.messageToQuoteSubject=new ae.X(void 0),this.usersTypingInChannelSubject=new ae.X([]),this.usersTypingInThreadSubject=new ae.X([]),this._shouldMarkActiveChannelAsRead=!0,this.isStateRecoveryInProgress=!1,this.channelListSetter=r=>{const o=this.channelsSubject.getValue()||[],l=r.filter(u=>!o.find(d=>d.cid===u.cid)),c=o.filter(u=>!r?.find(d=>d.cid===u.cid));this.addChannelsFromNotification(l),this.removeChannelsFromChannelList(c.map(u=>u.cid))},this.messageListSetter=r=>{this.activeChannelMessagesSubject.next(r)},this.threadListSetter=r=>{this.activeThreadMessagesSubject.next(r)},this.parentMessageSetter=r=>{this.activeParentMessageIdSubject.next(r?.id)},this.channels$=this.channelsSubject.asObservable(),this.activeChannel$=this.activeChannelSubject.asObservable(),this.activeChannelMessages$=this.activeChannelMessagesSubject.pipe((0,w.U)(r=>{const o=this.activeChannelSubject.getValue();return r.map(l=>this.transformToStreamMessage(l,o))})),this.hasMoreChannels$=this.hasMoreChannelsSubject.asObservable(),this.activeParentMessageId$=this.activeParentMessageIdSubject.asObservable(),this.activeThreadMessages$=this.activeThreadMessagesSubject.pipe((0,w.U)(r=>{const o=this.activeChannelSubject.getValue();return r.map(l=>this.transformToStreamMessage(l,o))})),this.activeParentMessage$=(0,ii.a)([this.activeChannelMessages$,this.activeParentMessageId$]).pipe((0,w.U)(([r,o])=>{if(o){return r.find(c=>c.id===o)||void this.setAsActiveParentMessage(void 0)}}),(0,_r.d)()),this.messageToQuote$=this.messageToQuoteSubject.asObservable(),this.jumpToMessage$=this.jumpToMessageSubject.asObservable(),this.usersTypingInChannel$=this.usersTypingInChannelSubject.asObservable(),this.usersTypingInThread$=this.usersTypingInThreadSubject.asObservable(),this.latestMessageDateByUserByChannels$=this.latestMessageDateByUserByChannelsSubject.asObservable(),this.activeChannelPinnedMessages$=this.activeChannelPinnedMessagesSubject.asObservable()}get shouldMarkActiveChannelAsRead(){return this._shouldMarkActiveChannelAsRead}set shouldMarkActiveChannelAsRead(e){var n;!this._shouldMarkActiveChannelAsRead&&e&&(null===(n=this.activeChannelSubject.getValue())||void 0===n||n.markRead()),this._shouldMarkActiveChannelAsRead=e}setAsActiveChannel(e){const n=this.activeChannelSubject.getValue();this.stopWatchForActiveChannelEvents(n),this.watchForActiveChannelEvents(e),this.activeChannelSubject.next(e),e.state.messages.forEach(s=>{s.readBy=pn(s,e),s.translation=ct(s,e,this.chatClientService.chatClient.user),s.quoted_message&&(s.quoted_message.translation=ct(s.quoted_message,e,this.chatClientService.chatClient.user))}),this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&e.markRead(),this.activeChannelMessagesSubject.next([...e.state.messages]),this.activeChannelPinnedMessagesSubject.next([...e.state.pinnedMessages]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.messageToQuoteSubject.next(void 0)}deselectActiveChannel(){const e=this.activeChannelSubject.getValue();e&&(this.stopWatchForActiveChannelEvents(e),this.activeChannelMessagesSubject.next([]),this.activeChannelSubject.next(void 0),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.latestMessageDateByUserByChannelsSubject.next({}),this.selectMessageToQuote(void 0),this.jumpToMessageSubject.next({id:void 0,parentId:void 0}),this.activeChannelPinnedMessagesSubject.next([]))}setAsActiveParentMessage(e,n="request"){var s;return(0,re.mG)(this,void 0,void 0,function*(){const r=this.messageToQuoteSubject.getValue();if(r&&r.parent_id&&this.messageToQuoteSubject.next(void 0),e){this.activeParentMessageIdSubject.next(e.id);const o=this.activeChannelSubject.getValue();if("request"===n){const l=yield o?.getReplies(e.id,{limit:null===(s=this.options)||void 0===s?void 0:s.message_limit});this.activeThreadMessagesSubject.next(l?.messages||[])}else this.activeThreadMessagesSubject.next(o?.state.threads[e.id]||[])}else{this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]);const o=this.jumpToMessageSubject.getValue();o&&o.parentId&&this.jumpToMessageSubject.next({id:void 0,parentId:void 0})}})}loadMoreMessages(e="older"){var n,s,r,o,l,c,u;return(0,re.mG)(this,void 0,void 0,function*(){const d=this.activeChannelSubject.getValue(),g=this.activeChannelMessagesSubject.getValue(),m=null===(n=g["older"===e?0:g.length-1])||void 0===n?void 0:n.id;"newer"===e&&(null===(s=d?.state)||void 0===s?void 0:s.latestMessages)===(null===(r=d?.state)||void 0===r?void 0:r.messages)||(yield d?.query({messages:{limit:null===(o=this.options)||void 0===o?void 0:o.message_limit,["older"===e?"id_lt":"id_gt"]:m},members:{limit:0},watchers:{limit:0}}),(null===(l=d?.data)||void 0===l?void 0:l.id)===(null===(u=null===(c=this.activeChannelSubject.getValue())||void 0===c?void 0:c.data)||void 0===u?void 0:u.id)&&this.activeChannelMessagesSubject.next([...d.state.messages]))})}loadMoreThreadReplies(e="older"){var n,s;return(0,re.mG)(this,void 0,void 0,function*(){if("newer"===e)return;const r=this.activeChannelSubject.getValue(),o=this.activeParentMessageIdSubject.getValue();if(!o)return;const l=this.activeThreadMessagesSubject.getValue(),c=null===(n=l["older"===e?0:l.length-1])||void 0===n?void 0:n.id;yield r?.getReplies(o,{limit:null===(s=this.options)||void 0===s?void 0:s.message_limit,["older"===e?"id_lt":"id_gt"]:c}),this.activeThreadMessagesSubject.next(r?.state.threads[o]||[])})}init(e,n,s,r=!0){return(0,re.mG)(this,void 0,void 0,function*(){this.filters=e,this.options=s||{offset:0,limit:25,state:!0,presence:!0,watch:!0,message_limit:this.messagePageSize},this.sort=n||{last_message_at:-1,updated_at:-1},this.shouldSetActiveChannel=r;try{const o=yield this.queryChannels(this.shouldSetActiveChannel);return this.clientEventsSubscription=this.chatClientService.events$.subscribe(l=>{this.handleNotification(l)}),o}catch(o){throw this.notificationService.addPermanentNotification("streamChat.Error loading channels","error"),o}})}reset(){var e;this.deselectActiveChannel(),this.channelsSubject.next(void 0),null===(e=this.clientEventsSubscription)||void 0===e||e.unsubscribe()}loadMoreChannels(){return(0,re.mG)(this,void 0,void 0,function*(){this.options.offset=this.channels.length,yield this.queryChannels(!1)})}addReaction(e,n,s){var r;return(0,re.mG)(this,void 0,void 0,function*(){yield null===(r=this.activeChannelSubject.getValue())||void 0===r?void 0:r.sendReaction(e,Object.assign({type:n},s))})}removeReaction(e,n){var s;return(0,re.mG)(this,void 0,void 0,function*(){yield null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.deleteReaction(e,n)})}sendMessage(e,n=[],s=[],r,o,l){return(0,re.mG)(this,void 0,void 0,function*(){const c=((i,a,e=[],n=[],s,r,o)=>{const l=`${i.id}-${An()}`;return Object.assign({__html:a,created_at:new Date,html:a,id:l,reactions:[],status:"sending",text:a,type:"regular",user:i,attachments:e,mentioned_users:n,parent_id:s,quoted_message_id:r},o)})(this.chatClientService.chatClient.user,e,n,s,r,o,l),u=this.activeChannelSubject.getValue();c.readBy=[],u.state.addMessageSorted(c,!0),yield this.sendMessageRequest(c,l)})}resendMessage(e){return(0,re.mG)(this,void 0,void 0,function*(){this.activeChannelSubject.getValue().state.addMessageSorted(Object.assign(Object.assign({},e),{errorStatusCode:void 0,status:"sending"}),!0),yield this.sendMessageRequest(e)})}updateMessage(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=Object.assign({},e);delete n.i18n,yield this.chatClientService.chatClient.updateMessage(n)})}deleteMessage(e){return(0,re.mG)(this,void 0,void 0,function*(){yield this.chatClientService.chatClient.deleteMessage(e.id)})}uploadAttachments(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=[],s=this.activeChannelSubject.getValue();return(yield Promise.allSettled(e.map(o=>"image"===o.type?this.customImageUploadRequest?this.customImageUploadRequest(o.file,s):s.sendImage(o.file,o.file.name,o.file.type):this.customFileUploadRequest?this.customFileUploadRequest(o.file,s):s.sendFile(o.file,o.file.name,o.file.type)))).forEach((o,l)=>{const c=e[l].file,u=e[l].type;n.push("fulfilled"===o.status?{file:c,type:u,state:"success",url:o.value.file,thumb_url:o.value.thumb_url}:{file:c,type:u,state:"error"})}),n})}deleteAttachment(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield"image"===e.type?this.customImageDeleteRequest?this.customImageDeleteRequest(e.url,n):n.deleteImage(e.url):this.customFileDeleteRequest?this.customFileDeleteRequest(e.url,n):n.deleteFile(e.url)})}autocompleteMembers(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();if(!n)return[];if(Object.keys(n.state.members).length<=100)return Object.values(n.state.members).filter(s=>{var r;return(null===(r=s.user)||void 0===r?void 0:r.id)!==this.chatClientService.chatClient.userID});{if(!e)return[];const s=yield n.queryMembers({name:{$autocomplete:e},id:{$ne:this.chatClientService.chatClient.userID}});return Object.values(s.members)}})}sendAction(e,n,s){return(0,re.mG)(this,void 0,void 0,function*(){const r=this.activeChannelSubject.getValue(),o=yield r.sendAction(e,n);o?.message?(r.state.addMessageSorted(Object.assign(Object.assign({},o.message),{status:"received"})),o.message.parent_id?this.activeThreadMessagesSubject.next([...r.state.threads[o.message.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages])):(r.state.removeMessage({id:e,parent_id:s}),s?this.activeThreadMessagesSubject.next(r.state.threads[this.activeParentMessageIdSubject.getValue()]):this.activeChannelMessagesSubject.next([...r.state.messages]))})}selectMessageToQuote(e){this.messageToQuoteSubject.next(e)}sendMessageRequest(e,n){var s;return(0,re.mG)(this,void 0,void 0,function*(){const r=this.activeChannelSubject.getValue(),o=!!e.parent_id;o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages]);try{const l=yield r.sendMessage(Object.assign({id:e.id,text:e.text,attachments:e.attachments,mentioned_users:null===(s=e.mentioned_users)||void 0===s?void 0:s.map(c=>c.id),parent_id:e.parent_id,quoted_message_id:e.quoted_message_id},n));l?.message&&(r.state.addMessageSorted(Object.assign(Object.assign({},l.message),{status:"received"}),!0),o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages]))}catch(l){const c=JSON.stringify(l),u=c?JSON.parse(c):{};r.state.addMessageSorted(Object.assign(Object.assign({},e),{errorStatusCode:u.status||void 0,status:"failed"}),!0),o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages])}})}jumpToMessage(e,n){return(0,re.mG)(this,void 0,void 0,function*(){const s=this.activeChannelSubject.getValue();try{yield s?.state.loadMessageIntoState(e,n);const r=s?.state.messages||[];if(this.activeChannelMessagesSubject.next([...r]),n){const o=r.find(l=>l.id===n);this.setAsActiveParentMessage(o,"state")}this.jumpToMessageSubject.next({id:e,parentId:n})}catch(r){throw this.notificationService.addTemporaryNotification("Message not found"),r}})}pinMessage(e){var n;return(0,re.mG)(this,void 0,void 0,function*(){try{yield null===(n=this.chatClientService.chatClient)||void 0===n?void 0:n.pinMessage(e),this.notificationService.addTemporaryNotification("Message pinned","success")}catch(s){throw this.notificationService.addTemporaryNotification("Error pinning message"),s}})}unpinMessage(e){var n;return(0,re.mG)(this,void 0,void 0,function*(){try{yield null===(n=this.chatClientService.chatClient)||void 0===n?void 0:n.unpinMessage(e),this.notificationService.addTemporaryNotification("Message unpinned","success")}catch(s){throw this.notificationService.addTemporaryNotification("Error removing message pin"),s}})}handleNotification(e){switch(e.eventType){case"connection.recovered":this.ngZone.run(()=>(0,re.mG)(this,void 0,void 0,function*(){if(!this.isStateRecoveryInProgress){this.isStateRecoveryInProgress=!0;try{this.options&&(this.options.offset=0),yield this.queryChannels(!1,!0),this.setAsActiveParentMessage(void 0),this.isStateRecoveryInProgress=!1}catch{this.isStateRecoveryInProgress=!1}}}));break;case"notification.message_new":this.ngZone.run(()=>{this.customNewMessageNotificationHandler?this.customNewMessageNotificationHandler(e,this.channelListSetter):this.handleNewMessageNotification(e)});break;case"notification.added_to_channel":this.ngZone.run(()=>{this.customAddedToChannelNotificationHandler?this.customAddedToChannelNotificationHandler(e,this.channelListSetter):this.handleAddedToChannelNotification(e)});break;case"notification.removed_from_channel":this.ngZone.run(()=>{this.customRemovedFromChannelNotificationHandler?this.customRemovedFromChannelNotificationHandler(e,this.channelListSetter):this.handleRemovedFromChannelNotification(e)})}}handleRemovedFromChannelNotification(e){this.removeChannelsFromChannelList([e.event.channel.cid])}handleNewMessageNotification(e){e.event.channel&&this.addChannelsFromNotification([e.event.channel])}handleAddedToChannelNotification(e){e.event.channel&&this.addChannelsFromNotification([e.event.channel])}addChannelsFromNotification(e){return(0,re.mG)(this,void 0,void 0,function*(){let n=[];const s=[];e.forEach(o=>{const l=this.chatClientService.chatClient.channel(o.type,o.id);s.push(l.watch()),n.push(l)}),yield Promise.all(s);const r=this.channelsSubject.getValue()||[];n=n.filter(o=>!r.find(l=>l.cid===o.cid)),n.length>0&&(n.forEach(o=>this.watchForChannelEvents(o)),this.channelsSubject.next([...n,...r]))})}removeChannelsFromChannelList(e){var n;const s=this.channels.filter(r=>!e.includes(r.cid||""));e.forEach(r=>{var o;null===(o=this.chatClientService.chatClient.activeChannels[r])||void 0===o||o.stopWatching()}),s.length<this.channels.length&&(this.channelsSubject.next(s),e.includes((null===(n=this.activeChannelSubject.getValue())||void 0===n?void 0:n.cid)||"")&&(s.length>0?this.setAsActiveChannel(s[0]):this.activeChannelSubject.next(void 0)))}watchForActiveChannelEvents(e){this.activeChannelSubscriptions.push(e.on("message.new",n=>{this.ngZone.run(()=>{n.message&&n.message.parent_id?this.activeThreadMessagesSubject.next([...e.state.threads[n.message.parent_id]]):this.activeChannelMessagesSubject.next([...e.state.messages]),this.activeChannel$.pipe((0,Ft.P)()).subscribe(s=>{this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&s?.markRead()}),this.updateLatestMessages(n)})})),this.activeChannelSubscriptions.push(e.on("message.updated",n=>this.messageUpdated(n))),this.activeChannelSubscriptions.push(e.on("message.deleted",n=>this.messageUpdated(n))),this.activeChannelSubscriptions.push(e.on("reaction.new",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("reaction.deleted",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("reaction.updated",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("message.read",n=>{this.ngZone.run(()=>{let s;this.activeChannelMessages$.pipe((0,Ft.P)()).subscribe(r=>{s=r[r.length-1]}),s&&n.user&&(s.readBy=pn(s,e),this.activeChannelMessagesSubject.next(this.activeChannelMessagesSubject.getValue()))})})),this.activeChannelSubscriptions.push(e.on("typing.start",n=>this.ngZone.run(()=>this.handleTypingStartEvent(n)))),this.activeChannelSubscriptions.push(e.on("typing.stop",n=>this.ngZone.run(()=>this.handleTypingStopEvent(n))))}typingStarted(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield n?.keystroke(e)})}typingStopped(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield n?.stopTyping(e)})}messageUpdated(e){this.ngZone.run(()=>{var n;const s=e.message&&e.message.parent_id,r=this.activeChannelSubject.getValue();if(!r)return;const o=s?r.state.threads[(null===(n=e?.message)||void 0===n?void 0:n.parent_id)||""]:r.state.messages;o&&-1!==o.findIndex(c=>{var u;return c.id===(null===(u=e?.message)||void 0===u?void 0:u.id)})&&(s?this.activeThreadMessagesSubject.next([...o]):this.activeChannelMessagesSubject.next([...o]),this.activeChannelPinnedMessagesSubject.next([...r.state.pinnedMessages]))})}messageReactionEventReceived(e){this.ngZone.run(()=>{var n,s,r,o;const l=e.message&&e.message.parent_id;let c;(l?this.activeThreadMessages$:this.activeChannelMessages$).pipe((0,Ft.P)()).subscribe(d=>c=d);const u=c.find(d=>{var g;return d.id===(null===(g=e?.message)||void 0===g?void 0:g.id)});u&&(u.reaction_counts=Object.assign({},null===(n=e.message)||void 0===n?void 0:n.reaction_counts),u.reaction_scores=Object.assign({},null===(s=e.message)||void 0===s?void 0:s.reaction_scores),u.latest_reactions=[...(null===(r=e.message)||void 0===r?void 0:r.latest_reactions)||[]],u.own_reactions=[...(null===(o=e.message)||void 0===o?void 0:o.own_reactions)||[]],l?this.activeThreadMessagesSubject.next([...c]):this.activeChannelMessagesSubject.next([...c]))})}formatMessage(e){return Object.assign(Object.assign({},e),{pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"})}isStreamMessage(e){return!!e.readBy}isFormatMessageResponse(e){return e.created_at instanceof Date}stopWatchForActiveChannelEvents(e){e&&(this.activeChannelSubscriptions.forEach(n=>n.unsubscribe()),this.activeChannelSubscriptions=[])}queryChannels(e,n=!1){return(0,re.mG)(this,void 0,void 0,function*(){try{const s=yield this.chatClientService.chatClient.queryChannels(this.filters,this.sort||{},this.options);s.forEach(l=>this.watchForChannelEvents(l));const r=n?[]:this.channelsSubject.getValue()||[];this.channelsSubject.next([...r,...s]);const o=this.activeChannelSubject.getValue();return s.length>0&&!o&&e&&this.setAsActiveChannel(s[0]),n&&!s.find(l=>l.cid===o?.cid)&&this.deselectActiveChannel(),this.hasMoreChannelsSubject.next(s.length>=this.options.limit),s}catch(s){throw this.channelsSubject.error(s),s}})}watchForChannelEvents(e){e.on(n=>{switch(n.type){case"message.new":this.ngZone.run(()=>{this.customNewMessageHandler?this.customNewMessageHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleNewMessage(n,e)});break;case"channel.hidden":this.ngZone.run(()=>{this.customChannelHiddenHandler?this.customChannelHiddenHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelHidden(n)});break;case"channel.deleted":this.ngZone.run(()=>{this.customChannelDeletedHandler?this.customChannelDeletedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelDeleted(n)});break;case"channel.visible":this.ngZone.run(()=>{this.customChannelVisibleHandler?this.customChannelVisibleHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelVisible(n,e)});break;case"channel.updated":this.ngZone.run(()=>{this.customChannelUpdatedHandler?this.customChannelUpdatedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelUpdate(n)});break;case"channel.truncated":this.ngZone.run(()=>{this.customChannelTruncatedHandler?this.customChannelTruncatedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelTruncate(n)})}})}handleNewMessage(e,n){const s=this.channels.findIndex(r=>r.cid===n.cid);this.channels.splice(s,1),this.channelsSubject.next([n,...this.channels])}handleChannelHidden(e){this.removeChannelsFromChannelList([e.channel.cid])}handleChannelDeleted(e){this.removeChannelsFromChannelList([e.channel.cid])}handleChannelVisible(e,n){this.channels.find(s=>s.cid===e.cid)||this.ngZone.run(()=>this.channelsSubject.next([...this.channels,n]))}handleChannelUpdate(e){var n,s;const r=this.channels.findIndex(o=>o.cid===e.channel.cid);if(-1!==r&&(this.channels[r].data=e.channel,this.channelsSubject.next([...this.channels]),(null===(n=e.channel)||void 0===n?void 0:n.cid)===(null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.cid))){const o=this.activeChannelSubject.getValue();o.data=e.channel,this.activeChannelSubject.next(o)}}handleChannelTruncate(e){var n,s;const r=this.channels.findIndex(o=>o.cid===e.channel.cid);if(-1!==r&&(this.channels[r].state.messages=[],this.channelsSubject.next([...this.channels]),(null===(n=e.channel)||void 0===n?void 0:n.cid)===(null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.cid))){const o=this.activeChannelSubject.getValue();o.state.messages=[],this.activeChannelSubject.next(o),this.activeChannelMessagesSubject.next([]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([])}}get channels(){return this.channelsSubject.getValue()||[]}get canSendReadEvents(){var e;const n=this.activeChannelSubject.getValue();return!!n&&-1!==(null===(e=n.data)||void 0===e?void 0:e.own_capabilities).indexOf("read-events")}transformToStreamMessage(e,n){const s=!!e.parent_id;if(this.isStreamMessage(e)&&this.isFormatMessageResponse(e))return e.quoted_message&&(e.quoted_message.translation=ct(e.quoted_message,n,this.chatClientService.chatClient.user)),e.translation=ct(e,n,this.chatClientService.chatClient.user),e;if(e.quoted_message&&(e.quoted_message=Object.assign(Object.assign({},e.quoted_message),{translation:ct(e.quoted_message,n,this.chatClientService.chatClient.user)})),this.isFormatMessageResponse(e))return Object.assign(Object.assign({},e),{readBy:s?[]:pn(e,n),translation:ct(e,n,this.chatClientService.chatClient.user)});{const r=this.formatMessage(e);return Object.assign(Object.assign({},r),{readBy:s?[]:pn(r,n),translation:ct(e,n,this.chatClientService.chatClient.user)})}}handleTypingStartEvent(e){var n,s;if((null===(n=e.user)||void 0===n?void 0:n.id)===(null===(s=this.chatClientService.chatClient.user)||void 0===s?void 0:s.id))return;const r=!!e.parent_id;if(r&&e.parent_id!==this.activeParentMessageIdSubject.getValue())return;const o=r?this.usersTypingInThreadSubject:this.usersTypingInChannelSubject,l=o.getValue(),c=e.user;c&&!l.find(u=>u.id===c.id)&&(l.push(c),o.next([...l]))}handleTypingStopEvent(e){const n=this.usersTypingInChannelSubject.getValue(),s=this.usersTypingInThreadSubject.getValue(),r=e.user;return r&&n.find(o=>o.id===r.id)?(n.splice(n.findIndex(o=>o.id===r.id),1),void this.usersTypingInChannelSubject.next([...n])):r&&s.find(o=>o.id===r.id)?(s.splice(s.findIndex(o=>o.id===r.id),1),void this.usersTypingInThreadSubject.next([...s])):void 0}updateLatestMessages(e){var n,s,r,o,l,c,u;if((null===(s=null===(n=e.message)||void 0===n?void 0:n.user)||void 0===s?void 0:s.id)!==(null===(o=null===(r=this.chatClientService)||void 0===r?void 0:r.chatClient.user)||void 0===o?void 0:o.id))return;const d=this.latestMessageDateByUserByChannelsSubject.getValue();if(null===(l=e.message)||void 0===l||!l.created_at)return;const g=null===(c=e?.message)||void 0===c?void 0:c.cid;if(!g)return;const m=new Date(e.message.created_at);(!d[g]||(null===(u=d[g])||void 0===u?void 0:u.getTime())<m.getTime())&&(d[g]=m,this.latestMessageDateByUserByChannelsSubject.next(Object.assign({},d)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(et),t.LFG(t.R0b),t.LFG(Lt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ut=(()=>{class i{constructor(){this.theme$=new ae.X("light"),this.defaultDarkModeVariables={"--bg-gradient-end":"#101214","--bg-gradient-start":"#070a0d","--black":"#ffffff","--blue-alice":"#00193d","--border":"#141924","--button-background":"#ffffff","--button-text":"#005fff","--grey":"#7a7a7a","--grey-gainsboro":"#2d2f2f","--grey-whisper":"#1c1e22","--modal-shadow":"#000000","--overlay":"#00000066","--overlay-dark":"#ffffffcc","--shadow-icon":"#00000080","--targetedMessageBackground":"#302d22","--transparent":"transparent","--white":"#101418","--white-smoke":"#13151b","--white-snow":"#070a0d"},this.variablesToDelete=[],this.theme$.subscribe(e=>{const n=this.customDarkThemeVariables?Object.assign(Object.assign({},this.defaultDarkModeVariables),this.customDarkThemeVariables):this.defaultDarkModeVariables,s=this.customLightThemeVariables?this.customLightThemeVariables:{};this.variablesToDelete.forEach(r=>this.deleteVariables(r)),"dark"===e?(this.deleteVariables(s),this.setVariables(n)):(this.deleteVariables(n),this.setVariables(s))}),this.themeVersion=getComputedStyle(document.documentElement).getPropertyValue("--str-chat__theme-version").replace(" ","")||"1"}get customLightThemeVariables(){return this._customLightThemeVariables}set customLightThemeVariables(e){const n=this.customLightThemeVariables;n&&this.variablesToDelete.push(n),this._customLightThemeVariables=e,"light"===this.theme$.getValue()&&this.theme$.next("light")}get customDarkThemeVariables(){return this._customDarkThemeVariables}set customDarkThemeVariables(e){const n=this.customDarkThemeVariables;n&&this.variablesToDelete.push(n),this._customDarkThemeVariables=e,"dark"===this.theme$.getValue()&&this.theme$.next("dark")}deleteVariables(e){e&&Object.keys(e).forEach(n=>document.documentElement.style.setProperty(n,null))}setVariables(e){e&&Object.keys(e).forEach(n=>document.documentElement.style.setProperty(n,e[n]))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const gs=i=>i.type.startsWith("image/")&&!i.type.endsWith(".photoshop"),ms=i=>"image"===i.type&&!i.title_link&&!i.og_scrape_url;let fs=(()=>{class i{constructor(e,n){this.channelService=e,this.notificationService=n,this.attachmentUploadInProgressCounterSubject=new ae.X(0),this.attachmentUploadsSubject=new ae.X([]),this.attachmentUploadInProgressCounter$=this.attachmentUploadInProgressCounterSubject.asObservable(),this.attachmentUploads$=this.attachmentUploadsSubject.asObservable()}resetAttachmentUploads(){this.attachmentUploadsSubject.next([])}filesSelected(e){return(0,re.mG)(this,void 0,void 0,function*(){if(!e)return;const n=[],s=[],r=[];Array.from(e).forEach(l=>{gs(l)?n.push(l):l.type.startsWith("video/")?r.push(l):s.push(l)}),n.forEach(l=>this.createPreview(l));const o=[...n.map(l=>({file:l,state:"uploading",type:"image"})),...r.map(l=>({file:l,state:"uploading",type:"video"})),...s.map(l=>({file:l,state:"uploading",type:"file"}))];this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...o]),yield this.uploadAttachments(o)})}retryAttachmentUpload(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=this.attachmentUploadsSubject.getValue(),s=n.find(r=>r.file===e);s&&(s.state="uploading",this.attachmentUploadsSubject.next([...n]),yield this.uploadAttachments([s]))})}deleteAttachment(e){return(0,re.mG)(this,void 0,void 0,function*(){const n=this.attachmentUploadsSubject.getValue();let s;if("success"===e.state)try{yield this.channelService.deleteAttachment(e),s=[...n];const r=n.indexOf(e);s.splice(r,1)}catch{s=n,this.notificationService.addTemporaryNotification("streamChat.Error deleting attachment")}else{s=[...n];const r=n.indexOf(e);s.splice(r,1)}this.attachmentUploadsSubject.next([...s])})}mapToAttachments(){return this.attachmentUploadsSubject.getValue().filter(n=>"success"===n.state).map(n=>{var s,r,o;const l={type:n.type};return"image"===n.type?(l.fallback=null===(s=n.file)||void 0===s?void 0:s.name,l.image_url=n.url):(l.asset_url=n.url,l.title=null===(r=n.file)||void 0===r?void 0:r.name,l.file_size=null===(o=n.file)||void 0===o?void 0:o.size,l.thumb_url=n.thumb_url),l})}createFromAttachments(e){const n=[];e.forEach(s=>{ms(s)?n.push({url:s.img_url||s.thumb_url||s.image_url,state:"success",type:"image",file:{name:s.fallback}}):("file"===s.type||"video"===s.type)&&n.push({url:s.asset_url,state:"success",file:{name:s.title,size:s.file_size},type:s.type,thumb_url:s.thumb_url})}),n.length>0&&this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...n])}createPreview(e){const n=new FileReader;n.onload=s=>{var r;const o=this.attachmentUploadsSubject.getValue(),l=o.find(c=>c.file===e);l&&(l.previewUri=(null===(r=s.target)||void 0===r?void 0:r.result)||void 0,this.attachmentUploadsSubject.next([...o]))},n.readAsDataURL(e)}uploadAttachments(e){return(0,re.mG)(this,void 0,void 0,function*(){this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()+1);const n=yield this.channelService.uploadAttachments(e),s=this.attachmentUploadsSubject.getValue();n.forEach(r=>{const o=s.find(l=>l.file===r.file);o?(o.state=r.state,o.url=r.url,o.thumb_url=r.thumb_url,"error"===o.state&&this.notificationService.addTemporaryNotification("image"===o.type?"streamChat.Error uploading image":"streamChat.Error uploading file")):r.url&&this.channelService.deleteAttachment(r)}),this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()-1),this.attachmentUploadsSubject.next([...s])})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Ne),t.LFG(Lt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Sp=(()=>{class i{constructor(){this.shouldGenerateVideoThumbnail=!0}getImageAttachmentConfiguration(e,n,s){if(this.customImageAttachmentConfigurationHandler)return this.customImageAttachmentConfigurationHandler(e,n,s);const r=new URL(e.img_url||e.thumb_url||e.image_url||""),o=Number(r.searchParams.get("oh"))>1?Number(r.searchParams.get("oh")):1e6,l=Number(r.searchParams.get("ow"))>1?Number(r.searchParams.get("ow")):1e6,u=this.getSizingRestrictions(r,s,"gallery"===n||"single"===n);return u&&(u.height*=2,u.width*=2,this.addResizingParamsToUrl(u,r)),{url:r.href,width:"",height:"",originalHeight:o,originalWidth:l}}getVideoAttachmentConfiguration(e,n){if(this.customVideoAttachmentConfigurationHandler)return this.customVideoAttachmentConfigurationHandler(e,n);let s,r=1e6,o=1e6;if(e.thumb_url&&this.shouldGenerateVideoThumbnail){const l=new URL(e.thumb_url);r=Number(l.searchParams.get("oh"))>1?Number(l.searchParams.get("oh")):r,o=Number(l.searchParams.get("ow"))>1?Number(l.searchParams.get("ow")):o;const u=this.getSizingRestrictions(l,n,!0);u&&(u.height*=2,u.width*=2,this.addResizingParamsToUrl(u,l)),s=l.href}return{url:e.asset_url||"",width:"",height:"",thumbUrl:s,originalHeight:r,originalWidth:o}}getGiphyAttachmentConfiguration(e){var n;if(this.customGiphyAttachmentConfigurationHandler)return this.customGiphyAttachmentConfigurationHandler(e);const s=null===(n=e.giphy)||void 0===n?void 0:n.fixed_height_downsampled;return{url:s?.url||e.image_url||e.thumb_url||"",height:s?.height?`${s?.height}px`:"300px",width:s?.width?`${s?.width}px`:""}}getScrapedImageAttachmentConfiguration(e){return this.customScrapedImageAttachmentConfigurationHandler?this.customScrapedImageAttachmentConfigurationHandler(e):{url:e.image_url||e.thumb_url||"",width:"",height:""}}addResizingParamsToUrl(e,n){n.searchParams.set("h",e.height.toString()),n.searchParams.set("w",e.width.toString())}getSizingRestrictions(e,n,s=!1){const r=e.searchParams,o=Number(r.get("oh"))||1,l=Number(r.get("ow"))||1,c=this.getCSSSizeRestriction(n);let u;return(c.maxHeight||c.height)&&c.maxWidth?u=this.getSizeRestrictions(o,l,c.maxHeight||c.height,c.maxWidth):(u=void 0,s&&console.warn("Invalid value set for height/max-height and/or max-width for HTML element, this can cause scrolling issues inside the message list, more info https://getstream.io/chat/docs/sdk/angular/components/AttachmentListComponent/#image-and-video-sizing")),u}getSizeRestrictions(e,n,s,r){return{height:Math.round(Math.max(s,r/n*e)),width:Math.round(Math.max(s,r/e*n))}}getCSSSizeRestriction(e){const n=getComputedStyle(e);return{height:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("height")),maxHeight:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("max-height")),maxWidth:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("max-width"))}}getValueRepresentationOfCSSProperty(e){return Number(e.replace("px",""))||void 0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ap_streamChat={"1 reply":"1 reply","Attach files":"Attach files",Cancel:"Cancel","Channel Missing":"Channel Missing",Close:"Close","Close emoji picker":"Close emoji picker","Commands matching":"Commands matching","Connection failure, reconnecting now...":"Connection failure, reconnecting now...",Delete:"Delete",Delivered:"Delivered","Edit Message":"Edit Message","Edit message request failed":"Edit message request failed","Emoji matching":"Emoji matching","Empty message...":"Empty message...","Error adding flag":"Error adding flag","Error connecting to chat, refresh the page to try again.":"Error connecting to chat, refresh the page to try again","Error deleting message":"Error deleting message","Error muting a user ...":"Error muting a user ...","Error pinning message":"Error pinning message","Error removing message pin":"Error removing message pin","Error unmuting a user ...":"Error unmuting a user ...","Error uploading file":"Error uploading file","Error uploading image":"Error uploading image","Error deleting attachment":"Error deleting attachment","Error \xb7 Unsent":"Message couldn't be sent","Error: {{ errorMessage }}":"Error: {{ errorMessage }}",Flag:"Flag","Message Failed":"Message Failed","Message Failed \xb7 Unauthorized":"Unauthorized to send message","Message Failed \xb7 Click to try again":"Message couldn't be sent, click to try again","Message deleted":"Message deleted","Message has been successfully flagged":"Message has been successfully flagged","Message pinned":"Message pinned","Message unpinned":"Message unpinned",Mute:"Mute",New:"New","New Messages!":"New Messages!","No results found":"No results found","Nothing yet...":"Nothing yet...","Only visible to you":"Only visible to you","Open emoji picker":"Open emoji picker","People matching":"People matching","Pick your emoji":"Pick your emoji",Pin:"Pin","Pinned by":"Pinned by",Reply:"Reply","Reply to Message":"Reply to Message",Search:"Search","Searching...":"Searching...",Send:"Send","Send message request failed":"Send message request failed","Sending...":"Sending...","Slow Mode ON":"Slow Mode ON","Start of a new thread":"Start of a new thread","This message was deleted...":"This message was deleted...",Thread:"Thread reply","Type your message":"Type your message",Unmute:"Unmute",Unpin:"Unpin","Wait until all attachments have uploaded":"Wait until all attachments have uploaded","You have no channels currently":"You have no channels currently","You've reached the maximum number of files":"You've reached the maximum number of files",live:"live","this content could not be displayed":"this content could not be displayed","{{ commaSeparatedUsers }} and {{ moreCount }} more":"{{ commaSeparatedUsers }} and {{ moreCount }} more","{{ commaSeparatedUsers }}, and {{ lastUser }}":"{{ commaSeparatedUsers }}, and {{ lastUser }}","{{ firstUser }} and {{ secondUser }}":"{{ firstUser }} and {{ secondUser }}","{{ imageCount }} more":"{{ imageCount }} more","{{ memberCount }} members":"{{ memberCount }} members","{{ replyCount }} replies":"{{ replyCount }} replies","{{ user }} has been muted":"{{ user }} has been muted","{{ user }} has been unmuted":"{{ user }} has been unmuted","{{ watcherCount }} online":"{{ watcherCount }} online","\u{1f3d9} Attachment...":"\u{1f3d9} Attachment...","Connection error":"Connection error","Load more":"Load more",failed:"failed",retry:"retry",test:"success","Sending links is not allowed in this conversation":"Sending links is not allowed in this conversation","You can't send messages in this channel":"You can't send messages in this channel","You can't send thread replies in this channel":"You can't send thread replies in this channel","Unsupported file type: {{type}}":"Unsupported file type: {{type}}","Message not found":"Message not found","No chats here yet\u2026":"No chats here yet\u2026","user is typing":"{{ user }} is typing","users are typing":"{{ users }} are typing","Error loading channels":"Error loading channels","See original (automatically translated)":"See original (automatically translated)","See translation":"See translation"};let Fp=(()=>{class i{constructor(e){this.translteService=e}setTranslation(e="en",n){this.translteService.defaultLang||(this.translteService.defaultLang=e),this.translteService.setTranslation(e,{streamChat:Object.assign(Object.assign({},Ap_streamChat),n)},!0)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Me.sK))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),kp=(()=>{class i{constructor(e,n){this.chatClientService=e,this.ngZone=n,this.size=32,this.showOnlineIndicator=!0,this.isLoaded=!1,this.isError=!1,this.isOnline=!1}ngOnChanges(e){var n,s,r;return(0,re.mG)(this,void 0,void 0,function*(){if(e.channel)if(this.channel){const o=this.getOtherMemberIfOneToOneChannel();if(o){this.isOnlineSubscription=this.chatClientService.events$.pipe((0,tn.h)(l=>"user.presence.changed"===l.eventType)).subscribe(l=>{var c;(null===(c=l.event.user)||void 0===c?void 0:c.id)===o.id&&this.ngZone.run(()=>{var u;this.isOnline=(null===(u=l.event.user)||void 0===u?void 0:u.online)||!1})});try{const l=yield this.chatClientService.chatClient.queryUsers({id:{$eq:o.id}});this.isOnline=(null===(n=l.users[0])||void 0===n?void 0:n.online)||!1}catch{this.isOnline=o.online||!1}}else null===(s=this.isOnlineSubscription)||void 0===s||s.unsubscribe()}else this.isOnline=!1,null===(r=this.isOnlineSubscription)||void 0===r||r.unsubscribe()})}get initials(){var e,n,s,r,o;let l="";if("user"===this.type)l=(null===(e=this.name)||void 0===e?void 0:e.toString())||"";else if("channel"===this.type)if(null!==(s=null===(n=this.channel)||void 0===n?void 0:n.data)&&void 0!==s&&s.name)l=null===(o=null===(r=this.channel)||void 0===r?void 0:r.data)||void 0===o?void 0:o.name;else{const c=this.getOtherMemberIfOneToOneChannel();l=c?c.name||c.id||"":"#"}return l.charAt(0)||""}get fallbackChannelImage(){if("channel"===this.type){const e=this.getOtherMemberIfOneToOneChannel();return e?e.image:void 0}}getOtherMemberIfOneToOneChannel(){var e,n;const s=Object.values((null===(n=null===(e=this.channel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.members)||{}).filter(r=>{var o;return r.user_id!==(null===(o=this.chatClientService.chatClient.user)||void 0===o?void 0:o.id)});if(1===s.length)return s[0].user}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(et),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-avatar"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type",showOnlineIndicator:"showOnlineIndicator"},features:[t.TTD],decls:5,vars:15,consts:[[3,"title"],["data-testid","avatar-img",3,"class","src","alt","style","load","error",4,"ngIf","ngIfElse"],["fallback",""],["data-testid","online-indicator","class","str-chat__avatar--online-indicator",4,"ngIf"],["data-testid","avatar-img",3,"src","alt","load","error"],["data-testid","fallback-img",1,"str-chat__avatar-fallback"],["data-testid","online-indicator",1,"str-chat__avatar--online-indicator"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,fl,1,11,"img",1),t.YNc(2,_l,2,1,"ng-template",null,2,t.W1O),t.YNc(4,vl,1,0,"div",3),t.qZA()),2&e){const s=t.MAs(3);t.Akn(t.qbA(9,Cl,"calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size/2+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")")),t.Gre("str-chat__avatar str-chat__avatar--circle stream-chat__avatar--",n.location,""),t.s9C("title",n.name),t.xp6(1),t.Q6J("ngIf",(n.imageUrl||n.fallbackChannelImage)&&!n.isError)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",n.isOnline)}},dependencies:[f.O5]}),i})(),Je=(()=>{class i{constructor(){this.mentionAutocompleteItemTemplate$=new ae.X(void 0),this.commandAutocompleteItemTemplate$=new ae.X(void 0),this.channelPreviewTemplate$=new ae.X(void 0),this.messageInputTemplate$=new ae.X(void 0),this.mentionTemplate$=new ae.X(void 0),this.emojiPickerTemplate$=new ae.X(void 0),this.typingIndicatorTemplate$=new ae.X(void 0),this.messageTemplate$=new ae.X(void 0),this.channelActionsTemplate$=new ae.X(void 0),this.attachmentListTemplate$=new ae.X(void 0),this.attachmentPreviewListTemplate$=new ae.X(void 0),this.avatarTemplate$=new ae.X(void 0),this.iconTemplate$=new ae.X(void 0),this.loadingIndicatorTemplate$=new ae.X(void 0),this.messageActionsBoxTemplate$=new ae.X(void 0),this.messageActionsBoxItemTemplate$=new ae.X(void 0),this.messageReactionsTemplate$=new ae.X(void 0),this.modalTemplate$=new ae.X(void 0),this.notificationTemplate$=new ae.X(void 0),this.threadHeaderTemplate$=new ae.X(void 0),this.deliveredStatusTemplate$=new ae.X(void 0),this.sendingStatusTemplate$=new ae.X(void 0),this.readStatusTemplate$=new ae.X(void 0),this.channelHeaderInfoTemplate$=new ae.X(void 0)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ut=(()=>{class i{constructor(e){this.customTemplatesService=e,this.size=32}getAvatarContext(){return{name:this.name,imageUrl:this.imageUrl,size:this.size,location:this.location,type:this.type,user:this.user,channel:this.channel}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-avatar-placeholder"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type"},decls:4,vars:4,consts:[["defaultAvatar",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"name","imageUrl","size","type","channel","user","location"]],template:function(e,n){if(1&e&&(t.YNc(0,yl,1,7,"ng-template",null,0,t.W1O),t.YNc(2,wl,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.avatarTemplate$)||s)("ngTemplateOutletContext",n.getAvatarContext())}},dependencies:[kp,f.tP,f.Ov],encapsulation:2}),i})(),gn=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-icon"]],inputs:{icon:"icon",size:"size"},decls:22,vars:22,consts:[["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon",4,"ngIf"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",4,"ngIf"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread",4,"ngIf"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","error","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg"],["d","M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z","fillRule","nonzero"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M8.9999 16.2L4.7999 12L3.3999 13.4L8.9999 19L20.9999 6.99998L19.5999 5.59998L8.9999 16.2Z","fill","black"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon"],["clipRule","evenodd","fillRule","evenodd"],["d","M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z"],["d","M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Interactions","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","Connection-Error-_-Connectivity","transform","translate(-270.000000, -30.000000)","fill","#CF1F25"],["id","109-network-connection","transform","translate(270.000000, 30.000000)"],["d","M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z","id","Combined-Shape"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["translate",""],["d","M4.00952 22L24 12L4.00952 2L4 9.77778L18.2857 12L4 14.2222L4.00952 22Z","fill","black"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg"],["d","M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z","fillRule","nonzero"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M17.6449 6.35C16.1949 4.9 14.2049 4 11.9949 4C7.57488 4 4.00488 7.58 4.00488 12C4.00488 16.42 7.57488 20 11.9949 20C15.7249 20 18.8349 17.45 19.7249 14H17.6449C16.8249 16.33 14.6049 18 11.9949 18C8.68488 18 5.99488 15.31 5.99488 12C5.99488 8.69 8.68488 6 11.9949 6C13.6549 6 15.1349 6.69 16.2149 7.78L12.9949 11H19.9949V4L17.6449 6.35Z","fill","black"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","28","height","28","rx","14","fill","#72767E"],["cx","14","cy","14","r","12","fill","#72767E"],["fill-rule","evenodd","clip-rule","evenodd","d","M28 14C28 21.732 21.732 28 14 28C6.26801 28 0 21.732 0 14C0 6.26801 6.26801 0 14 0C21.732 0 28 6.26801 28 14ZM26 14C26 20.6274 20.6274 26 14 26C7.37258 26 2 20.6274 2 14C2 7.37258 7.37258 2 14 2C20.6274 2 26 7.37258 26 14ZM19.59 7L21 8.41L15.41 14L21 19.59L19.59 21L14 15.41L8.41 21L7 19.59L12.59 14L7 8.41L8.41 7L14 12.59L19.59 7Z","fill","white"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512"],["d","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z","fill","#414D54"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 3C0 1.34315 1.34315 0 3 0H23L34 11V37C34 38.6569 32.6569 40 31 40H3C1.34315 40 0 38.6569 0 37V3Z","fill","url(#paint0_linear)"],["d","M34 11L26 11C24.3431 11 23 9.65685 23 8V0L34 11Z","fill","#DBDBDB"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 13H23V15H8V13Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 17H18V19H8V17Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 21H23V23H8V21Z","fill","#CFCFCF"],["id","paint0_linear","x1","0","y1","0","x2","0","y2","40","gradientUnits","userSpaceOnUse"],["stop-color","white"],["offset","1","stop-color","#DBDBDB"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg"],["d","M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z","fillRule","nonzero"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z","fill","black"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread"],["d","M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z","fillRule","evenodd"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.7049 7.41L14.2949 6L8.29492 12L14.2949 18L15.7049 16.59L11.1249 12L15.7049 7.41Z","fill","var(--black)"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z","fill","var(--black)"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3 8V6H21V8H3ZM3 13H21V11H3V13ZM3 18H21V16H3V18Z","fill","black"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M16.59 15.7051L12 11.1251L7.41 15.7051L6 14.2951L12 8.29508L18 14.2951L16.59 15.7051Z","fill","var(--primary-color)"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.41 8.29504L12 12.875L16.59 8.29504L18 9.70504L12 15.705L6 9.70504L7.41 8.29504Z","fill","var(--primary-color)"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M106 24.5H30C24.775 24.5 20.5 28.775 20.5 34V119.5L39.5 100.5H106C111.225 100.5 115.5 96.225 115.5 91V34C115.5 28.775 111.225 24.5 106 24.5ZM106 91H39.5L30 100.5V34H106V91Z","fill","#B4B7BB"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_10878_5)"],["d","M12.9997 6.99993L10.9997 6.99993L10.9997 10.9999L6.99972 10.9999L6.99972 12.9999L10.9997 12.9999L10.9997 16.9999L12.9997 16.9999L12.9997 12.9999L16.9997 12.9999L16.9997 10.9999L12.9997 10.9999L12.9997 6.99993ZM11.9997 1.99992C6.47972 1.99992 1.99972 6.47993 1.99972 11.9999C1.99972 17.5199 6.47972 21.9999 11.9997 21.9999C17.5197 21.9999 21.9997 17.5199 21.9997 11.9999C21.9997 6.47993 17.5197 1.99992 11.9997 1.99992ZM11.9997 19.9999C7.58972 19.9999 3.99972 16.4099 3.99972 11.9999C3.99972 7.58993 7.58972 3.99993 11.9997 3.99993C16.4097 3.99993 19.9997 7.58993 19.9997 11.9999C19.9997 16.4099 16.4097 19.9999 11.9997 19.9999Z","fill","black"],["id","clip0_10878_5"],["width","24","height","24","fill","white"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM19 18H6C3.79 18 2 16.21 2 14C2 11.95 3.53 10.24 5.56 10.03L6.63 9.92L7.13 8.97C8.08 7.14 9.94 6 12 6C14.62 6 16.88 7.86 17.39 10.43L17.69 11.93L19.22 12.04C20.78 12.14 22 13.45 22 15C22 16.65 20.65 18 19 18ZM13.45 10H10.55V13H8L12 17L16 13H13.45V10Z","fill","black"],["data-testid","error","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","background","d","M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z","fill","black"],["d","M13 17H11V15H13V17ZM13 13H11V7H13V13Z","fill","white"]],template:function(e,n){1&e&&(t.YNc(0,Dl,2,0,"svg",0),t.YNc(1,bl,2,0,"svg",1),t.YNc(2,Tl,4,0,"svg",2),t.YNc(3,Ml,9,0,"svg",3),t.YNc(4,xl,4,0,"svg",4),t.YNc(5,Sl,4,0,"svg",5),t.YNc(6,Al,2,0,"svg",6),t.YNc(7,Fl,4,0,"svg",7),t.YNc(8,kl,2,2,"svg",8),t.YNc(9,El,10,0,"svg",9),t.YNc(10,Il,2,0,"svg",10),t.YNc(11,Ol,2,0,"svg",11),t.YNc(12,Ll,2,0,"svg",12),t.YNc(13,Ul,2,0,"svg",13),t.YNc(14,Zl,2,0,"svg",14),t.YNc(15,Rl,2,0,"svg",15),t.YNc(16,Pl,2,0,"svg",16),t.YNc(17,Bl,2,0,"svg",17),t.YNc(18,Nl,2,0,"svg",18),t.YNc(19,jl,6,0,"svg",19),t.YNc(20,$l,2,0,"svg",20),t.YNc(21,Hl,3,0,"svg",21)),2&e&&(t.Q6J("ngIf","action-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","delivered-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","reaction-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","connection-error"===n.icon),t.xp6(1),t.Q6J("ngIf","send"===n.icon),t.xp6(1),t.Q6J("ngIf","file-upload"===n.icon),t.xp6(1),t.Q6J("ngIf","retry"===n.icon),t.xp6(1),t.Q6J("ngIf","close"===n.icon),t.xp6(1),t.Q6J("ngIf","file"===n.icon),t.xp6(1),t.Q6J("ngIf","unspecified-filetype"===n.icon),t.xp6(1),t.Q6J("ngIf","reply"===n.icon),t.xp6(1),t.Q6J("ngIf","close-no-outline"===n.icon),t.xp6(1),t.Q6J("ngIf","reply-in-thread"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-left"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-right"===n.icon),t.xp6(1),t.Q6J("ngIf","menu"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-up"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-down"===n.icon),t.xp6(1),t.Q6J("ngIf","chat-bubble"===n.icon),t.xp6(1),t.Q6J("ngIf","attach"===n.icon),t.xp6(1),t.Q6J("ngIf","download"===n.icon),t.xp6(1),t.Q6J("ngIf","error"===n.icon))},dependencies:[f.O5,Me.Pi],encapsulation:2}),i})(),wt=(()=>{class i{constructor(e){this.customTemplatesService=e}getIconContext(){return{icon:this.icon,size:this.size}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-icon-placeholder"]],inputs:{icon:"icon",size:"size"},decls:4,vars:4,consts:[["defaultIcon",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"icon","size"]],template:function(e,n){if(1&e&&(t.YNc(0,ql,1,2,"ng-template",null,0,t.W1O),t.YNc(2,Yl,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.iconTemplate$)||s)("ngTemplateOutletContext",n.getIconContext())}},dependencies:[gn,f.tP,f.Ov],encapsulation:2}),i})(),_s=(()=>{class i{constructor(){this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))",this.linearGradientId=An()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-loading-indicator"]],inputs:{size:"size",color:"color"},decls:7,vars:8,consts:[[1,"str-chat__loading-indicator"],["viewBox","0 0 30 30","data-testid","loading-indicator","xmlns","http://www.w3.org/2000/svg"],["x1","50%","x2","50%","y1","0%","y2","100%",3,"id"],["offset","0%","stop-color","#FFF","stop-opacity","0"],["data-testid","stop-color","offset","100%","stop-opacity","1",3,"ngStyle"],["d","M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z","fillRule","evenodd"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1)(2,"defs")(3,"linearGradient",2),t._UZ(4,"stop",3)(5,"stop",4),t.qZA()(),t._UZ(6,"path",5),t.qZA()()),2&e&&(t.xp6(1),t.uIk("height",n.size)("width",n.size),t.xp6(2),t.s9C("id",n.linearGradientId),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,Jl,n.color)),t.uIk("stop-color",n.color),t.xp6(1),t.uIk("fill","url(#"+n.linearGradientId+")"))},dependencies:[f.PC],encapsulation:2}),i})(),qn=(()=>{class i{constructor(e){this.customTemplatesService=e,this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))"}getLoadingIndicatorContext(){return{size:this.size,color:this.color}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-loading-indicator-placeholder"]],inputs:{size:"size",color:"color"},decls:4,vars:4,consts:[["defaultLoadingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"size","color"]],template:function(e,n){if(1&e&&(t.YNc(0,Vl,1,2,"ng-template",null,0,t.W1O),t.YNc(2,Ql,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.loadingIndicatorTemplate$)||s)("ngTemplateOutletContext",n.getLoadingIndicatorContext())}},dependencies:[_s,f.tP,f.Ov],encapsulation:2}),i})(),vs=(()=>{class i{constructor(){this.isOpen=!1,this.isOpenChange=new t.vpe,this.watchForEscPress=e=>{"Escape"===e.key&&this.close()},this.stopWatchForEscPress=()=>{window.removeEventListener("keyup",this.watchForEscPress)},this.watchForOutsideClicks=e=>{var n;null!==(n=this.innerContainer)&&void 0!==n&&n.nativeElement.contains(e.target)||this.close()}}ngOnChanges(e){e.isOpen&&(this.isOpen?(window.addEventListener("keyup",this.watchForEscPress),setTimeout(()=>window.addEventListener("click",this.watchForOutsideClicks),0)):(this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()))}close(){this.isOpen=!1,this.isOpenChange.emit(!1),this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()}stopWatchForOutsideClicks(){window.removeEventListener("click",this.watchForOutsideClicks)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-modal"]],viewQuery:function(e,n){if(1&e&&t.Gf(Gl,5),2&e){let s;t.iGM(s=t.CRH())&&(n.innerContainer=s.first)}},inputs:{isOpen:"isOpen",content:"content"},outputs:{isOpenChange:"isOpenChange"},features:[t.TTD],ngContentSelectors:Hn,decls:8,vars:5,consts:[["data-testid","modal"],["data-testid","close",1,"str-chat__modal__close-button",3,"click","keyup.enter"],["icon","close"],[1,"str-chat__modal__inner"],["modalInner",""],[4,"ngIf","ngIfElse"],["elseContent",""],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.close()})("keyup.enter",function(){return n.close()}),t._UZ(2,"stream-icon-placeholder",2),t.qZA(),t.TgZ(3,"div",3,4),t.YNc(5,Wl,2,1,"ng-container",5),t.YNc(6,Kl,1,0,"ng-template",null,6,t.W1O),t.qZA()()),2&e){const s=t.MAs(7);t.Gre("str-chat__modal str-chat__modal--",n.isOpen?"open":"close",""),t.xp6(5),t.Q6J("ngIf",n.content)("ngIfElse",s)}},dependencies:[wt,f.O5,f.tP],encapsulation:2}),i})();const Cs=new t.OlP("textareaInjectionToken");let ys=(()=>{class i{constructor(e){this.viewContainerRef=e,this.value="",this.valueChange=new t.vpe,this.send=new t.vpe,this.userMentions=new t.vpe,this.subscriptions=[],this.unpropagatedChanges=[]}ngOnChanges(e){if(this.unpropagatedChanges.push(e),!this.componentRef)return;e.componentRef&&(this.subscriptions.forEach(s=>s.unsubscribe()),this.componentRef&&(this.subscriptions.push(this.componentRef.instance.valueChange.subscribe(s=>this.valueChange.next(s))),this.subscriptions.push(this.componentRef.instance.send.subscribe(s=>this.send.next(s))),this.componentRef.instance.userMentions&&this.subscriptions.push(this.componentRef.instance.userMentions.subscribe(s=>this.userMentions.next(s))),this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled,this.componentRef.instance.mentionScope=this.mentionScope,this.componentRef.instance.value=this.value,this.componentRef.instance.placeholder=this.placeholder,this.componentRef.instance.inputMode=this.inputMode)),e.areMentionsEnabled&&(this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled),e.mentionScope&&(this.componentRef.instance.mentionScope=this.mentionScope),e.value&&(this.componentRef.instance.value=this.value),e.placeholder&&(this.componentRef.instance.placeholder=this.placeholder),e.inputMode&&(this.componentRef.instance.inputMode=this.inputMode);let n={};this.unpropagatedChanges.forEach(s=>n=Object.assign(Object.assign({},n),s)),this.componentRef.instance.ngOnChanges(n),this.unpropagatedChanges=[]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","streamTextarea",""]],inputs:{componentRef:"componentRef",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",inputMode:"inputMode",value:"value",placeholder:"placeholder"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[t.TTD]}),i})(),Yn=(()=>{class i{constructor(){this.emojiInput$=new nt.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ep=(()=>{class i{constructor(){this.isFileUploadEnabled=!0,this.areMentionsEnabled=!0,this.isMultipleFileUploadEnabled=!0,this.mentionScope="channel",this.inputMode="desktop"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ws=(()=>{class i{constructor(e,n,s,r){this.customTemplatesService=e,this.channelService=n,this.attachmentConfigurationService=s,this.attachments=[],this.imageModalStateChange=new t.vpe,this.class="str-chat__attachment-list-angular-host",this.orderedAttachments=[],this.imagesToView=[],this.imagesToViewCurrentIndex=0,this.attachmentConfigurations=new Map,this.themeVersion=r.themeVersion}ngOnChanges(e){if(e.attachments){const n=this.attachments.filter(this.isImage);this.orderedAttachments=[...n.length>=2?this.createGallery(n):n,...this.attachments.filter(r=>this.isVideo(r)),...this.attachments.filter(r=>this.isFile(r))],this.attachmentConfigurations=new Map,0===this.orderedAttachments.length&&this.orderedAttachments.push(...this.attachments.filter(r=>this.isCard(r)))}}trackByUrl(e,n){return n.image_url||n.img_url||n.asset_url||n.thumb_url}isImage(e){return ms(e)}isSvg(e){return!!(e.fallback||"").toLowerCase().endsWith(".svg")}isFile(e){return"file"===e.type}isGallery(e){return"gallery"===e.type}isVideo(e){return"video"===e.type&&e.asset_url&&!e.og_scrape_url}isCard(e){return!e.type||"image"===e.type&&!this.isImage(e)||"giphy"===e.type}hasFileSize(e){return e.file_size&&Number.isFinite(Number(e.file_size))}getFileSize(e){return Ar()(Number(e.file_size))}getModalContext(){return{isOpen:this.imagesToView&&this.imagesToView.length>0,isOpenChangeHandler:e=>e?null:this.closeImageModal(),content:this.modalContent}}trimUrl(e){if(null!=e){const[n]=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/");return n}return null}sendAction(e){this.channelService.sendAction(this.messageId,{[e.name]:e.value},this.parentMessageId)}trackByActionValue(e,n){return n.value}openImageModal(e,n=0){this.imageModalStateChange.next("opened"),this.imagesToView=e,this.imagesToViewCurrentIndex=n}stepImages(e){this.imagesToViewCurrentIndex+=1*e}trackByImageUrl(e,n){return n.image_url||n.img_url||n.thumb_url}getImageAttachmentConfiguration(e,n,s){const r=this.attachmentConfigurations.get(e);if(r)return r;const o=this.attachmentConfigurationService.getImageAttachmentConfiguration(e,n,s);return this.attachmentConfigurations.set(e,o),o}getCarouselImageAttachmentConfiguration(e,n){return this.attachmentConfigurationService.getImageAttachmentConfiguration(e,"carousel",n)}getVideoAttachmentConfiguration(e,n){const s=this.attachmentConfigurations.get(e);if(s)return s;const r=this.attachmentConfigurationService.getVideoAttachmentConfiguration(e,n);return this.attachmentConfigurations.set(e,r),r}getCardAttachmentConfiguration(e){const n=this.attachmentConfigurations.get(e);if(n)return n;if("giphy"===e.type)return this.attachmentConfigurationService.getGiphyAttachmentConfiguration(e);{const s=this.attachmentConfigurationService.getScrapedImageAttachmentConfiguration(e);return this.attachmentConfigurations.set(e,s),s}}get isImageModalPrevButtonVisible(){return 0!==this.imagesToViewCurrentIndex}get isImageModalNextButtonVisible(){return this.imagesToViewCurrentIndex!==this.imagesToView.length-1}createGallery(e){return[{type:"gallery",images:e}]}closeImageModal(){this.imageModalStateChange.next("closed"),this.imagesToView=[]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Je),t.Y36(Ne),t.Y36(Sp),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-attachment-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(ls,7),2&e){let s;t.iGM(s=t.CRH())&&(n.modalContent=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{messageId:"messageId",parentMessageId:"parentMessageId",attachments:"attachments"},outputs:{imageModalStateChange:"imageModalStateChange"},features:[t.TTD],decls:5,vars:1,consts:[["class","str-chat__attachment-list",4,"ngIf"],["defaultModal",""],["modalContent",""],[1,"str-chat__attachment-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["data-testclass","attachment-container"],["class","str-chat__message-attachment--img","data-testclass","image",3,"src","alt","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery","data-testid","image-gallery",3,"str-chat__gallery--square","str-chat__gallery-two-rows",4,"ngIf"],["class","str-chat__player-wrapper","data-testclass","video-attachment-parent",3,"--original-height","--original-width","ngStyle",4,"ngIf"],["class","\n          str-chat__message-attachment-file--item\n          str-chat-angular__message-attachment-file-single\n        ","style","cursor: pointer; text-decoration: none","data-testclass","file-link","target","_blank",3,"href",4,"ngIf"],[3,"class",4,"ngIf"],["class","str-chat__message-attachment-actions",4,"ngIf"],["data-testclass","image",1,"str-chat__message-attachment--img",3,"src","alt","ngStyle","click","keyup.enter"],["imgElement",""],["data-testid","image-gallery",1,"str-chat__gallery"],["class","str-chat__gallery-image","data-testclass","gallery-image",3,"str-chat__message-attachment--svg-image","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery-placeholder","data-testclass","gallery-image","data-testid","more-image-button",3,"str-chat__message-attachment--svg-image","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["data-testclass","gallery-image",1,"str-chat__gallery-image",3,"click","keyup.enter"],[3,"src","alt","ngStyle"],["data-testclass","gallery-image","data-testid","more-image-button",1,"str-chat__gallery-placeholder",3,"ngStyle","click","keyup.enter"],["element",""],[3,"innerHTML"],["data-testclass","video-attachment-parent",1,"str-chat__player-wrapper",3,"ngStyle"],["controls","","data-testclass","video-attachment",1,"str-chat__video-angular",3,"src","poster"],["videoElement",""],["data-testclass","file-link","target","_blank",1,"str-chat__message-attachment-file--item","str-chat-angular__message-attachment-file-single",2,"cursor","pointer","text-decoration","none",3,"href"],["icon","file",3,"size",4,"ngIf"],["icon","unspecified-filetype",3,"size",4,"ngIf"],[1,"str-chat__message-attachment-file--item-text"],[1,"str-chat__message-attachment-file--item-first-row"],["data-testclass","file-title",1,"str-chat__message-attachment-file--item-name"],["class","str-chat__message-attachment-file--item-size","data-testclass","size",4,"ngIf"],["icon","file",3,"size"],["icon","unspecified-filetype",3,"size"],["data-testclass","size",1,"str-chat__message-attachment-file--item-size"],["class","str-chat__message-attachment-card--header",4,"ngIf"],[1,"str-chat__message-attachment-card--content"],[1,"str-chat__message-attachment-card--flex"],["data-testclass","card-title","class","str-chat__message-attachment-card--title",4,"ngIf"],["class","str-chat__message-attachment-card--text","data-testclass","card-text",4,"ngIf"],["class","str-chat__message-attachment-card--url","data-testclass","url-link","noopener","","noreferrer","","target","_blank",3,"href",4,"ngIf"],[1,"str-chat__message-attachment-card--header"],["data-testclass","card-img",3,"alt","src","ngStyle"],["data-testclass","card-title",1,"str-chat__message-attachment-card--title"],["data-testclass","card-text",1,"str-chat__message-attachment-card--text"],["data-testclass","url-link","noopener","","noreferrer","","target","_blank",1,"str-chat__message-attachment-card--url",3,"href"],[1,"str-chat__message-attachment-actions"],[1,"str-chat__message-attachment-actions-form"],["data-testclass","attachment-action",3,"class","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testclass","attachment-action",3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"stream-chat-angular__image-modal-host",3,"isOpen","content","isOpenChange"],[1,"stream-chat-angular__image-modal","str-chat__image-carousel"],["data-testid","image-modal-prev","type","button",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper",3,"ngStyle","click","keyup.enter"],["icon","arrow-left"],["data-testid","modal-image",1,"stream-chat-angular__image-modal-image","str-chat__image-carousel-image",3,"src","alt","ngStyle"],["type","button","data-testid","image-modal-next",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper",3,"ngStyle","click","keyup.enter"],["icon","arrow-right"]],template:function(e,n){1&e&&(t.YNc(0,wc,3,3,"div",0),t.YNc(1,Dc,1,2,"ng-template",null,1,t.W1O),t.YNc(3,Tc,7,16,"ng-template",null,2,t.W1O)),2&e&&t.Q6J("ngIf",n.orderedAttachments.length>0)},dependencies:[wt,vs,f.O5,f.sg,f.PC,f.tP,Me.X$,f.Ov],encapsulation:2}),i})(),Ip=(()=>{class i{constructor(e){this.retryAttachmentUpload=new t.vpe,this.deleteAttachment=new t.vpe,this.themeVersion=e.themeVersion}attachmentUploadRetried(e){this.retryAttachmentUpload.emit(e)}attachmentDeleted(e){this.deleteAttachment.emit(e)}trackByFile(e,n){return n.file}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-attachment-preview-list"]],inputs:{attachmentUploads$:"attachmentUploads$"},outputs:{retryAttachmentUpload:"retryAttachmentUpload",deleteAttachment:"deleteAttachment"},decls:8,vars:6,consts:[["class","rfu-image-previewer",4,"ngIf"],["class","str-chat__attachment-preview-list",4,"ngIf"],["deleteButton",""],["retryButton",""],[1,"rfu-image-previewer"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","rfu-image-previewer__image","data-testclass","attachment-image-preview",3,"rfu-image-previewer__image--loaded",4,"ngIf"],["class","rfu-file-previewer","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"rfu-image-previewer__image"],["class","rfu-image-previewer__retry","data-testclass","upload-retry",3,"click","keyup.enter",4,"ngIf"],[1,"rfu-thumbnail__wrapper",2,"width","100","height","100"],[1,"rfu-thumbnail__overlay"],["data-testclass","file-delete","role","button",1,"rfu-icon-button",3,"click","keyup.enter"],["icon","close-no-outline"],["class","rfu-thumbnail__image","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)",4,"ngIf"],["data-testclass","upload-retry",1,"rfu-image-previewer__retry",3,"click","keyup.enter"],["icon","retry"],["data-testclass","attachment-image",1,"rfu-thumbnail__image",3,"src","alt"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)"],["data-testclass","attachment-file-preview",1,"rfu-file-previewer"],[1,"rfu-file-previewer__file"],["icon","file"],["data-testclass","file-download-link","download","",3,"href","click","keyup.enter"],[4,"ngIf"],["data-testclass","file-delete",1,"rfu-file-previewer__close-button",3,"click","keyup.enter"],["class","rfu-file-previewer__loading-indicator",4,"ngIf"],["data-testclass","upload-retry","translate","",1,"rfu-file-previewer__failed",3,"click","keyup.enter"],["translate","",1,"rfu-file-previewer__retry",3,"click","keyup.enter"],[1,"rfu-file-previewer__loading-indicator"],[1,"str-chat__attachment-preview-list"],[1,"str-chat__attachment-list-scroll-container"],["class","str-chat__attachment-preview-image","data-testclass","attachment-image-preview",4,"ngIf"],["class","str-chat__attachment-preview-file","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"str-chat__attachment-preview-image"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","str-chat__attachment-preview-image-loading",4,"ngIf"],["class","str-chat__attachment-preview-thumbnail","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],[1,"str-chat__attachment-preview-image-loading"],["data-testclass","loading-indicator",3,"size"],["data-testclass","attachment-image",1,"str-chat__attachment-preview-thumbnail",3,"src","alt"],["data-testclass","attachment-file-preview",1,"str-chat__attachment-preview-file"],["icon","unspecified-filetype"],[1,"str-chat__attachment-preview-file-end"],[1,"str-chat__attachment-preview-file-name"],["class","str-chat__attachment-preview-file-download","data-testclass","file-download-link","download","",3,"href","click","keyup.enter",4,"ngIf"],["data-testclass","loading-indicator",3,"size",4,"ngIf"],["data-testclass","file-download-link","download","",1,"str-chat__attachment-preview-file-download",3,"href","click","keyup.enter"],["icon","download"],["data-testclass","file-delete","role","button",1,"str-chat__attachment-preview-delete",3,"click","keyup.enter"],["data-testclass","upload-retry",3,"class","click","keyup.enter",4,"ngIf"],["data-testclass","upload-retry",3,"click","keyup.enter"]],template:function(e,n){if(1&e&&(t.YNc(0,Oc,3,4,"div",0),t.ALo(1,"async"),t.YNc(2,Yc,4,4,"div",1),t.ALo(3,"async"),t.YNc(4,Jc,2,0,"ng-template",null,2,t.W1O),t.YNc(6,Qc,1,1,"ng-template",null,3,t.W1O)),2&e){let s,r;t.Q6J("ngIf",(null==(s=t.lcZ(1,2,n.attachmentUploads$))?null:s.length)&&"1"===n.themeVersion),t.xp6(2),t.Q6J("ngIf",(null==(r=t.lcZ(3,4,n.attachmentUploads$))?null:r.length)&&"2"===n.themeVersion)}},dependencies:[wt,qn,f.O5,f.sg,Me.Pi,f.tP,f.Ov],encapsulation:2}),i})(),Ds=(()=>{class i{constructor(e,n,s,r,o,l,c,u,d,g,m){this.channelService=e,this.notificationService=n,this.attachmentService=s,this.configService=r,this.textareaType=o,this.componentFactoryResolver=l,this.cdRef=c,this.chatClient=u,this.emojiInputService=d,this.customTemplatesService=g,this.mode="main",this.messageUpdate=new t.vpe,this.class="str-chat__message-input-angular-host",this.textareaValue="",this.mentionedUsers=[],this.typingStart$=new nt.x,this.isCooldownInProgress=!1,this.fileInputId=An(),this.subscriptions=[],this.isViewInited=!1,this.defaultTextareaPlaceholder="streamChat.Type your message",this.slowModeTextareaPlaceholder="streamChat.Slow Mode ON",this.themeVersion=m.themeVersion,this.textareaPlaceholder=this.defaultTextareaPlaceholder,this.subscriptions.push(this.attachmentService.attachmentUploadInProgressCounter$.subscribe(v=>{0===v&&this.hideNotification&&(this.hideNotification(),this.hideNotification=void 0)})),this.subscriptions.push(this.channelService.activeChannel$.subscribe(v=>{var C;this.textareaValue="",this.attachmentService.resetAttachmentUploads();const B=null===(C=v?.data)||void 0===C?void 0:C.own_capabilities;B&&(this.isFileUploadAuthorized=-1!==B.indexOf("upload-file"),this.canSendLinks=-1!==B.indexOf("send-links"),this.channel=v,this.setCanSendMessages())})),this.subscriptions.push(this.chatClient.appSettings$.subscribe(v=>this.appSettings=v)),this.subscriptions.push(this.channelService.messageToQuote$.subscribe(v=>{const C=v&&v.parent_id;("thread"===this.mode&&C||"thread"===this.mode&&this.quotedMessage&&!v||"main"===this.mode&&!C)&&(this.quotedMessage=v)})),this.attachmentUploads$=this.attachmentService.attachmentUploads$,this.attachmentUploadInProgressCounter$=this.attachmentService.attachmentUploadInProgressCounter$,this.isFileUploadEnabled=this.configService.isFileUploadEnabled,this.isMultipleFileUploadEnabled=this.configService.isMultipleFileUploadEnabled,this.areMentionsEnabled=this.configService.areMentionsEnabled,this.mentionScope=this.configService.mentionScope,this.inputMode=this.configService.inputMode,this.subscriptions.push(this.typingStart$.subscribe(()=>{this.channelService.typingStarted(this.parentMessageId)})),this.subscriptions.push((0,ii.a)([this.channelService.latestMessageDateByUserByChannels$,this.channelService.activeChannel$]).pipe((0,w.U)(([v,C])=>[v[C?.cid||""],C])).subscribe(([v,C])=>{var B,z,te;const R=(null===(B=C?.data)||void 0===B?void 0:B.cooldown)&&v&&Math.round((null===(z=C?.data)||void 0===z?void 0:z.cooldown)-((new Date).getTime()-v.getTime())/1e3);R&&R>0&&(null===(te=C?.data)||void 0===te?void 0:te.own_capabilities).includes("slow-mode")?this.startCooldown(R):this.isCooldownInProgress&&this.stopCooldown()}))}ngOnInit(){this.subscriptions.push(this.customTemplatesService.emojiPickerTemplate$.subscribe(e=>{this.emojiPickerTemplate=e,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.attachmentPreviewListTemplate$.subscribe(e=>{this.attachmentPreviewListTemplate=e,this.cdRef.detectChanges()}))}ngAfterViewInit(){this.isViewInited=!0,this.initTextarea()}ngOnChanges(e){e.message&&(this.attachmentService.resetAttachmentUploads(),this.isUpdate&&(this.attachmentService.createFromAttachments(this.message.attachments||[]),this.textareaValue=this.message.text||"")),e.isFileUploadEnabled&&(this.configService.isFileUploadEnabled=this.isFileUploadEnabled),e.isMultipleFileUploadEnabled&&(this.configService.isMultipleFileUploadEnabled=this.isMultipleFileUploadEnabled),e.areMentionsEnabled&&(this.configService.areMentionsEnabled=this.areMentionsEnabled),e.mentionScope&&(this.configService.mentionScope=this.mentionScope),e.mode&&this.setCanSendMessages(),e.inputMode&&(this.configService.inputMode=this.inputMode),e.sendMessage$&&(this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.sendMessage$&&(this.sendMessageSubcription=this.sendMessage$.subscribe(()=>{this.messageSent()})))}ngOnDestroy(){this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.subscriptions.forEach(e=>e.unsubscribe())}messageSent(){var e;return(0,re.mG)(this,void 0,void 0,function*(){if(this.isCooldownInProgress)return;let n;if(this.attachmentService.attachmentUploadInProgressCounter$.pipe((0,Ft.P)()).subscribe(l=>n=l),n>0)return void(this.hideNotification||(this.hideNotification=this.notificationService.addPermanentNotification("streamChat.Wait until all attachments have uploaded")));const s=this.attachmentService.mapToAttachments();let r=this.textareaValue;const o=!r.replace(/ /g,"");if(r&&!o||s&&0!==s.length){if(o&&(r=""),this.containsLinks&&!this.canSendLinks)return void this.notificationService.addTemporaryNotification("streamChat.Sending links is not allowed in this conversation");this.isUpdate||(this.textareaValue="");try{yield this.isUpdate?this.channelService.updateMessage(Object.assign(Object.assign({},this.message),{text:r,attachments:s})):this.channelService.sendMessage(r,s,this.mentionedUsers,this.parentMessageId,null===(e=this.quotedMessage)||void 0===e?void 0:e.id),this.messageUpdate.emit(),this.isUpdate||this.attachmentService.resetAttachmentUploads()}catch{this.isUpdate&&this.notificationService.addTemporaryNotification("streamChat.Edit message request failed")}this.channelService.typingStopped(this.parentMessageId),this.quotedMessage&&this.deselectMessageToQuote()}})}get containsLinks(){return/(?:(?:https?|ftp):\/\/)?[\w/\-?=%.]+\.[\w/\-&?=%.]+/.test(this.textareaValue)}get quotedMessageAttachments(){var e;const n=null===(e=this.quotedMessage)||void 0===e?void 0:e.attachments;return n&&n.length?[n[0]]:[]}get disabledTextareaText(){return this.canSendMessages?"":"thread"===this.mode?"streamChat.You can't send thread replies in this channel":"streamChat.You can't send messages in this channel"}filesSelected(e){return(0,re.mG)(this,void 0,void 0,function*(){(yield this.areAttachemntsValid(e))&&(yield this.attachmentService.filesSelected(e),this.clearFileInput())})}deselectMessageToQuote(){this.channelService.selectMessageToQuote(void 0)}getEmojiPickerContext(){return{emojiInput$:this.emojiInputService.emojiInput$}}getAttachmentPreviewListContext(){return{attachmentUploads$:this.attachmentService.attachmentUploads$,deleteUploadHandler:this.deleteUpload.bind(this),retryUploadHandler:this.retryUpload.bind(this)}}deleteUpload(e){this.attachmentService.deleteAttachment(e)}retryUpload(e){this.attachmentService.retryAttachmentUpload(e)}clearFileInput(){this.fileInput.nativeElement.value=""}get isUpdate(){return!!this.message}initTextarea(){if(this.canSendMessages||(this.textareaRef=void 0),!this.canSendMessages||this.textareaRef||!this.textareaAnchor)return;const e=this.componentFactoryResolver.resolveComponentFactory(this.textareaType);this.textareaRef=this.textareaAnchor.viewContainerRef.createComponent(e),this.cdRef.detectChanges()}areAttachemntsValid(e){return(0,re.mG)(this,void 0,void 0,function*(){if(!e)return!0;this.appSettings||(yield this.chatClient.getAppSettings());let n=!0;return Array.from(e).forEach(s=>{var r,o,l,c,u,d,g,m,v,C,B,z,te,R,me,oe,se,ee,de,ve,Ce,ye,fe,xe,De,Oe,je,Ae,Le,dt,Ge,ht,Dt,at,pt,tt;let Ve,rt,gt,ze;gs(s)?(Ve=!(null===(l=null===(o=null===(r=this.appSettings)||void 0===r?void 0:r.image_upload_config)||void 0===o?void 0:o.blocked_file_extensions)||void 0===l||!l.find(Fe=>s.name.endsWith(Fe))),rt=!(null===(d=null===(u=null===(c=this.appSettings)||void 0===c?void 0:c.image_upload_config)||void 0===u?void 0:u.blocked_mime_types)||void 0===d||!d.find(Fe=>s.type===Fe)),gt=!(null===(v=null===(m=null===(g=this.appSettings)||void 0===g?void 0:g.image_upload_config)||void 0===m?void 0:m.allowed_file_extensions)||void 0===v||!v.length||null!==(z=null===(B=null===(C=this.appSettings)||void 0===C?void 0:C.image_upload_config)||void 0===B?void 0:B.allowed_file_extensions)&&void 0!==z&&z.find(Fe=>s.name.endsWith(Fe))),ze=!(null===(me=null===(R=null===(te=this.appSettings)||void 0===te?void 0:te.image_upload_config)||void 0===R?void 0:R.allowed_mime_types)||void 0===me||!me.length||null!==(ee=null===(se=null===(oe=this.appSettings)||void 0===oe?void 0:oe.image_upload_config)||void 0===se?void 0:se.allowed_mime_types)&&void 0!==ee&&ee.find(Fe=>s.type===Fe))):(Ve=!(null===(Ce=null===(ve=null===(de=this.appSettings)||void 0===de?void 0:de.file_upload_config)||void 0===ve?void 0:ve.blocked_file_extensions)||void 0===Ce||!Ce.find(Fe=>s.name.endsWith(Fe))),rt=!(null===(xe=null===(fe=null===(ye=this.appSettings)||void 0===ye?void 0:ye.file_upload_config)||void 0===fe?void 0:fe.blocked_mime_types)||void 0===xe||!xe.find(Fe=>s.type===Fe)),gt=!(null===(je=null===(Oe=null===(De=this.appSettings)||void 0===De?void 0:De.file_upload_config)||void 0===Oe?void 0:Oe.allowed_file_extensions)||void 0===je||!je.length||null!==(dt=null===(Le=null===(Ae=this.appSettings)||void 0===Ae?void 0:Ae.file_upload_config)||void 0===Le?void 0:Le.allowed_file_extensions)&&void 0!==dt&&dt.find(Fe=>s.name.endsWith(Fe))),ze=!(null===(Dt=null===(ht=null===(Ge=this.appSettings)||void 0===Ge?void 0:Ge.file_upload_config)||void 0===ht?void 0:ht.allowed_mime_types)||void 0===Dt||!Dt.length||null!==(tt=null===(pt=null===(at=this.appSettings)||void 0===at?void 0:at.file_upload_config)||void 0===pt?void 0:pt.allowed_mime_types)&&void 0!==tt&&tt.find(Fe=>s.type===Fe))),(Ve||rt||gt||ze)&&(this.notificationService.addTemporaryNotification("streamChat.Unsupported file type: {{type}}",void 0,void 0,{type:s.type}),n=!1)}),n})}setCanSendMessages(){var e,n;const s=null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.own_capabilities;this.canSendMessages=!!s&&-1!==s.indexOf("main"===this.mode?"send-message":"send-reply"),this.isViewInited&&(this.cdRef.detectChanges(),this.initTextarea())}get parentMessageId(){let e;return"thread"===this.mode&&this.channelService.activeParentMessageId$.pipe((0,Ft.P)()).subscribe(n=>e=n),e}startCooldown(e){this.textareaPlaceholder=this.slowModeTextareaPlaceholder,this.isCooldownInProgress=!0,this.cooldown$=(0,_n.H)(0,1e3).pipe((0,ke.q)(e+1),(0,w.U)(n=>e-n),(0,F.b)(n=>{0===n&&this.stopCooldown()}))}stopCooldown(){this.cooldown$=void 0,this.isCooldownInProgress=!1,this.textareaPlaceholder=this.defaultTextareaPlaceholder}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(Lt),t.Y36(fs),t.Y36(Ep),t.Y36(Cs),t.Y36(t._Vd),t.Y36(t.sBO),t.Y36(et),t.Y36(Yn),t.Y36(Je),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-input"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Gc,5),t.Gf(ys,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.fileInput=s.first),t.iGM(s=t.CRH())&&(n.textareaAnchor=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{isFileUploadEnabled:"isFileUploadEnabled",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",mode:"mode",isMultipleFileUploadEnabled:"isMultipleFileUploadEnabled",message:"message",sendMessage$:"sendMessage$",inputMode:"inputMode"},outputs:{messageUpdate:"messageUpdate"},features:[t._Bn([fs,Yn]),t.TTD],decls:2,vars:2,consts:[[3,"class","str-chat__input-flat-has-attachments","str-chat__input-flat-quoted",4,"ngIf"],["class","str-chat__message-input str-chat-angular__message-input",4,"ngIf"],["class","quoted-message-preview",4,"ngIf"],[1,"str-chat__input-flat-wrapper",2,"width","100%"],["defaultAttachmentsPreview",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rta","str-chat__textarea","str-chat-angular__textarea"],["data-testid","emoji-picker",4,"ngIf"],[4,"ngIf","ngIfElse"],["disabledTextarea",""],["class","str-chat__fileupload-wrapper","data-testid","file-upload-button",4,"ngIf"],["data-testid","send-button","class","str-chat__send-button",3,"click","keyup.enter",4,"ngIf"],["class","str-chat__input-flat-cooldown","data-testid","cooldown-timer",4,"ngIf"],[1,"quoted-message-preview"],[1,"quoted-message-preview-header"],["data-testid","remove-quote",1,"str-chat__square-button",3,"click","keyup.enter"],["icon","close-no-outline",2,"font-size","15px","line-height","15px","width","15px","height","15px"],[1,"quoted-message-preview-content"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner"],[3,"attachments","messageId",4,"ngIf"],["data-testid","quoted-message-text",3,"innerHTML"],[3,"attachments","messageId"],[1,"rfu-image-previewer-angular-host",3,"attachmentUploads$","retryAttachmentUpload","deleteAttachment"],["data-testid","emoji-picker"],[1,"str-chat__input-flat-emojiselect","str-chat-angular__emojiselect"],["streamTextarea","",3,"value","componentRef","areMentionsEnabled","mentionScope","placeholder","inputMode","valueChange","send","userMentions"],["disabled","","rows","1","data-testid","disabled-textarea",1,"rta__textarea","str-chat__textarea__textarea",3,"value"],["data-testid","file-upload-button",1,"str-chat__fileupload-wrapper"],[1,"str-chat__tooltip"],[1,"rfu-file-upload-button"],["type","file","data-testid","file-input",1,"rfu-file-input",3,"multiple","change"],["fileInput",""],[1,"str-chat__input-flat-fileupload"],["icon","file-upload"],["data-testid","send-button",1,"str-chat__send-button",3,"click","keyup.enter"],["icon","send",1,"str-chat__send-button-angular"],["data-testid","cooldown-timer",1,"str-chat__input-flat-cooldown"],[1,"str-chat__message-input-cooldown-text"],[1,"str-chat__message-input","str-chat-angular__message-input"],["class","str-chat__quoted-message-preview-header",4,"ngIf"],["notAllowed",""],[1,"str-chat__quoted-message-preview-header"],[1,"str-chat__quoted-message-reply-to-message"],["data-testid","remove-quote",1,"str-chat__quoted-message-remove",3,"click","keyup.enter"],["icon","close-no-outline"],[1,"str-chat__message-input-inner","str-chat-angular__message-input-inner"],["class","str-chat__file-input-container","data-testid","file-upload-button",4,"ngIf"],[1,"str-chat__message-textarea-container"],["data-testid","quoted-message-container","class","str-chat__quoted-message-preview",4,"ngIf"],[1,"str-chat__message-textarea-with-emoji-picker"],["streamTextarea","",3,"value","componentRef","areMentionsEnabled","mentionScope","inputMode","placeholder","valueChange","send","userMentions"],[1,"str-chat__message-textarea-emoji-picker"],["data-testid","send-button","class","str-chat__send-button",3,"disabled","click","keyup.enter",4,"ngIf"],["class","str-chat__message-input-cooldown","data-testid","cooldown-timer",4,"ngIf"],["data-testid","file-upload-button",1,"str-chat__file-input-container"],["type","file","data-testid","file-input",1,"str-chat__file-input",3,"multiple","id","change"],[1,"str-chat__file-input-label",3,"for"],["icon","attach"],["data-testid","quoted-message-container",1,"str-chat__quoted-message-preview"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",1,"str-chat__quoted-message-text",3,"innerHTML"],[1,"str-chat__attachment-preview-list-angular-host",3,"attachmentUploads$","retryAttachmentUpload","deleteAttachment"],["data-testid","send-button",1,"str-chat__send-button",3,"disabled","click","keyup.enter"],["icon","send"],["data-testid","cooldown-timer",1,"str-chat__message-input-cooldown"],["data-testid","disabled-textarea",1,"str-chat__message-input-not-allowed"]],template:function(e,n){1&e&&(t.YNc(0,ou,16,21,"div",0),t.YNc(1,yu,5,3,"div",1)),2&e&&(t.Q6J("ngIf","2"!==n.themeVersion),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion))},dependencies:[wt,Ut,ws,Ip,f.O5,f.tP,ys,f.Ov,Me.X$],encapsulation:2}),i})(),Op=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-notification"]],inputs:{type:"type",content:"content"},ngContentSelectors:Hn,decls:4,vars:5,consts:[["data-testid","custom-notification"],[4,"ngIf","ngIfElse"],["elseContent",""],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,Du,2,1,"ng-container",1),t.YNc(2,bu,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const s=t.MAs(3);t.Gre("str-chat__custom-notification notification-",n.type," str-chat__notification"),t.xp6(1),t.Q6J("ngIf",n.content)("ngIfElse",s)}},dependencies:[f.O5,f.tP],encapsulation:2}),i})(),Jn=(()=>{class i{constructor(e,n,s){this.customTemplatesService=e,this.notificationService=n,this.themeService=s,this.notifications$=this.notificationService.notifications$,this.theme$=this.themeService.theme$,this.themeVersion=this.themeService.themeVersion}trackById(e,n){return n.id}getNotificationContentContext(e){return Object.assign(Object.assign({},e.templateContext),{dismissFn:e.dismissFn})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Je),t.Y36(Lt),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-notification-list"]],decls:6,vars:11,consts:[["data-testid","notification-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["defaultNotification",""],["notificationContent",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","notification-content",4,"ngIf"],[4,"ngIf"],["data-testclass","notification-content"],[3,"type","content"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.YNc(2,ku,5,7,"ng-container",1),t.ALo(3,"async"),t.qZA(),t.YNc(4,Eu,1,2,"ng-template",null,2,t.W1O)),2&e&&(t.Gre("str-chat__theme-",t.lcZ(1,7,n.theme$)," str-chat__list-notifications"),t.ekj("str-chat","2"===n.themeVersion),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,9,n.notifications$))("ngForTrackBy",n.trackById))},dependencies:[Op,f.sg,f.O5,f.tP,f.Ov,Me.X$],encapsulation:2}),i})(),Lp=(()=>{class i{constructor(e,n,s,r){this.chatClientService=e,this.notificationService=n,this.channelService=s,this.customTemplatesService=r,this.isOpen=!1,this.isMine=!1,this.enabledActions=[],this.displayedActionsCount=new t.vpe,this.isEditing=new t.vpe,this.isEditModalOpen=!1,this.subscriptions=[],this.visibleMessageActionItems=[],this.sendMessageSubject=new nt.x,this.modalClosed=()=>{this.isEditModalOpen=!1,this.isEditing.emit(!1)},this.subscriptions.push(this.customTemplatesService.messageInputTemplate$.subscribe(o=>this.messageInputTemplate=o)),this.subscriptions.push(this.customTemplatesService.messageActionsBoxItemTemplate$.subscribe(o=>this.messageActionItemTemplate=o)),this.subscriptions.push(this.customTemplatesService.modalTemplate$.subscribe(o=>this.modalTemplate=o)),this.messageActionItems=[{actionName:"quote",actionLabelOrTranslationKey:"streamChat.Reply",actionHandler:o=>this.channelService.selectMessageToQuote(o),isVisible:o=>-1!==o.indexOf("quote-message")},{actionName:"pin",actionLabelOrTranslationKey:()=>{var o;return null!==(o=this.message)&&void 0!==o&&o.pinned?"streamChat.Unpin":"streamChat.Pin"},actionHandler:o=>o.pinned?this.channelService.unpinMessage(o):this.channelService.pinMessage(o),isVisible:o=>-1!==o.indexOf("pin-message")},{actionName:"flag",actionLabelOrTranslationKey:"streamChat.Flag",actionHandler:o=>(0,re.mG)(this,void 0,void 0,function*(){try{yield this.chatClientService.flagMessage(o.id),this.notificationService.addTemporaryNotification("streamChat.Message has been successfully flagged","success")}catch{this.notificationService.addTemporaryNotification("streamChat.Error adding flag")}}),isVisible:(o,l)=>-1!==o.indexOf("flag-message")&&!l},{actionName:"edit",actionLabelOrTranslationKey:"streamChat.Edit Message",actionHandler:()=>{this.isEditing.emit(!0),this.isEditModalOpen=!0},isVisible:(o,l)=>-1!==o.indexOf("update-own-message")&&l||-1!==o.indexOf("update-any-message")},{actionName:"delete",actionLabelOrTranslationKey:"streamChat.Delete",actionHandler:o=>(0,re.mG)(this,void 0,void 0,function*(){try{yield this.channelService.deleteMessage(o)}catch{this.notificationService.addTemporaryNotification("streamChat.Error deleting message")}}),isVisible:(o,l)=>(-1!==o.indexOf("delete")||-1!==o.indexOf("delete-own-message"))&&l||-1!==o.indexOf("delete-any")||-1!==o.indexOf("delete-any-message")}],this.sendMessage$=this.sendMessageSubject.asObservable()}ngOnChanges(e){(e.isMine||e.enabledActions||e.message)&&(this.visibleMessageActionItems=this.messageActionItems.filter(n=>n.isVisible(this.enabledActions,this.isMine,this.message)),this.displayedActionsCount.emit(this.visibleMessageActionItems.length))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getActionLabel(e){return"string"==typeof e?e:e()}sendClicked(){this.sendMessageSubject.next()}getMessageInputContext(){return{message:this.message,messageUpdateHandler:this.modalClosed,isFileUploadEnabled:void 0,areMentionsEnabled:void 0,isMultipleFileUploadEnabled:void 0,mentionScope:void 0,mode:void 0,sendMessage$:this.sendMessage$}}getEditModalContext(){return{isOpen:this.isEditModalOpen,isOpenChangeHandler:e=>{this.isEditModalOpen=e,this.isEditModalOpen||this.modalClosed()},content:this.modalContent}}trackByActionName(e,n){return n.actionName}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(et),t.Y36(Lt),t.Y36(Ne),t.Y36(Je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-actions-box"]],viewQuery:function(e,n){if(1&e&&t.Gf(ls,7),2&e){let s;t.iGM(s=t.CRH())&&(n.modalContent=s.first)}},inputs:{isOpen:"isOpen",isMine:"isMine",message:"message",enabledActions:"enabledActions"},outputs:{displayedActionsCount:"displayedActionsCount",isEditing:"isEditing"},features:[t.TTD],decls:11,vars:6,consts:[["data-testid","action-box",1,"str-chat__message-actions-box","str-chat__message-actions-box-angular"],["actionBox",""],[1,"str-chat__message-actions-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["defaultMessageActionItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultModal",""],["modalContent",""],[1,"str-chat__message-actions-list-item-button",3,"click"],[1,"str-chat__message-actions-list-item"],[3,"isOpen","content","isOpenChange"],["class","str-chat__edit-message-form",4,"ngIf"],[1,"str-chat__edit-message-form"],["defaultInput",""],[1,"str-chat__message-team-form-footer","str-chat__message-team-form-footer-angular"],[1,"str-chat__edit-message-form-options"],["translate","","data-testid","cancel-button",1,"str-chat__edit-message-cancel",3,"click"],["type","submit","translate","","data-testid","send-button",1,"str-chat__edit-message-send",3,"click","keyup.enter"],[3,"message","sendMessage$","messageUpdate"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1)(2,"ul",2),t.YNc(3,Ou,2,2,"ng-container",3),t.qZA()(),t.YNc(4,Lu,4,4,"ng-template",null,4,t.W1O),t.YNc(6,Uu,1,0,"ng-container",5),t.YNc(7,Zu,1,2,"ng-template",null,6,t.W1O),t.YNc(9,Nu,1,1,"ng-template",null,7,t.W1O)),2&e){const s=t.MAs(8);t.ekj("str-chat__message-actions-box--open",!0),t.xp6(3),t.Q6J("ngForOf",n.visibleMessageActionItems)("ngForTrackBy",n.trackByActionName),t.xp6(3),t.Q6J("ngTemplateOutlet",n.modalTemplate||s)("ngTemplateOutletContext",n.getEditModalContext())}},dependencies:[vs,Ds,Jn,f.sg,f.tP,f.O5,Me.Pi,Me.X$],encapsulation:2}),i})(),Up=(()=>{class i{constructor(e,n){this.channelService=e,this.themeService=n,this.subscriptions=[],this.isError$=this.channelService.channels$.pipe((0,w.U)(()=>!1),(0,E.K)(()=>(0,T.of)(!0)),(0,Ei.O)(!1)),this.isInitializing$=this.channelService.channels$.pipe((0,w.U)(s=>!s),(0,E.K)(()=>(0,T.of)(!1))),this.isActiveThread$=this.channelService.activeParentMessageId$.pipe((0,w.U)(s=>!!s)),this.theme$=this.themeService.theme$,this.isActiveChannel$=this.channelService.activeChannel$.pipe((0,w.U)(s=>!!s))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel"]],ngContentSelectors:Vu,decls:8,vars:13,consts:[["class","str-chat__container",4,"ngIf","ngIfElse"],["noChannel",""],[1,"str-chat__container"],[1,"str-chat__main-panel"],[4,"ngIf"],["class","str-chat__empty-channel",4,"ngIf"],["class","str-chat__loading-channel",4,"ngIf"],[1,"str-chat__empty-channel"],["icon","chat-bubble"],[1,"str-chat__empty-channel-text"],[1,"str-chat__empty-channel-notifications"],[1,"str-chat__loading-channel"],[1,"str-chat__loading-channel-header"],[1,"str-chat__loading-channel-header-avatar"],[1,"str-chat__loading-channel-header-end"],[1,"str-chat__loading-channel-header-name"],[1,"str-chat__loading-channel-header-info"],[1,"str-chat__loading-channel-message-list"],[1,"str-chat__loading-channel-message"],[1,"str-chat__loading-channel-message-avatar"],[1,"str-chat__loading-channel-message-end"],[1,"str-chat__loading-channel-message-sender"],[1,"str-chat__loading-channel-message-last-row"],[1,"str-chat__loading-channel-message-text"],[1,"str-chat__loading-channel-message-date"],[1,"str-chat__loading-channel-message-input-row"],[1,"str-chat__loading-channel-message-input"],[1,"str-chat__loading-channel-message-send"]],template:function(e,n){if(1&e&&(t.F$t(Ju),t.TgZ(0,"div"),t.ALo(1,"async"),t.YNc(2,$u,5,3,"div",0),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.YNc(6,Yu,8,14,"ng-template",null,1,t.W1O),t.qZA()),2&e){const s=t.MAs(7);t.Gre("str-chat str-chat-channel messaging str-chat__channel str-chat__theme-",t.lcZ(1,5,n.theme$),""),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,7,n.isError$)&&!1===t.lcZ(4,9,n.isInitializing$)&&!0===t.lcZ(5,11,n.isActiveChannel$))("ngIfElse",s)}},dependencies:[gn,Jn,f.O5,f.Ov,Me.X$],encapsulation:2}),i})();const Vn=i=>{let a="";const e=i.map(r=>r.name||r.id).slice(0,5),n=i.length-e.length;return a=e.join(", "),n>0&&(a+=` +${n}`),a},bs=(i,a)=>{var e;if(null!==(e=i.data)&&void 0!==e&&e.name)return i.data.name;if(i.state.members&&Object.keys(i.state.members).length>0){const n=Object.values(i.state.members).map(s=>s.user||{id:s.user_id}).filter(s=>s.id!==a?.id);return Vn(n)}return i.id};let Ts=(()=>{class i{constructor(){this.isOpenSubject=new ae.X(!1),this.isOpen$=this.isOpenSubject.asObservable().pipe((0,Ii.x)()),this.isOpen$.pipe((0,tn.h)(e=>e)).subscribe(()=>{this.watchForOutsideClicks()})}open(){this.isOpenSubject.next(!0)}close(){this.isOpenSubject.next(!1)}toggle(){this.isOpenSubject.getValue()?this.close():this.open()}setMenuElement(e){this.menuElement=e}channelSelected(){this.close()}watchForOutsideClicks(){if(!this.menuElement)return;const e=n=>{this.menuElement.contains(n.target)||(this.close(),window.removeEventListener("click",e))};window.addEventListener("click",e),this.isOpen$.pipe((0,tn.h)(n=>!n),(0,Ft.P)()).subscribe(()=>window.removeEventListener("click",e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zp=(()=>{class i{constructor(e,n,s,r,o){this.channelService=e,this.channelListToggleService=n,this.customTemplatesService=s,this.cdRef=r,this.chatClientService=o,this.subscriptions=[],this.channelService.activeChannel$.subscribe(l=>{var c,u;this.activeChannel=l;const d=null===(u=null===(c=this.activeChannel)||void 0===c?void 0:c.data)||void 0===u?void 0:u.own_capabilities;d&&(this.canReceiveConnectEvents=-1!==d.indexOf("connect-events"))})}ngOnInit(){this.subscriptions.push(this.customTemplatesService.channelActionsTemplate$.subscribe(e=>{this.channelActionsTemplate=e,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.channelHeaderInfoTemplate$.subscribe(e=>{this.channelHeaderInfoTemplate=e,this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}toggleMenu(e){e.stopPropagation(),this.channelListToggleService.toggle()}getChannelActionsContext(){return{channel:this.activeChannel}}getChannelInfoContext(){return{channel:this.activeChannel}}get memberCountParam(){var e,n;return{memberCount:(null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.member_count)||0}}get watcherCountParam(){var e,n;return{watcherCount:(null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.watcher_count)||0}}get displayText(){return this.activeChannel?bs(this.activeChannel,this.chatClientService.chatClient.user):""}get avatarName(){var e,n;return null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.name}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(Ts),t.Y36(Je),t.Y36(t.sBO),t.Y36(et))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-header"]],ngContentSelectors:Hn,decls:12,vars:8,consts:[[1,"str-chat__header-livestream","str-chat__channel-header"],[1,"str-chat__header-hamburger",3,"click","keyup.enter"],["icon","menu"],["type","channel","location","channel-header",3,"imageUrl","name","channel","size"],[1,"str-chat__header-livestream-left","str-chat__channel-header-end"],["data-testid","name",1,"str-chat__header-livestream-left--title","str-chat__channel-header-title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultChannelInfo",""],[4,"ngIf"],["data-testid","info",1,"str-chat__header-livestream-left--members","str-chat__channel-header-info"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(r){return n.toggleMenu(r)})("keyup.enter",function(r){return n.toggleMenu(r)}),t._UZ(2,"stream-icon-placeholder",2),t.qZA(),t.Hsn(3),t._UZ(4,"stream-avatar-placeholder",3),t.TgZ(5,"div",4)(6,"p",5),t._uU(7),t.qZA(),t.YNc(8,Qu,1,0,"ng-container",6),t.YNc(9,Gu,4,8,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(11,Wu,2,2,"ng-container",8),t.qZA()),2&e){const s=t.MAs(10);t.xp6(4),t.s9C("imageUrl",null==n.activeChannel||null==n.activeChannel.data?null:n.activeChannel.data.image),t.s9C("name",n.avatarName),t.Q6J("channel",n.activeChannel)("size",40),t.xp6(3),t.hij(" ",n.displayText," "),t.xp6(1),t.Q6J("ngTemplateOutlet",n.channelHeaderInfoTemplate||s)("ngTemplateOutletContext",n.getChannelInfoContext()),t.xp6(3),t.Q6J("ngIf",n.channelActionsTemplate)}},dependencies:[wt,Ut,f.tP,f.O5,Me.X$],encapsulation:2}),i})(),Rp=(()=>{class i{constructor(e,n,s){this.channelService=e,this.ngZone=n,this.chatClientService=s,this.isActive=!1,this.isUnread=!1,this.latestMessage="streamChat.Nothing yet...",this.subscriptions=[],this.canSendReadEvents=!0}ngOnInit(){var e,n,s,r;this.subscriptions.push(this.channelService.activeChannel$.subscribe(c=>{var u;return this.isActive=c?.id===(null===(u=this.channel)||void 0===u?void 0:u.id)}));const o=null===(n=null===(e=this.channel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.latestMessages;o&&o.length>0&&this.setLatestMessage(o[o.length-1]),this.updateUnreadState();const l=(null===(r=null===(s=this.channel)||void 0===s?void 0:s.data)||void 0===r?void 0:r.own_capabilities)||[];this.canSendReadEvents=-1!==l.indexOf("read-events"),this.subscriptions.push(this.channel.on("message.new",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.updated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.deleted",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("channel.truncated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.read",()=>this.ngZone.run(()=>{this.updateUnreadState()})))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get avatarImage(){var e,n;return null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.image}get avatarName(){var e,n;return null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.name}get title(){return this.channel?bs(this.channel,this.chatClientService.chatClient.user):""}setAsActiveChannel(){this.channelService.setAsActiveChannel(this.channel)}handleMessageEvent(e){this.ngZone.run(()=>{var n,s,r;0!==(null===(n=this.channel)||void 0===n?void 0:n.state.latestMessages.length)?!e.message||(null===(s=this.channel)||void 0===s?void 0:s.state.latestMessages[(null===(r=this.channel)||void 0===r?void 0:r.state.latestMessages.length)-1].id)!==e.message.id||(this.setLatestMessage(e.message),this.updateUnreadState()):this.latestMessage="streamChat.Nothing yet..."})}setLatestMessage(e){e?.deleted_at?this.latestMessage="streamChat.Message deleted":e?.text?this.latestMessage=ct(e,this.channel,this.chatClientService.chatClient.user)||e.text:e?.attachments&&e.attachments.length&&(this.latestMessage="streamChat.\u{1f3d9} Attachment...")}updateUnreadState(){if(this.isActive||!this.canSendReadEvents)return this.unreadCount=0,void(this.isUnread=!1);this.unreadCount=this.channel.countUnread(),this.isUnread=!!this.unreadCount}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(t.R0b),t.Y36(et))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-preview"]],inputs:{channel:"channel"},decls:12,vars:15,consts:[["data-testid","channel-preview-container",1,"str-chat__channel-preview-messenger","str-chat__channel-preview",3,"click"],[1,"str-chat__channel-preview-messenger--left"],["type","channel","location","channel-preview",3,"name","imageUrl","channel","size"],[1,"str-chat__channel-preview-messenger--right","str-chat__channel-preview-end"],[1,"str-chat__channel-preview-end-first-row"],[1,"str-chat__channel-preview-messenger--name"],["data-testid","channel-preview-title"],["data-testid","unread-badge","class","str-chat__channel-preview-unread-badge",4,"ngIf"],["data-testid","latest-message",1,"str-chat__channel-preview-messenger--last-message"],["data-testid","unread-badge",1,"str-chat__channel-preview-unread-badge"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.setAsActiveChannel()}),t.TgZ(1,"div",1),t._UZ(2,"stream-avatar-placeholder",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),t._uU(7),t.qZA()(),t.YNc(8,Ku,2,1,"div",7),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&e&&(t.ekj("str-chat__channel-preview-messenger--active",n.isActive)("str-chat__channel-preview--active",n.isActive)("str-chat__channel-preview-messenger--unread",n.isUnread),t.xp6(2),t.s9C("name",n.avatarName),t.s9C("imageUrl",n.avatarImage),t.Q6J("channel",n.channel)("size",49),t.xp6(5),t.Oqu(n.title),t.xp6(1),t.Q6J("ngIf",n.unreadCount),t.xp6(2),t.hij(" ",t.lcZ(11,13,n.latestMessage)," "))},dependencies:[Ut,f.O5,Me.X$],encapsulation:2}),i})(),Pp=(()=>{class i{constructor(e,n,s,r){this.channelService=e,this.channelListToggleService=n,this.customTemplatesService=s,this.themeService=r,this.isLoadingMoreChannels=!1,this.subscriptions=[],this.theme$=this.themeService.theme$,this.isOpen$=this.channelListToggleService.isOpen$,this.channels$=this.channelService.channels$,this.hasMoreChannels$=this.channelService.hasMoreChannels$,this.isError$=this.channels$.pipe((0,w.U)(()=>!1),(0,E.K)(()=>(0,T.of)(!0)),(0,Ei.O)(!1)),this.isInitializing$=this.channels$.pipe((0,w.U)(o=>!o),(0,E.K)(()=>(0,T.of)(!1))),this.subscriptions.push(this.customTemplatesService.channelPreviewTemplate$.subscribe(o=>this.customChannelPreviewTemplate=o))}ngAfterViewInit(){this.channelListToggleService.setMenuElement(this.container.nativeElement)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadMoreChannels(){return(0,re.mG)(this,void 0,void 0,function*(){this.isLoadingMoreChannels=!0,yield this.channelService.loadMoreChannels(),this.isLoadingMoreChannels=!1})}trackByChannelId(e,n){return n.cid}channelSelected(){this.channelListToggleService.channelSelected()}getChannelPreviewContext(e){return{channel:e}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(Ts),t.Y36(Je),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(us,5),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first)}},ngContentSelectors:wd,decls:15,vars:15,consts:[["data-testid","channel-list-container",2,"max-width","unset"],["container",""],["class","str-chat__channel-list-messenger",4,"ngIf","ngIfElse"],["statusIndicator",""],["chatDown",""],["loadingChannels",""],["loadingChannel",""],[1,"str-chat__channel-list-messenger"],[1,"str-chat__channel-list-messenger__main"],["class","str-chat__channel-list-empty",4,"ngIf"],["class","str-chat__channel-list-empty-v1","data-testid","empty-channel-list-indicator",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","str-chat__load-more-button","data-testid","load-more",3,"click","keyup.enter",4,"ngIf"],[1,"str-chat__channel-list-empty"],["icon","chat-bubble"],["data-testid","empty-channel-list-indicator"],["data-testid","empty-channel-list-indicator",1,"str-chat__channel-list-empty-v1"],["defaultTemplate",""],[3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","channel-preview",3,"channel"],["data-testid","load-more",1,"str-chat__load-more-button",3,"click","keyup.enter"],["data-testid","load-more-button",1,"str-chat__load-more-button__button","str-chat__cta-button",3,"disabled"],[4,"ngIf","ngIfElse"],["loadingIndicator",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","chatdown-container",1,"str-chat__down"],[1,"str-chat__down-main"],["icon","connection-error"],["data-testid","loading-indicator",1,"str-chat__loading-channels"],[1,"str-chat__loading-channels-item","str-chat__channel-preview-loading"],[1,"str-chat__loading-channels-avatar"],[1,"str-chat__loading-channels-meta","str-chat__channel-preview-end-loading"],[1,"str-chat__loading-channels-username"],[1,"str-chat__loading-channels-status"]],template:function(e,n){if(1&e&&(t.F$t(yd),t.TgZ(0,"div",0,1),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,od,12,13,"div",2),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA(),t.YNc(7,hd,4,6,"ng-template",null,3,t.W1O),t.YNc(9,gd,10,7,"ng-template",null,4,t.W1O),t.YNc(11,vd,4,3,"ng-template",null,5,t.W1O),t.YNc(13,Cd,5,0,"ng-template",null,6,t.W1O)),2&e){const s=t.MAs(8);t.Gre("str-chat str-chat__channel-list str-chat-channel-list messaging str-chat__theme-",t.lcZ(2,7,n.theme$),""),t.ekj("str-chat-channel-list--open",!0===t.lcZ(3,9,n.isOpen$)),t.xp6(4),t.Q6J("ngIf",!1===t.lcZ(5,11,n.isError$)&&!1===t.lcZ(6,13,n.isInitializing$))("ngIfElse",s)}},dependencies:[gn,Rp,qn,wt,f.O5,f.sg,f.tP,f.Ov,Me.X$],encapsulation:2}),i})();Oi().extend(Er());const Np={like:"\u{1f44d}",angry:"\u{1f620}",love:"\u2764\ufe0f",haha:"\u{1f602}",wow:"\u{1f62e}",sad:"\u{1f61e}"};let jp=(()=>{class i{constructor(e,n){this.cdRef=e,this.channelService=n,this.messageReactionCounts={},this.isSelectorOpen=!1,this.latestReactions=[],this.ownReactions=[],this.isSelectorOpenChange=new t.vpe,this.popperTriggerHover=Be.hover,this.popperPlacementAuto=yt.AUTO,this.eventHandler=s=>{var r;null!==(r=this.selectorContainer)&&void 0!==r&&r.nativeElement.contains(s.target)||this.isSelectorOpenChange.emit(!1)}}ngOnChanges(e){e.isSelectorOpen&&(this.isSelectorOpen?setTimeout(()=>this.watchForOutsideClicks()):this.stopWatchForOutsideClicks())}ngAfterViewChecked(){this.tooltipText&&!this.tooltipPositions&&(this.setTooltipPosition(),this.cdRef.detectChanges())}get existingReactions(){return Object.keys(this.messageReactionCounts).filter(e=>this.messageReactionCounts[e]>0)}get reactionsCount(){return Object.values(this.messageReactionCounts).reduce((e,n)=>e+n,0)}get reactionOptions(){return["like","love","haha","wow","sad","angry"]}getLatestUserByReaction(e){var n;return null===(n=this.latestReactions.find(s=>s.type===e&&s.user))||void 0===n?void 0:n.user}getEmojiByReaction(e){return Np[e]}getUsersByReaction(e){return this.latestReactions.filter(n=>n.type===e).map(n=>{var s,r;return(null===(s=n.user)||void 0===s?void 0:s.name)||(null===(r=n.user)||void 0===r?void 0:r.id)}).filter(n=>!!n).join(", ")}showTooltip(e,n){this.currentTooltipTarget=e.target,this.tooltipText=this.getUsersByReaction(n)}hideTooltip(){this.tooltipText=void 0,this.currentTooltipTarget=void 0,this.tooltipPositions=void 0}trackByMessageReaction(e,n){return n}react(e){this.ownReactions.find(n=>n.type===e)?this.channelService.removeReaction(this.messageId,e):this.channelService.addReaction(this.messageId,e)}isOwnReaction(e){return!!this.ownReactions.find(n=>n.type===e)}watchForOutsideClicks(){window.addEventListener("click",this.eventHandler)}stopWatchForOutsideClicks(){window.removeEventListener("click",this.eventHandler)}setTooltipPosition(){var e,n,s;const r=null===(e=this.selectorTooltip)||void 0===e?void 0:e.nativeElement.getBoundingClientRect(),o=null===(n=this.currentTooltipTarget)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(s=this.selectorContainer)||void 0===s?void 0:s.nativeElement.getBoundingClientRect();if(!r||!o||!l)return;const c=r.width===l.width||r.x<l.x?0:o.left+o.width/2-l.left-r.width/2;this.tooltipPositions={tooltip:c,arrow:o.x-r.x+o.width/2-c}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(Ne))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-reactions"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Dd,5),t.Gf(bd,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.selectorContainer=s.first),t.iGM(s=t.CRH())&&(n.selectorTooltip=s.first)}},inputs:{messageId:"messageId",messageReactionCounts:"messageReactionCounts",isSelectorOpen:"isSelectorOpen",latestReactions:"latestReactions",ownReactions:"ownReactions"},outputs:{isSelectorOpenChange:"isSelectorOpenChange"},features:[t.TTD],decls:2,vars:2,consts:[["class","str-chat__reaction-list str-chat__message-reactions-container","data-testid","reaction-list",3,"str-chat__reaction-list--reverse","str-chat__reaction-list-hidden",4,"ngIf"],["class","str-chat__reaction-selector str-chat__message-reaction-selector","data-testid","reaction-selector",4,"ngIf"],["data-testid","reaction-list",1,"str-chat__reaction-list","str-chat__message-reactions-container"],[1,"str-chat__message-reactions"],["class","str-chat__message-reaction","data-testclass","emoji",3,"str-chat__message-reaction-own","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","reactions-count",1,"str-chat__reaction-list--counter"],["data-testclass","emoji",1,"str-chat__message-reaction",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["popperContent",""],["data-testclass","tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],[1,"emoji","str-chat__message-reaction-emoji"],["data-testclass","reaction-list-reaction-count",1,"str-chat__message-reaction-count"],["data-testid","reaction-selector",1,"str-chat__reaction-selector","str-chat__message-reaction-selector"],["selectorContainer",""],["data-testid","tooltip","class","str-chat__reaction-selector-tooltip",3,"ngStyle",4,"ngIf"],[1,"str-chat__message-reactions-list","str-chat__message-reactions-options"],["class","\n        str-chat__message-reactions-option\n        str-chat__message-reactions-list-item\n        str-chat__emoji\n      ","data-testclass","emoji-option",3,"str-chat__message-reactions-option-selected","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","tooltip",1,"str-chat__reaction-selector-tooltip",3,"ngStyle"],["selectorTooltip",""],[1,"arrow",3,"ngStyle"],[1,"latest-user-username"],["data-testclass","emoji-option",1,"str-chat__message-reactions-option","str-chat__message-reactions-list-item","str-chat__emoji",3,"click","keyup.enter"],["class","latest-user str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave",4,"ngIf"],[1,"emoji","str-chat__emoji-selector-emoji-angular","str-chat__message-reaction-emoji"],["class","str-chat__message-reactions-list-item__count",4,"ngIf"],[1,"latest-user","str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave"],[3,"imageUrl","name","size"],[1,"str-chat__message-reactions-list-item__count"]],template:function(e,n){1&e&&(t.YNc(0,Md,6,7,"div",0),t.YNc(1,Id,5,3,"div",1)),2&e&&(t.Q6J("ngIf",n.existingReactions.length>0),t.xp6(1),t.Q6J("ngIf",n.isSelectorOpen))},dependencies:[Bn,Ut,f.O5,f.sg,Ie,f.PC],styles:[".emoji[_ngcontent-%COMP%] {position: relative; display: inline-block; }"]}),i})(),$p=(()=>{class i{constructor(e,n,s,r,o){this.chatClientService=e,this.channelService=n,this.customTemplatesService=s,this.cdRef=r,this.enabledMessageActions=[],this.mode="main",this.isHighlighted=!1,this.isActionBoxOpen=!1,this.isReactionSelectorOpen=!1,this.visibleMessageActionsCount=0,this.messageTextParts=[],this.popperTriggerClick=Be.click,this.popperTriggerHover=Be.hover,this.popperPlacementAuto=yt.AUTO,this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.imageAttachmentModalState="closed",this.subscriptions=[],this.themeVersion=o.themeVersion}ngOnInit(){this.subscriptions.push(this.chatClientService.user$.subscribe(e=>{this.user=e})),this.subscriptions.push(this.customTemplatesService.mentionTemplate$.subscribe(e=>this.mentionTemplate=e)),this.subscriptions.push(this.customTemplatesService.attachmentListTemplate$.subscribe(e=>this.attachmentListTemplate=e)),this.subscriptions.push(this.customTemplatesService.messageActionsBoxTemplate$.subscribe(e=>this.messageActionsBoxTemplate=e)),this.subscriptions.push(this.customTemplatesService.messageReactionsTemplate$.subscribe(e=>this.messageReactionsTemplate=e)),this.subscriptions.push(this.customTemplatesService.deliveredStatusTemplate$.subscribe(e=>this.customDeliveredStatusTemplate=e)),this.subscriptions.push(this.customTemplatesService.sendingStatusTemplate$.subscribe(e=>this.customSendingStatusTemplate=e)),this.subscriptions.push(this.customTemplatesService.readStatusTemplate$.subscribe(e=>this.customReadStatusTemplate=e))}ngOnChanges(e){var n,s;if(e.message){this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.createMessageParts();const r=null===(s=null===(n=this.message)||void 0===n?void 0:n.quoted_message)||void 0===s?void 0:s.attachments;this.quotedMessageAttachments=r&&r.length?[r[0]]:[]}e.enabledMessageActions&&(this.canReactToMessage=-1!==this.enabledMessageActions.indexOf("send-reaction"),this.canReceiveReadEvents=-1!==this.enabledMessageActions.indexOf("read-events"))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get shouldDisplayThreadLink(){var e;return!(null===(e=this.message)||void 0===e||!e.reply_count)&&"thread"!==this.mode&&-1!==this.enabledMessageActions.indexOf("send-reply")}get isSentByCurrentUser(){var e,n,s;return(null===(n=null===(e=this.message)||void 0===e?void 0:e.user)||void 0===n?void 0:n.id)===(null===(s=this.user)||void 0===s?void 0:s.id)}get readByText(){return Vn(this.message.readBy)}get lastReadUser(){var e;return null===(e=this.message)||void 0===e?void 0:e.readBy.filter(n=>{var s;return n.id!==(null===(s=this.user)||void 0===s?void 0:s.id)})[0]}get isOnlyReadByMe(){return this.message&&0===this.message.readBy.length}get isReadByMultipleUsers(){return this.message&&this.message.readBy.length>1}get isMessageDeliveredAndRead(){return this.message&&this.message.readBy&&"received"===this.message.status&&this.message.readBy.length>0}get parsedDate(){var e;if(this.message&&null!==(e=this.message)&&void 0!==e&&e.created_at)return(i=>Oi()(i).calendar())(this.message.created_at)}get areOptionsVisible(){return!!this.message&&!(!this.message.type||"error"===this.message.type||"system"===this.message.type||"ephemeral"===this.message.type||"failed"===this.message.status||"sending"===this.message.status||"thread"===this.mode&&!this.message.parent_id)}get hasAttachment(){var e;return!(null===(e=this.message)||void 0===e||!e.attachments||!this.message.attachments.length)}get hasReactions(){var e;return!(null===(e=this.message)||void 0===e||!e.reaction_counts)&&Object.keys(this.message.reaction_counts).length>0}get replyCountParam(){var e;return{replyCount:null===(e=this.message)||void 0===e?void 0:e.reply_count}}get canDisplayReadStatus(){return!1!==this.canReceiveReadEvents&&-1!==this.enabledMessageActions.indexOf("read-events")}getAttachmentListContext(){var e,n,s;return{messageId:(null===(e=this.message)||void 0===e?void 0:e.id)||"",attachments:(null===(n=this.message)||void 0===n?void 0:n.attachments)||[],parentMessageId:null===(s=this.message)||void 0===s?void 0:s.parent_id,imageModalStateChangeHandler:r=>this.imageAttachmentModalState=r}}getQuotedMessageAttachmentListContext(){var e,n,s,r;return{messageId:(null===(n=null===(e=this.message)||void 0===e?void 0:e.quoted_message)||void 0===n?void 0:n.id)||"",attachments:this.quotedMessageAttachments,parentMessageId:null===(r=null===(s=null==this?void 0:this.message)||void 0===s?void 0:s.quoted_message)||void 0===r?void 0:r.parent_id}}getMessageReactionsContext(){var e,n,s,r;return{messageReactionCounts:(null===(e=this.message)||void 0===e?void 0:e.reaction_counts)||{},latestReactions:(null===(n=this.message)||void 0===n?void 0:n.latest_reactions)||[],isSelectorOpen:this.isReactionSelectorOpen,isSelectorOpenChangeHandler:o=>this.isReactionSelectorOpen=o,messageId:null===(s=this.message)||void 0===s?void 0:s.id,ownReactions:(null===(r=this.message)||void 0===r?void 0:r.own_reactions)||[]}}resendMessage(){this.channelService.resendMessage(this.message)}setAsActiveParentMessage(){this.channelService.setAsActiveParentMessage(this.message)}getMentionContext(e){return{content:e.content,user:e.user}}getMessageActionsBoxContext(){return{isOpen:this.isActionBoxOpen,isMine:this.isSentByCurrentUser,enabledActions:this.enabledMessageActions,message:this.message,displayedActionsCountChaneHanler:e=>{this.visibleMessageActionsCount=e,this.cdRef.detectChanges()},isEditingChangeHandler:e=>{this.isEditing=e,this.isActionBoxOpen=!this.isEditing}}}getDeliveredStatusContext(){return{message:this.message}}getSendingStatusContext(){return{message:this.message}}getReadStatusContext(){return{message:this.message,readByText:this.readByText}}jumpToMessage(e,n){this.channelService.jumpToMessage(e,n)}displayTranslatedMessage(){this.createMessageParts(!0)}displayOriginalMessage(){this.createMessageParts(!1)}createMessageParts(e=!0){let n=this.getMessageContent(e);if(n){let s=!1;if(n.startsWith("<p>")&&(n=n.replace("<p>",""),s=!0),n.endsWith("</p>\n")&&(n=n.replace("</p>\n",""),s=!0),this.message.mentioned_users&&0!==this.message.mentioned_users.length){this.messageTextParts=[];let r=n;this.message.mentioned_users.forEach(o=>{const l=`@${o.name||o.id}`;let c=r.substring(0,r.indexOf(l));c=this.fixEmojiDisplay(c),s||(c=this.wrapLinskWithAnchorTag(c)),this.messageTextParts.push({content:c,type:"text"}),this.messageTextParts.push({content:l,type:"mention",user:o}),r=r.replace(c+l,"")}),r&&(r=this.fixEmojiDisplay(r),s||(r=this.wrapLinskWithAnchorTag(r)),this.messageTextParts.push({content:r,type:"text"}))}else n=this.fixEmojiDisplay(n),s||(n=this.wrapLinskWithAnchorTag(n)),this.messageTextParts=[{content:n,type:"text"}]}else this.messageTextParts=[]}getMessageContent(e){var n,s,r;const o=(null===(n=this.message)||void 0===n?void 0:n.html)||(null===(s=this.message)||void 0===s?void 0:s.text);if(e){const l=null===(r=this.message)||void 0===r?void 0:r.translation;return l&&(this.shouldDisplayTranslationNotice=!0,this.displayedMessageTextContent="translation"),l||o}return this.displayedMessageTextContent="original",o}fixEmojiDisplay(e){const n=new RegExp(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,"g"),s=!!window.chrome&&typeof window.opr>"u";return e.replace(n,r=>`<span ${s?'class="str-chat__emoji-display-fix"':""}>${r}</span>`)}wrapLinskWithAnchorTag(e){return e.replace(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[A-Z0-9+&@#/%=~_|$])/gim,s=>`<a href="${s}" rel="nofollow">${s}</a>`)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(et),t.Y36(Ne),t.Y36(Je),t.Y36(t.sBO),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message"]],viewQuery:function(e,n){if(1&e&&t.Gf(us,5),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first)}},inputs:{message:"message",enabledMessageActions:"enabledMessageActions",isLastSentMessage:"isLastSentMessage",mode:"mode",isHighlighted:"isHighlighted"},features:[t.TTD],decls:17,vars:23,consts:[["data-testid","message-container",3,"mouseleave"],["container",""],[4,"ngIf","ngIfElse"],["deletedMessage",""],["systemMessage",""],["quotedMessage",""],["messageDateAndSender",""],["messageStatus",""],["replyCountButton",""],["attachmentsTemplate",""],[4,"ngIf"],["data-testid","avatar","type","user","location","message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","user"],[1,"str-chat__message-inner"],["class","str-chat__message-simple__actions str-chat__message-options","data-testid","message-options",3,"str-chat__message-edit-in-progress",4,"ngIf"],[1,"str-chat__message-reactions-host"],["defaultMessageReactions",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__message-bubble"],["class","str-chat__message-text","tabindex","0",4,"ngIf"],["class","str-chat__message-error-icon","icon","error",4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","message-options",1,"str-chat__message-simple__actions","str-chat__message-options"],["data-testid","message-actions-container",1,"str-chat__message-actions-container","str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--options",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","popperHideOnMouseLeave"],["messageActionsToggle",""],["popperContent",""],["defaultMessageActionsBox",""],["class","str-chat__message-actions-box-button","data-testid","action-icon",3,"click","keyup.enter",4,"ngIf"],["class","\n              str-chat__message-simple__actions__action\n              str-chat__message-simple__actions__action--thread\n              str-chat__message-reply-in-thread-button\n            ","data-testid","reply-in-thread",3,"click","keyup.enter",4,"ngIf"],["class","\n              str-chat__message-simple__actions__action\n              str-chat__message-simple__actions__action--reactions\n              str-chat__message-reactions-button\n            ","data-testid","reaction-icon",3,"click","keyup.enter",4,"ngIf"],[3,"isOpen","isMine","enabledActions","message","displayedActionsCount","isEditing"],["data-testid","action-icon",1,"str-chat__message-actions-box-button",3,"click","keyup.enter"],["icon","action-icon",1,"str-chat__message-action-icon"],["data-testid","reply-in-thread",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--thread","str-chat__message-reply-in-thread-button",3,"click","keyup.enter"],["icon","reply-in-thread",1,"str-chat__message-action-icon"],["data-testid","reaction-icon",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--reactions","str-chat__message-reactions-button",3,"click","keyup.enter"],["icon","reaction-icon",1,"str-chat__message-action-icon"],[3,"messageReactionCounts","latestReactions","isSelectorOpen","messageId","ownReactions","isSelectorOpenChange"],["tabindex","0",1,"str-chat__message-text"],["data-testid","inner-message",1,"str-chat__message-text-inner","str-chat__message-simple-text-inner",3,"click","keyup.enter"],["data-testid","client-error-message","class","\n                  str-chat__simple-message--error-message\n                  str-chat__message--error-message\n                ",4,"ngIf"],["data-testid","error-message","class","\n                  str-chat__simple-message--error-message\n                  str-chat__message--error-message\n                ",4,"ngIf"],["data-testid","text"],[4,"ngFor","ngForOf"],["data-testid","client-error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],["data-testid","error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],[3,"innerHTML",4,"ngIf","ngIfElse"],["mention",""],[3,"innerHTML"],["defaultMention",""],[1,"str-chat__message-mention"],["icon","error",1,"str-chat__message-error-icon"],["data-testid","message-deleted-component"],["translate","",1,"str-chat__message--deleted-inner"],["data-testid","system-message",1,"str-chat__message--system"],[1,"str-chat__message--system__text"],[1,"str-chat__message--system__line"],[1,"str-chat__message--system__date"],["class","quoted-message str-chat__quoted-message-preview","data-testid","quoted-message-container",3,"mine","click","keyup.enter",4,"ngIf"],["data-testid","quoted-message-container",1,"quoted-message","str-chat__quoted-message-preview",3,"click","keyup.enter"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",3,"innerHTML"],["defaultAttachments",""],[3,"messageId","attachments","parentMessageId","imageModalStateChange"],["class","str-chat__translation-notice","data-testid","translation-notice",4,"ngIf"],[1,"str-chat__message-data","str-chat__message-simple-data","str-chat__message-metadata"],["data-testid","sender","class","str-chat__message-simple-name str-chat__message-sender-name",4,"ngIf"],["data-testid","date",1,"str-chat__message-simple-timestamp"],["data-testid","translation-notice",1,"str-chat__translation-notice"],["data-testid","see-original","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-translation","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-original","translate","",3,"click","keyup.enter"],["data-testid","see-translation","translate","",3,"click","keyup.enter"],["data-testid","sender",1,"str-chat__message-simple-name","str-chat__message-sender-name"],["sentStatus",""],["deliveredStatus",""],["defaultDeliveredStatus",""],["sendingStatus",""],["defaultSendingStatus",""],["readStatus",""],["defaultReadStatus",""],["class","\n          str-chat__message-simple-status\n          str-chat__message-simple-status-angular\n          str-chat__message-status\n        ","data-testid","delivered-indicator","tabindex","0",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngIf"],["data-testid","delivered-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],[1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-testid","delivered-icon","icon","delivered-icon"],["data-testid","sending-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["data-testid","loading-indicator"],["data-testid","read-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["data-testid","read-by-tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-test-id","last-read-user-avatar","type","user","location","message-reader",1,"str-chat-angular__avatar-host",3,"size","imageUrl","name","user"],["data-test-id","read-by-length","class","str-chat__message-simple-status-number",4,"ngIf"],["data-test-id","read-by-length",1,"str-chat__message-simple-status-number"],["class","\n      str-chat__message-simple-reply-button\n      str-chat__message-replies-count-button-wrapper\n    ",4,"ngIf"],[1,"str-chat__message-simple-reply-button","str-chat__message-replies-count-button-wrapper"],["class","str-chat__message-replies-count-button","data-testid","reply-count-button",3,"click",4,"ngIf"],["data-testid","reply-count-button",1,"str-chat__message-replies-count-button",3,"click"],["stream-icon-placeholder","","icon","reply",4,"ngIf"],["stream-icon-placeholder","","icon","reply"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1),t.NdJ("mouseleave",function(){return n.isActionBoxOpen=!1}),t.YNc(2,uh,2,2,"ng-container",2),t.qZA(),t.YNc(3,dh,3,0,"ng-template",null,3,t.W1O),t.YNc(5,hh,8,2,"ng-template",null,4,t.W1O),t.YNc(7,_h,1,1,"ng-template",null,5,t.W1O),t.YNc(9,Mh,1,1,"ng-template",null,6,t.W1O),t.YNc(11,Hh,1,1,"ng-template",null,7,t.W1O),t.YNc(13,Vh,1,1,"ng-template",null,8,t.W1O),t.YNc(15,zh,3,2,"ng-template",null,9,t.W1O)),2&e){const s=t.MAs(4);t.IyS("str-chat__message-simple str-chat__message str-chat__message--",null==n.message?null:n.message.type," str-chat__message--",null==n.message?null:n.message.status," ",null!=n.message&&n.message.text?"str-chat__message--has-text":"has-no-text",""),t.ekj("str-chat__message--me",n.isSentByCurrentUser)("str-chat__message--other",!n.isSentByCurrentUser)("str-chat__message-simple--me",n.isSentByCurrentUser)("str-chat__message--has-attachment",n.hasAttachment)("str-chat__message--with-reactions",n.hasReactions)("str-chat__message--highlighted",n.isHighlighted)("str-chat__message-with-thread-link",n.shouldDisplayThreadLink)("str-chat__message-send-can-be-retried","failed"===(null==n.message?null:n.message.status)&&403!==(null==n.message?null:n.message.errorStatusCode)),t.xp6(2),t.Q6J("ngIf",!(null!=n.message&&n.message.deleted_at))("ngIfElse",s)}},dependencies:[Ut,Bn,Lp,wt,jp,ws,qn,f.O5,f.tP,Ie,f.sg,Me.Pi,Me.X$],encapsulation:2}),i})(),Hp=(()=>{class i{constructor(){}transliterate(e){return function Qo(i,a){if("string"!=typeof i)throw new TypeError(`Expected a string, got \`${typeof i}\``);a=Nn({customReplacements:[]},a);const e=new Map([...Vo,...a.customReplacements]);return i=((n,s)=>{for(const[r,o]of s)n=n.replace(new RegExp(Jo(r),"g"),o);return n})(i=i.normalize(),e),qo(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qp=(()=>{class i{constructor(e,n,s,r,o,l){this.channelService=e,this.chatClientService=n,this.transliterationService=s,this.emojiInputService=r,this.customTemplatesService=o,this.themeService=l,this.class="str-chat__textarea str-chat__message-textarea-angular-host",this.value="",this.placeholder="",this.areMentionsEnabled=!0,this.mentionScope="channel",this.valueChange=new t.vpe,this.send=new t.vpe,this.userMentions=new t.vpe,this.autocompleteKey="autocompleteLabel",this.mentionTriggerChar="@",this.commandTriggerChar="/",this.autocompleteConfig={mentions:[]},this.subscriptions=[],this.mentionedUsers=[],this.userMentionConfig={triggerChar:this.mentionTriggerChar,dropUp:!0,labelKey:this.autocompleteKey,returnTrigger:!0,mentionFilter:(c,u)=>this.filter(c,u),mentionSelect:(c,u)=>this.itemSelectedFromAutocompleteList(c,u)},this.slashCommandConfig={triggerChar:this.commandTriggerChar,dropUp:!0,labelKey:"name",returnTrigger:!0,mentionFilter:(c,u)=>this.filter(c,u),mentionSelect:(c,u)=>this.itemSelectedFromAutocompleteList(c,u)},this.searchTerm$=new ae.X(""),this.searchTerm$.pipe((0,vr.b)(300),(0,Ii.x)()).subscribe(c=>{c.startsWith(this.mentionTriggerChar)&&this.updateMentionOptions(c)}),this.subscriptions.push(this.channelService.activeChannel$.subscribe(c=>{var u;const d=(null===(u=c?.getConfig())||void 0===u?void 0:u.commands)||[];this.slashCommandConfig.items=d.map(g=>Object.assign(Object.assign({},g),{[this.autocompleteKey]:g.name,type:"command"})),this.mentionedUsers=[],this.userMentions.next([...this.mentionedUsers]),this.updateMentionOptions(this.searchTerm$.getValue())})),this.subscriptions.push(this.emojiInputService.emojiInput$.subscribe(c=>{this.messageInput.nativeElement.focus();const{selectionStart:u}=this.messageInput.nativeElement;this.messageInput.nativeElement.setRangeText(c),this.messageInput.nativeElement.selectionStart=u+c.length,this.messageInput.nativeElement.selectionEnd=u+c.length,this.inputChanged()})),this.subscriptions.push(this.customTemplatesService.mentionAutocompleteItemTemplate$.subscribe(c=>this.mentionAutocompleteItemTemplate=c)),this.subscriptions.push(this.customTemplatesService.commandAutocompleteItemTemplate$.subscribe(c=>this.commandAutocompleteItemTemplate=c)),this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.themeVersion=this.themeService.themeVersion}ngOnChanges(e){e.areMentionsEnabled&&(this.areMentionsEnabled?(this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)):(this.autocompleteConfig.mentions=[this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig))),e.mentionScope&&this.updateMentionOptions(this.searchTerm$.getValue()),e.value&&!this.value&&this.messageInput&&(this.messageInput.nativeElement.style.height="auto")}ngAfterViewInit(){this.messageInput.nativeElement.scrollHeight>0&&this.adjustTextareaHeight()}filter(e,n){return n.filter(s=>this.transliterate(s.autocompleteLabel.toLowerCase()).includes(this.transliterate(e.toLowerCase())))}itemSelectedFromAutocompleteList(e,n=""){return n===this.mentionTriggerChar&&(this.mentionedUsers.push(e.user?e.user:e),this.userMentions.next([...this.mentionedUsers])),n+e.autocompleteLabel+(n===this.commandTriggerChar?" ":"")}autcompleteSearchTermChanged(e){e===this.mentionTriggerChar?this.updateMentionOptions():this.searchTerm$.next(e)}inputChanged(){this.valueChange.emit(this.messageInput.nativeElement.value),this.adjustTextareaHeight()}inputLeft(){this.updateMentionedUsersFromText()}enterHit(e){"desktop"===this.inputMode&&(e.preventDefault(),this.updateMentionedUsersFromText(),this.send.next())}adjustTextareaHeight(){"2"===this.themeVersion&&(this.messageInput.nativeElement.style.height="",this.messageInput.nativeElement.style.height=`${this.messageInput.nativeElement.scrollHeight}px`)}transliterate(e){return this.transliterationService?this.transliterationService.transliterate(e):e}updateMentionOptions(e){return(0,re.mG)(this,void 0,void 0,function*(){if(!this.areMentionsEnabled)return;e=e?.replace(this.mentionTriggerChar,"");const s=yield("application"===this.mentionScope?o=>this.chatClientService.autocompleteUsers(o):o=>this.channelService.autocompleteMembers(o))(e||""),r=this.filter(e||"",s.map(o=>{const l=o.user?o.user:o;return Object.assign(Object.assign({},o),{autocompleteLabel:l.name||l.id,type:"mention"})}));this.userMentionConfig.items=r,this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)})}updateMentionedUsersFromText(){const e=[];this.mentionedUsers.forEach(n=>{this.value.includes(`${this.mentionTriggerChar}${n.name||n.id}`)&&e.push(n)}),e.length!==this.mentionedUsers.length&&(this.userMentions.next([...e]),this.mentionedUsers=e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(et),t.Y36(Hp),t.Y36(Yn),t.Y36(Je),t.Y36(ut))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-autocomplete-textarea"]],viewQuery:function(e,n){if(1&e&&t.Gf(Wh,5),2&e){let s;t.iGM(s=t.CRH())&&(n.messageInput=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{value:"value",placeholder:"placeholder",areMentionsEnabled:"areMentionsEnabled",inputMode:"inputMode",mentionScope:"mentionScope"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[t.TTD],decls:9,vars:6,consts:[["autofocus","","data-testid","textarea","rows","1",1,"rta__textarea","str-chat__textarea__textarea","str-chat__angular-textarea","str-chat__message-textarea",3,"value","placeholder","mentionConfig","mentionListTemplate","input","keydown.enter","searchTerm","blur"],["input",""],["autocompleteItem",""],["defaultCommandTemplate",""],["defaultMentionTemplate",""],[1,"rta","rta__item","str-chat__emojisearch__item",3,"ngSwitch"],["class","rta__entity",4,"ngSwitchCase"],[1,"rta__entity"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__slash-command"],[1,"str-chat__slash-command-header"],["data-testclass","command-name",1,"str-chat__slash-command-name"],[1,"str-chat__slash-command-args"],[1,"str-chat__user-item"],["data-testclass","avatar","type","user","location","autocomplete-item",1,"str-chat__avatar","str-chat__avatar--circle",3,"size","imageUrl","name","user"],["data-testclass","username",1,"str-chat__user-item--name"],["class","str-chat__user-item-at",4,"ngIf"],[1,"str-chat__user-item-at"]],template:function(e,n){if(1&e&&(t.TgZ(0,"textarea",0,1),t.NdJ("input",function(){return n.inputChanged()})("keydown.enter",function(r){return n.enterHit(r)})("searchTerm",function(r){return n.autcompleteSearchTermChanged(r)})("blur",function(){return n.inputLeft()}),t.ALo(2,"translate"),t.qZA(),t.YNc(3,np,3,3,"ng-template",null,2,t.W1O),t.YNc(5,ip,7,3,"ng-template",null,3,t.W1O),t.YNc(7,ap,5,8,"ng-template",null,4,t.W1O)),2&e){const s=t.MAs(4);t.s9C("placeholder",t.lcZ(2,4,n.placeholder)),t.Q6J("value",n.value||"")("mentionConfig",n.autocompleteConfig)("mentionListTemplate",s)}},dependencies:[Ut,pl,f.RF,f.n9,f.tP,f.O5,Me.X$],encapsulation:2}),i})();const Ms=(i,a)=>i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()&&i.getDate()===a.getDate();let Jp=(()=>{class i{constructor(e,n,s){this.channelService=e,this.chatClientService=n,this.customTemplatesService=s,this.mode="main",this.direction="bottom-to-top",this.messageOptionsTrigger="message-row",this.enabledMessageActions=[],this.class="str-chat-angular__main-panel-inner str-chat-angular__message-list-host str-chat__main-panel-inner",this.unreadMessageCount=0,this.groupStyles=[],this.isLoading=!1,this.subscriptions=[],this.isLatestMessageInList=!0,this.subscriptions.push(this.channelService.activeChannel$.subscribe(r=>{var o,l;this.resetScrollState();const c=null===(o=r?.data)||void 0===o?void 0:o.own_capabilities;c&&(this.enabledMessageActions=c),null===(l=this.newMessageSubscription)||void 0===l||l.unsubscribe(),r&&(this.newMessageSubscription=r.on("message.new",u=>{!u.message||r.state.messages===r.state.latestMessages||"thread"===this.mode||this.newMessageReceived({id:u.message.id,user:u.message.user,created_at:new Date(u.message.created_at||"")})}))})),this.subscriptions.push(this.channelService.activeParentMessage$.subscribe(r=>{r&&this.parentMessage&&r.id!==this.parentMessage.id&&"thread"===this.mode&&this.resetScrollState(),this.parentMessage=r})),this.subscriptions.push(this.customTemplatesService.messageTemplate$.subscribe(r=>this.messageTemplate=r)),this.subscriptions.push(this.customTemplatesService.typingIndicatorTemplate$.subscribe(r=>this.typingIndicatorTemplate=r)),this.usersTypingInChannel$=this.channelService.usersTypingInChannel$,this.usersTypingInThread$=this.channelService.usersTypingInThread$}ngOnInit(){this.setMessages$()}ngOnChanges(e){var n;(e.mode||e.direction)&&this.setMessages$(),e.direction&&null!==(n=this.scrollContainer)&&void 0!==n&&n.nativeElement&&this.jumpToLatestMessage()}ngAfterViewInit(){this.subscriptions.push(this.channelService.jumpToMessage$.pipe((0,tn.h)(e=>!!e.id)).subscribe(e=>{let n;"main"===this.mode?n=e.parentId||e.id:e.parentId&&(n=e.id),n&&("latest"===n?this.scrollToLatestMessage():(this.scrollMessageIntoView(n),this.highlightedMessageId=n))}))}ngAfterViewChecked(){this.highlightedMessageId&&(this.hasNewMessages=!1,this.olderMassagesLoaded=!1),"top-to-bottom"===this.direction?this.hasNewMessages&&(this.isNewMessageSentByUser||!this.isUserScrolled)&&(this.isLatestMessageInList?this.scrollToTop():this.jumpToLatestMessage(),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.hasNewMessages?((!this.isUserScrolled||this.isNewMessageSentByUser)&&(this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage()),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.olderMassagesLoaded?(this.preserveScrollbarPosition(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,this.olderMassagesLoaded=!1):"bottom"!==this.getScrollPosition()&&!this.isUserScrolled&&!this.highlightedMessageId&&(this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight)}ngOnDestroy(){var e;this.subscriptions.forEach(n=>n.unsubscribe()),null===(e=this.newMessageSubscription)||void 0===e||e.unsubscribe()}trackByMessageId(e,n){return n.id}trackByUserId(e,n){return n.id}jumpToLatestMessage(){var e;this.channelService.jumpToMessage("latest","thread"===this.mode?null===(e=this.parentMessage)||void 0===e?void 0:e.id:void 0)}scrollToBottom(){this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}scrollToTop(){this.scrollContainer.nativeElement.scrollTop=0}scrolled(){if(this.scrollContainer.nativeElement.scrollHeight===this.scrollContainer.nativeElement.clientHeight)return;const e=this.getScrollPosition();if(this.isUserScrolled=("bottom-to-top"===this.direction?"bottom"!==e:"top"!==e)||!this.isLatestMessageInList,this.isUserScrolled||(this.unreadMessageCount=0),this.shouldLoadMoreMessages(e)){let n;this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,n="top-to-bottom"===this.direction?"top"===e?"newer":"older":"top"===e?"older":"newer","main"===this.mode?this.channelService.loadMoreMessages(n):this.channelService.loadMoreThreadReplies(n),this.isLoading=!0}this.prevScrollTop=this.scrollContainer.nativeElement.scrollTop}getTypingIndicatorContext(){return{usersTyping$:this.usersTyping$}}getMessageContext(e){return{message:e,isLastSentMessage:!(!this.lastSentMessageId||e?.id!==this.lastSentMessageId),enabledMessageActions:this.enabledMessageActions,mode:this.mode,isHighlighted:e?.id===this.highlightedMessageId}}getTypingIndicatorText(e){return Vn(e)}get replyCountParam(){var e;return{replyCount:null===(e=this.parentMessage)||void 0===e?void 0:e.reply_count}}preserveScrollbarPosition(){this.scrollContainer.nativeElement.scrollTop=(this.prevScrollTop||0)+(this.scrollContainer.nativeElement.scrollHeight-this.containerHeight)}getScrollPosition(){var e,n;let s="middle";return Math.floor(this.scrollContainer.nativeElement.scrollTop)<=((null===(e=this.parentMessageElement)||void 0===e?void 0:e.nativeElement.clientHeight)||0)&&(void 0===this.prevScrollTop||this.prevScrollTop>((null===(n=this.parentMessageElement)||void 0===n?void 0:n.nativeElement.clientHeight)||0))?s="top":Math.ceil(this.scrollContainer.nativeElement.scrollTop)+this.scrollContainer.nativeElement.clientHeight>=this.scrollContainer.nativeElement.scrollHeight&&(s="bottom"),s}shouldLoadMoreMessages(e){return"middle"!==e&&!this.highlightedMessageId}setMessages$(){this.messages$=("main"===this.mode?this.channelService.activeChannelMessages$:this.channelService.activeThreadMessages$).pipe((0,F.b)(e=>{if(this.isLoading=!1,0===e.length)return;this.newMessageReceived(e[e.length-1]);const s=e[0];this.oldestMessage&&e.find(r=>r.id===this.oldestMessage.id)?this.oldestMessage.created_at.getTime()>s.created_at.getTime()&&(this.oldestMessage=s,this.olderMassagesLoaded=!0):this.oldestMessage=s}),(0,F.b)(e=>{var n;return this.lastSentMessageId=null===(n=[...e].reverse().find(s=>{var r,o,l;return(null===(r=s.user)||void 0===r?void 0:r.id)===(null===(l=null===(o=this.chatClientService.chatClient)||void 0===o?void 0:o.user)||void 0===l?void 0:l.id)&&"sending"!==s.status}))||void 0===n?void 0:n.id}),(0,F.b)(e=>{this.isLatestMessageInList=!this.latestMessage||0===e.length||e[e.length-1].id===this.latestMessage.id,this.isLatestMessageInList||(this.isUserScrolled=!0)}),(0,w.U)(e=>"bottom-to-top"===this.direction?e:[...e].reverse()),(0,F.b)(e=>{this.groupStyles=e.map((n,s)=>((i,a,e,n=!1)=>{var s,r,o,l,c,u;if(n||i.attachments&&0!==i.attachments.length)return"single";const d=!a||!Ms(a.created_at,i.created_at)||"system"===a.type||a.attachments&&0!==(null===(s=a.attachments)||void 0===s?void 0:s.length)||(null===(r=i.user)||void 0===r?void 0:r.id)!==(null===(o=a.user)||void 0===o?void 0:o.id)||"error"===a.type||a.deleted_at||i.reaction_counts&&Object.keys(i.reaction_counts).length>0,g=!e||!Ms(i.created_at,e.created_at)||"system"===e.type||e.attachments&&0!==(null===(l=e.attachments)||void 0===l?void 0:l.length)||(null===(c=i.user)||void 0===c?void 0:c.id)!==(null===(u=e.user)||void 0===u?void 0:u.id)||"error"===e.type||e.deleted_at||e.reaction_counts&&Object.keys(e.reaction_counts).length>0;return d||g?g?d||i.deleted_at||"error"===i.type?"single":"bottom":d?"top":"":i.deleted_at||"error"===i.type?"single":"middle"})(n,e[s-1],e[s+1]))}))}resetScrollState(){this.latestMessage=void 0,this.hasNewMessages=!0,this.isUserScrolled=!1,this.containerHeight=void 0,this.olderMassagesLoaded=!1,this.oldestMessage=void 0,this.unreadMessageCount=0,this.prevScrollTop=void 0,this.isNewMessageSentByUser=void 0,this.isLatestMessageInList=!0}get usersTyping$(){return"thread"===this.mode?this.usersTypingInThread$:this.usersTypingInChannel$}scrollMessageIntoView(e,n=!0){const s=document.getElementById(e);!s&&n?setTimeout(()=>this.scrollMessageIntoView(e,!1)):s&&(s.scrollIntoView({block:"center"}),setTimeout(()=>{this.highlightedMessageId=void 0},1e3))}scrollToLatestMessage(e=!0){document.getElementById(this.latestMessage.id)?"bottom-to-top"===this.direction?this.scrollToBottom():this.scrollToTop():e&&setTimeout(()=>this.scrollToLatestMessage(!1),0)}newMessageReceived(e){var n,s,r,o;(!this.latestMessage||(null===(n=this.latestMessage.created_at)||void 0===n?void 0:n.getTime())<e.created_at.getTime())&&(this.latestMessage=e,this.hasNewMessages=!0,this.isNewMessageSentByUser=(null===(s=e.user)||void 0===s?void 0:s.id)===(null===(o=null===(r=this.chatClientService.chatClient)||void 0===r?void 0:r.user)||void 0===o?void 0:o.id),this.isUserScrolled&&this.unreadMessageCount++)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ne),t.Y36(et),t.Y36(Je))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(rp,5),t.Gf(op,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.scrollContainer=s.first),t.iGM(s=t.CRH())&&(n.parentMessageElement=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{mode:"mode",direction:"direction",messageOptionsTrigger:"messageOptionsTrigger"},features:[t.TTD],decls:16,vars:12,consts:[["data-testid","scroll-container",1,"str-chat__list",3,"scroll"],["scrollContainer",""],[1,"str-chat__reverse-infinite-scroll","str-chat__message-list-scroll"],[1,"str-chat__ul"],["data-testid","parent-message","class","str-chat__parent-message-li",4,"ngIf"],["data-testid","top-loading-indicator",4,"ngIf"],["tabindex","0","data-testclass","message",3,"class","id",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","bottom-loading-indicator",4,"ngIf"],["defaultTypingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__jump-to-latest-message"],["data-testid","scroll-to-latest","class","\n      str-chat__message-notification-scroll-to-latest\n      str-chat__message-notification-scroll-to-latest-right\n      str-chat__circle-fab\n    ",3,"keyup.enter","click",4,"ngIf"],["messageTemplateContainer",""],["data-testid","parent-message",1,"str-chat__parent-message-li"],["parentMessageElement",""],["data-testid","reply-count",1,"str-chat__thread-start"],["data-testid","top-loading-indicator"],["tabindex","0","data-testclass","message",3,"id"],["data-testid","bottom-loading-indicator"],[4,"ngIf"],["data-testid","typing-indicator","class","str-chat__typing-indicator str-chat__typing-indicator--typing",4,"ngIf"],["data-testid","typing-indicator",1,"str-chat__typing-indicator","str-chat__typing-indicator--typing"],[1,"str-chat__typing-indicator__dots"],[1,"str-chat__typing-indicator__dot"],["data-testid","typing-users",1,"str-chat__typing-indicator__users"],["data-testid","scroll-to-latest",1,"str-chat__message-notification-scroll-to-latest","str-chat__message-notification-scroll-to-latest-right","str-chat__circle-fab",3,"keyup.enter","click"],[1,"str-chat__jump-to-latest-icon","str-chat__circle-fab-icon",3,"icon"],["class","\n        str-chat__message-notification\n        str-chat__message-notification-scroll-to-latest-unread-count\n        str-chat__jump-to-latest-unread-count\n      ",4,"ngIf"],[1,"str-chat__message-notification","str-chat__message-notification-scroll-to-latest-unread-count","str-chat__jump-to-latest-unread-count"],["defaultMessageTemplate",""],[3,"message","isLastSentMessage","enabledMessageActions","mode","isHighlighted"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1),t.NdJ("scroll",function(){return n.scrolled()}),t.TgZ(2,"div",2)(3,"ul",3),t.YNc(4,cp,7,10,"li",4),t.YNc(5,up,1,0,"stream-loading-indicator",5),t.YNc(6,hp,2,8,"li",6),t.ALo(7,"async"),t.YNc(8,pp,1,0,"stream-loading-indicator",7),t.qZA(),t.YNc(9,vp,2,3,"ng-template",null,8,t.W1O),t.YNc(11,Cp,1,0,"ng-container",9),t.qZA()(),t.TgZ(12,"div",10),t.YNc(13,wp,3,2,"button",11),t.qZA(),t.YNc(14,Tp,3,2,"ng-template",null,12,t.W1O)),2&e){const s=t.MAs(10);t.xp6(3),t.ekj("str-chat__message-options-in-bubble","message-bubble"===n.messageOptionsTrigger),t.xp6(1),t.Q6J("ngIf","thread"===n.mode),t.xp6(1),t.Q6J("ngIf",n.isLoading&&"bottom-to-top"===n.direction),t.xp6(1),t.Q6J("ngForOf",t.lcZ(7,10,n.messages$))("ngForTrackBy",n.trackByMessageId),t.xp6(2),t.Q6J("ngIf",n.isLoading&&"top-to-bottom"===n.direction),t.xp6(3),t.Q6J("ngTemplateOutlet",n.typingIndicatorTemplate||s)("ngTemplateOutletContext",n.getTypingIndicatorContext()),t.xp6(2),t.Q6J("ngIf",n.isUserScrolled)}},dependencies:[_s,gn,$p,f.O5,f.tP,f.sg,Me.X$,f.Ov],encapsulation:2}),i})(),Qn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,Me.aw]]}),i})(),Vp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,Me.aw,Qn,Ho],Qn]}),i})(),Qp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:Cs,useValue:qp}],imports:[[f.ez,Me.aw,gl,Qn]]}),i})();var Gp=_(6851);function zp(i,a){1&i&&(t.TgZ(0,"div",2)(1,"stream-channel-list")(2,"button",3),t._UZ(3,"i",4),t.qZA()(),t.TgZ(4,"stream-channel"),t._UZ(5,"stream-channel-header")(6,"stream-message-list")(7,"stream-notification-list")(8,"stream-message-input"),t.qZA()()),2&i&&(t.xp6(3),t.Udp("font-size","1.3rem"))}function Wp(i,a){1&i&&(t.TgZ(0,"div"),t._uU(1," Chat is not available. "),t.qZA())}const Kp=[{path:"",component:(()=>{class i{constructor(e,n,s,r){(0,h.Z)(this,"_chatService",void 0),(0,h.Z)(this,"_channelService",void 0),(0,h.Z)(this,"_streamI18nService",void 0),(0,h.Z)(this,"_auth",void 0),(0,h.Z)(this,"chatIsReady$",void 0),this._chatService=e,this._channelService=n,this._streamI18nService=s,this._auth=r}ngOnInit(){this._streamI18nService.setTranslation(),this.chatIsReady$=this._auth.getUserToken().pipe((0,ni.w)(e=>this._chatService.init(Xs.Z.streamApp.key,this._auth.currentUser.uid,e)),(0,ni.w)(()=>this._channelService.init({type:"messaging",members:{$in:[this._auth.currentUser.uid]}})),(0,w.U)(()=>!0),(0,E.K)(()=>(0,T.of)(!1))),this._channelService.channels$.subscribe(e=>console.log(e))}ngOnDestroy(){var e=this;return(0,b.Z)(function*(){e._channelService.reset(),yield e._chatService.disconnectUser()})()}}return(0,h.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(et),t.Y36(Ne),t.Y36(Fp),t.Y36(Gp.e8))}),(0,h.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-chat-page"]],decls:4,vars:4,consts:[["class","chat-container",4,"ngIf","ngIfElse"],["unavailable",""],[1,"chat-container"],["mat-fab","","color","primary","channel-list-bottom","","matTooltip","Start messaging",1,"create-channel-btn"],[1,"pi","pi-plus"]],template:function(e,n){if(1&e&&(t.YNc(0,zp,9,2,"div",0),t.ALo(1,"async"),t.YNc(2,Wp,2,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.chatIsReady$))("ngIfElse",s)}},dependencies:[f.O5,Up,Zp,Pp,Ds,Jp,Jn,I.cs,Gs,f.Ov],styles:["[_nghost-%COMP%]{display:block;height:100%}.chat-container[_ngcontent-%COMP%]{display:flex;height:100%}.chat-container[_ngcontent-%COMP%]   stream-channel-list[_ngcontent-%COMP%]{width:30%}.chat-container[_ngcontent-%COMP%]   stream-channel-list[_ngcontent-%COMP%]   .create-channel-btn[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px;z-index:100}.chat-container[_ngcontent-%COMP%]   stream-channel[_ngcontent-%COMP%]{width:100%}.chat-container[_ngcontent-%COMP%]   stream-thread[_ngcontent-%COMP%]{width:45%}.chat-container[_ngcontent-%COMP%]     .str-chat__channel-list-messenger__main{position:relative}"],changeDetection:0})),i})()}];let Xp=(()=>{class i{}return(0,h.Z)(i,"\u0275fac",function(e){return new(e||i)}),(0,h.Z)(i,"\u0275mod",t.oAB({type:i})),(0,h.Z)(i,"\u0275inj",t.cJS({imports:[ti.Bz.forChild(Kp),ti.Bz]})),i})(),eg=(()=>{class i{}return(0,h.Z)(i,"\u0275fac",function(e){return new(e||i)}),(0,h.Z)(i,"\u0275mod",t.oAB({type:i})),(0,h.Z)(i,"\u0275inj",t.cJS({imports:[f.ez,Xp,Me.aw.forChild(),Vp,Qp,I.ot,be,Ks]})),i})()},3014:(L,W,_)=>{L.exports=_(7114)},7729:(L,W,_)=>{"use strict";var h=_(4701),I=_(858),t=_(5738),y=_(1625),f=_(5215),T=_(2099),k=_(6100),x=_(5593),F=_(3324),w=_(1413);L.exports=function(S){return new Promise(function(N,V){var X,K=S.data,ne=S.headers,ue=S.responseType;function ce(){S.cancelToken&&S.cancelToken.unsubscribe(X),S.signal&&S.signal.removeEventListener("abort",X)}h.isFormData(K)&&delete ne["Content-Type"];var j=new XMLHttpRequest;if(S.auth){var Y=S.auth.username||"",ie=S.auth.password?unescape(encodeURIComponent(S.auth.password)):"";ne.Authorization="Basic "+btoa(Y+":"+ie)}var Se=f(S.baseURL,S.url);function Z(){if(j){var O="getAllResponseHeaders"in j?T(j.getAllResponseHeaders()):null;I(function(M){N(M),ce()},function(M){V(M),ce()},{data:ue&&"text"!==ue&&"json"!==ue?j.response:j.responseText,status:j.status,statusText:j.statusText,headers:O,config:S,request:j}),j=null}}if(j.open(S.method.toUpperCase(),y(Se,S.params,S.paramsSerializer),!0),j.timeout=S.timeout,"onloadend"in j?j.onloadend=Z:j.onreadystatechange=function(){!j||4!==j.readyState||0===j.status&&(!j.responseURL||0!==j.responseURL.indexOf("file:"))||setTimeout(Z)},j.onabort=function(){j&&(V(x("Request aborted",S,"ECONNABORTED",j)),j=null)},j.onerror=function(){V(x("Network Error",S,null,j)),j=null},j.ontimeout=function(){var U="timeout of "+S.timeout+"ms exceeded";S.timeoutErrorMessage&&(U=S.timeoutErrorMessage),V(x(U,S,(S.transitional||F.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",j)),j=null},h.isStandardBrowserEnv()){var G=(S.withCredentials||k(Se))&&S.xsrfCookieName?t.read(S.xsrfCookieName):void 0;G&&(ne[S.xsrfHeaderName]=G)}"setRequestHeader"in j&&h.forEach(ne,function(U,H){typeof K>"u"&&"content-type"===H.toLowerCase()?delete ne[H]:j.setRequestHeader(H,U)}),h.isUndefined(S.withCredentials)||(j.withCredentials=!!S.withCredentials),ue&&"json"!==ue&&(j.responseType=S.responseType),"function"==typeof S.onDownloadProgress&&j.addEventListener("progress",S.onDownloadProgress),"function"==typeof S.onUploadProgress&&j.upload&&j.upload.addEventListener("progress",S.onUploadProgress),(S.cancelToken||S.signal)&&(X=function(O){j&&(V(!O||O&&O.type?new w("canceled"):O),j.abort(),j=null)},S.cancelToken&&S.cancelToken.subscribe(X),S.signal&&(S.signal.aborted?X():S.signal.addEventListener("abort",X))),K||(K=null),j.send(K)})}},7114:(L,W,_)=>{"use strict";var h=_(4701),I=_(2414),t=_(6490),y=_(2971),k=function T(x){var F=new t(x),w=I(t.prototype.request,F);return h.extend(w,t.prototype,F),h.extend(w,F),w.create=function(S){return T(y(x,S))},w}(_(3324));k.Axios=t,k.Cancel=_(1413),k.CancelToken=_(3056),k.isCancel=_(8827),k.VERSION=_(1773).version,k.all=function(F){return Promise.all(F)},k.spread=_(9211),k.isAxiosError=_(4603),L.exports=k,L.exports.default=k},1413:L=>{"use strict";function W(_){this.message=_}W.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},W.prototype.__CANCEL__=!0,L.exports=W},3056:(L,W,_)=>{"use strict";var h=_(1413);function I(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var y;this.promise=new Promise(function(k){y=k});var f=this;this.promise.then(function(T){if(f._listeners){var k,x=f._listeners.length;for(k=0;k<x;k++)f._listeners[k](T);f._listeners=null}}),this.promise.then=function(T){var k,x=new Promise(function(F){f.subscribe(F),k=F}).then(T);return x.cancel=function(){f.unsubscribe(k)},x},t(function(k){f.reason||(f.reason=new h(k),y(f.reason))})}I.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},I.prototype.subscribe=function(y){this.reason?y(this.reason):this._listeners?this._listeners.push(y):this._listeners=[y]},I.prototype.unsubscribe=function(y){if(this._listeners){var f=this._listeners.indexOf(y);-1!==f&&this._listeners.splice(f,1)}},I.source=function(){var y;return{token:new I(function(k){y=k}),cancel:y}},L.exports=I},8827:L=>{"use strict";L.exports=function(_){return!(!_||!_.__CANCEL__)}},6490:(L,W,_)=>{"use strict";var h=_(4701),I=_(1625),t=_(607),y=_(957),f=_(2971),T=_(4828),k=T.validators;function x(F){this.defaults=F,this.interceptors={request:new t,response:new t}}x.prototype.request=function(w){"string"==typeof w?(w=arguments[1]||{}).url=arguments[0]:w=w||{},(w=f(this.defaults,w)).method=w.method?w.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var E=w.transitional;void 0!==E&&T.assertOptions(E,{silentJSONParsing:k.transitional(k.boolean),forcedJSONParsing:k.transitional(k.boolean),clarifyTimeoutError:k.transitional(k.boolean)},!1);var S=[],le=!0;this.interceptors.request.forEach(function(j){"function"==typeof j.runWhen&&!1===j.runWhen(w)||(le=le&&j.synchronous,S.unshift(j.fulfilled,j.rejected))});var V,N=[];if(this.interceptors.response.forEach(function(j){N.push(j.fulfilled,j.rejected)}),!le){var K=[y,void 0];for(Array.prototype.unshift.apply(K,S),K=K.concat(N),V=Promise.resolve(w);K.length;)V=V.then(K.shift(),K.shift());return V}for(var ne=w;S.length;){var ue=S.shift(),X=S.shift();try{ne=ue(ne)}catch(ce){X(ce);break}}try{V=y(ne)}catch(ce){return Promise.reject(ce)}for(;N.length;)V=V.then(N.shift(),N.shift());return V},x.prototype.getUri=function(w){return w=f(this.defaults,w),I(w.url,w.params,w.paramsSerializer).replace(/^\?/,"")},h.forEach(["delete","get","head","options"],function(w){x.prototype[w]=function(E,S){return this.request(f(S||{},{method:w,url:E,data:(S||{}).data}))}}),h.forEach(["post","put","patch"],function(w){x.prototype[w]=function(E,S,le){return this.request(f(le||{},{method:w,url:E,data:S}))}}),L.exports=x},607:(L,W,_)=>{"use strict";var h=_(4701);function I(){this.handlers=[]}I.prototype.use=function(y,f,T){return this.handlers.push({fulfilled:y,rejected:f,synchronous:!!T&&T.synchronous,runWhen:T?T.runWhen:null}),this.handlers.length-1},I.prototype.eject=function(y){this.handlers[y]&&(this.handlers[y]=null)},I.prototype.forEach=function(y){h.forEach(this.handlers,function(T){null!==T&&y(T)})},L.exports=I},5215:(L,W,_)=>{"use strict";var h=_(8692),I=_(4554);L.exports=function(y,f){return y&&!h(f)?I(y,f):f}},5593:(L,W,_)=>{"use strict";var h=_(5124);L.exports=function(t,y,f,T,k){var x=new Error(t);return h(x,y,f,T,k)}},957:(L,W,_)=>{"use strict";var h=_(4701),I=_(5134),t=_(8827),y=_(3324),f=_(1413);function T(k){if(k.cancelToken&&k.cancelToken.throwIfRequested(),k.signal&&k.signal.aborted)throw new f("canceled")}L.exports=function(x){return T(x),x.headers=x.headers||{},x.data=I.call(x,x.data,x.headers,x.transformRequest),x.headers=h.merge(x.headers.common||{},x.headers[x.method]||{},x.headers),h.forEach(["delete","get","head","post","put","patch","common"],function(E){delete x.headers[E]}),(x.adapter||y.adapter)(x).then(function(E){return T(x),E.data=I.call(x,E.data,E.headers,x.transformResponse),E},function(E){return t(E)||(T(x),E&&E.response&&(E.response.data=I.call(x,E.response.data,E.response.headers,x.transformResponse))),Promise.reject(E)})}},5124:L=>{"use strict";L.exports=function(_,h,I,t,y){return _.config=h,I&&(_.code=I),_.request=t,_.response=y,_.isAxiosError=!0,_.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},_}},2971:(L,W,_)=>{"use strict";var h=_(4701);L.exports=function(t,y){y=y||{};var f={};function T(S,le){return h.isPlainObject(S)&&h.isPlainObject(le)?h.merge(S,le):h.isPlainObject(le)?h.merge({},le):h.isArray(le)?le.slice():le}function k(S){return h.isUndefined(y[S])?h.isUndefined(t[S])?void 0:T(void 0,t[S]):T(t[S],y[S])}function x(S){if(!h.isUndefined(y[S]))return T(void 0,y[S])}function F(S){return h.isUndefined(y[S])?h.isUndefined(t[S])?void 0:T(void 0,t[S]):T(void 0,y[S])}function w(S){return S in y?T(t[S],y[S]):S in t?T(void 0,t[S]):void 0}var E={url:x,method:x,data:x,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:w};return h.forEach(Object.keys(t).concat(Object.keys(y)),function(le){var N=E[le]||k,V=N(le);h.isUndefined(V)&&N!==w||(f[le]=V)}),f}},858:(L,W,_)=>{"use strict";var h=_(5593);L.exports=function(t,y,f){var T=f.config.validateStatus;f.status&&T&&!T(f.status)?y(h("Request failed with status code "+f.status,f.config,null,f.request,f)):t(f)}},5134:(L,W,_)=>{"use strict";var h=_(4701),I=_(3324);L.exports=function(y,f,T){var k=this||I;return h.forEach(T,function(F){y=F.call(k,y,f)}),y}},3324:(L,W,_)=>{"use strict";var h=_(4701),I=_(5620),t=_(5124),y={"Content-Type":"application/x-www-form-urlencoded"};function f(F,w){!h.isUndefined(F)&&h.isUndefined(F["Content-Type"])&&(F["Content-Type"]=w)}var x={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function T(){var F;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(F=_(7729)),F}(),transformRequest:[function(w,E){return I(E,"Accept"),I(E,"Content-Type"),h.isFormData(w)||h.isArrayBuffer(w)||h.isBuffer(w)||h.isStream(w)||h.isFile(w)||h.isBlob(w)?w:h.isArrayBufferView(w)?w.buffer:h.isURLSearchParams(w)?(f(E,"application/x-www-form-urlencoded;charset=utf-8"),w.toString()):h.isObject(w)||E&&"application/json"===E["Content-Type"]?(f(E,"application/json"),function k(F,w,E){if(h.isString(F))try{return(w||JSON.parse)(F),h.trim(F)}catch(S){if("SyntaxError"!==S.name)throw S}return(E||JSON.stringify)(F)}(w)):w}],transformResponse:[function(w){var E=this.transitional||x.transitional,N=!(E&&E.silentJSONParsing)&&"json"===this.responseType;if(N||E&&E.forcedJSONParsing&&h.isString(w)&&w.length)try{return JSON.parse(w)}catch(V){if(N)throw"SyntaxError"===V.name?t(V,this,"E_JSON_PARSE"):V}return w}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(w){return w>=200&&w<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};h.forEach(["delete","get","head"],function(w){x.headers[w]={}}),h.forEach(["post","put","patch"],function(w){x.headers[w]=h.merge(y)}),L.exports=x},1773:L=>{L.exports={version:"0.22.0"}},2414:L=>{"use strict";L.exports=function(_,h){return function(){for(var t=new Array(arguments.length),y=0;y<t.length;y++)t[y]=arguments[y];return _.apply(h,t)}}},1625:(L,W,_)=>{"use strict";var h=_(4701);function I(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}L.exports=function(y,f,T){if(!f)return y;var k;if(T)k=T(f);else if(h.isURLSearchParams(f))k=f.toString();else{var x=[];h.forEach(f,function(E,S){null===E||typeof E>"u"||(h.isArray(E)?S+="[]":E=[E],h.forEach(E,function(N){h.isDate(N)?N=N.toISOString():h.isObject(N)&&(N=JSON.stringify(N)),x.push(I(S)+"="+I(N))}))}),k=x.join("&")}if(k){var F=y.indexOf("#");-1!==F&&(y=y.slice(0,F)),y+=(-1===y.indexOf("?")?"?":"&")+k}return y}},4554:L=>{"use strict";L.exports=function(_,h){return h?_.replace(/\/+$/,"")+"/"+h.replace(/^\/+/,""):_}},5738:(L,W,_)=>{"use strict";var h=_(4701);L.exports=h.isStandardBrowserEnv()?{write:function(y,f,T,k,x,F){var w=[];w.push(y+"="+encodeURIComponent(f)),h.isNumber(T)&&w.push("expires="+new Date(T).toGMTString()),h.isString(k)&&w.push("path="+k),h.isString(x)&&w.push("domain="+x),!0===F&&w.push("secure"),document.cookie=w.join("; ")},read:function(y){var f=document.cookie.match(new RegExp("(^|;\\s*)("+y+")=([^;]*)"));return f?decodeURIComponent(f[3]):null},remove:function(y){this.write(y,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:L=>{"use strict";L.exports=function(_){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(_)}},4603:L=>{"use strict";L.exports=function(_){return"object"==typeof _&&!0===_.isAxiosError}},6100:(L,W,_)=>{"use strict";var h=_(4701);L.exports=h.isStandardBrowserEnv()?function(){var f,t=/(msie|trident)/i.test(navigator.userAgent),y=document.createElement("a");function T(k){var x=k;return t&&(y.setAttribute("href",x),x=y.href),y.setAttribute("href",x),{href:y.href,protocol:y.protocol?y.protocol.replace(/:$/,""):"",host:y.host,search:y.search?y.search.replace(/^\?/,""):"",hash:y.hash?y.hash.replace(/^#/,""):"",hostname:y.hostname,port:y.port,pathname:"/"===y.pathname.charAt(0)?y.pathname:"/"+y.pathname}}return f=T(window.location.href),function(x){var F=h.isString(x)?T(x):x;return F.protocol===f.protocol&&F.host===f.host}}():function(){return!0}},5620:(L,W,_)=>{"use strict";var h=_(4701);L.exports=function(t,y){h.forEach(t,function(T,k){k!==y&&k.toUpperCase()===y.toUpperCase()&&(t[y]=T,delete t[k])})}},2099:(L,W,_)=>{"use strict";var h=_(4701),I=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];L.exports=function(y){var T,k,x,f={};return y&&h.forEach(y.split("\n"),function(w){if(x=w.indexOf(":"),T=h.trim(w.substr(0,x)).toLowerCase(),k=h.trim(w.substr(x+1)),T){if(f[T]&&I.indexOf(T)>=0)return;f[T]="set-cookie"===T?(f[T]?f[T]:[]).concat([k]):f[T]?f[T]+", "+k:k}}),f}},9211:L=>{"use strict";L.exports=function(_){return function(I){return _.apply(null,I)}}},4828:(L,W,_)=>{"use strict";var h=_(1773).version,I={};["object","boolean","number","function","string","symbol"].forEach(function(f,T){I[f]=function(x){return typeof x===f||"a"+(T<1?"n ":" ")+f}});var t={};I.transitional=function(T,k,x){function F(w,E){return"[Axios v"+h+"] Transitional option '"+w+"'"+E+(x?". "+x:"")}return function(w,E,S){if(!1===T)throw new Error(F(E," has been removed"+(k?" in "+k:"")));return k&&!t[E]&&(t[E]=!0,console.warn(F(E," has been deprecated since v"+k+" and will be removed in the near future"))),!T||T(w,E,S)}},L.exports={assertOptions:function y(f,T,k){if("object"!=typeof f)throw new TypeError("options must be an object");for(var x=Object.keys(f),F=x.length;F-- >0;){var w=x[F],E=T[w];if(E){var S=f[w],le=void 0===S||E(S,w,f);if(!0!==le)throw new TypeError("option "+w+" must be "+le)}else if(!0!==k)throw Error("Unknown option "+w)}},validators:I}},4701:(L,W,_)=>{"use strict";var h=_(2414),I=Object.prototype.toString;function t(Z){return"[object Array]"===I.call(Z)}function y(Z){return typeof Z>"u"}function E(Z){return null!==Z&&"object"==typeof Z}function S(Z){if("[object Object]"!==I.call(Z))return!1;var G=Object.getPrototypeOf(Z);return null===G||G===Object.prototype}function K(Z){return"[object Function]"===I.call(Z)}function j(Z,G){if(!(null===Z||typeof Z>"u"))if("object"!=typeof Z&&(Z=[Z]),t(Z))for(var O=0,U=Z.length;O<U;O++)G.call(null,Z[O],O,Z);else for(var H in Z)Object.prototype.hasOwnProperty.call(Z,H)&&G.call(null,Z[H],H,Z)}L.exports={isArray:t,isArrayBuffer:function T(Z){return"[object ArrayBuffer]"===I.call(Z)},isBuffer:function f(Z){return null!==Z&&!y(Z)&&null!==Z.constructor&&!y(Z.constructor)&&"function"==typeof Z.constructor.isBuffer&&Z.constructor.isBuffer(Z)},isFormData:function k(Z){return typeof FormData<"u"&&Z instanceof FormData},isArrayBufferView:function x(Z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Z):Z&&Z.buffer&&Z.buffer instanceof ArrayBuffer},isString:function F(Z){return"string"==typeof Z},isNumber:function w(Z){return"number"==typeof Z},isObject:E,isPlainObject:S,isUndefined:y,isDate:function le(Z){return"[object Date]"===I.call(Z)},isFile:function N(Z){return"[object File]"===I.call(Z)},isBlob:function V(Z){return"[object Blob]"===I.call(Z)},isFunction:K,isStream:function ne(Z){return E(Z)&&K(Z.pipe)},isURLSearchParams:function ue(Z){return typeof URLSearchParams<"u"&&Z instanceof URLSearchParams},isStandardBrowserEnv:function ce(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:j,merge:function Y(){var Z={};function G(H,P){Z[P]=S(Z[P])&&S(H)?Y(Z[P],H):S(H)?Y({},H):t(H)?H.slice():H}for(var O=0,U=arguments.length;O<U;O++)j(arguments[O],G);return Z},extend:function ie(Z,G,O){return j(G,function(H,P){Z[P]=O&&"function"==typeof H?h(H,O):H}),Z},trim:function X(Z){return Z.trim?Z.trim():Z.replace(/^\s+|\s+$/g,"")},stripBOM:function Se(Z){return 65279===Z.charCodeAt(0)&&(Z=Z.slice(1)),Z}}},5343:(L,W)=>{"use strict";W.JQ=function le(N){for(var V,K=N.length,ne=K%3,ue=[],X=16383,ce=0,j=K-ne;ce<j;ce+=X)ue.push(S(N,ce,ce+X>j?j:ce+X));return 1===ne?ue.push(h[(V=N[K-1])>>2]+h[V<<4&63]+"=="):2===ne&&ue.push(h[(V=(N[K-2]<<8)+N[K-1])>>10]+h[V>>4&63]+h[V<<2&63]+"="),ue.join("")};for(var h=[],I=[],y=(typeof Uint8Array<"u"&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f=0,T=y.length;f<T;++f)h[f]=y[f],I[y.charCodeAt(f)]=f;function E(N){return h[N>>18&63]+h[N>>12&63]+h[N>>6&63]+h[63&N]}function S(N,V,K){for(var ue=[],X=V;X<K;X+=3)ue.push(E((N[X]<<16&16711680)+(N[X+1]<<8&65280)+(255&N[X+2])));return ue.join("")}I["-".charCodeAt(0)]=62,I["_".charCodeAt(0)]=63},1764:function(L){L.exports=function(){"use strict";var _=6e4,h=36e5,I="millisecond",t="second",y="minute",f="hour",T="day",k="week",x="month",F="quarter",w="year",E="date",S="Invalid Date",le=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,V={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(G){var O=["th","st","nd","rd"],U=G%100;return"["+G+(O[(U-20)%10]||O[U]||O[0])+"]"}},K=function(G,O,U){var H=String(G);return!H||H.length>=O?G:""+Array(O+1-H.length).join(U)+G},ne={s:K,z:function(G){var O=-G.utcOffset(),U=Math.abs(O),H=Math.floor(U/60),P=U%60;return(O<=0?"+":"-")+K(H,2,"0")+":"+K(P,2,"0")},m:function G(O,U){if(O.date()<U.date())return-G(U,O);var H=12*(U.year()-O.year())+(U.month()-O.month()),P=O.clone().add(H,x),M=U-P<0,D=O.clone().add(H+(M?-1:1),x);return+(-(H+(U-P)/(M?P-D:D-P))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:x,y:w,w:k,d:T,D:E,h:f,m:y,s:t,ms:I,Q:F}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return void 0===G}},ue="en",X={};X[ue]=V;var ce=function(G){return G instanceof Se},j=function G(O,U,H){var P;if(!O)return ue;if("string"==typeof O){var M=O.toLowerCase();X[M]&&(P=M),U&&(X[M]=U,P=M);var D=O.split("-");if(!P&&D.length>1)return G(D[0])}else{var A=O.name;X[A]=O,P=A}return!H&&P&&(ue=P),P||!H&&ue},Y=function(G,O){if(ce(G))return G.clone();var U="object"==typeof O?O:{};return U.date=G,U.args=arguments,new Se(U)},ie=ne;ie.l=j,ie.i=ce,ie.w=function(G,O){return Y(G,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var Se=function(){function G(U){this.$L=j(U.locale,null,!0),this.parse(U)}var O=G.prototype;return O.parse=function(U){this.$d=function(H){var P=H.date,M=H.utc;if(null===P)return new Date(NaN);if(ie.u(P))return new Date;if(P instanceof Date)return new Date(P);if("string"==typeof P&&!/Z$/i.test(P)){var D=P.match(le);if(D){var A=D[2]-1||0,q=(D[7]||"0").substring(0,3);return M?new Date(Date.UTC(D[1],A,D[3]||1,D[4]||0,D[5]||0,D[6]||0,q)):new Date(D[1],A,D[3]||1,D[4]||0,D[5]||0,D[6]||0,q)}}return new Date(P)}(U),this.$x=U.x||{},this.init()},O.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},O.$utils=function(){return ie},O.isValid=function(){return this.$d.toString()!==S},O.isSame=function(U,H){var P=Y(U);return this.startOf(H)<=P&&P<=this.endOf(H)},O.isAfter=function(U,H){return Y(U)<this.startOf(H)},O.isBefore=function(U,H){return this.endOf(H)<Y(U)},O.$g=function(U,H,P){return ie.u(U)?this[H]:this.set(P,U)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(U,H){var P=this,M=!!ie.u(H)||H,D=ie.p(U),A=function(ke,_e){var Qe=ie.w(P.$u?Date.UTC(P.$y,_e,ke):new Date(P.$y,_e,ke),P);return M?Qe:Qe.endOf(T)},q=function(ke,_e){return ie.w(P.toDate()[ke].apply(P.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(_e)),P)},J=this.$W,Q=this.$M,ge=this.$D,we="set"+(this.$u?"UTC":"");switch(D){case w:return M?A(1,0):A(31,11);case x:return M?A(1,Q):A(0,Q+1);case k:var be=this.$locale().weekStart||0,pe=(J<be?J+7:J)-be;return A(M?ge-pe:ge+(6-pe),Q);case T:case E:return q(we+"Hours",0);case f:return q(we+"Minutes",1);case y:return q(we+"Seconds",2);case t:return q(we+"Milliseconds",3);default:return this.clone()}},O.endOf=function(U){return this.startOf(U,!1)},O.$set=function(U,H){var P,M=ie.p(U),D="set"+(this.$u?"UTC":""),A=(P={},P[T]=D+"Date",P[E]=D+"Date",P[x]=D+"Month",P[w]=D+"FullYear",P[f]=D+"Hours",P[y]=D+"Minutes",P[t]=D+"Seconds",P[I]=D+"Milliseconds",P)[M],q=M===T?this.$D+(H-this.$W):H;if(M===x||M===w){var J=this.clone().set(E,1);J.$d[A](q),J.init(),this.$d=J.set(E,Math.min(this.$D,J.daysInMonth())).$d}else A&&this.$d[A](q);return this.init(),this},O.set=function(U,H){return this.clone().$set(U,H)},O.get=function(U){return this[ie.p(U)]()},O.add=function(U,H){var P,M=this;U=Number(U);var D=ie.p(H),A=function(Q){var ge=Y(M);return ie.w(ge.date(ge.date()+Math.round(Q*U)),M)};if(D===x)return this.set(x,this.$M+U);if(D===w)return this.set(w,this.$y+U);if(D===T)return A(1);if(D===k)return A(7);var q=(P={},P[y]=_,P[f]=h,P[t]=1e3,P)[D]||1,J=this.$d.getTime()+U*q;return ie.w(J,this)},O.subtract=function(U,H){return this.add(-1*U,H)},O.format=function(U){var H=this,P=this.$locale();if(!this.isValid())return P.invalidDate||S;var M=U||"YYYY-MM-DDTHH:mm:ssZ",D=ie.z(this),A=this.$H,q=this.$m,J=this.$M,Q=P.weekdays,ge=P.months,we=function(_e,Qe,Tt,ot){return _e&&(_e[Qe]||_e(H,M))||Tt[Qe].slice(0,ot)},be=function(_e){return ie.s(A%12||12,_e,"0")},pe=P.meridiem||function(_e,Qe,Tt){var ot=_e<12?"AM":"PM";return Tt?ot.toLowerCase():ot},ke={YY:String(this.$y).slice(-2),YYYY:this.$y,M:J+1,MM:ie.s(J+1,2,"0"),MMM:we(P.monthsShort,J,ge,3),MMMM:we(ge,J),D:this.$D,DD:ie.s(this.$D,2,"0"),d:String(this.$W),dd:we(P.weekdaysMin,this.$W,Q,2),ddd:we(P.weekdaysShort,this.$W,Q,3),dddd:Q[this.$W],H:String(A),HH:ie.s(A,2,"0"),h:be(1),hh:be(2),a:pe(A,q,!0),A:pe(A,q,!1),m:String(q),mm:ie.s(q,2,"0"),s:String(this.$s),ss:ie.s(this.$s,2,"0"),SSS:ie.s(this.$ms,3,"0"),Z:D};return M.replace(N,function(_e,Qe){return Qe||ke[_e]||D.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(U,H,P){var M,D=ie.p(H),A=Y(U),q=(A.utcOffset()-this.utcOffset())*_,J=this-A,Q=ie.m(this,A);return Q=(M={},M[w]=Q/12,M[x]=Q,M[F]=Q/3,M[k]=(J-q)/6048e5,M[T]=(J-q)/864e5,M[f]=J/h,M[y]=J/_,M[t]=J/1e3,M)[D]||J,P?Q:ie.a(Q)},O.daysInMonth=function(){return this.endOf(x).$D},O.$locale=function(){return X[this.$L]},O.locale=function(U,H){if(!U)return this.$L;var P=this.clone(),M=j(U,H,!0);return M&&(P.$L=M),P},O.clone=function(){return ie.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},G}(),Z=Se.prototype;return Y.prototype=Z,[["$ms",I],["$s",t],["$m",y],["$H",f],["$W",T],["$M",x],["$y",w],["$D",E]].forEach(function(G){Z[G[1]]=function(O){return this.$g(O,G[0],G[1])}}),Y.extend=function(G,O){return G.$i||(G(O,Se,Y),G.$i=!0),Y},Y.locale=j,Y.isDayjs=ce,Y.unix=function(G){return Y(1e3*G)},Y.en=X[ue],Y.Ls=X,Y.p={},Y}()},563:function(L){L.exports=function(){"use strict";return function(W,_,h){var I="h:mm A",t={lastDay:"[Yesterday at] "+I,sameDay:"[Today at] "+I,nextDay:"[Tomorrow at] "+I,nextWeek:"dddd [at] "+I,lastWeek:"[Last] dddd [at] "+I,sameElse:"MM/DD/YYYY"};_.prototype.calendar=function(y,f){var T=f||this.$locale().calendar||t,k=h(y||void 0).startOf("d"),x=this.diff(k,"d",!0),F="sameElse",w=x<-6?F:x<-1?"lastWeek":x<0?"lastDay":x<1?"sameDay":x<2?"nextDay":x<7?"nextWeek":F,E=T[w]||t[w];return"function"==typeof E?E.call(this,h()):this.format(E)}}}()},593:L=>{L.exports="object"==typeof self?self.FormData:window.FormData},9151:L=>{var W=null;typeof WebSocket<"u"?W=WebSocket:typeof MozWebSocket<"u"?W=MozWebSocket:typeof global<"u"?W=global.WebSocket||global.MozWebSocket:typeof window<"u"?W=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(W=self.WebSocket||self.MozWebSocket),L.exports=W},2711:L=>{var W=1/0,_="[object Symbol]",h=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),k="object"==typeof global&&global&&global.Object===Object&&global,x="object"==typeof self&&self&&self.Object===Object&&self,F=k||x||Function("return this")(),E=function w(Y){return function(ie){return Y?.[ie]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"ss"}),le=Object.prototype.toString,N=F.Symbol,V=N?N.prototype:void 0,K=V?V.toString:void 0;L.exports=function j(Y){return(Y=function ce(Y){return null==Y?"":function ne(Y){if("string"==typeof Y)return Y;if(function X(Y){return"symbol"==typeof Y||function ue(Y){return!!Y&&"object"==typeof Y}(Y)&&le.call(Y)==_}(Y))return K?K.call(Y):"";var ie=Y+"";return"0"==ie&&1/Y==-W?"-0":ie}(Y)}(Y))&&Y.replace(h,E).replace(f,"")}},3431:L=>{"use strict";const W=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],_=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],h=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],I=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],t=(y,f,T)=>{let k=y;return"string"==typeof f||Array.isArray(f)?k=y.toLocaleString(f,T):(!0===f||void 0!==T)&&(k=y.toLocaleString(void 0,T)),k};L.exports=(y,f)=>{if(!Number.isFinite(y))throw new TypeError(`Expected a finite number, got ${typeof y}: ${y}`);const T=(f=Object.assign({bits:!1,binary:!1},f)).bits?f.binary?I:h:f.binary?_:W;if(f.signed&&0===y)return` 0 ${T[0]}`;const k=y<0,x=k?"-":f.signed?"+":"";let F;if(k&&(y=-y),void 0!==f.minimumFractionDigits&&(F={minimumFractionDigits:f.minimumFractionDigits}),void 0!==f.maximumFractionDigits&&(F=Object.assign({maximumFractionDigits:f.maximumFractionDigits},F)),y<1)return x+t(y,f.locale,F)+" "+T[0];const w=Math.min(Math.floor(f.binary?Math.log(y)/Math.log(1024):Math.log10(y)/3),T.length-1);return y/=Math.pow(f.binary?1024:1e3,w),F||(y=y.toPrecision(3)),x+t(Number(y),f.locale,F)+" "+T[w]}},7061:(L,W,_)=>{var h=_(8698).default;function I(){"use strict";L.exports=I=function(){return t},L.exports.__esModule=!0,L.exports.default=L.exports;var t={},y=Object.prototype,f=y.hasOwnProperty,T=Object.defineProperty||function(M,D,A){M[D]=A.value},k="function"==typeof Symbol?Symbol:{},x=k.iterator||"@@iterator",F=k.asyncIterator||"@@asyncIterator",w=k.toStringTag||"@@toStringTag";function E(M,D,A){return Object.defineProperty(M,D,{value:A,enumerable:!0,configurable:!0,writable:!0}),M[D]}try{E({},"")}catch{E=function(A,q,J){return A[q]=J}}function S(M,D,A,q){var Q=Object.create((D&&D.prototype instanceof V?D:V).prototype),ge=new U(q||[]);return T(Q,"_invoke",{value:Se(M,A,ge)}),Q}function le(M,D,A){try{return{type:"normal",arg:M.call(D,A)}}catch(q){return{type:"throw",arg:q}}}t.wrap=S;var N={};function V(){}function K(){}function ne(){}var ue={};E(ue,x,function(){return this});var X=Object.getPrototypeOf,ce=X&&X(X(H([])));ce&&ce!==y&&f.call(ce,x)&&(ue=ce);var j=ne.prototype=V.prototype=Object.create(ue);function Y(M){["next","throw","return"].forEach(function(D){E(M,D,function(A){return this._invoke(D,A)})})}function ie(M,D){function A(J,Q,ge,we){var be=le(M[J],M,Q);if("throw"!==be.type){var pe=be.arg,ke=pe.value;return ke&&"object"==h(ke)&&f.call(ke,"__await")?D.resolve(ke.__await).then(function(_e){A("next",_e,ge,we)},function(_e){A("throw",_e,ge,we)}):D.resolve(ke).then(function(_e){pe.value=_e,ge(pe)},function(_e){return A("throw",_e,ge,we)})}we(be.arg)}var q;T(this,"_invoke",{value:function(Q,ge){function we(){return new D(function(be,pe){A(Q,ge,be,pe)})}return q=q?q.then(we,we):we()}})}function Se(M,D,A){var q="suspendedStart";return function(J,Q){if("executing"===q)throw new Error("Generator is already running");if("completed"===q){if("throw"===J)throw Q;return{value:void 0,done:!0}}for(A.method=J,A.arg=Q;;){var ge=A.delegate;if(ge){var we=Z(ge,A);if(we){if(we===N)continue;return we}}if("next"===A.method)A.sent=A._sent=A.arg;else if("throw"===A.method){if("suspendedStart"===q)throw q="completed",A.arg;A.dispatchException(A.arg)}else"return"===A.method&&A.abrupt("return",A.arg);q="executing";var be=le(M,D,A);if("normal"===be.type){if(q=A.done?"completed":"suspendedYield",be.arg===N)continue;return{value:be.arg,done:A.done}}"throw"===be.type&&(q="completed",A.method="throw",A.arg=be.arg)}}}function Z(M,D){var A=D.method,q=M.iterator[A];if(void 0===q)return D.delegate=null,"throw"===A&&M.iterator.return&&(D.method="return",D.arg=void 0,Z(M,D),"throw"===D.method)||"return"!==A&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+A+"' method")),N;var J=le(q,M.iterator,D.arg);if("throw"===J.type)return D.method="throw",D.arg=J.arg,D.delegate=null,N;var Q=J.arg;return Q?Q.done?(D[M.resultName]=Q.value,D.next=M.nextLoc,"return"!==D.method&&(D.method="next",D.arg=void 0),D.delegate=null,N):Q:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,N)}function G(M){var D={tryLoc:M[0]};1 in M&&(D.catchLoc=M[1]),2 in M&&(D.finallyLoc=M[2],D.afterLoc=M[3]),this.tryEntries.push(D)}function O(M){var D=M.completion||{};D.type="normal",delete D.arg,M.completion=D}function U(M){this.tryEntries=[{tryLoc:"root"}],M.forEach(G,this),this.reset(!0)}function H(M){if(M){var D=M[x];if(D)return D.call(M);if("function"==typeof M.next)return M;if(!isNaN(M.length)){var A=-1,q=function J(){for(;++A<M.length;)if(f.call(M,A))return J.value=M[A],J.done=!1,J;return J.value=void 0,J.done=!0,J};return q.next=q}}return{next:P}}function P(){return{value:void 0,done:!0}}return K.prototype=ne,T(j,"constructor",{value:ne,configurable:!0}),T(ne,"constructor",{value:K,configurable:!0}),K.displayName=E(ne,w,"GeneratorFunction"),t.isGeneratorFunction=function(M){var D="function"==typeof M&&M.constructor;return!!D&&(D===K||"GeneratorFunction"===(D.displayName||D.name))},t.mark=function(M){return Object.setPrototypeOf?Object.setPrototypeOf(M,ne):(M.__proto__=ne,E(M,w,"GeneratorFunction")),M.prototype=Object.create(j),M},t.awrap=function(M){return{__await:M}},Y(ie.prototype),E(ie.prototype,F,function(){return this}),t.AsyncIterator=ie,t.async=function(M,D,A,q,J){void 0===J&&(J=Promise);var Q=new ie(S(M,D,A,q),J);return t.isGeneratorFunction(D)?Q:Q.next().then(function(ge){return ge.done?ge.value:Q.next()})},Y(j),E(j,w,"Generator"),E(j,x,function(){return this}),E(j,"toString",function(){return"[object Generator]"}),t.keys=function(M){var D=Object(M),A=[];for(var q in D)A.push(q);return A.reverse(),function J(){for(;A.length;){var Q=A.pop();if(Q in D)return J.value=Q,J.done=!1,J}return J.done=!0,J}},t.values=H,U.prototype={constructor:U,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!D)for(var A in this)"t"===A.charAt(0)&&f.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=void 0)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if("throw"===D.type)throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var A=this;function q(pe,ke){return ge.type="throw",ge.arg=D,A.next=pe,ke&&(A.method="next",A.arg=void 0),!!ke}for(var J=this.tryEntries.length-1;J>=0;--J){var Q=this.tryEntries[J],ge=Q.completion;if("root"===Q.tryLoc)return q("end");if(Q.tryLoc<=this.prev){var we=f.call(Q,"catchLoc"),be=f.call(Q,"finallyLoc");if(we&&be){if(this.prev<Q.catchLoc)return q(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return q(Q.finallyLoc)}else if(we){if(this.prev<Q.catchLoc)return q(Q.catchLoc,!0)}else{if(!be)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return q(Q.finallyLoc)}}}},abrupt:function(D,A){for(var q=this.tryEntries.length-1;q>=0;--q){var J=this.tryEntries[q];if(J.tryLoc<=this.prev&&f.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var Q=J;break}}Q&&("break"===D||"continue"===D)&&Q.tryLoc<=A&&A<=Q.finallyLoc&&(Q=null);var ge=Q?Q.completion:{};return ge.type=D,ge.arg=A,Q?(this.method="next",this.next=Q.finallyLoc,N):this.complete(ge)},complete:function(D,A){if("throw"===D.type)throw D.arg;return"break"===D.type||"continue"===D.type?this.next=D.arg:"return"===D.type?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):"normal"===D.type&&A&&(this.next=A),N},finish:function(D){for(var A=this.tryEntries.length-1;A>=0;--A){var q=this.tryEntries[A];if(q.finallyLoc===D)return this.complete(q.completion,q.afterLoc),O(q),N}},catch:function(D){for(var A=this.tryEntries.length-1;A>=0;--A){var q=this.tryEntries[A];if(q.tryLoc===D){var J=q.completion;if("throw"===J.type){var Q=J.arg;O(q)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(D,A,q){return this.delegate={iterator:H(D),resultName:A,nextLoc:q},"next"===this.method&&(this.arg=void 0),N}},t}L.exports=I,L.exports.__esModule=!0,L.exports.default=L.exports},8698:L=>{function W(_){return L.exports=W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},L.exports.__esModule=!0,L.exports.default=L.exports,W(_)}L.exports=W,L.exports.__esModule=!0,L.exports.default=L.exports},4687:(L,W,_)=>{var h=_(7061)();L.exports=h;try{regeneratorRuntime=h}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=h:Function("r","regeneratorRuntime = r")(h)}}}]);