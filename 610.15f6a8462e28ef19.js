(self.webpackChunkgetstream_chat=self.webpackChunkgetstream_chat||[]).push([[610],{610:(I,z,_)=>{"use strict";_.r(z),_.d(z,{ChatPageComponent:()=>Kp});var g=_(5861),p=_(4942),A=_(3900),b=_(4004),w=_(262),S=_(9646),k=_(2340),D=_(655),t=_(4650),C=_(1135),O=_(4707),x=_(9841),K=_(7579),P=_(5963),V=_(5343);function W(){return W=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},W.apply(this,arguments)}var X=_(1002);function ne(i,a){if(null==i)return{};var n,s,e=function oe(i,a){if(null==i)return{};var s,r,e={},n=Object.keys(i);for(r=0;r<n.length;r++)!(a.indexOf(s=n[r])>=0)&&(e[s]=i[s]);return e}(i,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)!(a.indexOf(n=r[s])>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function re(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function ie(i,a){if(i){if("string"==typeof i)return re(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return re(i,a)}}function F(i){return function j(i){if(Array.isArray(i))return re(i)}(i)||function Y(i){if(typeof Symbol<"u"&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||ie(i)||function Ze(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}var E=_(3997);function L(i,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,(0,E.Z)(n.key),n)}}function N(i,a,e){return a&&L(i.prototype,a),e&&L(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}var R=_(4687),d=_.n(R),T=_(3014),M=_.n(T);function ce(i,a){return function q(i){if(Array.isArray(i))return i}(i)||function J(i,a){var e=null==i?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(null!=e){var n,s,r,o,l=[],c=!0,u=!1;try{if(r=(e=e.call(i)).next,0===a){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=r.call(e)).done)&&(l.push(n.value),l.length!==a);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}(i,a)||ie(i,a)||function Q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge=_(593),ye=_.n(ge),Fe=_(9151),Me=_.n(Fe);function me(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Oe(i,a){return(Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n})(i,a)}function Et(i){return(Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(i)}function Jt(i,a,e){return(Jt=function Ts(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(s,r,o){var l=[null];l.push.apply(l,r);var u=new(Function.bind.apply(s,l));return o&&Oe(u,o.prototype),u}).apply(null,arguments)}function cn(i){var a="function"==typeof Map?new Map:void 0;return cn=function(n){if(null===n||!function ws(i){return-1!==Function.toString.call(i).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(n))return a.get(n);a.set(n,s)}function s(){return Jt(n,arguments,Et(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Oe(s,n)},cn(i)}function un(i){return"string"==typeof i}function Hn(i,a){return!!a&&un(i)}var Ms=function(a){return(0,V.JQ)(new Uint8Array(function xs(i,a){var e=[];if(un(i)&&Hn(i,a)){for(var n=0,s=i.length;n<s;n++)if(i.charAt(n)){var o=a(i.charAt(n),n,i);e[n]=o}}else if(!un(i)&&!Hn(i,a))for(var l=0,c=i.length;l<c;l++)if(l in i){var h=a(i[l],l,i);e[l]=h}return e}(a,function(e){return e.charCodeAt(0)})))},ks=null;function qn(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Ne(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?qn(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):qn(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var As=function(){function i(a){var n,e=this;H(this,i),(0,p.Z)(this,"_channel",void 0),(0,p.Z)(this,"watcher_count",void 0),(0,p.Z)(this,"typing",void 0),(0,p.Z)(this,"read",void 0),(0,p.Z)(this,"pinnedMessages",void 0),(0,p.Z)(this,"pending_messages",void 0),(0,p.Z)(this,"threads",void 0),(0,p.Z)(this,"mutedUsers",void 0),(0,p.Z)(this,"watchers",void 0),(0,p.Z)(this,"members",void 0),(0,p.Z)(this,"unreadCount",void 0),(0,p.Z)(this,"membership",void 0),(0,p.Z)(this,"last_message_at",void 0),(0,p.Z)(this,"isUpToDate",void 0),(0,p.Z)(this,"messageSets",[]),(0,p.Z)(this,"setIsUpToDate",function(s){e.isUpToDate=s}),(0,p.Z)(this,"removeMessageFromArray",function(s,r){var o=s.filter(function(l){return!(l.id&&r.id&&l.id===r.id)});return{removed:o.length<s.length,result:o}}),(0,p.Z)(this,"updateUserMessages",function(s){var r=function(c,u){for(var h=0;h<c.length;h++){var m,f=c[h];(null===(m=f.user)||void 0===m?void 0:m.id)===u.id&&(c[h]=Ne(Ne({},f),{},{user:u}))}};for(var o in e.messageSets.forEach(function(l){return r(l.messages,s)}),e.threads)r(e.threads[o],s);r(e.pinnedMessages,s)}),(0,p.Z)(this,"deleteUserMessages",function(s){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=function(u,h){for(var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=0;f<u.length;f++){var v,y=u[f];(null===(v=y.user)||void 0===v?void 0:v.id)===h.id&&(u[f]=m?{cid:y.cid,created_at:y.created_at,deleted_at:h.deleted_at,id:y.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:y.parent_id,reply_count:y.reply_count,status:y.status,thread_participants:y.thread_participants,type:"deleted",updated_at:y.updated_at,user:y.user}:Ne(Ne({},y),{},{type:"deleted",deleted_at:h.deleted_at}))}};for(var l in e.messageSets.forEach(function(c){return o(c.messages,s,r)}),e.threads)o(e.threads[l],s,r);o(e.pinnedMessages,s,r)}),this._channel=a,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=null!=(null==a||null===(n=a.state)||void 0===n?void 0:n.last_message_at)?new Date(a.state.last_message_at):null}return N(i,[{key:"messages",get:function(){var e;return(null===(e=this.messageSets.find(function(n){return n.isCurrent}))||void 0===e?void 0:e.messages)||[]},set:function(e){var n=this.messageSets.findIndex(function(s){return s.isCurrent});this.messageSets[n].messages=e}},{key:"latestMessages",get:function(){var e;return(null===(e=this.messageSets.find(function(n){return n.isLatest}))||void 0===e?void 0:e.messages)||[]},set:function(e){var n=this.messageSets.findIndex(function(s){return s.isLatest});this.messageSets[n].messages=e}},{key:"addMessageSorted",value:function(e){return this.addMessagesSorted([e],arguments.length>1&&void 0!==arguments[1]&&arguments[1],!1,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest")}},{key:"formatMessage",value:function(e){return Ne(Ne({},e),{},{__html:e.html,pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"})}},{key:"addMessagesSorted",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=this.findTargetMessageSet(e,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:"current"),c=l.messagesToAdd,u=l.targetMessageSetIndex,h=0;h<c.length;h+=1)if(!c[h].shadowed){var y,v=void 0;c[h].created_at instanceof Date?v=c[h]:((v=this.formatMessage(c[h])).user&&null!==(y=this._channel)&&void 0!==y&&y.cid&&this._channel.getClient().state.updateUserReference(v.user,this._channel.cid),s&&v.id&&this.threads[v.id]&&delete this.threads[v.id],this.last_message_at||(this.last_message_at=new Date(v.created_at.getTime())),v.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(v.created_at.getTime())));var B=v.parent_id;if((!B||v.show_in_channel)&&-1!==u&&(this.messageSets[u].messages=this._addToMessageList(this.messageSets[u].messages,v,n,"created_at",r)),B&&!s){var te=this._addToMessageList(this.threads[B]||[],v,n,"created_at",r);this.threads[B]=te}}return{messageSet:this.messageSets[u]}}},{key:"addPinnedMessages",value:function(e){for(var n=0;n<e.length;n+=1)this.addPinnedMessage(e[n])}},{key:"addPinnedMessage",value:function(e){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(e),!1,"pinned_at")}},{key:"removePinnedMessage",value:function(e){var n=this.removeMessageFromArray(this.pinnedMessages,e);this.pinnedMessages=n.result}},{key:"addReaction",value:function(e,n,s){var r=this;if(n){var o=n;return this._updateMessage(n,function(l){return o.own_reactions=r._addOwnReactionToMessage(l.own_reactions,e,s),r.formatMessage(o)}),o}}},{key:"_addOwnReactionToMessage",value:function(e,n,s){return e=(e=s?[]:this._removeOwnReactionFromMessage(e,n))||[],this._channel.getClient().userID===n.user_id&&e.push(n),e}},{key:"_removeOwnReactionFromMessage",value:function(e,n){return e&&e.filter(function(s){return s.user_id!==n.user_id||s.type!==n.type})}},{key:"removeReaction",value:function(e,n){var s=this;if(n){var r=n;return this._updateMessage(n,function(o){return r.own_reactions=s._removeOwnReactionFromMessage(o.own_reactions,e),s.formatMessage(r)}),r}}},{key:"removeQuotedMessageReferences",value:function(e){var n=this,s=function(o){var l,c;return Ne(Ne({},o),{},{created_at:o.created_at.toString(),pinned_at:null===(l=o.pinned_at)||void 0===l?void 0:l.toString(),updated_at:null===(c=o.updated_at)||void 0===c?void 0:c.toString()})};this.messageSets.forEach(function(r){var o=r.messages.filter(function(l){return l.quoted_message_id===e.id}).map(s).map(function(l){return Ne(Ne({},l),{},{quoted_message:Ne(Ne({},e),{},{attachments:[]})})});n.addMessagesSorted(o,!0)})}},{key:"_updateMessage",value:function(e,n){var s=e.parent_id,r=e.show_in_channel,o=e.pinned;if(s&&this.threads[s]){var l=this.threads[s],c=l.findIndex(function(f){return f.id===e.id});-1!==c&&(l[c]=n(l[c]),this.threads[s]=l)}if(!r&&!s||r){var u=this.findMessageSetIndex(e);if(-1!==u){var h=this.messageSets[u].messages.findIndex(function(f){return f.id===e.id});-1!==h&&(this.messageSets[u].messages[h]=n(this.messageSets[u].messages[h]))}}if(o){var m=this.pinnedMessages.findIndex(function(f){return f.id===e.id});-1!==m&&(this.pinnedMessages[m]=n(this.pinnedMessages[m]))}}},{key:"_addToMessageList",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"created_at",l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4]||s,c=e;s&&(c=c.filter(function(B){return!(B.id&&n.id===B.id)}));var u=c.length;if(0===u&&l)return c.concat(n);if(0===u)return F(c);var h=n[r].getTime(),m=c[u-1][r].getTime()<h;if(m&&l)return c.concat(n);if(m)return F(c);for(var f=0,v=0,y=u-1;f<=y;)c[v=Math.floor((y+f)/2)][r].getTime()<=h?f=v+1:y=v-1;if(!s&&n.id){if(c[f]&&n.id===c[f].id)return c[f]=n,F(c);if(c[f-1]&&n.id===c[f-1].id)return c[f-1]=n,F(c)}return l&&c.splice(f,0,n),F(c)}},{key:"removeMessage",value:function(e){var n=!1;if(e.parent_id&&this.threads[e.parent_id]){var s=this.removeMessageFromArray(this.threads[e.parent_id],e),r=s.removed;this.threads[e.parent_id]=s.result,n=r}else{var l,c=null!==(l=e.messageSetIndex)&&void 0!==l?l:this.findMessageSetIndex(e);if(-1!==c){var u=this.removeMessageFromArray(this.messageSets[c].messages,e),h=u.removed;this.messageSets[c].messages=u.result,n=h}}return n}},{key:"filterErrorMessages",value:function(){var e=this.latestMessages.filter(function(n){return"error"!==n.type});this.latestMessages=e}},{key:"clean",value:function(){for(var e=new Date,n=0,s=Object.entries(this.typing);n<s.length;n++){var r=ce(s[n],2),o=r[0],l=r[1],c="string"==typeof l.received_at?new Date(l.received_at):l.received_at||new Date;e.getTime()-c.getTime()>7e3&&(delete this.typing[o],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:o}}))}}},{key:"clearMessages",value:function(){this.initMessages(),this.pinnedMessages=[]}},{key:"initMessages",value:function(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0}]}},{key:"loadMessageIntoState",value:(a=(0,g.Z)(d().mark(function n(s,r){var o,l,c,u,h,m,f=arguments;return d().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(l=f.length>2&&void 0!==f[2]?f[2]:25,u=!1,h=!1,m=r||s,"latest"!==s){y.next=10;break}if(this.messages!==this.latestMessages){y.next=7;break}return y.abrupt("return");case 7:c=this.messageSets.findIndex(function(B){return B.isLatest}),y.next=11;break;case 10:c=this.findMessageSetIndex({id:m});case 11:if(-1!==c&&(this.switchToMessageSet(c),u=!0),h=!r||!(null===(o=this.threads[r])||void 0===o||!o.find(function(B){return B.id===s})),!u||!h){y.next=15;break}return y.abrupt("return");case 15:if(u){y.next=18;break}return y.next=18,this._channel.query({messages:{id_around:m,limit:l}},"new");case 18:if(h||!r){y.next=21;break}return y.next=21,this._channel.getReplies(r,{id_around:s,limit:l});case 21:-1!==(c=this.findMessageSetIndex({id:m}))&&this.switchToMessageSet(c);case 23:case"end":return y.stop()}},n,this)})),function e(n,s){return a.apply(this,arguments)})},{key:"findMessage",value:function(e,n){if(n){var s=this.threads[n];return s?s.find(function(o){return o.id===e}):void 0}var r=this.findMessageSetIndex({id:e});if(-1!==r)return this.messageSets[r].messages.find(function(o){return o.id===e})}},{key:"switchToMessageSet",value:function(e){var n=this.messageSets.find(function(s){return s.isCurrent});n&&(n.isCurrent=!1,this.messageSets[e].isCurrent=!0)}},{key:"areMessageSetsOverlap",value:function(e,n){return e.some(function(s){return n.find(function(r){return s.id===r.id})})}},{key:"findMessageSetIndex",value:function(e){return this.messageSets.findIndex(function(n){return!!n.messages.find(function(s){return s.id===e.id})})}},{key:"findTargetMessageSet",value:function(e){var l,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"current",o=e;if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1])l=this.findMessageSetIndex(e[0]);else{var c=this.messageSets.map(function(y,B){return B}).filter(function(y){return n.areMessageSetsOverlap(n.messageSets[y].messages,e)});switch(r){case"new":c.length>0?l=c[0]:e.some(function(y){return!y.parent_id})&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1}),l=this.messageSets.length-1);break;case"current":l=this.messageSets.findIndex(function(y){return y.isCurrent});break;case"latest":l=this.messageSets.findIndex(function(y){return y.isLatest});break;default:l=-1}var u=c.splice(0,1)[0],h=F(c);if(void 0!==u&&u!==l&&h.push(l),h.length>0){var m=this.messageSets[u],f=this.messageSets.filter(function(y,B){return-1!==h.indexOf(B)});f.forEach(function(y){m.isLatest=m.isLatest||y.isLatest,m.isCurrent=m.isCurrent||y.isCurrent,o=[].concat(F(o),F(y.messages))}),f.forEach(function(y){return n.messageSets.splice(n.messageSets.indexOf(y),1)}),l=this.messageSets.findIndex(function(y){return n.areMessageSetsOverlap(y.messages,e)})}}return{targetMessageSetIndex:l,messagesToAdd:o}}}]),i;var a}();function Yn(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}var ct=function(a){return new Promise(function(e){return setTimeout(e,a)})};function dn(i){return i&&("[object Function]"===Object.prototype.toString.call(i)||"function"==typeof i||i instanceof Function)}var Ot={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function Rs(i){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,invisible:!0,roles:!0}[i]}function ut(i){var s,a=[],n=function Fs(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Es(i,a){if(i){if("string"==typeof i)return Yn(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Yn(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(c){function u(h){return c.apply(this,arguments)}return u.toString=function(){return c.toString()},u}(function(c){throw c}),f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(c){function u(h){return c.apply(this,arguments)}return u.toString=function(){return c.toString()},u}(function(c){o=!0,l=c}),f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}(Array.isArray(i)?i:[i]);try{for(n.s();!(s=n.n()).done;){var o=Object.entries(s.value);o.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(var l=0,c=o;l<c.length;l++){var u=ce(c[l],2);a.push({field:u[0],direction:u[1]})}}}catch(f){n.e(f)}finally{n.f()}return a}function Qt(i){var a=Math.min(500+2e3*i,25e3),e=Math.min(Math.max(250,2e3*(i-1)),25e3);return Math.floor(Math.random()*(a-e)+e)}function Ct(){return function Ps(){var i=function $s(i){var a=new Uint8Array(i);return js(a),a}(16);return i[6]=15&i[6]|64,i[8]=191&i[8]|128,It(i.subarray(0,4))+"-"+It(i.subarray(4,6))+"-"+It(i.subarray(6,8))+"-"+It(i.subarray(8,10))+"-"+It(i.subarray(10,16))}()}function It(i){for(var a="",e=0;e<i.length;e++)a+=i[e].toString(16).padStart(2,"0");return a}var i,js=typeof crypto<"u"&&typeof(null===(i=crypto)||void 0===i?void 0:i.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):function Ns(i){for(var a=Math.pow(2,8*i.byteLength/i.length),e=0;e<i.length;e++)i[e]=Math.random()*a};function Hs(i){var a={};if(!i)return a;try{Object.getOwnPropertyNames(i).forEach(function(e){a[e]=Object.getOwnPropertyDescriptor(i,e)})}catch{return{error:"failed to serialize the error"}}return a}function qs(){var i=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return i?"boolean"!=typeof i.onLine||i.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function Jn(i){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",i),window.addEventListener("online",i))}function Qn(i){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",i),window.removeEventListener("online",i))}function hn(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Ys(i,a){if(i){if("string"==typeof i)return Vn(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Vn(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}function Vn(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function Gn(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function ue(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?Gn(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Gn(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var pn=function(){function i(a,e,n,s){var r=this;if(H(this,i),(0,p.Z)(this,"_client",void 0),(0,p.Z)(this,"type",void 0),(0,p.Z)(this,"id",void 0),(0,p.Z)(this,"data",void 0),(0,p.Z)(this,"_data",void 0),(0,p.Z)(this,"cid",void 0),(0,p.Z)(this,"listeners",void 0),(0,p.Z)(this,"state",void 0),(0,p.Z)(this,"initialized",void 0),(0,p.Z)(this,"offlineMode",void 0),(0,p.Z)(this,"lastKeyStroke",void 0),(0,p.Z)(this,"lastTypingEvent",void 0),(0,p.Z)(this,"isTyping",void 0),(0,p.Z)(this,"disconnected",void 0),(0,p.Z)(this,"create",(0,g.Z)(d().mark(function c(){var u;return d().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return u={watch:!1,state:!1,presence:!1},m.next=3,r.query(u,"latest");case 3:return m.abrupt("return",m.sent);case 4:case"end":return m.stop()}},c)}))),(0,p.Z)(this,"_callChannelListeners",function(c){var u=r,h=[];u.listeners.all&&h.push.apply(h,F(u.listeners.all)),u.listeners[c.type]&&h.push.apply(h,F(u.listeners[c.type]));for(var m=0,f=h;m<f.length;m++){var v=f[m];"string"!=typeof v&&v(c)}}),(0,p.Z)(this,"_channelURL",function(){if(!r.id)throw new Error("channel id is not defined");return"".concat(r.getClient().baseURL,"/channels/").concat(r.type,"/").concat(r.id)}),!/^[\w_-]+$/.test(e))throw new Error("Invalid chat type ".concat(e,', letters, numbers and "_-" are allowed'));if("string"==typeof n&&!/^[\w!_-]+$/.test(n))throw new Error("Invalid chat id ".concat(n,', letters, numbers and "!-_" are allowed'));this._client=a,this.type=e,this.id=n,this.data=s,this._data=ue({},s),this.cid="".concat(e,":").concat(n),this.listeners={},this.state=new As(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1}return N(i,[{key:"getClient",value:function(){if(!0===this.disconnected)throw Error("You can't use a channel after client.disconnect() was called");return this._client}},{key:"getConfig",value:function(){return this.getClient().configs[this.cid]}},{key:"sendMessage",value:(a=(0,g.Z)(d().mark(function n(s,r){var o;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.getClient().post(this._channelURL()+"/message",ue({message:s},r));case 2:return o=c.sent,this.state.unreadCount=0,c.abrupt("return",o);case 5:case"end":return c.stop()}},n,this)})),function e(n,s){return a.apply(this,arguments)})},{key:"sendFile",value:function(e,n,s,r){return this.getClient().sendFile("".concat(this._channelURL(),"/file"),e,n,s,r)}},{key:"sendImage",value:function(e,n,s,r){return this.getClient().sendFile("".concat(this._channelURL(),"/image"),e,n,s,r)}},{key:"deleteFile",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/file"),{url:e})}},{key:"deleteImage",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/image"),{url:e})}},{key:"sendEvent",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().post(this._channelURL()+"/event",{event:s});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"search",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(r=l.length>1&&void 0!==l[1]?l[1]:{}).offset||!r.sort&&!r.next){u.next=3;break}throw Error("Cannot specify offset with sort or next parameters");case 3:if(o=ue(ue({filter_conditions:{cid:this.cid}},r),{},{sort:r.sort?ut(r.sort):void 0}),"string"!=typeof s){u.next=8;break}o.query=s,u.next=13;break;case 8:if("object"!==(0,X.Z)(s)){u.next=12;break}o.message_filter_conditions=s,u.next=13;break;case 12:throw Error("Invalid type ".concat((0,X.Z)(s)," for query parameter"));case 13:return u.next=15,this.getClient().wsPromise;case 15:return u.next=17,this.getClient().get(this.getClient().baseURL+"/search",{payload:o});case 17:return u.abrupt("return",u.sent);case 18:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryMembers",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l,c,u,h,m=arguments;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=m.length>1&&void 0!==m[1]?m[1]:[],l=m.length>2&&void 0!==m[2]?m[2]:{},u=this.type,this.id?c=this.id:null!==(r=this.data)&&void 0!==r&&r.members&&Array.isArray(this.data.members)&&(h=this.data.members),v.next=6,this.getClient().get(this.getClient().baseURL+"/members",{payload:ue({type:u,id:c,members:h,sort:ut(o),filter_conditions:s},l)});case 6:return v.abrupt("return",v.sent);case 7:case"end":return v.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"sendReaction",value:function(){var a=(0,g.Z)(d().mark(function n(s,r,o){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s){c.next=2;break}throw Error("Message id is missing");case 2:if(r&&0!==Object.keys(r).length){c.next=4;break}throw Error("Reaction object is missing");case 4:return c.next=6,this.getClient().post(this.getClient().baseURL+"/messages/".concat(s,"/reaction"),ue({reaction:r},o));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));return function e(n,s,r){return a.apply(this,arguments)}}()},{key:"deleteReaction",value:function(e,n,s){if(this._checkInitialized(),!n||!e)throw Error("Deleting a reaction requires specifying both the message and reaction type");var r=this.getClient().baseURL+"/messages/".concat(e,"/reaction/").concat(n);return s?this.getClient().delete(r,{user_id:s}):this.getClient().delete(r,{})}},{key:"update",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o,c=arguments;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1?c[1]:void 0,o=c.length>2?c[2]:void 0,["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(function(m){delete s[m]}),h.next=7,this._update(ue({message:r,data:s},o));case 7:return h.abrupt("return",h.sent);case 8:case"end":return h.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"updatePartial",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().patch(this._channelURL(),s);case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"enableSlowMode",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),{cooldown:s});case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"disableSlowMode",value:function(){var a=(0,g.Z)(d().mark(function n(){var s;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL(),{cooldown:0});case 2:return this.data=(s=o.sent).channel,o.abrupt("return",s);case 5:case"end":return o.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"delete",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().delete(this._channelURL(),ue({},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"truncate",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this._channelURL()+"/truncate",s);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"acceptInvite",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this._update(ue({accept_invite:!0},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"rejectInvite",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this._update(ue({reject_invite:!0},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"addMembers",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(ue({add_members:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"addModerators",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(ue({add_moderators:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"assignRoles",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(ue({assign_roles:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"inviteMembers",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(ue({invites:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeMembers",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(ue({remove_members:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"demoteModerators",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this._update(ue({demote_moderators:s,message:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_update",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getClient().post(this._channelURL(),s);case 2:return this.data=(r=l.sent).channel,l.abrupt("return",r);case 5:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"mute",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",ue({channel_cid:this.cid},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"unmute",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",ue({channel_cid:this.cid},s));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"muteStatus",value:function(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}},{key:"sendAction",value:function(e,n){if(this._checkInitialized(),!e)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+"/messages/".concat(e,"/action"),{message_id:e,form_data:n,id:this.id,type:this.type})}},{key:"keystroke",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(null!==(r=this.getConfig())&&void 0!==r&&r.typing_events){u.next=2;break}return u.abrupt("return");case 2:if(o=new Date,l=this.lastTypingEvent&&o.getTime()-this.lastTypingEvent.getTime(),this.lastKeyStroke=o,this.isTyping=!0,!(null===l||l>2e3)){u.next=10;break}return this.lastTypingEvent=new Date,u.next=10,this.sendEvent({type:"typing.start",parent_id:s});case 10:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"stopTyping",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(null!==(r=this.getConfig())&&void 0!==r&&r.typing_events){l.next=2;break}return l.abrupt("return");case 2:return this.lastTypingEvent=null,this.isTyping=!1,l.next=6,this.sendEvent({type:"typing.stop",parent_id:s});case 6:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"lastMessage",value:function(){var e=this.state.latestMessages.length-5;e<0&&(e=0);var s=this.state.latestMessages.slice(e,this.state.latestMessages.length+1);return s.sort(function(r,o){return o.created_at.getTime()-r.created_at.getTime()}),s[0]}},{key:"markRead",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=o.length>0&&void 0!==o[0]?o[0]:{},this._checkInitialized(),null!==(s=this.getConfig())&&void 0!==s&&s.read_events){c.next=4;break}return c.abrupt("return",Promise.resolve(null));case 4:return c.next=6,this.getClient().post(this._channelURL()+"/read",ue({},r));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"markUnread",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._checkInitialized(),null!==(r=this.getConfig())&&void 0!==r&&r.read_events){l.next=3;break}return l.abrupt("return",Promise.resolve(null));case 3:return l.next=5,this.getClient().post(this._channelURL()+"/unread",ue({},s));case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"clean",value:function(){this.lastKeyStroke&&(new Date).getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&function Os(i,a){i.then().catch(function(e){console.warn("failed to do ".concat(a,", ran into error: "),e)})}(this.stopTyping(),"stop typing event"),this.state.clean()}},{key:"watch",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r={state:!0,watch:!0,presence:!1},u.next=3,this.getClient().wsPromise;case 3:return this.getClient()._hasConnectionID()||(r.watch=!1),o=ue(ue({},r),s),u.next=7,this.query(o,"latest");case 7:return l=u.sent,this.initialized=!0,this.data=l.channel,this._client.logger("info","channel:watch() - started watching channel ".concat(this.cid),{tags:["channel"],channel:this}),u.abrupt("return",l);case 12:case"end":return u.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"stopWatching",value:function(){var a=(0,g.Z)(d().mark(function n(){var s;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL()+"/stop-watching",{});case 2:return s=o.sent,this._client.logger("info","channel:watch() - stopped watching channel ".concat(this.cid),{tags:["channel"],channel:this}),o.abrupt("return",s);case 5:case"end":return o.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"getReplies",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.getClient().get(this.getClient().baseURL+"/messages/".concat(s,"/replies"),ue({},r));case 2:return(o=c.sent).messages&&this.state.addMessagesSorted(o.messages),c.abrupt("return",o);case 5:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getPinnedMessages",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:[],c.next=3,this.getClient().get(this.getClient().baseURL+"/channels/".concat(this.type,"/").concat(this.id,"/pinned_messages"),{payload:ue(ue({},s),{},{sort:ut(r)})});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getReactions",value:function(e,n){return this.getClient().get(this.getClient().baseURL+"/messages/".concat(e,"/reactions"),ue({},n))}},{key:"getMessagesById",value:function(e){return this.getClient().get(this._channelURL()+"/messages",{ids:e.join(",")})}},{key:"lastRead",value:function(){this._checkInitialized();var n=this.getClient().userID;if(n)return this.state.read[n]?this.state.read[n].last_read:null}},{key:"_countMessageAsUnread",value:function(e){var n,s,r,o;return!(e.shadowed||e.silent||e.parent_id&&!e.show_in_channel||(null===(n=e.user)||void 0===n?void 0:n.id)===this.getClient().userID||null!==(s=e.user)&&void 0!==s&&s.id&&this.getClient().userMuteStatus(e.user.id)||"system"===e.type||Array.isArray(null===(r=this.data)||void 0===r?void 0:r.own_capabilities)&&(null===(o=this.data)||void 0===o||!o.own_capabilities.includes("read-events"))||this.muteStatus().muted)}},{key:"countUnread",value:function(e){if(!e)return this.state.unreadCount;for(var n=0,s=0;s<this.state.latestMessages.length;s+=1){var r=this.state.latestMessages[s];r.created_at>e&&this._countMessageAsUnread(r)&&n++}return n}},{key:"countUnreadMentions",value:function(){for(var e=this.lastRead(),n=this.getClient().userID,s=0,r=0;r<this.state.latestMessages.length;r+=1){var o,l=this.state.latestMessages[r];this._countMessageAsUnread(l)&&(!e||l.created_at>e)&&null!==(o=l.mentioned_users)&&void 0!==o&&o.some(function(c){return c.id===n})&&s++}return s}},{key:"query",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l,c,u,h,m,f=arguments;return d().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"current",y.next=3,this.getClient().wsPromise;case 3:return o="".concat(this.getClient().baseURL,"/channels/").concat(this.type),this.id&&(o+="/".concat(this.id)),y.next=7,this.getClient().post(o+"/query",ue({data:this._data,state:!0},s));case 7:return l=y.sent,this.id||(this.id=l.channel.id,this.cid=l.channel.cid,c=l.members.map(function(B){var G;return B.user_id||(null===(G=B.user)||void 0===G?void 0:G.id)}).sort().join(","),(u="".concat(this.type,":!members-").concat(c))in this.getClient().activeChannels&&delete this.getClient().activeChannels[u],this.cid in this.getClient().activeChannels||(this.getClient().activeChannels[this.cid]=this)),this.getClient()._addChannelConfig(l.channel),h=this._initializeState(l,r),m=h.messageSet,this.data=l.channel,this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[l],isLatestMessageSet:m.isLatest}}),y.abrupt("return",l);case 14:case"end":return y.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"banUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().banUser(s,ue(ue({},r),{},{type:this.type,id:this.id}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"hide",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:null,r=o.length>1&&void 0!==o[1]&&o[1],this._checkInitialized(),c.next=5,this.getClient().post("".concat(this._channelURL(),"/hide"),{user_id:s,clear_history:r});case 5:return c.abrupt("return",c.sent);case 6:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"show",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:null,this._checkInitialized(),l.next=4,this.getClient().post("".concat(this._channelURL(),"/show"),{user_id:s});case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"unbanUser",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().unbanUser(s,{type:this.type,id:this.id});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"shadowBan",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._checkInitialized(),l.next=3,this.getClient().shadowBan(s,ue(ue({},r),{},{type:this.type,id:this.id}));case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeShadowBan",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._checkInitialized(),o.next=3,this.getClient().removeShadowBan(s,{type:this.type,id:this.id});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"createCall",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getClient().post(this._channelURL()+"/call",s);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"on",value:function(e,n){var s=this,r=n?e:"all",o=n||e;return r in this.listeners||(this.listeners[r]=[]),this._client.logger("info","Attaching listener for ".concat(r," event on channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[r].push(o),{unsubscribe:function(){s._client.logger("info","Removing listener for ".concat(r," event from channel ").concat(s.cid),{tags:["event","channel"],channel:s}),s.listeners[r]=s.listeners[r].filter(function(c){return c!==o})}}}},{key:"off",value:function(e,n){var s=n?e:"all",r=n||e;s in this.listeners||(this.listeners[s]=[]),this._client.logger("info","Removing listener for ".concat(s," event from channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[s]=this.listeners[s].filter(function(o){return o!==r})}},{key:"_handleChannelEvent",value:function(e){var n,s,r,o,l,c,u,h,m=this;this._client.logger("info","channel:_handleChannelEvent - Received event of type { ".concat(e.type," } on ").concat(this.cid),{tags:["event","channel"],channel:this});var f=m.state;switch(e.type){case"typing.start":null!==(n=e.user)&&void 0!==n&&n.id&&(f.typing[e.user.id]=e);break;case"typing.stop":null!==(s=e.user)&&void 0!==s&&s.id&&delete f.typing[e.user.id];break;case"message.read":var v,y;null!==(r=e.user)&&void 0!==r&&r.id&&e.created_at&&(f.read[e.user.id]={last_read:new Date(e.created_at),user:e.user,unread_messages:0},(null===(v=e.user)||void 0===v?void 0:v.id)===(null===(y=this.getClient().user)||void 0===y?void 0:y.id)&&(f.unreadCount=0));break;case"user.watching.start":case"user.updated":null!==(o=e.user)&&void 0!==o&&o.id&&(f.watchers[e.user.id]=e.user);break;case"user.watching.stop":null!==(l=e.user)&&void 0!==l&&l.id&&delete f.watchers[e.user.id];break;case"message.deleted":e.message&&(this._extendEventWithOwnReactions(e),e.hard_delete?f.removeMessage(e.message):f.addMessageSorted(e.message,!1,!1),f.removeQuotedMessageReferences(e.message),e.message.pinned&&f.removePinnedMessage(e.message));break;case"message.new":if(e.message){var B,G,te,U=(null===(B=e.user)||void 0===B?void 0:B.id)===(null===(G=this.getClient().user)||void 0===G?void 0:G.id);if((this.state.isUpToDate||e.message.parent_id&&!e.message.show_in_channel)&&f.addMessageSorted(e.message,U),e.message.pinned&&f.addPinnedMessage(e.message),null!==(te=e.user)&&void 0!==te&&te.id)for(var ae in f.read)ae===e.user.id?f.read[e.user.id]={last_read:new Date(e.created_at),user:e.user,unread_messages:0}:f.read[ae].unread_messages+=1;U?f.unreadCount=0:this._countMessageAsUnread(e.message)&&(f.unreadCount=f.unreadCount+1)}break;case"message.updated":e.message&&(this._extendEventWithOwnReactions(e),f.addMessageSorted(e.message,!1,!1),e.message.pinned?f.addPinnedMessage(e.message):f.removePinnedMessage(e.message));break;case"channel.truncated":if(null!==(c=e.channel)&&void 0!==c&&c.truncated_at){var se=+new Date(e.channel.truncated_at);f.messageSets.forEach(function(De,Ce){De.messages.forEach(function(Ae){se>+Ae.created_at&&f.removeMessage({id:Ae.id,messageSetIndex:Ce})})}),f.pinnedMessages.forEach(function(De){se>+De.created_at&&f.removePinnedMessage({id:De.id})})}else f.clearMessages();f.unreadCount=0,e.message&&(f.addMessageSorted(e.message),e.message.pinned&&f.addPinnedMessage(e.message));break;case"member.added":case"member.updated":null!==(u=e.member)&&void 0!==u&&u.user_id&&(f.members[e.member.user_id]=e.member);break;case"member.removed":null!==(h=e.user)&&void 0!==h&&h.id&&delete f.members[e.user.id];break;case"channel.updated":var ee,le,fe,_e,ve,he;e.channel&&(m.data=ue(ue({},e.channel),{},{hidden:null!==(ee=null===(le=e.channel)||void 0===le?void 0:le.hidden)&&void 0!==ee?ee:null===(fe=m.data)||void 0===fe?void 0:fe.hidden,own_capabilities:null!==(_e=null===(ve=e.channel)||void 0===ve?void 0:ve.own_capabilities)&&void 0!==_e?_e:null===(he=m.data)||void 0===he?void 0:he.own_capabilities}));break;case"reaction.new":e.message&&e.reaction&&(e.message=f.addReaction(e.reaction,e.message));break;case"reaction.deleted":e.reaction&&(e.message=f.removeReaction(e.reaction,e.message));break;case"reaction.updated":e.reaction&&(e.message=f.addReaction(e.reaction,e.message,!0));break;case"channel.hidden":e.clear_history&&f.clearMessages()}void 0!==e.watcher_count&&(m.state.watcher_count=e.watcher_count)}},{key:"_checkInitialized",value:function(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error("Channel ".concat(this.cid," hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve"))}},{key:"_initializeState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest",s=this.getClient(),r=s.state,o=s.user,l=s.userID;if(e.members){var u,c=hn(e.members);try{for(c.s();!(u=c.n()).done;){var h=u.value;h.user&&r.updateUserReference(h.user,this.cid)}}catch(ee){c.e(ee)}finally{c.f()}}this.state.membership=e.membership||{};var m=e.messages||[];this.state.messages||this.state.initMessages();var v=this.state.addMessagesSorted(m,!1,!0,!0,n).messageSet;if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(e.pinned_messages||[]),e.pending_messages&&(this.state.pending_messages=e.pending_messages),this.state.watcher_count=e.watcher_count||0,e.watchers){var B,y=hn(e.watchers);try{for(y.s();!(B=y.n()).done;){var G=B.value;G&&(r.updateUserReference(G,this.cid),this.state.watchers[G.id]=G)}}catch(ee){y.e(ee)}finally{y.f()}}if(null!=l&&o&&(this.state.read[o.id]={user:o,last_read:this.state.last_message_at||new Date,unread_messages:0}),e.read){var de,U=hn(e.read);try{for(U.s();!(de=U.n()).done;){var ae,se=de.value;this.state.read[se.user.id]={last_read:new Date(se.last_read),unread_messages:null!==(ae=se.unread_messages)&&void 0!==ae?ae:0,user:se.user},se.user.id===o?.id&&(this.state.unreadCount=this.state.read[se.user.id].unread_messages)}}catch(ee){U.e(ee)}finally{U.f()}}return e.members&&(this.state.members=e.members.reduce(function(ee,le){return le.user&&(ee[le.user.id]=le),ee},{})),{messageSet:v}}},{key:"_extendEventWithOwnReactions",value:function(e){if(e.message){var n=this.state.findMessage(e.message.id,e.message.parent_id);n&&(e.message.own_reactions=n.own_reactions)}}},{key:"_disconnect",value:function(){this._client.logger("info","channel:disconnect() - Disconnecting the channel ".concat(this.cid),{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}}]),i;var a}();function zn(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}var Wn=function(){function i(){H(this,i),(0,p.Z)(this,"users",void 0),(0,p.Z)(this,"userChannelReferences",void 0),this.users={},this.userChannelReferences={}}return N(i,[{key:"updateUsers",value:function(e){var s,n=function Js(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Qs(i,a){if(i){if("string"==typeof i)return zn(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zn(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}(e);try{for(n.s();!(s=n.n()).done;)this.updateUser(s.value)}catch(o){n.e(o)}finally{n.f()}}},{key:"updateUser",value:function(e){null!=e&&(this.users[e.id]=e)}},{key:"updateUserReference",value:function(e,n){null!=e&&(this.updateUser(e),this.userChannelReferences[e.id]||(this.userChannelReferences[e.id]={}),this.userChannelReferences[e.id][n]=!0)}},{key:"deleteAllChannelReference",value:function(e){for(var n in this.userChannelReferences)delete this.userChannelReferences[n][e]}}]),i}();function Kn(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Xn(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?Kn(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Kn(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var Vs=function i(){H(this,i),(0,p.Z)(this,"connectionStartTimestamp",void 0),(0,p.Z)(this,"wsConsecutiveFailures",void 0),(0,p.Z)(this,"wsTotalFailures",void 0),(0,p.Z)(this,"instanceClientId",void 0),this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=Ct()},Lt=function(){var i=(0,g.Z)(d().mark(function a(e,n){var s,r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:s=3,r=0;case 2:if(!(r<s)){l.next=17;break}return l.prev=3,l.next=6,M().post("https://chat-insights.getstream.io/insights/".concat(e),n);case 6:l.next=13;break;case 8:return l.prev=8,l.t0=l.catch(3),l.next=12,ct(3e3*(r+1));case 12:return l.abrupt("continue",14);case 13:return l.abrupt("break",17);case 14:r++,l.next=2;break;case 17:case"end":return l.stop()}},a,null,[[3,8]])}));return function(e,n){return i.apply(this,arguments)}}();function Gs(i,a){return Xn(Xn({},a),ei(i))}function ei(i){var a,e,n,s=i.client;return{ready_state:null===(a=i.ws)||void 0===a?void 0:a.readyState,url:i._buildUrl(),api_key:s.key,start_ts:s.insightMetrics.connectionStartTimestamp,end_ts:(new Date).getTime(),auth_type:s.getAuthType(),token:s.tokenManager.token,user_id:s.userID,user_details:s._user,device:s.options.device,client_id:i.connectionID,ws_details:i.ws,ws_consecutive_failures:s.insightMetrics.wsConsecutiveFailures,ws_total_failures:s.insightMetrics.wsTotalFailures,request_id:i.requestID,online:typeof navigator<"u"?null===(e=navigator)||void 0===e?void 0:e.onLine:null,user_agent:typeof navigator<"u"?null===(n=navigator)||void 0===n?void 0:n.userAgent:null,instance_client_id:s.insightMetrics.instanceClientId}}function zs(i){return ei(i)}function ti(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}var Ks=function(a){return void 0!==a.code},Xs=function(a){return void 0!==a.error},ea=function(){function i(a){var e=this,n=a.client;H(this,i),(0,p.Z)(this,"client",void 0),(0,p.Z)(this,"connectionID",void 0),(0,p.Z)(this,"connectionOpen",void 0),(0,p.Z)(this,"consecutiveFailures",void 0),(0,p.Z)(this,"pingInterval",void 0),(0,p.Z)(this,"healthCheckTimeoutRef",void 0),(0,p.Z)(this,"isConnecting",void 0),(0,p.Z)(this,"isDisconnected",void 0),(0,p.Z)(this,"isHealthy",void 0),(0,p.Z)(this,"isResolved",void 0),(0,p.Z)(this,"lastEvent",void 0),(0,p.Z)(this,"connectionCheckTimeout",void 0),(0,p.Z)(this,"connectionCheckTimeoutRef",void 0),(0,p.Z)(this,"rejectPromise",void 0),(0,p.Z)(this,"requestID",void 0),(0,p.Z)(this,"resolvePromise",void 0),(0,p.Z)(this,"totalFailures",void 0),(0,p.Z)(this,"ws",void 0),(0,p.Z)(this,"wsID",void 0),(0,p.Z)(this,"_buildUrl",function(){var s=encodeURIComponent(e.client._buildWSPayload(e.requestID)),r=e.client.tokenManager.getToken();return"".concat(e.client.wsBaseURL,"/connect?json=").concat(s,"&api_key=").concat(e.client.key,"&authorization=").concat(r,"&stream-auth-type=").concat(e.client.getAuthType(),"&X-Stream-Client=").concat(e.client.getUserAgent())}),(0,p.Z)(this,"onlineStatusChanged",function(s){"offline"===s.type?(e._log("onlineStatusChanged() - Status changing to offline"),e._setHealth(!1)):"online"===s.type&&(e._log("onlineStatusChanged() - Status changing to online. isHealthy: ".concat(e.isHealthy)),e.isHealthy||e._reconnect({interval:10}))}),(0,p.Z)(this,"onopen",function(s){e.wsID===s&&e._log("onopen() - onopen callback",{wsID:s})}),(0,p.Z)(this,"onmessage",function(s,r){if(e.wsID===s){e._log("onmessage() - onmessage callback",{event:r,wsID:s});var o="string"==typeof r.data?JSON.parse(r.data):null;if(!e.isResolved&&o){var l,c;if(e.isResolved=!0,o.error)return void(null===(c=e.rejectPromise)||void 0===c||c.call(e,e._errorFromWSEvent(o,!1)));null===(l=e.resolvePromise)||void 0===l||l.call(e,o),e._setHealth(!0)}e.lastEvent=new Date,o&&"health.check"===o.type&&e.scheduleNextPing(),e.client.handleEvent(r),e.scheduleConnectionCheck()}}),(0,p.Z)(this,"onclose",function(s,r){if(e.wsID===s)if(e._log("onclose() - onclose callback - "+r.code,{event:r,wsID:s}),r.code===Ot.WS_CLOSED_SUCCESS){var o,l=new Error("WS connection reject with error ".concat(r.reason));l.reason=r.reason,l.code=r.code,l.wasClean=r.wasClean,l.target=r.target,null===(o=e.rejectPromise)||void 0===o||o.call(e,l),e._log("onclose() - WS connection reject with error ".concat(r.reason),{event:r})}else{var c;e.consecutiveFailures+=1,e.totalFailures+=1,e._setHealth(!1),e.isConnecting=!1,null===(c=e.rejectPromise)||void 0===c||c.call(e,e._errorFromWSEvent(r)),e._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),e._reconnect()}}),(0,p.Z)(this,"onerror",function(s,r){var o;e.wsID===s&&(e.consecutiveFailures+=1,e.totalFailures+=1,e._setHealth(!1),e.isConnecting=!1,null===(o=e.rejectPromise)||void 0===o||o.call(e,e._errorFromWSEvent(r)),e._log("onerror() - WS connection resulted into error",{event:r}),e._reconnect())}),(0,p.Z)(this,"_setHealth",function(s){if(s!==e.isHealthy){if(e.isHealthy=s,e.isHealthy)return void e.client.dispatchEvent({type:"connection.changed",online:e.isHealthy});setTimeout(function(){e.isHealthy||e.client.dispatchEvent({type:"connection.changed",online:e.isHealthy})},5e3)}}),(0,p.Z)(this,"_errorFromWSEvent",function(s){var o,l,c,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ks(s)&&(o=s.code,l="unknown",c=s.reason),Xs(s)&&(o=s.error.code,l=s.error.StatusCode,c=s.error.message),e._log("_errorFromWSEvent() - WS failed with code ".concat(o),{event:s},"warn");var u=new Error("WS failed with code ".concat(o," and reason - ").concat(c));return u.code=o,u.StatusCode=l,u.isWSFailure=r,u}),(0,p.Z)(this,"_setupConnectionPromise",function(){e.isResolved=!1,e.connectionOpen=new Promise(function(s,r){e.resolvePromise=s,e.rejectPromise=r})}),(0,p.Z)(this,"scheduleNextPing",function(){e.healthCheckTimeoutRef&&clearTimeout(e.healthCheckTimeoutRef),e.healthCheckTimeoutRef=setTimeout(function(){var s=[{type:"health.check",client_id:e.client.clientID}];try{var r;null===(r=e.ws)||void 0===r||r.send(JSON.stringify(s))}catch{}},e.pingInterval)}),(0,p.Z)(this,"scheduleConnectionCheck",function(){e.connectionCheckTimeoutRef&&clearTimeout(e.connectionCheckTimeoutRef),e.connectionCheckTimeoutRef=setTimeout(function(){e.lastEvent&&(new Date).getTime()-e.lastEvent.getTime()>e.connectionCheckTimeout&&(e._log("scheduleConnectionCheck - going to reconnect"),e._setHealth(!1),e._reconnect())},e.connectionCheckTimeout)}),this.client=n,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25e3,this.connectionCheckTimeout=this.pingInterval+1e4,Jn(this.onlineStatusChanged)}return N(i,[{key:"_log",value:function(e){this.client.logger(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info","connection:"+e,function Ws(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?ti(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ti(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}({tags:["connection"]},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"setClient",value:function(e){this.client=e}},{key:"connect",value:(a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=o.length>0&&void 0!==o[0]?o[0]:15e3,!this.isConnecting){c.next=3;break}throw Error("You've called connect twice, can only attempt 1 connection at the time");case 3:return this.isDisconnected=!1,c.prev=4,c.next=7,this._connect();case 7:r=c.sent,this.consecutiveFailures=0,this._log("connect() - Established ws connection with healthcheck: ".concat(r)),c.next=23;break;case 12:if(c.prev=12,c.t0=c.catch(4),this.isHealthy=!1,this.consecutiveFailures+=1,c.t0.code!==Ot.TOKEN_EXPIRED||this.client.tokenManager.isStatic()){c.next=21;break}this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}),c.next=23;break;case 21:if(c.t0.isWSFailure){c.next=23;break}throw new Error(JSON.stringify({code:c.t0.code,StatusCode:c.t0.StatusCode,message:c.t0.message,isWSFailure:c.t0.isWSFailure}));case 23:return c.next=25,this._waitForHealthy(s);case 25:return c.abrupt("return",c.sent);case 26:case"end":return c.stop()}},n,this,[[4,12]])})),function e(){return a.apply(this,arguments)})},{key:"_waitForHealthy",value:function(){var a=(0,g.Z)(d().mark(function n(){var r,s=this,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:15e3,c.abrupt("return",Promise.race([(0,g.Z)(d().mark(function u(){var h,m;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:h=50,m=0;case 2:if(!(m<=r)){v.next=18;break}return v.prev=3,v.next=6,s.connectionOpen;case 6:return v.abrupt("return",v.sent);case 9:if(v.prev=9,v.t0=v.catch(3),m!==r){v.next=13;break}throw new Error(JSON.stringify({code:v.t0.code,StatusCode:v.t0.StatusCode,message:v.t0.message,isWSFailure:v.t0.isWSFailure}));case 13:return v.next=15,ct(h);case 15:m+=h,v.next=2;break;case 18:case"end":return v.stop()}},u,null,[[3,9]])}))(),(0,g.Z)(d().mark(function u(){return d().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,ct(r);case 2:throw s.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}));case 4:case"end":return m.stop()}},u)}))()]));case 2:case"end":return c.stop()}},n)}));return function e(){return a.apply(this,arguments)}}()},{key:"disconnect",value:function(e){var n=this;this._log("disconnect() - Closing the websocket connection for wsID ".concat(this.wsID)),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),Qn(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();var s,r=this.ws;return r&&r.close&&r.readyState===r.OPEN?(s=new Promise(function(o){var l=function(u){n._log("disconnect() - resolving isClosedPromise ".concat(u?"with":"without"," close frame"),{event:u}),o()};r.onclose=l,setTimeout(l,e??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(Ot.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),s=Promise.resolve()),delete this.ws,s}},{key:"_connect",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o,l;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)){u.next=2;break}return u.abrupt("return");case 2:return this.isConnecting=!0,this.requestID=Ct(),this.client.insightMetrics.connectionStartTimestamp=(new Date).getTime(),s=!1,u.prev=6,this._log("_connect() - waiting for token"),u.next=10,this.client.tokenManager.tokenReady();case 10:s=!0,u.next=15;break;case 13:u.prev=13,u.t0=u.catch(6);case 15:if(u.prev=15,s){u.next=20;break}return this._log("_connect() - tokenProvider failed before, so going to retry"),u.next=20,this.client.tokenManager.loadToken();case 20:return this._setupConnectionPromise(),r=this._buildUrl(),this._log("_connect() - Connecting to ".concat(r),{wsURL:r,requestID:this.requestID}),this.ws=new(Me())(r),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID),u.next=30,this.connectionOpen;case 30:if(o=u.sent,this.isConnecting=!1,!o){u.next=36;break}return this.connectionID=o.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Lt("ws_success_after_failure",zs(this)),this.client.insightMetrics.wsConsecutiveFailures=0),u.abrupt("return",o);case 36:u.next=44;break;case 38:throw u.prev=38,u.t1=u.catch(15),this.isConnecting=!1,this._log("_connect() - Error - ",u.t1),this.client.options.enableInsights&&(this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++,l=Gs(this,Hs(u.t1)),Lt?.("ws_fatal",l)),u.t1;case 44:case"end":return u.stop()}},n,this,[[6,13],[15,38]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_reconnect",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=o.length>0&&void 0!==o[0]?o[0]:{},this._log("_reconnect() - Initiating the reconnect"),!this.isConnecting&&!this.isHealthy){c.next=5;break}return this._log("_reconnect() - Abort (1) since already connecting or healthy"),c.abrupt("return");case 5:return(r=s.interval)||(r=Qt(this.consecutiveFailures)),c.next=9,ct(r);case 9:if(!this.isConnecting&&!this.isHealthy){c.next=12;break}return this._log("_reconnect() - Abort (2) since already connecting or healthy"),c.abrupt("return");case 12:if(!this.isDisconnected||!this.client.options.enableWSFallback){c.next=15;break}return this._log("_reconnect() - Abort (3) since disconnect() is called"),c.abrupt("return");case 15:if(this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),!s.refreshToken){c.next=20;break}return c.next=20,this.client.tokenManager.loadToken();case 20:return c.prev=20,c.next=23,this._connect();case 23:return this._log("_reconnect() - Waiting for recoverCallBack"),c.next=26,this.client.recoverState();case 26:this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0,c.next=38;break;case 30:if(c.prev=30,c.t0=c.catch(20),this.isHealthy=!1,this.consecutiveFailures+=1,c.t0.code!==Ot.TOKEN_EXPIRED||this.client.tokenManager.isStatic()){c.next=37;break}return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),c.abrupt("return",this._reconnect({refreshToken:!0}));case 37:c.t0.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect());case 38:this._log("_reconnect() - == END ==");case 39:case"end":return c.stop()}},n,this,[[20,30]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_destroyCurrentWSConnection",value:function(){this.wsID+=1;try{var e,n;null==this||null===(e=this.ws)||void 0===e||e.removeAllListeners(),null==this||null===(n=this.ws)||void 0===n||n.close()}catch{}}}]),i;var a}(),ta=null;function ni(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function ii(i,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof a)throw new TypeError("userId should be a string");throw function ia(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?ni(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ni(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}}({user_id:a},e),Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.")}function si(i){var n=W({algorithm:"HS256",noTimestamp:!0},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return ta.sign({server:!0},i,n)}var oa=function i(a){var e=this;H(this,i),(0,p.Z)(this,"loadTokenPromise",void 0),(0,p.Z)(this,"type",void 0),(0,p.Z)(this,"secret",void 0),(0,p.Z)(this,"token",void 0),(0,p.Z)(this,"tokenProvider",void 0),(0,p.Z)(this,"user",void 0),(0,p.Z)(this,"setTokenOrProvider",function(){var n=(0,g.Z)(d().mark(function s(r,o){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e.validateToken(r,o),e.user=o,dn(r)&&(e.tokenProvider=r,e.type="provider"),"string"==typeof r&&(e.token=r,e.type="static"),!r&&e.user&&e.secret&&(e.token=ii(e.secret,o.id,{},{}),e.type="static"),c.next=7,e.loadToken();case 7:case"end":return c.stop()}},s)}));return function(s,r){return n.apply(this,arguments)}}()),(0,p.Z)(this,"reset",function(){e.token=void 0,e.user=void 0,e.loadTokenPromise=null}),(0,p.Z)(this,"validateToken",function(n,s){if(!s||!s.anon||n){if(!e.secret&&!n)throw new Error("User token can not be empty");if(n&&"string"!=typeof n&&!dn(n))throw new Error("user token should either be a string or a function");if("string"==typeof n){if(s.anon&&""===n)return;var r=function sa(i){var a=i.split(".");if(3!==a.length)return"";var n=function(a){var r,c,h,e={},n=String.fromCharCode,s=a.length,o=0,u=0,m="";for(r=0;r<64;r++)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r)]=r;for(c=0;c<s;c++)for(o=(o<<6)+e[a.charAt(c)],u+=6;u>=8;)((h=o>>>(u-=8)&255)||c<s-2)&&(m+=n(h));return m}(a[1]);return JSON.parse(n).user_id}(n);if(null!=n&&(null==r||""===r||r!==s.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}}),(0,p.Z)(this,"tokenReady",function(){return e.loadTokenPromise}),(0,p.Z)(this,"loadToken",function(){return e.loadTokenPromise=new Promise(function(){var n=(0,g.Z)(d().mark(function s(r,o){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("static"!==e.type){c.next=2;break}return c.abrupt("return",r(e.token));case 2:if(!e.tokenProvider||"string"==typeof e.tokenProvider){c.next=13;break}return c.prev=3,c.next=6,e.tokenProvider();case 6:e.token=c.sent,c.next=12;break;case 9:return c.prev=9,c.t0=c.catch(3),c.abrupt("return",o(new Error("Call to tokenProvider failed with message: ".concat(c.t0))));case 12:r(e.token);case 13:case"end":return c.stop()}},s,null,[[3,9]])}));return function(s,r){return n.apply(this,arguments)}}()),e.loadTokenPromise}),(0,p.Z)(this,"getToken",function(){if(e.token||e.user&&e.user.anon&&!e.token)return e.token;if(e.secret)return si(e.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")}),(0,p.Z)(this,"isStatic",function(){return"static"===e.type}),this.loadTokenPromise=null,a&&(this.secret=a),this.type="static",this.secret&&(this.token=si(this.secret))},la={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function ca(i){return void 0!==i.code}function ai(i){if(!i.code)return!1;var a=la["".concat(i.code)];return!!a&&a.retryable}function ua(i){return 46===i.code}function da(i){if("boolean"==typeof i.isWSFailure)return i.isWSFailure;try{return JSON.parse(i.message).isWSFailure}catch{return!1}}function ri(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function gn(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?ri(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ri(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var be=(()=>(function(i){i.Closed="CLOSED",i.Connected="CONNECTED",i.Connecting="CONNECTING",i.Disconnected="DISCONNECTED",i.Init="INIT"}(be||(be={})),be))(),pa=function(){function i(a){var e=this,n=a.client;H(this,i),(0,p.Z)(this,"client",void 0),(0,p.Z)(this,"state",void 0),(0,p.Z)(this,"consecutiveFailures",void 0),(0,p.Z)(this,"connectionID",void 0),(0,p.Z)(this,"cancelToken",void 0),(0,p.Z)(this,"_onlineStatusChanged",function(s){var r;if(e._log("_onlineStatusChanged() - ".concat(s.type)),"offline"===s.type)return e._setState(be.Closed),null===(r=e.cancelToken)||void 0===r||r.cancel("disconnect() is called"),void(e.cancelToken=void 0);"online"===s.type&&e.state===be.Closed&&e.connect(!0)}),(0,p.Z)(this,"_req",function(){var s=(0,g.Z)(d().mark(function r(o,l,c){var u,h;return d().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return!e.cancelToken&&!o.close&&(e.cancelToken=M().CancelToken.source()),f.prev=1,f.next=4,e.client.doAxiosRequest("get",e.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:gn(gn({},l),{},{cancelToken:null===(u=e.cancelToken)||void 0===u?void 0:u.token}),params:o});case 4:return h=f.sent,e.consecutiveFailures=0,f.abrupt("return",h);case 9:if(f.prev=9,f.t0=f.catch(1),e.consecutiveFailures+=1,!c||!ai(f.t0)){f.next=17;break}return e._log("_req() - Retryable error, retrying request"),f.next=16,ct(Qt(e.consecutiveFailures));case 16:return f.abrupt("return",e._req(o,l,c));case 17:throw f.t0;case 18:case"end":return f.stop()}},r,null,[[1,9]])}));return function(r,o,l){return s.apply(this,arguments)}}()),(0,p.Z)(this,"_poll",(0,g.Z)(d().mark(function s(){var r,o,l;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e.state!==be.Connected){u.next=25;break}return u.prev=1,u.next=4,e._req({},{timeout:3e4},!0);case 4:if(null!==(r=(o=u.sent).events)&&void 0!==r&&r.length)for(l=0;l<o.events.length;l++)e.client.dispatchEvent(o.events[l]);u.next=23;break;case 8:if(u.prev=8,u.t0=u.catch(1),!M().isCancel(u.t0)){u.next=13;break}return e._log("_poll() - axios canceled request"),u.abrupt("return");case 13:if(!ua(u.t0)){u.next=18;break}return e._log("_poll() - ConnectionID error, connecting without ID..."),e._setState(be.Disconnected),e.connect(!0),u.abrupt("return");case 18:if(!ca(u.t0)||ai(u.t0)){u.next=21;break}return e._setState(be.Closed),u.abrupt("return");case 21:return u.next=23,ct(Qt(e.consecutiveFailures));case 23:u.next=0;break;case 25:case"end":return u.stop()}},s,null,[[1,8]])}))),(0,p.Z)(this,"connect",(0,g.Z)(d().mark(function s(){var r,l,c=arguments;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(r=c.length>0&&void 0!==c[0]&&c[0],e.state!==be.Connecting){h.next=4;break}return e._log("connect() - connecting already in progress",{reconnect:r},"warn"),h.abrupt("return");case 4:if(e.state!==be.Connected){h.next=7;break}return e._log("connect() - already connected and polling",{reconnect:r},"warn"),h.abrupt("return");case 7:return e._setState(be.Connecting),e.connectionID=void 0,h.prev=9,h.next=12,e._req({json:e.client._buildWSPayload()},{timeout:8e3},r);case 12:return l=h.sent.event,e._setState(be.Connected),e.connectionID=l.connection_id,e.client.dispatchEvent(l),e._poll(),r&&e.client.recoverState(),h.abrupt("return",l);case 22:throw h.prev=22,h.t0=h.catch(9),e._setState(be.Closed),h.t0;case 26:case"end":return h.stop()}},s,null,[[9,22]])}))),(0,p.Z)(this,"isHealthy",function(){return!!e.connectionID&&e.state===be.Connected}),(0,p.Z)(this,"disconnect",(0,g.Z)(d().mark(function s(){var r,o,l,c=arguments;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=c.length>0&&void 0!==c[0]?c[0]:2e3,Qn(e._onlineStatusChanged),e._setState(be.Disconnected),null===(r=e.cancelToken)||void 0===r||r.cancel("disconnect() is called"),e.cancelToken=void 0,l=e.connectionID,e.connectionID=void 0,h.prev=7,h.next=10,e._req({close:!0,connection_id:l},{timeout:o},!1);case 10:e._log("disconnect() - Closed connectionID"),h.next=16;break;case 13:h.prev=13,h.t0=h.catch(7),e._log("disconnect() - Failed",{err:h.t0},"error");case 16:case"end":return h.stop()}},s,null,[[7,13]])}))),this.client=n,this.state=be.Init,this.consecutiveFailures=0,Jn(this._onlineStatusChanged)}return N(i,[{key:"_log",value:function(e){this.client.logger(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info","WSConnectionFallback:"+e,gn({tags:["connection_fallback","connection"]},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"_setState",value:function(e){this._log("_setState() - ".concat(e)),this.state===be.Connecting&&e===be.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(e===be.Closed||e===be.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=e}}]),i}();var fa=function(i){!function Ft(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),a&&Oe(i,a)}(e,i);var a=function ga(i){var a=function ma(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var s,n=Et(i);if(a){var r=Et(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return function vt(i,a){if(a&&("object"===(0,X.Z)(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return me(i)}(this,s)}}(e);function e(){var n;H(this,e);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=a.call.apply(a,[this].concat(r)),(0,p.Z)(me(n),"code",void 0),(0,p.Z)(me(n),"response",void 0),(0,p.Z)(me(n),"status",void 0),n}return e}(cn(Error)),_a=["created_at","updated_at","last_active","online"],va=["params","headers"];function Zt(i,a){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=function Ca(i,a){if(i){if("string"==typeof i)return oi(i,a);var e=Object.prototype.toString.call(i).slice(8,-1);if("Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e)return Array.from(i);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oi(i,a)}}(i))||a&&i&&"number"==typeof i.length){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return r=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!r&&null!=e.return&&e.return()}finally{if(o)throw l}}}}function oi(i,a){(null==a||a>i.length)&&(a=i.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=i[e];return n}function li(i,a){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function $(i){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?li(Object(e),!0).forEach(function(n){(0,p.Z)(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):li(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function yt(i){return"string"==typeof i||i instanceof String}var ci=function(){function i(a,e,n){var r,s=this;H(this,i),(0,p.Z)(this,"_user",void 0),(0,p.Z)(this,"activeChannels",void 0),(0,p.Z)(this,"anonymous",void 0),(0,p.Z)(this,"persistUserOnConnectionFailure",void 0),(0,p.Z)(this,"axiosInstance",void 0),(0,p.Z)(this,"baseURL",void 0),(0,p.Z)(this,"browser",void 0),(0,p.Z)(this,"cleaningIntervalRef",void 0),(0,p.Z)(this,"clientID",void 0),(0,p.Z)(this,"configs",void 0),(0,p.Z)(this,"key",void 0),(0,p.Z)(this,"listeners",void 0),(0,p.Z)(this,"logger",void 0),(0,p.Z)(this,"recoverStateOnReconnect",void 0),(0,p.Z)(this,"mutedChannels",void 0),(0,p.Z)(this,"mutedUsers",void 0),(0,p.Z)(this,"node",void 0),(0,p.Z)(this,"options",void 0),(0,p.Z)(this,"secret",void 0),(0,p.Z)(this,"setUserPromise",void 0),(0,p.Z)(this,"state",void 0),(0,p.Z)(this,"tokenManager",void 0),(0,p.Z)(this,"user",void 0),(0,p.Z)(this,"userAgent",void 0),(0,p.Z)(this,"userID",void 0),(0,p.Z)(this,"wsBaseURL",void 0),(0,p.Z)(this,"wsConnection",void 0),(0,p.Z)(this,"wsFallback",void 0),(0,p.Z)(this,"wsPromise",void 0),(0,p.Z)(this,"consecutiveFailures",void 0),(0,p.Z)(this,"insightMetrics",void 0),(0,p.Z)(this,"defaultWSTimeoutWithFallback",void 0),(0,p.Z)(this,"defaultWSTimeout",void 0),(0,p.Z)(this,"nextRequestAbortController",null),(0,p.Z)(this,"_getConnectionID",function(){var l,c;return(null===(l=s.wsConnection)||void 0===l?void 0:l.connectionID)||(null===(c=s.wsFallback)||void 0===c?void 0:c.connectionID)}),(0,p.Z)(this,"_hasConnectionID",function(){return Boolean(s._getConnectionID())}),(0,p.Z)(this,"connectUser",function(){var l=(0,g.Z)(d().mark(function c(u,h){var m,f;return d().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(u.id){y.next=2;break}throw new Error('The "id" field on the user is missing');case 2:if(s.userID!==u.id||!s.setUserPromise){y.next=5;break}return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),y.abrupt("return",s.setUserPromise);case 5:if(!s.userID){y.next=7;break}throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");case 7:return(s._isUsingServerAuth()||s.node)&&!s.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.userID=u.id,s.anonymous=!1,m=s._setToken(u,h),s._setUser(u),f=s.openConnection(),s.setUserPromise=Promise.all([m,f]).then(function(B){return B[1]}),y.prev=14,y.next=17,s.setUserPromise;case 17:return y.abrupt("return",y.sent);case 20:throw y.prev=20,y.t0=y.catch(14),s.persistUserOnConnectionFailure?s.closeConnection():s.disconnectUser(),y.t0;case 24:case"end":return y.stop()}},c,null,[[14,20]])}));return function(c,u){return l.apply(this,arguments)}}()),(0,p.Z)(this,"setUser",this.connectUser),(0,p.Z)(this,"_setToken",function(l,c){return s.tokenManager.setTokenOrProvider(c,l)}),(0,p.Z)(this,"closeConnection",function(){var l=(0,g.Z)(d().mark(function c(u){var h,m;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return null!=s.cleaningIntervalRef&&(clearInterval(s.cleaningIntervalRef),s.cleaningIntervalRef=void 0),v.next=3,Promise.all([null===(h=s.wsConnection)||void 0===h?void 0:h.disconnect(u),null===(m=s.wsFallback)||void 0===m?void 0:m.disconnect(u)]);case 3:return v.abrupt("return",Promise.resolve());case 4:case"end":return v.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),(0,p.Z)(this,"openConnection",(0,g.Z)(d().mark(function l(){var c,u,h;return d().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s.userID){f.next=2;break}throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");case 2:if(null===(c=s.wsConnection)||void 0===c||!c.isConnecting||!s.wsPromise){f.next=5;break}return s.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),f.abrupt("return",s.wsPromise);case 5:if(!(null!==(u=s.wsConnection)&&void 0!==u&&u.isHealthy||null!==(h=s.wsFallback)&&void 0!==h&&h.isHealthy())||!s._hasConnectionID()){f.next=8;break}return s.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]}),f.abrupt("return",Promise.resolve());case 8:return s.clientID="".concat(s.userID,"--").concat(Ct()),s.wsPromise=s.connect(),s._startCleaning(),f.abrupt("return",s.wsPromise);case 12:case"end":return f.stop()}},l)}))),(0,p.Z)(this,"_setupConnection",this.openConnection),(0,p.Z)(this,"_normalizeDate",function(l){if(l instanceof Date&&(l=l.toISOString()),""===l)throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return l}),(0,p.Z)(this,"disconnectUser",function(){var l=(0,g.Z)(d().mark(function c(u){var h,m,f;return d().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:for(s.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete s.user,delete s._user,delete s.userID,s.anonymous=!1,h=s.closeConnection(u),m=0,f=Object.values(s.activeChannels);m<f.length;m++)f[m]._disconnect();return s.activeChannels={},s.state=new Wn,setTimeout(s.tokenManager.reset),B.abrupt("return",h);case 11:case"end":return B.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),(0,p.Z)(this,"disconnect",this.disconnectUser),(0,p.Z)(this,"connectAnonymousUser",function(){(s._isUsingServerAuth()||s.node)&&!s.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.anonymous=!0,s.userID=Ct();var l={id:s.userID,anon:!0};return s._setToken(l,""),s._setUser(l),s._setupConnection()}),(0,p.Z)(this,"setAnonymousUser",this.connectAnonymousUser),(0,p.Z)(this,"doAxiosRequest",function(){var l=(0,g.Z)(d().mark(function c(u,h,m){var f,v,y,B,G=arguments;return d().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return f=G.length>3&&void 0!==G[3]?G[3]:{},U.next=3,s.tokenManager.tokenReady();case 3:v=s._enrichAxiosOptions(f),U.prev=4,s._logApiRequest(u,h,m,v),U.t0=u,U.next="get"===U.t0?9:"delete"===U.t0?13:"post"===U.t0?17:"put"===U.t0?21:"patch"===U.t0?25:"options"===U.t0?29:33;break;case 9:return U.next=11,s.axiosInstance.get(h,v);case 11:case 15:case 19:case 23:case 27:case 31:return y=U.sent,U.abrupt("break",34);case 13:return U.next=15,s.axiosInstance.delete(h,v);case 17:return U.next=19,s.axiosInstance.post(h,m,v);case 21:return U.next=23,s.axiosInstance.put(h,m,v);case 25:return U.next=27,s.axiosInstance.patch(h,m,v);case 29:return U.next=31,s.axiosInstance.options(h,v);case 33:throw new Error("Invalid request type");case 34:return s._logApiResponse(u,h,y),s.consecutiveFailures=0,U.abrupt("return",s.handleResponse(y));case 39:if(U.prev=39,U.t1=U.catch(4),U.t1.client_request_id=null===(B=v.headers)||void 0===B?void 0:B["x-client-request-id"],s._logApiError(u,h,U.t1),s.consecutiveFailures+=1,!U.t1.response){U.next=56;break}if(U.t1.response.data.code!==Ot.TOKEN_EXPIRED||s.tokenManager.isStatic()){U.next=53;break}if(!(s.consecutiveFailures>1)){U.next=49;break}return U.next=49,ct(Qt(s.consecutiveFailures));case 49:return s.tokenManager.loadToken(),U.next=52,s.doAxiosRequest(u,h,m,f);case 52:return U.abrupt("return",U.sent);case 53:return U.abrupt("return",s.handleResponse(U.t1.response));case 56:throw U.t1;case 57:case"end":return U.stop()}},c,null,[[4,39]])}));return function(c,u,h){return l.apply(this,arguments)}}()),(0,p.Z)(this,"dispatchEvent",function(l){l.received_at||(l.received_at=new Date);var c=s._handleClientEvent(l),u=l.cid,h=u?s.activeChannels[u]:void 0;h&&h._handleChannelEvent(l),s._callClientListeners(l),h&&h._callChannelListeners(l),c.forEach(function(m){return m()})}),(0,p.Z)(this,"handleEvent",function(l){var u=JSON.parse(l.data);s.dispatchEvent(u)}),(0,p.Z)(this,"_updateMemberWatcherReferences",function(l){var c=s.state.userChannelReferences[l.id]||{};for(var u in c){var h=s.activeChannels[u];null!=h&&h.state&&(h.state.members[l.id]&&(h.state.members[l.id].user=l),h.state.watchers[l.id]&&(h.state.watchers[l.id]=l))}}),(0,p.Z)(this,"_updateUserReferences",this._updateMemberWatcherReferences),(0,p.Z)(this,"_updateUserMessageReferences",function(l){var c=s.state.userChannelReferences[l.id]||{};for(var u in c)s.activeChannels[u].state?.updateUserMessages(l)}),(0,p.Z)(this,"_deleteUserMessageReference",function(l){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=s.state.userChannelReferences[l.id]||{};for(var h in u)s.activeChannels[h].state?.deleteUserMessages(l,c)}),(0,p.Z)(this,"_handleUserEvent",function(l){if(l.user){if("user.presence.changed"===l.type||"user.updated"===l.type){if(l.user.id===s.userID){var c=$({},s.user||{}),u=$({},s._user||{});for(var h in s.user)h in l.user||Rs(h)||(delete c[h],delete u[h]);for(var m in l.user)u&&m in u&&(u[m]=l.user[m]);s._user=$({},u),s.user=$($({},c),l.user)}s.state.updateUser(l.user),s._updateMemberWatcherReferences(l.user)}"user.updated"===l.type&&s._updateUserMessageReferences(l.user),"user.deleted"===l.type&&l.user.deleted_at&&(l.mark_messages_deleted||l.hard_delete)&&s._deleteUserMessageReference(l.user,l.hard_delete)}}),(0,p.Z)(this,"_callClientListeners",function(l){var c=s,u=[];c.listeners.all&&u.push.apply(u,F(c.listeners.all)),c.listeners[l.type]&&u.push.apply(u,F(c.listeners[l.type]));for(var h=0,m=u;h<m.length;h++)(0,m[h])(l)}),(0,p.Z)(this,"recoverState",(0,g.Z)(d().mark(function l(){var c;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s.logger("info","client:recoverState() - Start of recoverState with connectionID ".concat(s._getConnectionID()),{tags:["connection"]}),!(c=Object.keys(s.activeChannels)).length||!s.recoverStateOnReconnect){h.next=10;break}return s.logger("info","client:recoverState() - Start the querying of ".concat(c.length," channels"),{tags:["connection","client"]}),h.next=6,s.queryChannels({cid:{$in:c}},{last_message_at:-1},{limit:30});case 6:s.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),s.dispatchEvent({type:"connection.recovered"}),h.next=11;break;case 10:s.dispatchEvent({type:"connection.recovered"});case 11:s.wsPromise=Promise.resolve(),s.setUserPromise=Promise.resolve();case 13:case"end":return h.stop()}},l)}))),(0,p.Z)(this,"getChannelByMembers",function(l,c){var u=F(c.members||[]).sort().join(","),h="".concat(l,":!members-").concat(u);if(!u)throw Error("Please specify atleast one member when creating unique conversation");for(var m in s.activeChannels){var f=s.activeChannels[m];if(!f.disconnected){if(m===h)return f;if(0===m.indexOf("".concat(l,":!members-"))&&Object.keys(f.state.members).sort().join(",")===u)return f}}var y=new pn(s,l,void 0,c);return s.activeChannels[h]=y,y}),(0,p.Z)(this,"getChannelById",function(l,c,u){if("string"==typeof c&&~c.indexOf(":"))throw Error("Invalid channel id ".concat(c,", can't contain the : character"));var h="".concat(l,":").concat(c);if(h in s.activeChannels&&!s.activeChannels[h].disconnected){var m=s.activeChannels[h];return Object.keys(u).length>0&&(m.data=u,m._data=u),m}var f=new pn(s,l,c,u);return s.activeChannels[f.cid]=f,f}),(0,p.Z)(this,"updateUsers",this.upsertUsers),(0,p.Z)(this,"updateUser",this.upsertUser),(0,p.Z)(this,"markAllRead",this.markChannelsRead),(0,p.Z)(this,"_isUsingServerAuth",function(){return!!s.secret}),(0,p.Z)(this,"_buildWSPayload",function(l){return JSON.stringify({user_id:s.userID,user_details:s._user,device:s.options.device,client_request_id:l})}),this.key=a,this.listeners={},this.state=new Wn,this.mutedChannels=[],this.mutedUsers=[],e&&yt(e)&&(this.secret=e);var o=n||(e&&!yt(e)?e:{});this.browser=typeof o.browser<"u"?o.browser:typeof window<"u",this.node=!this.browser,this.options=$({timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0},o),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new ks.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=M().create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+process.env.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=null===(r=this.options)||void 0===r?void 0:r.persistUserOnConnectionFailure,this.tokenManager=new oa(this.secret),this.consecutiveFailures=0,this.insightMetrics=new Vs,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.logger=dn(o.logger)?o.logger:function(){return null},this.recoverStateOnReconnect=this.options.recoverStateOnReconnect}return N(i,[{key:"devToken",value:function(e){return function aa(i){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",Ms(JSON.stringify({user_id:i})),"devtoken"].join(".")}(e)}},{key:"getAuthType",value:function(){return this.anonymous?"anonymous":"jwt"}},{key:"setBaseURL",value:function(e){this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}},{key:"_setUser",value:function(e){this.user=e,this.userID=e.id,this._user=$({},e)}},{key:"updateAppSettings",value:(a=(0,g.Z)(d().mark(function n(s){var r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return null!=(r=s.apn_config)&&r.p12_cert&&(s=$($({},s),{},{apn_config:$($({},r),{},{p12_cert:Buffer.from(r.p12_cert).toString("base64")})})),l.next=4,this.patch(this.baseURL+"/app",s);case 4:return l.abrupt("return",l.sent);case 5:case"end":return l.stop()}},n,this)})),function e(n){return a.apply(this,arguments)})},{key:"revokeTokens",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(s)});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"revokeUserToken",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.revokeUsersToken([s],r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"revokeUsersToken",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l,c;return d().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:r=void 0===r?(new Date).toISOString():this._normalizeDate(r),o=[],l=Zt(s);try{for(l.s();!(c=l.n()).done;)o.push({id:c.value,set:{revoke_tokens_issued_before:r}})}catch(f){l.e(f)}finally{l.f()}return m.next=6,this.partialUpdateUsers(o);case 6:return m.abrupt("return",m.sent);case 7:case"end":return m.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getAppSettings",value:function(){var a=(0,g.Z)(d().mark(function n(){return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(this.baseURL+"/app");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"testPushSettings",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/check_push",$($($($($($($({user_id:s},r.messageID?{message_id:r.messageID}:{}),r.apnTemplate?{apn_template:r.apnTemplate}:{}),r.firebaseTemplate?{firebase_template:r.firebaseTemplate}:{}),r.firebaseDataTemplate?{firebase_data_template:r.firebaseDataTemplate}:{}),r.skipDevices?{skip_devices:!0}:{}),r.pushProviderName?{push_provider_name:r.pushProviderName}:{}),r.pushProviderType?{push_provider_type:r.pushProviderType}:{}));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"testSQSSettings",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.post(this.baseURL+"/check_sqs",s);case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"setGuestUser",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,l;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.anonymous=!0,u.prev=1,u.next=4,this.post(this.baseURL+"/guest",{user:s});case 4:r=u.sent,u.next=11;break;case 7:throw u.prev=7,u.t0=u.catch(1),this.anonymous=!1,u.t0;case 11:return this.anonymous=!1,l=ne(r.user,_a),u.next=15,this.connectUser(l,r.access_token);case 15:return u.abrupt("return",u.sent);case 16:case"end":return u.stop()}},n,this,[[1,7]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"createToken",value:function(e,n,s){if(null==this.secret)throw Error("tokens can only be created server-side using the API Secret");var r={};return n&&(r.exp=n),s&&(r.iat=s),ii(this.secret,e,r,{})}},{key:"on",value:function(e,n){var s=this,r=n?e:"all",o=n||e;return r in this.listeners||(this.listeners[r]=[]),this.logger("info","Attaching listener for ".concat(r," event"),{tags:["event","client"]}),this.listeners[r].push(o),{unsubscribe:function(){s.logger("info","Removing listener for ".concat(r," event"),{tags:["event","client"]}),s.listeners[r]=s.listeners[r].filter(function(c){return c!==o})}}}},{key:"off",value:function(e,n){var s=n?e:"all",r=n||e;s in this.listeners||(this.listeners[s]=[]),this.logger("info","Removing listener for ".concat(s," event"),{tags:["event","client"]}),this.listeners[s]=this.listeners[s].filter(function(o){return o!==r})}},{key:"_logApiRequest",value:function(e,n,s,r){this.logger("info","client: ".concat(e," - Request - ").concat(n),{tags:["api","api_request","client"],url:n,payload:s,config:r})}},{key:"_logApiResponse",value:function(e,n,s){this.logger("info","client:".concat(e," - Response - url: ").concat(n," > status ").concat(s.status),{tags:["api","api_response","client"],url:n,response:s})}},{key:"_logApiError",value:function(e,n,s){this.logger("error","client:".concat(e," - Error - url: ").concat(n),{tags:["api","api_response","client"],url:n,error:s})}},{key:"get",value:function(e,n){return this.doAxiosRequest("get",e,null,{params:n})}},{key:"put",value:function(e,n){return this.doAxiosRequest("put",e,n)}},{key:"post",value:function(e,n){return this.doAxiosRequest("post",e,n)}},{key:"patch",value:function(e,n){return this.doAxiosRequest("patch",e,n)}},{key:"delete",value:function(e,n){return this.doAxiosRequest("delete",e,null,{params:n})}},{key:"sendFile",value:function(e,n,s,r,o){var l=function Bs(i,a,e){var n=new(ye());return function Is(i){return null!==i&&"object"===(0,X.Z)(i)&&(i.readable||"function"==typeof i._read)}(i)||function Ls(i){return null!=i&&null!=i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}(i)||function Zs(i){return typeof window<"u"&&"File"in window&&i instanceof File}(i)||function Us(i){return typeof window<"u"&&"Blob"in window&&i instanceof Blob}(i)?a?n.append("file",i,a):n.append("file",i):n.append("file",{uri:i,name:a||i.split("/").reverse()[0],contentType:e||void 0,type:e||void 0}),n}(n,s,r);return null!=o&&l.append("user",JSON.stringify(o)),this.doAxiosRequest("post",e,l,{headers:l.getHeaders?l.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}},{key:"errorFromResponse",value:function(e){var n;return n=new fa("StreamChat error HTTP code: ".concat(e.status)),e.data&&e.data.code&&((n=new Error("StreamChat error code ".concat(e.data.code,": ").concat(e.data.message))).code=e.data.code),n.response=e,n.status=e.status,n}},{key:"handleResponse",value:function(e){var n=e.data;if(function ha(i){return!i.status||i.status<200||300<=i.status}(e))throw this.errorFromResponse(e);return n}},{key:"_handleClientEvent",value:function(e){var n,r,m,s=this,o=this,l=[];if(this.logger("info","client:_handleClientEvent - Received event of type { ".concat(e.type," }"),{tags:["event","client"],event:e}),("user.presence.changed"===e.type||"user.updated"===e.type||"user.deleted"===e.type)&&this._handleUserEvent(e),"health.check"===e.type&&e.me&&(o.user=e.me,o.state.updateUser(e.me),o.mutedChannels=e.me.channel_mutes,o.mutedUsers=e.me.mutes),e.channel&&"notification.message_new"===e.type&&this._addChannelConfig(e.channel),"notification.channel_mutes_updated"===e.type&&null!==(n=e.me)&&void 0!==n&&n.channel_mutes){var c=[],u=[];this.mutedChannels.forEach(function(f){return f.channel&&c.push(f.channel.cid)}),e.me.channel_mutes.forEach(function(f){return f.channel&&u.push(f.channel.cid)}),c.forEach(function(f){!u.includes(f)&&s.activeChannels[f]&&(s.activeChannels[f].state.unreadCount=0)}),this.mutedChannels=e.me.channel_mutes}return"notification.mutes_updated"===e.type&&null!==(r=e.me)&&void 0!==r&&r.mutes&&(this.mutedUsers=e.me.mutes),"notification.mark_read"===e.type&&0===e.unread_channels&&Object.keys(this.activeChannels).forEach(function(f){return s.activeChannels[f].state.unreadCount=0}),"channel.deleted"!==e.type&&"notification.channel_deleted"!==e.type||!e.cid||(o.state.deleteAllChannelReference(e.cid),null===(m=this.activeChannels[e.cid])||void 0===m||m._disconnect(),l.push(function(){e.cid&&delete s.activeChannels[e.cid]})),l}},{key:"_muteStatus",value:function(e){for(var n,s=0;s<this.mutedChannels.length;s++){var r,o=this.mutedChannels[s];if((null===(r=o.channel)||void 0===r?void 0:r.cid)===e){n={muted:!o.expires||new Date(o.expires).getTime()>(new Date).getTime(),createdAt:o.created_at?new Date(o.created_at):new Date,expiresAt:o.expires?new Date(o.expires):null};break}}return n||{muted:!1,createdAt:null,expiresAt:null}}},{key:"connect",value:function(){var a=(0,g.Z)(d().mark(function n(){return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.userID&&this._user){r.next=2;break}throw Error("Call connectUser or connectAnonymousUser before starting the connection");case 2:if(this.wsBaseURL){r.next=4;break}throw Error("Websocket base url not set");case 4:if(this.clientID){r.next=6;break}throw Error("clientID is not set");case 6:if(!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new ea({client:this}),r.prev=8,!this.wsFallback){r.next=13;break}return r.next=12,this.wsFallback.connect();case 12:case 15:case 28:return r.abrupt("return",r.sent);case 13:return r.next=15,this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout);case 18:if(r.prev=18,r.t0=r.catch(8),!(this.options.enableWSFallback&&da(r.t0)&&qs())){r.next=29;break}return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new pa({client:this}),r.next=28,this.wsFallback.connect();case 29:throw r.t0;case 30:case"end":return r.stop()}},n,this,[[8,18]])}));return function e(){return a.apply(this,arguments)}}()},{key:"_sayHi",value:function(){var e=this,n=Ct();this.doAxiosRequest("get",this.baseURL+"/hi",null,{headers:{"x-client-request-id":n}}).catch(function(r){e.options.enableInsights&&Lt("http_hi_failed",{api_key:e.key,err:r,client_request_id:n})})}},{key:"queryUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l,c,u=arguments;return d().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:[],o=u.length>2&&void 0!==u[2]?u[2]:{},l={presence:!1},m.next=5,this.wsPromise;case 5:return this._hasConnectionID()||(l.presence=!1),m.next=8,this.get(this.baseURL+"/users",{payload:$($({filter_conditions:s,sort:ut(r)},l),o)});case 8:return this.state.updateUsers((c=m.sent).users),m.abrupt("return",c);case 11:case"end":return m.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryBannedUsers",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=l.length>0&&void 0!==l[0]?l[0]:{},r=l.length>1&&void 0!==l[1]?l[1]:[],o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=5,this.get(this.baseURL+"/query_banned_users",{payload:$({filter_conditions:s,sort:ut(r)},o)});case 5:return u.abrupt("return",u.sent);case 6:case"end":return u.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"queryMessageFlags",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.get(this.baseURL+"/moderation/flags/message",{payload:$({filter_conditions:s},r)});case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"queryChannels",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l,c,u,h,m=arguments;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:[],o=m.length>2&&void 0!==m[2]?m[2]:{},l=m.length>3&&void 0!==m[3]?m[3]:{},c={state:!0,watch:!0,presence:!1},v.next=6,this.wsPromise;case 6:return this._hasConnectionID()||(c.watch=!1),u=$($({filter_conditions:s,sort:ut(r)},c),o),v.next=10,this.post(this.baseURL+"/channels",u);case 10:return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:(h=v.sent).channels,isLatestMessageSet:!0}}),v.abrupt("return",this.hydrateActiveChannels(h.channels,l));case 13:case"end":return v.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"hydrateActiveChannels",value:function(){var c,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.skipInitialization,r=n.offlineMode,o=void 0!==r&&r,l=Zt(e);try{for(l.s();!(c=l.n()).done;)this._addChannelConfig(c.value.channel)}catch(te){l.e(te)}finally{l.f()}var f,h=[],m=Zt(e);try{for(m.s();!(f=m.n()).done;){var v=f.value,y=this.channel(v.channel.type,v.channel.id);y.data=v.channel,y.offlineMode=o,y.initialized=!o,void 0===s?y._initializeState(v,"latest"):s.includes(v.channel.id)||(y.state.clearMessages(),y._initializeState(v,"latest")),h.push(y)}}catch(te){m.e(te)}finally{m.f()}if(!o)for(var B in this.activeChannels)this.activeChannels[B].offlineMode&&delete this.activeChannels[B];return h}},{key:"search",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l,c=arguments;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(o=c.length>2&&void 0!==c[2]?c[2]:{}).offset||!o.sort&&!o.next){h.next=3;break}throw Error("Cannot specify offset with sort or next parameters");case 3:if(l=$($({filter_conditions:s},o),{},{sort:o.sort?ut(o.sort):void 0}),"string"!=typeof r){h.next=8;break}l.query=r,h.next=13;break;case 8:if("object"!==(0,X.Z)(r)){h.next=12;break}l.message_filter_conditions=r,h.next=13;break;case 12:throw Error("Invalid type ".concat((0,X.Z)(r)," for query parameter"));case 13:return h.next=15,this.wsPromise;case 15:return h.next=17,this.get(this.baseURL+"/search",{payload:l});case 17:return h.abrupt("return",h.sent);case 18:case"end":return h.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"setLocalDevice",value:function(e){var n,s,r;if(null!==(n=this.wsConnection)&&void 0!==n&&n.isConnecting&&this.wsPromise||(null!==(s=this.wsConnection)&&void 0!==s&&s.isHealthy||null!==(r=this.wsFallback)&&void 0!==r&&r.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=e}},{key:"addDevice",value:function(){var a=(0,g.Z)(d().mark(function n(s,r,o,l){return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.post(this.baseURL+"/devices",$($({id:s,push_provider:r},null!=o?{user_id:o}:{}),null!=l?{push_provider_name:l}:{}));case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},n,this)}));return function e(n,s,r,o){return a.apply(this,arguments)}}()},{key:"getDevices",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/devices",s?{user_id:s}:{});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"removeDevice",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/devices",$({id:s},r?{user_id:r}:{}));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getRateLimits",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,h;return d().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.get(this.baseURL+"/rate_limits",{server_side:(r=s||{}).serverSide,web:r.web,android:r.android,ios:r.ios,endpoints:(h=r.endpoints)?h.join(","):void 0}));case 2:case"end":return f.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_addChannelConfig",value:function(e){this.configs[e.cid]=e.config}},{key:"channel",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~e.indexOf(":"))throw Error("Invalid channel group ".concat(e,", can't contain the : character"));return null==n||""===n?new pn(this,e,void 0,s):"object"===(0,X.Z)(n)?this.getChannelByMembers(e,n):this.getChannelById(e,n,s)}},{key:"partialUpdateUser",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.partialUpdateUsers([s]);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o,l,c;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:r={},o=Zt(s),h.prev=2,o.s();case 4:if((l=o.n()).done){h.next=11;break}if((c=l.value).id){h.next=8;break}throw Error("User ID is required when updating a user");case 8:r[c.id]=c;case 9:h.next=4;break;case 11:h.next=16;break;case 13:h.prev=13,h.t0=h.catch(2),o.e(h.t0);case 16:return h.prev=16,o.f(),h.finish(16);case 19:return h.next=21,this.post(this.baseURL+"/users",{users:r});case 21:return h.abrupt("return",h.sent);case 22:case"end":return h.stop()}},n,this,[[2,13,16,19]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertUser",value:function(e){return this.upsertUsers([e])}},{key:"partialUpdateUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=Zt(s),u.prev=1,r.s();case 3:if((o=r.n()).done){u.next=9;break}if(o.value.id){u.next=7;break}throw Error("User ID is required when updating a user");case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),r.e(u.t0);case 14:return u.prev=14,r.f(),u.finish(14);case 17:return u.next=19,this.patch(this.baseURL+"/users",{users:s});case 19:return u.abrupt("return",u.sent);case 20:case"end":return u.stop()}},n,this,[[1,11,14,17]])}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/users/".concat(s),r);case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"restoreUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/users/restore",{user_ids:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"reactivateUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/".concat(s,"/reactivate"),$({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"reactivateUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/reactivate",$({user_ids:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deactivateUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/".concat(s,"/deactivate"),$({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deactivateUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/users/deactivate",$({user_ids:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"exportUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.get(this.baseURL+"/users/".concat(s,"/export"),$({},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"banUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/moderation/ban",$({target_user_id:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"unbanUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.delete(this.baseURL+"/moderation/ban",$({target_user_id:s},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"shadowBan",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.banUser(s,$({shadow:!0},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"removeShadowBan",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.unbanUser(s,$({shadow:!0},r));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"muteUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this.post(this.baseURL+"/moderation/mute",$($({target_id:s},r?{user_id:r}:{}),o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"unmuteUser",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/moderation/unmute",$({target_id:s},r?{user_id:r}:{}));case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"userMuteStatus",value:function(e){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(var n=0;n<this.mutedUsers.length;n+=1)if(this.mutedUsers[n].target.id===e)return!0;return!1}},{key:"flagMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/flag",$({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"flagUser",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/flag",$({target_user_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"unflagMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unflag",$({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"unflagUser",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unflag",$({target_user_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getCallToken",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/calls/".concat(s),$({},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_queryFlags",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.post(this.baseURL+"/moderation/flags",$({filter_conditions:s},r));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"_queryFlagReports",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=4,this.post(this.baseURL+"/moderation/reports",$({filter_conditions:s},r));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"_reviewFlagReport",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o,l=arguments;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:{},u.next=3,this.patch(this.baseURL+"/moderation/reports/".concat(s),$({review_result:r},o));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_unblockMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/moderation/unblock_message",$({target_message_id:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"markChannelsRead",value:function(){var a=(0,g.Z)(d().mark(function n(){var s,r=arguments;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=r.length>0&&void 0!==r[0]?r[0]:{},l.next=3,this.post(this.baseURL+"/channels/read",$({},s));case 3:case"end":return l.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"createCommand",value:function(e){return this.post(this.baseURL+"/commands",e)}},{key:"getCommand",value:function(e){return this.get(this.baseURL+"/commands/".concat(e))}},{key:"updateCommand",value:function(e,n){return this.put(this.baseURL+"/commands/".concat(e),n)}},{key:"deleteCommand",value:function(e){return this.delete(this.baseURL+"/commands/".concat(e))}},{key:"listCommands",value:function(){return this.get(this.baseURL+"/commands")}},{key:"createChannelType",value:function(e){var n=W({},{commands:["all"]},e);return this.post(this.baseURL+"/channeltypes",n)}},{key:"getChannelType",value:function(e){return this.get(this.baseURL+"/channeltypes/".concat(e))}},{key:"updateChannelType",value:function(e,n){return this.put(this.baseURL+"/channeltypes/".concat(e),n)}},{key:"deleteChannelType",value:function(e){return this.delete(this.baseURL+"/channeltypes/".concat(e))}},{key:"listChannelTypes",value:function(){return this.get(this.baseURL+"/channeltypes")}},{key:"translateMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post(this.baseURL+"/messages/".concat(s,"/translate"),{language:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_normalizeExpiration",value:function(e){var n=null;if("number"==typeof e){var s=new Date;s.setSeconds(s.getSeconds()+e),n=s.toISOString()}else yt(e)?n=e:e instanceof Date&&(n=e.toISOString());return n}},{key:"_validateAndGetMessageId",value:function(e,n){var s;if("string"==typeof e)s=e;else{if(!e.id)throw Error(n);s=e.id}return s}},{key:"pinMessage",value:function(e,n,s,r){var o=this._validateAndGetMessageId(e,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(o,{set:{pinned:!0,pin_expires:this._normalizeExpiration(n),pinned_at:this._normalizeExpiration(r)}},s)}},{key:"unpinMessage",value:function(e,n){var s=this._validateAndGetMessageId(e,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(s,{set:{pinned:!1}},n)}},{key:"updateMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s,r,o){var l;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s.id){h.next=2;break}throw Error("Please specify the message id when calling updateMessage");case 2:return delete(l=W({},s)).id,["command","created_at","html","latest_reactions","own_reactions","quoted_message","reaction_counts","reply_count","type","updated_at","user","__html"].forEach(function(m){null!=l[m]&&delete l[m]}),null!=r&&(yt(r)?l.user_id=r:l.user={id:r.id}),Array.isArray(l.mentioned_users)&&!yt(l.mentioned_users[0])&&(l.mentioned_users=l.mentioned_users.map(function(m){return m.id})),h.next=10,this.post(this.baseURL+"/messages/".concat(s.id),$({message:l},o));case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},n,this)}));return function e(n,s,r){return a.apply(this,arguments)}}()},{key:"partialUpdateMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s,r,o,l){var c;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s){h.next=2;break}throw Error("Please specify the message id when calling partialUpdateMessage");case 2:return c=o,null!=o&&yt(o)&&(c={id:o}),h.next=6,this.put(this.baseURL+"/messages/".concat(s),$($($({},r),l),{},{user:c}));case 6:return h.abrupt("return",h.sent);case 7:case"end":return h.stop()}},n,this)}));return function e(n,s,r,o){return a.apply(this,arguments)}}()},{key:"deleteMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o={},r&&(o={hard:!0}),c.next=4,this.delete(this.baseURL+"/messages/".concat(s),o);case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"getMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/messages/".concat(s));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getUserAgent",value:function(){return this.userAgent||"stream-chat-javascript-client-".concat(this.node?"node":"browser","-","8.4.1")}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"_enrichAxiosOptions",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}},s=this._getToken(),r=s?{Authorization:s}:void 0,o=null;null!==this.nextRequestAbortController&&(o=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),null!==(e=n.headers)&&void 0!==e&&e["x-client-request-id"]||(n.headers=$($({},n.headers),{},{"x-client-request-id":Ct()}));var l=this.options.axiosRequestConfig||{},c=l.params,u=l.headers,h=ne(l,va);return $($($({params:$($({user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key},n.params),c||{}),headers:$($($({},r),{},{"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent()},n.headers),u||{})},o?{signal:o}:{}),n.config),h||{})}},{key:"_getToken",value:function(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}},{key:"_startCleaning",value:function(){var e=this;null==this.cleaningIntervalRef&&(this.cleaningIntervalRef=setInterval(function(){for(var n=0,s=Object.values(e.activeChannels);n<s.length;n++)s[n].clean()},500))}},{key:"verifyWebhook",value:function(e,n){return!!this.secret&&function ra(i,a,e){var n=Buffer.from(a,"ascii");return null.createHmac("sha256",n).update(i).digest("hex")===e}(e,this.secret,n)}},{key:"getPermission",value:function(e){return this.get("".concat(this.baseURL,"/permissions/").concat(e))}},{key:"createPermission",value:function(e){return this.post("".concat(this.baseURL,"/permissions"),$({},e))}},{key:"updatePermission",value:function(e,n){return this.put("".concat(this.baseURL,"/permissions/").concat(e),$({},n))}},{key:"deletePermission",value:function(e){return this.delete("".concat(this.baseURL,"/permissions/").concat(e))}},{key:"listPermissions",value:function(){return this.get("".concat(this.baseURL,"/permissions"))}},{key:"createRole",value:function(e){return this.post("".concat(this.baseURL,"/roles"),{name:e})}},{key:"listRoles",value:function(){return this.get("".concat(this.baseURL,"/roles"))}},{key:"deleteRole",value:function(e){return this.delete("".concat(this.baseURL,"/roles/").concat(e))}},{key:"sync",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.post("".concat(this.baseURL,"/sync"),$({channel_cids:e,last_sync_at:n},s))}},{key:"sendUserCustomEvent",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.post("".concat(this.baseURL,"/users/").concat(s,"/event"),{event:r});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"createBlockList",value:function(e){return this.post("".concat(this.baseURL,"/blocklists"),e)}},{key:"listBlockLists",value:function(){return this.get("".concat(this.baseURL,"/blocklists"))}},{key:"getBlockList",value:function(e){return this.get("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"updateBlockList",value:function(e,n){return this.put("".concat(this.baseURL,"/blocklists/").concat(e),n)}},{key:"deleteBlockList",value:function(e){return this.delete("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"exportChannels",value:function(e){var s=$({channels:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return this.post("".concat(this.baseURL,"/export_channels"),s)}},{key:"exportUsers",value:function(e){return this.post("".concat(this.baseURL,"/export/users"),e)}},{key:"exportChannel",value:function(e,n){return this.exportChannels([e],n)}},{key:"getExportChannelStatus",value:function(e){return this.get("".concat(this.baseURL,"/export_channels/").concat(e))}},{key:"createSegment",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post(this.baseURL+"/segments",{segment:s});case 2:return c.abrupt("return",c.sent.segment);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"querySegments",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/segments",{payload:$({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"updateSegment",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.put(this.baseURL+"/segments/".concat(s),{segment:r});case 2:return u.abrupt("return",u.sent.segment);case 5:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deleteSegment",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.delete(this.baseURL+"/segments/".concat(s)));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"createCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post(this.baseURL+"/campaigns",{campaign:s});case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"queryCampaigns",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/campaigns",{payload:$({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"updateCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.put(this.baseURL+"/campaigns/".concat(s),{campaign:r});case 2:return u.abrupt("return",u.sent.campaign);case 5:case"end":return u.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"deleteCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.abrupt("return",this.delete(this.baseURL+"/campaigns/".concat(s),r));case 2:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"scheduleCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=r.scheduledFor,h.next=3,this.patch(this.baseURL+"/campaigns/".concat(s,"/schedule"),{scheduled_for:o});case 3:return h.abrupt("return",h.sent.campaign);case 6:case"end":return h.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"stopCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.patch(this.baseURL+"/campaigns/".concat(s,"/stop"));case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"resumeCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.patch(this.baseURL+"/campaigns/".concat(s,"/resume"));case 2:return c.abrupt("return",c.sent.campaign);case 5:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"testCampaign",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){var o;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=r.users,c.next=3,this.post(this.baseURL+"/campaigns/".concat(s,"/test"),{users:o});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"queryRecipients",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.get(this.baseURL+"/recipients",{payload:$({filter_conditions:s},r)});case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"enrichURL",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.get(this.baseURL+"/og",{url:s}));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"getTask",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.get("".concat(this.baseURL,"/tasks/").concat(s)));case 1:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteChannels",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},c.next=3,this.post(this.baseURL+"/channels/delete",$({cids:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deleteUsers",value:function(){var a=(0,g.Z)(d().mark(function n(s,r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if("soft"===r?.user||"hard"===r?.user){l.next=2;break}throw new Error("Invalid delete user options. user must be one of [soft hard]");case 2:if(void 0===r.messages||"soft"===r.messages||"hard"===r.messages){l.next=4;break}throw new Error("Invalid delete user options. messages must be one of [soft hard]");case 4:if(void 0===r.conversations||"soft"===r.conversations||"hard"===r.conversations){l.next=6;break}throw new Error("Invalid delete user options. conversations must be one of [soft hard]");case 6:return l.next=8,this.post(this.baseURL+"/users/delete",$({user_ids:s},r));case 8:return l.abrupt("return",l.sent);case 9:case"end":return l.stop()}},n,this)}));return function e(n,s){return a.apply(this,arguments)}}()},{key:"_createImportURL",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/import_urls",{filename:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_createImport",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o=arguments;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{mode:"upsert"},c.next=3,this.post(this.baseURL+"/imports",$({path:s},r));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_getImport",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/imports/".concat(s));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"_listImports",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.get(this.baseURL+"/imports",s);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"upsertPushProvider",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/push_providers",{push_provider:s});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"deletePushProvider",value:function(){var a=(0,g.Z)(d().mark(function n(s){var r,o;return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=s.type,o=s.name,c.next=3,this.delete(this.baseURL+"/push_providers/".concat(r,"/").concat(o));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()},{key:"listPushProviders",value:function(){var a=(0,g.Z)(d().mark(function n(){return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(this.baseURL+"/push_providers");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}));return function e(){return a.apply(this,arguments)}}()},{key:"createAbortControllerForNextRequest",value:function(){return this.nextRequestAbortController=new AbortController}},{key:"commitMessage",value:function(){var a=(0,g.Z)(d().mark(function n(s){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.post(this.baseURL+"/messages/".concat(s,"/commit"));case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},n,this)}));return function e(n){return a.apply(this,arguments)}}()}],[{key:"getInstance",value:function(e,n,s){return i._instance||(i._instance="string"==typeof n?new i(e,n,s):new i(e,n)),i._instance}}]),i;var a}();(0,p.Z)(ci,"_instance",void 0);var Vt,ui="Allow",mn=["*"],fn=["*"],di=function i(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fn,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ui;H(this,i),(0,p.Z)(this,"name",void 0),(0,p.Z)(this,"action",void 0),(0,p.Z)(this,"owner",void 0),(0,p.Z)(this,"priority",void 0),(0,p.Z)(this,"resources",void 0),(0,p.Z)(this,"roles",void 0),this.name=a,this.action=o,this.owner=r,this.priority=e,this.resources=n,this.roles=s},wa=(new di("Allow all",999,mn,fn,!1,ui),new di("Deny all",1,mn,fn,!1,"Deny"),_(4782)),bt=_(590),Ut=_(9300),Ta=_(5698),Rt=_(8505),hi=_(8675),pi=_(1884),xa=_(8372),Ma=new Uint8Array(16);function Sa(){if(!Vt&&!(Vt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vt(Ma)}const ka=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Fa=function Aa(i){return"string"==typeof i&&ka.test(i)};for(var Se=[],_n=0;_n<256;++_n)Se.push((_n+256).toString(16).substr(1));const vn=function Ia(i,a,e){var n=(i=i||{}).random||(i.rng||Sa)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,a){e=e||0;for(var s=0;s<16;++s)a[e+s]=n[s];return a}return function Ea(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Se[i[a+0]]+Se[i[a+1]]+Se[i[a+2]]+Se[i[a+3]]+"-"+Se[i[a+4]]+Se[i[a+5]]+"-"+Se[i[a+6]]+Se[i[a+7]]+"-"+Se[i[a+8]]+Se[i[a+9]]+"-"+Se[i[a+10]]+Se[i[a+11]]+Se[i[a+12]]+Se[i[a+13]]+Se[i[a+14]]+Se[i[a+15]]).toLowerCase();if(!Fa(e))throw TypeError("Stringified UUID is invalid");return e}(n)};var we=_(6188),Z=_(6895),La=_(3431),Za=_.n(La),Ua=_(1764),gi=_.n(Ua),Ra=_(563),Ba=_.n(Ra);function Ue(i){if(null==i)return window;if("[object Window]"!==i.toString()){var a=i.ownerDocument;return a&&a.defaultView||window}return i}function dt(i){return i instanceof Ue(i).Element||i instanceof Element}function je(i){return i instanceof Ue(i).HTMLElement||i instanceof HTMLElement}function Cn(i){return!(typeof ShadowRoot>"u")&&(i instanceof Ue(i).ShadowRoot||i instanceof ShadowRoot)}var ht=Math.max,Gt=Math.min,Dt=Math.round;function yn(){var i=navigator.userAgentData;return null!=i&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function mi(){return!/^((?!chrome|android).)*safari/i.test(yn())}function wt(i,a,e){void 0===a&&(a=!1),void 0===e&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;a&&je(i)&&(s=i.offsetWidth>0&&Dt(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&Dt(n.height)/i.offsetHeight||1);var l=(dt(i)?Ue(i):window).visualViewport,c=!mi()&&e,u=(n.left+(c&&l?l.offsetLeft:0))/s,h=(n.top+(c&&l?l.offsetTop:0))/r,m=n.width/s,f=n.height/r;return{width:m,height:f,top:h,right:u+m,bottom:h+f,left:u,x:u,y:h}}function bn(i){var a=Ue(i);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function Ve(i){return i?(i.nodeName||"").toLowerCase():null}function nt(i){return((dt(i)?i.ownerDocument:i.document)||window.document).documentElement}function Dn(i){return wt(nt(i)).left+bn(i).scrollLeft}function Xe(i){return Ue(i).getComputedStyle(i)}function wn(i){var a=Xe(i);return/auto|scroll|overlay|hidden/.test(a.overflow+a.overflowY+a.overflowX)}function Ha(i,a,e){void 0===e&&(e=!1);var n=je(a),s=je(a)&&function $a(i){var a=i.getBoundingClientRect(),e=Dt(a.width)/i.offsetWidth||1,n=Dt(a.height)/i.offsetHeight||1;return 1!==e||1!==n}(a),r=nt(a),o=wt(i,s,e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!e)&&(("body"!==Ve(a)||wn(r))&&(l=function ja(i){return i!==Ue(i)&&je(i)?function Na(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}(i):bn(i)}(a)),je(a)?((c=wt(a,!0)).x+=a.clientLeft,c.y+=a.clientTop):r&&(c.x=Dn(r))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Tn(i){var a=wt(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(a.width-e)<=1&&(e=a.width),Math.abs(a.height-n)<=1&&(n=a.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function zt(i){return"html"===Ve(i)?i:i.assignedSlot||i.parentNode||(Cn(i)?i.host:null)||nt(i)}function fi(i){return["html","body","#document"].indexOf(Ve(i))>=0?i.ownerDocument.body:je(i)&&wn(i)?i:fi(zt(i))}function Bt(i,a){var e;void 0===a&&(a=[]);var n=fi(i),s=n===(null==(e=i.ownerDocument)?void 0:e.body),r=Ue(n),o=s?[r].concat(r.visualViewport||[],wn(n)?n:[]):n,l=a.concat(o);return s?l:l.concat(Bt(zt(o)))}function qa(i){return["table","td","th"].indexOf(Ve(i))>=0}function _i(i){return je(i)&&"fixed"!==Xe(i).position?i.offsetParent:null}function Pt(i){for(var a=Ue(i),e=_i(i);e&&qa(e)&&"static"===Xe(e).position;)e=_i(e);return e&&("html"===Ve(e)||"body"===Ve(e)&&"static"===Xe(e).position)?a:e||function Ya(i){var a=/firefox/i.test(yn());if(/Trident/i.test(yn())&&je(i)&&"fixed"===Xe(i).position)return null;var s=zt(i);for(Cn(s)&&(s=s.host);je(s)&&["html","body"].indexOf(Ve(s))<0;){var r=Xe(s);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||a&&"filter"===r.willChange||a&&r.filter&&"none"!==r.filter)return s;s=s.parentNode}return null}(i)||a}var Ie="top",$e="bottom",He="right",Le="left",xn="auto",Nt=[Ie,$e,He,Le],Tt="start",jt="end",Ja="clippingParents",vi="viewport",$t="popper",Qa="reference",Ci=Nt.reduce(function(i,a){return i.concat([a+"-"+Tt,a+"-"+jt])},[]),yi=[].concat(Nt,[xn]).reduce(function(i,a){return i.concat([a,a+"-"+Tt,a+"-"+jt])},[]),ir=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function sr(i){var a=new Map,e=new Set,n=[];function s(r){e.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach(function(l){if(!e.has(l)){var c=a.get(l);c&&s(c)}}),n.push(r)}return i.forEach(function(r){a.set(r.name,r)}),i.forEach(function(r){e.has(r.name)||s(r)}),n}function rr(i){var a;return function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}}var bi={placement:"bottom",modifiers:[],strategy:"absolute"};function Di(){for(var i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return!a.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function lr(i){void 0===i&&(i={});var e=i.defaultModifiers,n=void 0===e?[]:e,s=i.defaultOptions,r=void 0===s?bi:s;return function(l,c,u){void 0===u&&(u=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},bi,r),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],f=!1,v={state:h,setOptions:function(te){var U="function"==typeof te?te(h.options):te;B(),h.options=Object.assign({},r,h.options,U),h.scrollParents={reference:dt(l)?Bt(l):l.contextElement?Bt(l.contextElement):[],popper:Bt(c)};var de=function ar(i){var a=sr(i);return ir.reduce(function(e,n){return e.concat(a.filter(function(s){return s.phase===n}))},[])}(function or(i){var a=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(a).map(function(e){return a[e]})}([].concat(n,h.options.modifiers)));return h.orderedModifiers=de.filter(function(he){return he.enabled}),function y(){h.orderedModifiers.forEach(function(G){var U=G.options,ae=G.effect;if("function"==typeof ae){var se=ae({state:h,name:G.name,instance:v,options:void 0===U?{}:U});m.push(se||function(){})}})}(),v.update()},forceUpdate:function(){if(!f){var te=h.elements,U=te.reference,de=te.popper;if(Di(U,de)){h.rects={reference:Ha(U,Pt(de),"fixed"===h.options.strategy),popper:Tn(de)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(he){return h.modifiersData[he.name]=Object.assign({},he.data)});for(var se=0;se<h.orderedModifiers.length;se++)if(!0!==h.reset){var ee=h.orderedModifiers[se],le=ee.fn,fe=ee.options;"function"==typeof le&&(h=le({state:h,options:void 0===fe?{}:fe,name:ee.name,instance:v})||h)}else h.reset=!1,se=-1}}},update:rr(function(){return new Promise(function(G){v.forceUpdate(),G(h)})}),destroy:function(){B(),f=!0}};if(!Di(l,c))return v;function B(){m.forEach(function(G){return G()}),m=[]}return v.setOptions(u).then(function(G){!f&&u.onFirstUpdate&&u.onFirstUpdate(G)}),v}}var Wt={passive:!0};const ur={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function cr(i){var a=i.state,e=i.instance,n=i.options,s=n.scroll,r=void 0===s||s,o=n.resize,l=void 0===o||o,c=Ue(a.elements.popper),u=[].concat(a.scrollParents.reference,a.scrollParents.popper);return r&&u.forEach(function(h){h.addEventListener("scroll",e.update,Wt)}),l&&c.addEventListener("resize",e.update,Wt),function(){r&&u.forEach(function(h){h.removeEventListener("scroll",e.update,Wt)}),l&&c.removeEventListener("resize",e.update,Wt)}},data:{}};function Ge(i){return i.split("-")[0]}function xt(i){return i.split("-")[1]}function Mn(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function wi(i){var c,a=i.reference,e=i.element,n=i.placement,s=n?Ge(n):null,r=n?xt(n):null,o=a.x+a.width/2-e.width/2,l=a.y+a.height/2-e.height/2;switch(s){case Ie:c={x:o,y:a.y-e.height};break;case $e:c={x:o,y:a.y+a.height};break;case He:c={x:a.x+a.width,y:l};break;case Le:c={x:a.x-e.width,y:l};break;default:c={x:a.x,y:a.y}}var u=s?Mn(s):null;if(null!=u){var h="y"===u?"height":"width";switch(r){case Tt:c[u]=c[u]-(a[h]/2-e[h]/2);break;case jt:c[u]=c[u]+(a[h]/2-e[h]/2)}}return c}const hr={name:"popperOffsets",enabled:!0,phase:"read",fn:function dr(i){var a=i.state;a.modifiersData[i.name]=wi({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})},data:{}};var pr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ti(i){var a,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,l=i.position,c=i.gpuAcceleration,u=i.adaptive,h=i.roundOffsets,m=i.isFixed,f=o.x,v=void 0===f?0:f,y=o.y,B=void 0===y?0:y,G="function"==typeof h?h({x:v,y:B}):{x:v,y:B};v=G.x,B=G.y;var te=o.hasOwnProperty("x"),U=o.hasOwnProperty("y"),de=Le,ae=Ie,se=window;if(u){var ee=Pt(e),le="clientHeight",fe="clientWidth";ee===Ue(e)&&"static"!==Xe(ee=nt(e)).position&&"absolute"===l&&(le="scrollHeight",fe="scrollWidth"),(s===Ie||(s===Le||s===He)&&r===jt)&&(ae=$e,B-=(m&&ee===se&&se.visualViewport?se.visualViewport.height:ee[le])-n.height,B*=c?1:-1),s!==Le&&(s!==Ie&&s!==$e||r!==jt)||(de=He,v-=(m&&ee===se&&se.visualViewport?se.visualViewport.width:ee[fe])-n.width,v*=c?1:-1)}var Ce,he=Object.assign({position:l},u&&pr),De=!0===h?function gr(i,a){var n=i.y,s=a.devicePixelRatio||1;return{x:Dt(i.x*s)/s||0,y:Dt(n*s)/s||0}}({x:v,y:B},Ue(e)):{x:v,y:B};return v=De.x,B=De.y,Object.assign({},he,c?((Ce={})[ae]=U?"0":"",Ce[de]=te?"0":"",Ce.transform=(se.devicePixelRatio||1)<=1?"translate("+v+"px, "+B+"px)":"translate3d("+v+"px, "+B+"px, 0)",Ce):((a={})[ae]=U?B+"px":"",a[de]=te?v+"px":"",a.transform="",a))}const fr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function mr(i){var a=i.state,e=i.options,n=e.gpuAcceleration,s=void 0===n||n,r=e.adaptive,o=void 0===r||r,l=e.roundOffsets,c=void 0===l||l,h={placement:Ge(a.placement),variation:xt(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:s,isFixed:"fixed"===a.options.strategy};null!=a.modifiersData.popperOffsets&&(a.styles.popper=Object.assign({},a.styles.popper,Ti(Object.assign({},h,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:o,roundOffsets:c})))),null!=a.modifiersData.arrow&&(a.styles.arrow=Object.assign({},a.styles.arrow,Ti(Object.assign({},h,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}},Cr={name:"applyStyles",enabled:!0,phase:"write",fn:function _r(i){var a=i.state;Object.keys(a.elements).forEach(function(e){var n=a.styles[e]||{},s=a.attributes[e]||{},r=a.elements[e];!je(r)||!Ve(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var l=s[o];!1===l?r.removeAttribute(o):r.setAttribute(o,!0===l?"":l)}))})},effect:function vr(i){var a=i.state,e={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,e.popper),a.styles=e,a.elements.arrow&&Object.assign(a.elements.arrow.style,e.arrow),function(){Object.keys(a.elements).forEach(function(n){var s=a.elements[n],r=a.attributes[n]||{},l=Object.keys(a.styles.hasOwnProperty(n)?a.styles[n]:e[n]).reduce(function(c,u){return c[u]="",c},{});!je(s)||!Ve(s)||(Object.assign(s.style,l),Object.keys(r).forEach(function(c){s.removeAttribute(c)}))})}},requires:["computeStyles"]},Dr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function br(i){var a=i.state,n=i.name,s=i.options.offset,r=void 0===s?[0,0]:s,o=yi.reduce(function(h,m){return h[m]=function yr(i,a,e){var n=Ge(i),s=[Le,Ie].indexOf(n)>=0?-1:1,r="function"==typeof e?e(Object.assign({},a,{placement:i})):e,o=r[0],l=r[1];return o=o||0,l=(l||0)*s,[Le,He].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}(m,a.rects,r),h},{}),l=o[a.placement],u=l.y;null!=a.modifiersData.popperOffsets&&(a.modifiersData.popperOffsets.x+=l.x,a.modifiersData.popperOffsets.y+=u),a.modifiersData[n]=o}};var wr={left:"right",right:"left",bottom:"top",top:"bottom"};function Kt(i){return i.replace(/left|right|bottom|top/g,function(a){return wr[a]})}var Tr={start:"end",end:"start"};function xi(i){return i.replace(/start|end/g,function(a){return Tr[a]})}function Mi(i,a){var e=a.getRootNode&&a.getRootNode();if(i.contains(a))return!0;if(e&&Cn(e)){var n=a;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Sn(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Si(i,a,e){return a===vi?Sn(function xr(i,a){var e=Ue(i),n=nt(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){r=s.width,o=s.height;var u=mi();(u||!u&&"fixed"===a)&&(l=s.offsetLeft,c=s.offsetTop)}return{width:r,height:o,x:l+Dn(i),y:c}}(i,e)):dt(a)?function Sr(i,a){var e=wt(i,!1,"fixed"===a);return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}(a,e):Sn(function Mr(i){var a,e=nt(i),n=bn(i),s=null==(a=i.ownerDocument)?void 0:a.body,r=ht(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=ht(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-n.scrollLeft+Dn(i),c=-n.scrollTop;return"rtl"===Xe(s||e).direction&&(l+=ht(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:l,y:c}}(nt(i)))}function Ai(i){return Object.assign({},{top:0,right:0,bottom:0,left:0},i)}function Fi(i,a){return a.reduce(function(e,n){return e[n]=i,e},{})}function Ht(i,a){void 0===a&&(a={});var n=a.placement,s=void 0===n?i.placement:n,r=a.strategy,o=void 0===r?i.strategy:r,l=a.boundary,c=void 0===l?Ja:l,u=a.rootBoundary,h=void 0===u?vi:u,m=a.elementContext,f=void 0===m?$t:m,v=a.altBoundary,y=void 0!==v&&v,B=a.padding,G=void 0===B?0:B,te=Ai("number"!=typeof G?G:Fi(G,Nt)),de=i.rects.popper,ae=i.elements[y?f===$t?Qa:$t:f],se=function Ar(i,a,e,n){var s="clippingParents"===a?function kr(i){var a=Bt(zt(i)),n=["absolute","fixed"].indexOf(Xe(i).position)>=0&&je(i)?Pt(i):i;return dt(n)?a.filter(function(s){return dt(s)&&Mi(s,n)&&"body"!==Ve(s)}):[]}(i):[].concat(a),r=[].concat(s,[e]),l=r.reduce(function(c,u){var h=Si(i,u,n);return c.top=ht(h.top,c.top),c.right=Gt(h.right,c.right),c.bottom=Gt(h.bottom,c.bottom),c.left=ht(h.left,c.left),c},Si(i,r[0],n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(dt(ae)?ae:ae.contextElement||nt(i.elements.popper),c,h,o),ee=wt(i.elements.reference),le=wi({reference:ee,element:de,strategy:"absolute",placement:s}),fe=Sn(Object.assign({},de,le)),_e=f===$t?fe:ee,ve={top:se.top-_e.top+te.top,bottom:_e.bottom-se.bottom+te.bottom,left:se.left-_e.left+te.left,right:_e.right-se.right+te.right},he=i.modifiersData.offset;if(f===$t&&he){var De=he[s];Object.keys(ve).forEach(function(Ce){var Ae=[He,$e].indexOf(Ce)>=0?1:-1,Pe=[Ie,$e].indexOf(Ce)>=0?"y":"x";ve[Ce]+=De[Pe]*Ae})}return ve}const Ir={name:"flip",enabled:!0,phase:"main",fn:function Or(i){var a=i.state,e=i.options,n=i.name;if(!a.modifiersData[n]._skip){for(var s=e.mainAxis,r=void 0===s||s,o=e.altAxis,l=void 0===o||o,c=e.fallbackPlacements,u=e.padding,h=e.boundary,m=e.rootBoundary,f=e.altBoundary,v=e.flipVariations,y=void 0===v||v,B=e.allowedAutoPlacements,G=a.options.placement,te=Ge(G),de=c||(te!==G&&y?function Er(i){if(Ge(i)===xn)return[];var a=Kt(i);return[xi(i),a,xi(a)]}(G):[Kt(G)]),ae=[G].concat(de).reduce(function(Ke,Ye){return Ke.concat(Ge(Ye)===xn?function Fr(i,a){void 0===a&&(a={});var s=a.boundary,r=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,u=void 0===c?yi:c,h=xt(a.placement),m=h?l?Ci:Ci.filter(function(y){return xt(y)===h}):Nt,f=m.filter(function(y){return u.indexOf(y)>=0});0===f.length&&(f=m);var v=f.reduce(function(y,B){return y[B]=Ht(i,{placement:B,boundary:s,rootBoundary:r,padding:o})[Ge(B)],y},{});return Object.keys(v).sort(function(y,B){return v[y]-v[B]})}(a,{placement:Ye,boundary:h,rootBoundary:m,padding:u,flipVariations:y,allowedAutoPlacements:B}):Ye)},[]),se=a.rects.reference,ee=a.rects.popper,le=new Map,fe=!0,_e=ae[0],ve=0;ve<ae.length;ve++){var he=ae[ve],De=Ge(he),Ce=xt(he)===Tt,Ae=[Ie,$e].indexOf(De)>=0,Pe=Ae?"width":"height",Te=Ht(a,{placement:he,boundary:h,rootBoundary:m,altBoundary:f,padding:u}),Ee=Ae?Ce?He:Le:Ce?$e:Ie;se[Pe]>ee[Pe]&&(Ee=Kt(Ee));var at=Kt(Ee),Je=[];if(r&&Je.push(Te[De]<=0),l&&Je.push(Te[Ee]<=0,Te[at]<=0),Je.every(function(Ke){return Ke})){_e=he,fe=!1;break}le.set(he,Je)}if(fe)for(var ft=function(Ye){var tt=ae.find(function(lt){var Qe=le.get(lt);if(Qe)return Qe.slice(0,Ye).every(function(xe){return xe})});if(tt)return _e=tt,"break"},et=y?3:1;et>0&&"break"!==ft(et);et--);a.placement!==_e&&(a.modifiersData[n]._skip=!0,a.placement=_e,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qt(i,a,e){return ht(i,Gt(a,e))}const Rr={name:"preventOverflow",enabled:!0,phase:"main",fn:function Ur(i){var a=i.state,e=i.options,n=i.name,s=e.mainAxis,r=void 0===s||s,o=e.altAxis,l=void 0!==o&&o,f=e.tether,v=void 0===f||f,y=e.tetherOffset,B=void 0===y?0:y,G=Ht(a,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),te=Ge(a.placement),U=xt(a.placement),de=!U,ae=Mn(te),se=function Lr(i){return"x"===i?"y":"x"}(ae),ee=a.modifiersData.popperOffsets,le=a.rects.reference,fe=a.rects.popper,_e="function"==typeof B?B(Object.assign({},a.rects,{placement:a.placement})):B,ve="number"==typeof _e?{mainAxis:_e,altAxis:_e}:Object.assign({mainAxis:0,altAxis:0},_e),he=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,De={x:0,y:0};if(ee){if(r){var Ce,Ae="y"===ae?Ie:Le,Pe="y"===ae?$e:He,Te="y"===ae?"height":"width",Ee=ee[ae],at=Ee+G[Ae],Je=Ee-G[Pe],rt=v?-fe[Te]/2:0,ft=U===Tt?le[Te]:fe[Te],et=U===Tt?-fe[Te]:-le[Te],ot=a.elements.arrow,Ke=v&&ot?Tn(ot):{width:0,height:0},Ye=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Ye[Ae],lt=Ye[Pe],Qe=qt(0,le[Te],Ke[Te]),xe=de?le[Te]/2-rt-Qe-tt-ve.mainAxis:ft-Qe-tt-ve.mainAxis,Xp=de?-le[Te]/2+rt+Qe+lt+ve.mainAxis:et+Qe+lt+ve.mainAxis,jn=a.elements.arrow&&Pt(a.elements.arrow),gs=null!=(Ce=he?.[ae])?Ce:0,ng=Ee+Xp-gs,ms=qt(v?Gt(at,Ee+xe-gs-(jn?"y"===ae?jn.clientTop||0:jn.clientLeft||0:0)):at,Ee,v?ht(Je,ng):Je);ee[ae]=ms,De[ae]=ms-Ee}if(l){var fs,_t=ee[se],ln="y"===se?"height":"width",_s=_t+G["x"===ae?Ie:Le],vs=_t-G["x"===ae?$e:He],$n=-1!==[Ie,Le].indexOf(te),Cs=null!=(fs=he?.[se])?fs:0,ys=$n?_s:_t-le[ln]-fe[ln]-Cs+ve.altAxis,bs=$n?_t+le[ln]+fe[ln]-Cs-ve.altAxis:vs,Ds=v&&$n?function Zr(i,a,e){var n=qt(i,a,e);return n>e?e:n}(ys,_t,bs):qt(v?ys:_s,_t,v?bs:vs);ee[se]=Ds,De[se]=Ds-_t}a.modifiersData[n]=De}},requiresIfExists:["offset"]};const jr={name:"arrow",enabled:!0,phase:"main",fn:function Pr(i){var a,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,l=Ge(e.placement),c=Mn(l),h=[Le,He].indexOf(l)>=0?"height":"width";if(r&&o){var m=function(a,e){return Ai("number"!=typeof(a="function"==typeof a?a(Object.assign({},e.rects,{placement:e.placement})):a)?a:Fi(a,Nt))}(s.padding,e),f=Tn(r),v="y"===c?Ie:Le,y="y"===c?$e:He,B=e.rects.reference[h]+e.rects.reference[c]-o[c]-e.rects.popper[h],G=o[c]-e.rects.reference[c],te=Pt(r),U=te?"y"===c?te.clientHeight||0:te.clientWidth||0:0,ee=U/2-f[h]/2+(B/2-G/2),le=qt(m[v],ee,U-f[h]-m[y]);e.modifiersData[n]=((a={})[c]=le,a.centerOffset=le-ee,a)}},effect:function Nr(i){var a=i.state,n=i.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"==typeof s&&!(s=a.elements.popper.querySelector(s))||Mi(a.elements.popper,s)&&(a.elements.arrow=s))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ei(i,a,e){return void 0===e&&(e={x:0,y:0}),{top:i.top-a.height-e.y,right:i.right-a.width+e.x,bottom:i.bottom-a.height+e.y,left:i.left-a.width-e.x}}function Oi(i){return[Ie,He,$e,Le].some(function(a){return i[a]>=0})}var Hr=[ur,hr,fr,Cr,Dr,Ir,Rr,jr,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function $r(i){var a=i.state,e=i.name,n=a.rects.reference,s=a.rects.popper,r=a.modifiersData.preventOverflow,o=Ht(a,{elementContext:"reference"}),l=Ht(a,{altBoundary:!0}),c=Ei(o,n),u=Ei(l,s,r),h=Oi(c),m=Oi(u);a.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:m},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":m})}}],qr=lr({defaultModifiers:Hr}),ze=_(2722),kn=_(4968);const Yr=["popperViewRef"];function Jr(i,a){if(1&i&&(t.TgZ(0,"div",5),t.Hsn(1),t.qZA()),2&i){const e=t.oxw();t.Q6J("innerHTML",e.text,t.oJD)}}function Qr(i,a){1&i&&(t.TgZ(0,"div",6),t.Hsn(1,1),t.qZA())}const Ii=["*","*"];var pt=(()=>(function(i){i.TOP="top",i.BOTTOM="bottom",i.LEFT="left",i.RIGHT="right",i.TOPSTART="top-start",i.BOTTOMSTART="bottom-start",i.LEFTSTART="left-start",i.RIGHTSTART="right-start",i.TOPEND="top-end",i.BOTTOMEND="bottom-end",i.LEFTEND="left-end",i.RIGHTEND="right-end",i.AUTO="auto",i.AUTOSTART="auto-start",i.AUTOEND="auto-end"}(pt||(pt={})),pt))(),Re=(()=>(function(i){i.click="click",i.hover="hover",i.mousedown="mousedown",i.none="none"}(Re||(Re={})),Re))();let An=(()=>{class i{constructor(e,n,s,r){this.elRef=e,this._renderer=n,this._viewRef=s,this._changeDetectorRef=r,this.ariaHidden="true",this.arrowColor=null,this.displayType="none",this.id="ngx_poppperjs_"+ ++i.nextId,this.isMouseOver=!1,this.onHidden=new t.vpe,this.opacity=0,this.popperOptions={disableAnimation:!1,disableDefaultStyling:!1,placement:pt.AUTO,boundariesElement:"",trigger:Re.hover,positionFixed:!1,appendToBody:!1,popperModifiers:[]},this.state=!0,this._styleId=`${this.id}_style`}clean(){this.toggleVisibility(!1),this.popperInstance&&this.popperInstance.destroy()}extractAppliedClassListExpr(e=[]){return(Array.isArray(e)?e:"string"==typeof e?e.replace(/ /,"").split(","):[]).reduce((s,r)=>(s[r]=!0,s),{})}hide(){this.popperInstance&&this.popperInstance.destroy(),this.toggleVisibility(!1),this.onHidden.emit()}ngOnDestroy(){this.clean(),this.popperOptions.appendTo&&this.elRef&&this.elRef.nativeElement&&this.elRef.nativeElement.parentNode&&(this._viewRef.detach(),this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement))}onDocumentResize(){this.update()}onMouseOver(){this.isMouseOver=!0}show(){if(!this.referenceObject)return;const e=this.popperOptions.appendTo&&document.querySelector(this.popperOptions.appendTo);e&&this.elRef.nativeElement.parentNode!==e&&(this.elRef.nativeElement.parentNode&&this.elRef.nativeElement.parentNode.removeChild(this.elRef.nativeElement),e.appendChild(this.elRef.nativeElement));const n={strategy:this.popperOptions.positionFixed?"fixed":"absolute",placement:this.popperOptions.placement,modifiers:[{name:"offset",enabled:!0,options:{offset:[0,8]}},{name:"arrow",enabled:!0,options:{element:".ngxp__arrow",padding:3},requires:["arrow"]}]};this.onUpdate&&(n.onFirstUpdate=this.onUpdate);const s=this.popperOptions.boundariesElement&&document.querySelector(this.popperOptions.boundariesElement);if(n.modifiers&&s&&n.modifiers.push({name:"preventOverflow",enabled:this.popperOptions.preventOverflow,options:{boundary:s}}),n.modifiers){const r=n.modifiers.find(o=>"preventOverflow"===o.name);if(r&&!r.enabled){const o=n.modifiers.find(l=>"preventOverflow"===l.name);o&&(o.enabled=!1)}}this._determineArrowColor(),n.modifiers=n.modifiers.concat(this.popperOptions.popperModifiers),this.popperInstance=qr(this.referenceObject,this.popperViewRef.nativeElement,n),this.toggleVisibility(!0),this._globalResize=this._renderer.listen("document","resize",this.onDocumentResize.bind(this))}showOnLeave(){this.isMouseOver=!1,(this.popperOptions.trigger===Re.hover||this.popperOptions.hideOnMouseLeave)&&this.hide()}toggleVisibility(e){e?(this.opacity=1,this.displayType="block",this.ariaHidden="false",this.state=!0):(this.opacity=0,this.displayType="none",this.ariaHidden="true",this.state=!1),this._changeDetectorRef.destroyed||this._changeDetectorRef.detectChanges()}update(){this.popperInstance&&this.popperInstance.update()}_createArrowSelector(){return`div#${this.id}.ngxp__container > .ngxp__arrow.ngxp__force-arrow`}_determineArrowColor(){if(!this.popperOptions.styles||this.arrowColor)return!1;const e=this.popperOptions.styles["background-color"]||this.popperOptions.styles.backgroundColor;if(this.arrowColor===e)return!1;this.arrowColor=e;let n=document.querySelector(`#${this._styleId}`);const s=this.arrowColor?`${this._createArrowSelector()}:before { background-color: ${this.arrowColor}; }`:"";n||(n=document.createElement("style"),n.id=this._styleId,n.setAttribute("type","text/css"),document.head.appendChild(n)),n.styleSheet?n.styleSheet.cssText=s:n.innerHTML=s}}return i.nextId=0,i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.s_b),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["popper-content"]],viewQuery:function(e,n){if(1&e&&t.Gf(Yr,7),2&e){let s;t.iGM(s=t.CRH())&&(n.popperViewRef=s.first)}},hostBindings:function(e,n){1&e&&t.NdJ("mouseover",function(){return n.onMouseOver()})("mouseleave",function(){return n.showOnLeave()})},exportAs:["ngxPopperjsContent"],ngContentSelectors:Ii,decls:5,vars:19,consts:[[3,"ngStyle","ngClass"],["popperViewRef",""],["class","ngxp__inner",3,"innerHTML",4,"ngIf"],["class","ngxp__inner",4,"ngIf"],["data-popper-arrow","",1,"ngxp__arrow",3,"ngClass"],[1,"ngxp__inner",3,"innerHTML"],[1,"ngxp__inner"]],template:function(e,n){1&e&&(t.F$t(Ii),t.TgZ(0,"div",0,1),t.YNc(2,Jr,2,1,"div",2),t.YNc(3,Qr,2,0,"div",3),t._UZ(4,"div",4),t.qZA()),2&e&&(t.Udp("display",n.displayType)("opacity",n.opacity),t.ekj("ngxp__container",!n.popperOptions.disableDefaultStyling)("ngxp__animation",!n.popperOptions.disableAnimation),t.Q6J("ngStyle",n.popperOptions.styles)("ngClass",n.extractAppliedClassListExpr(n.popperOptions.applyClass)),t.uIk("id",n.id)("aria-hidden",n.ariaHidden)("aria-describedby",n.popperOptions.ariaDescribe||null)("role",n.popperOptions.ariaRole),t.xp6(2),t.Q6J("ngIf",n.text),t.xp6(1),t.Q6J("ngIf",!n.text),t.xp6(1),t.ekj("ngxp__force-arrow",n.arrowColor),t.Q6J("ngClass",n.extractAppliedClassListExpr(n.popperOptions.applyArrowClass)))},dependencies:[Z.mk,Z.O5,Z.PC],styles:['popper-content{position:relative;display:block}.ngxp__container{display:none;position:absolute;border-radius:3px;border:1px solid grey;box-shadow:0 0 2px #00000080;padding:10px}.ngxp__container.ngxp__animation{animation:ngxp-fadeIn .15s ease-out}.ngxp__container>.ngxp__arrow,.ngxp__container>.ngxp__arrow:before{position:absolute;width:10px;height:10px;z-index:-1}.ngxp__container>.ngxp__arrow:before{transform:rotate(45deg);content:"";background-color:#fff;top:0;left:0}.ngxp__container[data-popper-placement^=top]>.ngxp__arrow{bottom:-4px}.ngxp__container[data-popper-placement^=bottom]>.ngxp__arrow{top:-4px}.ngxp__container[data-popper-placement^=left]>.ngxp__arrow{right:-4px}.ngxp__container[data-popper-placement^=right]>.ngxp__arrow{left:-4px}@keyframes ngxp-fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{display:block;opacity:1}}\n'],encapsulation:2,changeDetection:0}),i})();const Li=new t.OlP("NGX_POPPERJS_DEFAULTS");class Vr{static coerceBooleanProperty(a){return null!=a&&"false"!=`${a}`}}class ke{constructor(a,e,n,s={}){this._changeDetectorRef=a,this._elementRef=e,this._vcr=n,this._popperDefaults=s,this.hideTimeout=0,this.popperOnHidden=new t.vpe,this.popperOnShown=new t.vpe,this.popperOnUpdate=new t.vpe,this.timeoutAfterShow=0,this._destroy$=new K.x,this._globalEventListenersCtrl$=new K.x,this._popperContentClass=An,this._scheduledHideTimeoutCtrl$=new K.x,this._scheduledShowTimeoutCtrl$=new K.x,this._shown=!1,ke.baseOptions={...ke.baseOptions,...this._popperDefaults}}set applyClass(a){a!==this._applyClass&&(this._applyClass=a,this._checkExisting("applyClass",a))}get applyClass(){return this._applyClass}set content(a){a!==this._content&&(this._content=a,this._popperContent&&("string"==typeof a?this._popperContent.text=a:this._popperContent=a))}get content(){return this._content}set disabled(a){a!==this._disabled&&(this._disabled=!!a,this._shown&&this.hide())}get disabled(){return this._disabled}set placement(a){this._popperPlacement=a,this._checkExisting("placement",a)}get placement(){return this._popperPlacement}set popperApplyArrowClass(a){if(a!==this._popperApplyArrowClass&&(this._popperApplyArrowClass=a,this._popperContent)){if(this._popperContent.popperOptions.applyArrowClass=a,!this._shown)return;this._popperContent.popperInstance.setOptions(this._popperContent.popperOptions)}}get popperApplyArrowClass(){return this._popperApplyArrowClass}set preventOverflow(a){this._popperPreventOverflow=Vr.coerceBooleanProperty(a),this._checkExisting("preventOverflow",this._popperPreventOverflow)}get preventOverflow(){return this._popperPreventOverflow}static assignDefined(a,...e){for(const n of e)for(const s of Object.keys(n)){const r=n[s];void 0!==r&&(a[s]=r)}return a}applyTriggerListeners(){switch(this.showTrigger){case Re.click:this._addListener("click",this.toggle.bind(this));break;case Re.mousedown:this._addListener("mousedown",this.toggle.bind(this));break;case Re.hover:this._addListener("mouseenter",this.scheduledShow.bind(this,this.showDelay)),["touchend","touchcancel","mouseleave"].forEach(a=>{this._addListener(a,this.scheduledHide.bind(this,null,this.hideTimeout))})}this.showTrigger!==Re.hover&&this.hideOnMouseLeave&&["touchend","touchcancel","mouseleave"].forEach(a=>{this._addListener(a,this.scheduledHide.bind(this,null,this.hideTimeout))})}getRefElement(){return this.targetElement||this._elementRef.nativeElement}hide(){if(!this.disabled){if(!this._shown)return void this._scheduledShowTimeoutCtrl$.next();this._shown=!1,this._popperContentRef?this._popperContentRef.instance.hide():this._popperContent.hide(),this.popperOnHidden.emit(this),this._globalEventListenersCtrl$.next()}}hideOnClickOutsideHandler(a){this.disabled||!this.hideOnClickOutside||a.target===this._popperContent.elRef.nativeElement||this._popperContent.elRef.nativeElement.contains(a.target)||this.scheduledHide(a,this.hideTimeout)}hideOnScrollHandler(a){this.disabled||!this.hideOnScroll||this.scheduledHide(a,this.hideTimeout)}ngOnDestroy(){this._destroy$.next(),this._popperContent&&this._popperContent.clean()}ngOnInit(){this.hideOnClickOutside=typeof this.hideOnClickOutside>"u"?this.closeOnClickOutside:this.hideOnClickOutside,"string"==typeof this.content?(this._popperContent=this._constructContent(),this._popperContent.text=this.content):typeof this.content>"u"?(this._popperContent=this._constructContent(),this._popperContent.text=""):this._popperContent=this.content;const a=this._popperContent;a.referenceObject=this.getRefElement(),this._setContentProperties(a),this._setDefaults(),this.applyTriggerListeners(),this.showOnStart&&this.scheduledShow()}scheduledHide(a=null,e=this.hideTimeout){this.disabled||(this._scheduledShowTimeoutCtrl$.next(),(0,P.H)(e).pipe((0,ze.R)(this._scheduledHideTimeoutCtrl$),(0,ze.R)(this._destroy$)).subscribe({next:()=>{const n=a?a.toElement:null,s=!!this._popperContent.popperViewRef&&this._popperContent.popperViewRef.nativeElement;!s||s===n||s.contains(n)||this.content&&this.content.isMouseOver||(this.hide(),this._applyChanges())}}))}scheduledShow(a=this.showDelay){this.disabled||(this._scheduledHideTimeoutCtrl$.next(),(0,P.H)(a).pipe((0,ze.R)(this._scheduledShowTimeoutCtrl$),(0,ze.R)(this._destroy$)).subscribe({next:()=>{this.show(),this._applyChanges()}}))}show(){if(this._shown)return void this._scheduledHideTimeoutCtrl$.next();this._shown=!0;const a=this._popperContent,e=this.getRefElement();a.referenceObject!==e&&(a.referenceObject=e),this._setContentProperties(a),a.show(),this.popperOnShown.emit(this),this.timeoutAfterShow>0&&this.scheduledHide(null,this.timeoutAfterShow),(0,kn.R)(document,"click").pipe((0,ze.R)(this._globalEventListenersCtrl$),(0,ze.R)(this._destroy$)).subscribe({next:n=>this.hideOnClickOutsideHandler(n)}),(0,kn.R)(this._getScrollParent(this.getRefElement()),"scroll").pipe((0,ze.R)(this._globalEventListenersCtrl$),(0,ze.R)(this._destroy$)).subscribe({next:n=>this.hideOnScrollHandler(n)})}toggle(){this.disabled||(this._shown?this.scheduledHide(null,this.hideTimeout):this.scheduledShow())}_addListener(a,e){(0,kn.R)(this._elementRef.nativeElement,a).pipe((0,ze.R)(this._destroy$)).subscribe({next:e})}_applyChanges(){this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges()}_checkExisting(a,e){if(this._popperContent){if(this._popperContent.popperOptions[a]=e,!this._shown)return;this._popperContent.popperInstance.setOptions(this._popperContent.popperOptions)}}_constructContent(){return this._popperContentRef=this._vcr.createComponent(this._popperContentClass),this._popperContentRef.instance}_getScrollParent(a){const n=a instanceof HTMLElement&&window.getComputedStyle(a).overflowY;return a?"visible"!==n&&"hidden"!==n&&a.scrollHeight>=a.clientHeight?a:this._getScrollParent(a.parentNode)||document:null}_onPopperUpdate(a){this.popperOnUpdate.emit(a)}_setContentProperties(a){a.popperOptions=ke.assignDefined(a.popperOptions,ke.baseOptions,{showDelay:this.showDelay,disableAnimation:this.disableAnimation,disableDefaultStyling:this.disableStyle,placement:this.placement,boundariesElement:this.boundariesElement,trigger:this.showTrigger,positionFixed:this.positionFixed,popperModifiers:this.popperModifiers,ariaDescribe:this.ariaDescribe,ariaRole:this.ariaRole,applyClass:this.applyClass,applyArrowClass:this.popperApplyArrowClass,hideOnMouseLeave:this.hideOnMouseLeave,styles:this.styles,appendTo:this.popperAppendTo,preventOverflow:this.preventOverflow}),a.onUpdate=this._onPopperUpdate.bind(this),a.onHidden.pipe((0,ze.R)(this._destroy$)).subscribe(this.hide.bind(this))}_setDefaults(){["showDelay","hideOnScroll","hideOnMouseLeave","hideOnClickOutside","ariaRole","ariaDescribe"].forEach(a=>{this[a]=void 0===this[a]?ke.baseOptions[a]:this[a]}),this.showTrigger=this.showTrigger||ke.baseOptions.trigger,this.styles=void 0===this.styles?{...ke.baseOptions.styles}:this.styles}}function Zi(i={}){return[{provide:Li,useValue:i}]}ke.baseOptions={showDelay:0,placement:pt.AUTO,hideOnClickOutside:!0,hideOnMouseLeave:!1,hideOnScroll:!1,appendTo:void 0,ariaRole:"popper",ariaDescribe:"",styles:{},trigger:Re.click},ke.nextId=0,ke.\u0275fac=function(a){return new(a||ke)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Li))},ke.\u0275dir=t.lG2({type:ke,selectors:[["","popper",""]],inputs:{applyClass:["popperApplyClass","applyClass"],ariaDescribe:["popperAriaDescribeBy","ariaDescribe"],ariaRole:["popperAriaRole","ariaRole"],boundariesElement:["popperBoundaries","boundariesElement"],closeOnClickOutside:["popperCloseOnClickOutside","closeOnClickOutside"],content:["popper","content"],disableAnimation:["popperDisableAnimation","disableAnimation"],disabled:["popperDisabled","disabled"],disableStyle:["popperDisableStyle","disableStyle"],hideOnClickOutside:["popperHideOnClickOutside","hideOnClickOutside"],hideOnMouseLeave:["popperHideOnMouseLeave","hideOnMouseLeave"],hideOnScroll:["popperHideOnScroll","hideOnScroll"],hideTimeout:["popperTimeout","hideTimeout"],placement:["popperPlacement","placement"],popperAppendTo:"popperAppendTo",popperApplyArrowClass:"popperApplyArrowClass",popperModifiers:"popperModifiers",positionFixed:["popperPositionFixed","positionFixed"],preventOverflow:["popperPreventOverflow","preventOverflow"],showDelay:["popperDelay","showDelay"],showOnStart:["popperShowOnStart","showOnStart"],showTrigger:["popperTrigger","showTrigger"],styles:["popperStyles","styles"],targetElement:["popperTarget","targetElement"],timeoutAfterShow:["popperTimeoutAfterShow","timeoutAfterShow"]},outputs:{popperOnHidden:"popperOnHidden",popperOnShown:"popperOnShown",popperOnUpdate:"popperOnUpdate"},exportAs:["popper"]});let Gr=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[Zi(e)]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Zi()],imports:[Z.ez]}),i})();var zr=_(2711);function Fn(){return Fn=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fn.apply(this,arguments)}var Wr=/[|\\{}()[\]^$+*?.]/g,Kr=function(i){if("string"!=typeof i)throw new TypeError("Expected a string");return i.replace(Wr,"\\$&")};const Xr=[["\xdf","ss"],["\u1e9e","Ss"],["\xe4","ae"],["\xc4","Ae"],["\xf6","oe"],["\xd6","Oe"],["\xfc","ue"],["\xdc","Ue"],["\xc0","A"],["\xc1","A"],["\xc2","A"],["\xc3","A"],["\xc4","Ae"],["\xc5","A"],["\xc6","AE"],["\xc7","C"],["\xc8","E"],["\xc9","E"],["\xca","E"],["\xcb","E"],["\xcc","I"],["\xcd","I"],["\xce","I"],["\xcf","I"],["\xd0","D"],["\xd1","N"],["\xd2","O"],["\xd3","O"],["\xd4","O"],["\xd5","O"],["\xd6","Oe"],["\u0150","O"],["\xd8","O"],["\xd9","U"],["\xda","U"],["\xdb","U"],["\xdc","Ue"],["\u0170","U"],["\xdd","Y"],["\xde","TH"],["\xdf","ss"],["\xe0","a"],["\xe1","a"],["\xe2","a"],["\xe3","a"],["\xe4","ae"],["\xe5","a"],["\xe6","ae"],["\xe7","c"],["\xe8","e"],["\xe9","e"],["\xea","e"],["\xeb","e"],["\xec","i"],["\xed","i"],["\xee","i"],["\xef","i"],["\xf0","d"],["\xf1","n"],["\xf2","o"],["\xf3","o"],["\xf4","o"],["\xf5","o"],["\xf6","oe"],["\u0151","o"],["\xf8","o"],["\xf9","u"],["\xfa","u"],["\xfb","u"],["\xfc","ue"],["\u0171","u"],["\xfd","y"],["\xfe","th"],["\xff","y"],["\u1e9e","SS"],["\xe0","a"],["\xc0","A"],["\xe1","a"],["\xc1","A"],["\xe2","a"],["\xc2","A"],["\xe3","a"],["\xc3","A"],["\xe8","e"],["\xc8","E"],["\xe9","e"],["\xc9","E"],["\xea","e"],["\xca","E"],["\xec","i"],["\xcc","I"],["\xed","i"],["\xcd","I"],["\xf2","o"],["\xd2","O"],["\xf3","o"],["\xd3","O"],["\xf4","o"],["\xd4","O"],["\xf5","o"],["\xd5","O"],["\xf9","u"],["\xd9","U"],["\xfa","u"],["\xda","U"],["\xfd","y"],["\xdd","Y"],["\u0103","a"],["\u0102","A"],["\u0110","D"],["\u0111","d"],["\u0129","i"],["\u0128","I"],["\u0169","u"],["\u0168","U"],["\u01a1","o"],["\u01a0","O"],["\u01b0","u"],["\u01af","U"],["\u1ea1","a"],["\u1ea0","A"],["\u1ea3","a"],["\u1ea2","A"],["\u1ea5","a"],["\u1ea4","A"],["\u1ea7","a"],["\u1ea6","A"],["\u1ea9","a"],["\u1ea8","A"],["\u1eab","a"],["\u1eaa","A"],["\u1ead","a"],["\u1eac","A"],["\u1eaf","a"],["\u1eae","A"],["\u1eb1","a"],["\u1eb0","A"],["\u1eb3","a"],["\u1eb2","A"],["\u1eb5","a"],["\u1eb4","A"],["\u1eb7","a"],["\u1eb6","A"],["\u1eb9","e"],["\u1eb8","E"],["\u1ebb","e"],["\u1eba","E"],["\u1ebd","e"],["\u1ebc","E"],["\u1ebf","e"],["\u1ebe","E"],["\u1ec1","e"],["\u1ec0","E"],["\u1ec3","e"],["\u1ec2","E"],["\u1ec5","e"],["\u1ec4","E"],["\u1ec7","e"],["\u1ec6","E"],["\u1ec9","i"],["\u1ec8","I"],["\u1ecb","i"],["\u1eca","I"],["\u1ecd","o"],["\u1ecc","O"],["\u1ecf","o"],["\u1ece","O"],["\u1ed1","o"],["\u1ed0","O"],["\u1ed3","o"],["\u1ed2","O"],["\u1ed5","o"],["\u1ed4","O"],["\u1ed7","o"],["\u1ed6","O"],["\u1ed9","o"],["\u1ed8","O"],["\u1edb","o"],["\u1eda","O"],["\u1edd","o"],["\u1edc","O"],["\u1edf","o"],["\u1ede","O"],["\u1ee1","o"],["\u1ee0","O"],["\u1ee3","o"],["\u1ee2","O"],["\u1ee5","u"],["\u1ee4","U"],["\u1ee7","u"],["\u1ee6","U"],["\u1ee9","u"],["\u1ee8","U"],["\u1eeb","u"],["\u1eea","U"],["\u1eed","u"],["\u1eec","U"],["\u1eef","u"],["\u1eee","U"],["\u1ef1","u"],["\u1ef0","U"],["\u1ef3","y"],["\u1ef2","Y"],["\u1ef5","y"],["\u1ef4","Y"],["\u1ef7","y"],["\u1ef6","Y"],["\u1ef9","y"],["\u1ef8","Y"],["\u0621","e"],["\u0622","a"],["\u0623","a"],["\u0624","w"],["\u0625","i"],["\u0626","y"],["\u0627","a"],["\u0628","b"],["\u0629","t"],["\u062a","t"],["\u062b","th"],["\u062c","j"],["\u062d","h"],["\u062e","kh"],["\u062f","d"],["\u0630","dh"],["\u0631","r"],["\u0632","z"],["\u0633","s"],["\u0634","sh"],["\u0635","s"],["\u0636","d"],["\u0637","t"],["\u0638","z"],["\u0639","e"],["\u063a","gh"],["\u0640","_"],["\u0641","f"],["\u0642","q"],["\u0643","k"],["\u0644","l"],["\u0645","m"],["\u0646","n"],["\u0647","h"],["\u0648","w"],["\u0649","a"],["\u064a","y"],["\u064e\u200e","a"],["\u064f","u"],["\u0650\u200e","i"],["\u0660","0"],["\u0661","1"],["\u0662","2"],["\u0663","3"],["\u0664","4"],["\u0665","5"],["\u0666","6"],["\u0667","7"],["\u0668","8"],["\u0669","9"],["\u0686","ch"],["\u06a9","k"],["\u06af","g"],["\u067e","p"],["\u0698","zh"],["\u06cc","y"],["\u06f0","0"],["\u06f1","1"],["\u06f2","2"],["\u06f3","3"],["\u06f4","4"],["\u06f5","5"],["\u06f6","6"],["\u06f7","7"],["\u06f8","8"],["\u06f9","9"],["\u067c","p"],["\u0681","z"],["\u0685","c"],["\u0689","d"],["\ufeab","d"],["\ufead","r"],["\u0693","r"],["\ufeaf","z"],["\u0696","g"],["\u069a","x"],["\u06ab","g"],["\u06bc","n"],["\u06c0","e"],["\u06d0","e"],["\u06cd","ai"],["\u0679","t"],["\u0688","d"],["\u0691","r"],["\u06ba","n"],["\u06c1","h"],["\u06be","h"],["\u06d2","e"],["\u0410","A"],["\u0430","a"],["\u0411","B"],["\u0431","b"],["\u0412","V"],["\u0432","v"],["\u0413","G"],["\u0433","g"],["\u0414","D"],["\u0434","d"],["\u044a\u0435","ye"],["\u042a\u0435","Ye"],["\u044a\u0415","yE"],["\u042a\u0415","YE"],["\u0415","E"],["\u0435","e"],["\u0401","Yo"],["\u0451","yo"],["\u0416","Zh"],["\u0436","zh"],["\u0417","Z"],["\u0437","z"],["\u0418","I"],["\u0438","i"],["\u044b\u0439","iy"],["\u042b\u0439","Iy"],["\u042b\u0419","IY"],["\u044b\u0419","iY"],["\u0419","Y"],["\u0439","y"],["\u041a","K"],["\u043a","k"],["\u041b","L"],["\u043b","l"],["\u041c","M"],["\u043c","m"],["\u041d","N"],["\u043d","n"],["\u041e","O"],["\u043e","o"],["\u041f","P"],["\u043f","p"],["\u0420","R"],["\u0440","r"],["\u0421","S"],["\u0441","s"],["\u0422","T"],["\u0442","t"],["\u0423","U"],["\u0443","u"],["\u0424","F"],["\u0444","f"],["\u0425","Kh"],["\u0445","kh"],["\u0426","Ts"],["\u0446","ts"],["\u0427","Ch"],["\u0447","ch"],["\u0428","Sh"],["\u0448","sh"],["\u0429","Sch"],["\u0449","sch"],["\u042a",""],["\u044a",""],["\u042b","Y"],["\u044b","y"],["\u042c",""],["\u044c",""],["\u042d","E"],["\u044d","e"],["\u042e","Yu"],["\u044e","yu"],["\u042f","Ya"],["\u044f","ya"],["\u0103","a"],["\u0102","A"],["\u0219","s"],["\u0218","S"],["\u021b","t"],["\u021a","T"],["\u0163","t"],["\u0162","T"],["\u015f","s"],["\u015e","S"],["\xe7","c"],["\xc7","C"],["\u011f","g"],["\u011e","G"],["\u0131","i"],["\u0130","I"],["\u0561","a"],["\u0531","A"],["\u0562","b"],["\u0532","B"],["\u0563","g"],["\u0533","G"],["\u0564","d"],["\u0534","D"],["\u0565","ye"],["\u0535","Ye"],["\u0566","z"],["\u0536","Z"],["\u0567","e"],["\u0537","E"],["\u0568","y"],["\u0538","Y"],["\u0569","t"],["\u0539","T"],["\u056a","zh"],["\u053a","Zh"],["\u056b","i"],["\u053b","I"],["\u056c","l"],["\u053c","L"],["\u056d","kh"],["\u053d","Kh"],["\u056e","ts"],["\u053e","Ts"],["\u056f","k"],["\u053f","K"],["\u0570","h"],["\u0540","H"],["\u0571","dz"],["\u0541","Dz"],["\u0572","gh"],["\u0542","Gh"],["\u0573","tch"],["\u0543","Tch"],["\u0574","m"],["\u0544","M"],["\u0575","y"],["\u0545","Y"],["\u0576","n"],["\u0546","N"],["\u0577","sh"],["\u0547","Sh"],["\u0578","vo"],["\u0548","Vo"],["\u0579","ch"],["\u0549","Ch"],["\u057a","p"],["\u054a","P"],["\u057b","j"],["\u054b","J"],["\u057c","r"],["\u054c","R"],["\u057d","s"],["\u054d","S"],["\u057e","v"],["\u054e","V"],["\u057f","t"],["\u054f","T"],["\u0580","r"],["\u0550","R"],["\u0581","c"],["\u0551","C"],["\u0578\u0582","u"],["\u0548\u0552","U"],["\u0548\u0582","U"],["\u0583","p"],["\u0553","P"],["\u0584","q"],["\u0554","Q"],["\u0585","o"],["\u0555","O"],["\u0586","f"],["\u0556","F"],["\u0587","yev"],["\u10d0","a"],["\u10d1","b"],["\u10d2","g"],["\u10d3","d"],["\u10d4","e"],["\u10d5","v"],["\u10d6","z"],["\u10d7","t"],["\u10d8","i"],["\u10d9","k"],["\u10da","l"],["\u10db","m"],["\u10dc","n"],["\u10dd","o"],["\u10de","p"],["\u10df","zh"],["\u10e0","r"],["\u10e1","s"],["\u10e2","t"],["\u10e3","u"],["\u10e4","ph"],["\u10e5","q"],["\u10e6","gh"],["\u10e7","k"],["\u10e8","sh"],["\u10e9","ch"],["\u10ea","ts"],["\u10eb","dz"],["\u10ec","ts"],["\u10ed","tch"],["\u10ee","kh"],["\u10ef","j"],["\u10f0","h"],["\u010d","c"],["\u010f","d"],["\u011b","e"],["\u0148","n"],["\u0159","r"],["\u0161","s"],["\u0165","t"],["\u016f","u"],["\u017e","z"],["\u010c","C"],["\u010e","D"],["\u011a","E"],["\u0147","N"],["\u0158","R"],["\u0160","S"],["\u0164","T"],["\u016e","U"],["\u017d","Z"],["\u0780","h"],["\u0781","sh"],["\u0782","n"],["\u0783","r"],["\u0784","b"],["\u0785","lh"],["\u0786","k"],["\u0787","a"],["\u0788","v"],["\u0789","m"],["\u078a","f"],["\u078b","dh"],["\u078c","th"],["\u078d","l"],["\u078e","g"],["\u078f","gn"],["\u0790","s"],["\u0791","d"],["\u0792","z"],["\u0793","t"],["\u0794","y"],["\u0795","p"],["\u0796","j"],["\u0797","ch"],["\u0798","tt"],["\u0799","hh"],["\u079a","kh"],["\u079b","th"],["\u079c","z"],["\u079d","sh"],["\u079e","s"],["\u079f","d"],["\u07a0","t"],["\u07a1","z"],["\u07a2","a"],["\u07a3","gh"],["\u07a4","q"],["\u07a5","w"],["\u07a6","a"],["\u07a7","aa"],["\u07a8","i"],["\u07a9","ee"],["\u07aa","u"],["\u07ab","oo"],["\u07ac","e"],["\u07ad","ey"],["\u07ae","o"],["\u07af","oa"],["\u07b0",""],["\u03b1","a"],["\u03b2","v"],["\u03b3","g"],["\u03b4","d"],["\u03b5","e"],["\u03b6","z"],["\u03b7","i"],["\u03b8","th"],["\u03b9","i"],["\u03ba","k"],["\u03bb","l"],["\u03bc","m"],["\u03bd","n"],["\u03be","ks"],["\u03bf","o"],["\u03c0","p"],["\u03c1","r"],["\u03c3","s"],["\u03c4","t"],["\u03c5","y"],["\u03c6","f"],["\u03c7","x"],["\u03c8","ps"],["\u03c9","o"],["\u03ac","a"],["\u03ad","e"],["\u03af","i"],["\u03cc","o"],["\u03cd","y"],["\u03ae","i"],["\u03ce","o"],["\u03c2","s"],["\u03ca","i"],["\u03b0","y"],["\u03cb","y"],["\u0390","i"],["\u0391","A"],["\u0392","B"],["\u0393","G"],["\u0394","D"],["\u0395","E"],["\u0396","Z"],["\u0397","I"],["\u0398","TH"],["\u0399","I"],["\u039a","K"],["\u039b","L"],["\u039c","M"],["\u039d","N"],["\u039e","KS"],["\u039f","O"],["\u03a0","P"],["\u03a1","R"],["\u03a3","S"],["\u03a4","T"],["\u03a5","Y"],["\u03a6","F"],["\u03a7","X"],["\u03a8","PS"],["\u03a9","O"],["\u0386","A"],["\u0388","E"],["\u038a","I"],["\u038c","O"],["\u038e","Y"],["\u0389","I"],["\u038f","O"],["\u03aa","I"],["\u03ab","Y"],["\u0101","a"],["\u0113","e"],["\u0123","g"],["\u012b","i"],["\u0137","k"],["\u013c","l"],["\u0146","n"],["\u016b","u"],["\u0100","A"],["\u0112","E"],["\u0122","G"],["\u012a","I"],["\u0136","K"],["\u013b","L"],["\u0145","N"],["\u016a","U"],["\u010d","c"],["\u0161","s"],["\u017e","z"],["\u010c","C"],["\u0160","S"],["\u017d","Z"],["\u0105","a"],["\u010d","c"],["\u0119","e"],["\u0117","e"],["\u012f","i"],["\u0161","s"],["\u0173","u"],["\u016b","u"],["\u017e","z"],["\u0104","A"],["\u010c","C"],["\u0118","E"],["\u0116","E"],["\u012e","I"],["\u0160","S"],["\u0172","U"],["\u016a","U"],["\u040c","Kj"],["\u045c","kj"],["\u0409","Lj"],["\u0459","lj"],["\u040a","Nj"],["\u045a","nj"],["\u0422\u0441","Ts"],["\u0442\u0441","ts"],["\u0105","a"],["\u0107","c"],["\u0119","e"],["\u0142","l"],["\u0144","n"],["\u015b","s"],["\u017a","z"],["\u017c","z"],["\u0104","A"],["\u0106","C"],["\u0118","E"],["\u0141","L"],["\u0143","N"],["\u015a","S"],["\u0179","Z"],["\u017b","Z"],["\u0404","Ye"],["\u0406","I"],["\u0407","Yi"],["\u0490","G"],["\u0454","ye"],["\u0456","i"],["\u0457","yi"],["\u0491","g"],["\u0132","IJ"],["\u0133","ij"],["\xa2","c"],["\xa5","Y"],["\u07ff","b"],["\u09f3","t"],["\u0af1","Bo"],["\u0e3f","B"],["\u20a0","CE"],["\u20a1","C"],["\u20a2","Cr"],["\u20a3","F"],["\u20a5","m"],["\u20a6","N"],["\u20a7","Pt"],["\u20a8","Rs"],["\u20a9","W"],["\u20ab","s"],["\u20ac","E"],["\u20ad","K"],["\u20ae","T"],["\u20af","Dp"],["\u20b0","S"],["\u20b1","P"],["\u20b2","G"],["\u20b3","A"],["\u20b4","S"],["\u20b5","C"],["\u20b6","tt"],["\u20b7","S"],["\u20b8","T"],["\u20b9","R"],["\u20ba","L"],["\u20bd","P"],["\u20bf","B"],["\ufe69","$"],["\uffe0","c"],["\uffe5","Y"],["\uffe6","W"],["\u{1d400}","A"],["\u{1d401}","B"],["\u{1d402}","C"],["\u{1d403}","D"],["\u{1d404}","E"],["\u{1d405}","F"],["\u{1d406}","G"],["\u{1d407}","H"],["\u{1d408}","I"],["\u{1d409}","J"],["\u{1d40a}","K"],["\u{1d40b}","L"],["\u{1d40c}","M"],["\u{1d40d}","N"],["\u{1d40e}","O"],["\u{1d40f}","P"],["\u{1d410}","Q"],["\u{1d411}","R"],["\u{1d412}","S"],["\u{1d413}","T"],["\u{1d414}","U"],["\u{1d415}","V"],["\u{1d416}","W"],["\u{1d417}","X"],["\u{1d418}","Y"],["\u{1d419}","Z"],["\u{1d41a}","a"],["\u{1d41b}","b"],["\u{1d41c}","c"],["\u{1d41d}","d"],["\u{1d41e}","e"],["\u{1d41f}","f"],["\u{1d420}","g"],["\u{1d421}","h"],["\u{1d422}","i"],["\u{1d423}","j"],["\u{1d424}","k"],["\u{1d425}","l"],["\u{1d426}","m"],["\u{1d427}","n"],["\u{1d428}","o"],["\u{1d429}","p"],["\u{1d42a}","q"],["\u{1d42b}","r"],["\u{1d42c}","s"],["\u{1d42d}","t"],["\u{1d42e}","u"],["\u{1d42f}","v"],["\u{1d430}","w"],["\u{1d431}","x"],["\u{1d432}","y"],["\u{1d433}","z"],["\u{1d434}","A"],["\u{1d435}","B"],["\u{1d436}","C"],["\u{1d437}","D"],["\u{1d438}","E"],["\u{1d439}","F"],["\u{1d43a}","G"],["\u{1d43b}","H"],["\u{1d43c}","I"],["\u{1d43d}","J"],["\u{1d43e}","K"],["\u{1d43f}","L"],["\u{1d440}","M"],["\u{1d441}","N"],["\u{1d442}","O"],["\u{1d443}","P"],["\u{1d444}","Q"],["\u{1d445}","R"],["\u{1d446}","S"],["\u{1d447}","T"],["\u{1d448}","U"],["\u{1d449}","V"],["\u{1d44a}","W"],["\u{1d44b}","X"],["\u{1d44c}","Y"],["\u{1d44d}","Z"],["\u{1d44e}","a"],["\u{1d44f}","b"],["\u{1d450}","c"],["\u{1d451}","d"],["\u{1d452}","e"],["\u{1d453}","f"],["\u{1d454}","g"],["\u{1d456}","i"],["\u{1d457}","j"],["\u{1d458}","k"],["\u{1d459}","l"],["\u{1d45a}","m"],["\u{1d45b}","n"],["\u{1d45c}","o"],["\u{1d45d}","p"],["\u{1d45e}","q"],["\u{1d45f}","r"],["\u{1d460}","s"],["\u{1d461}","t"],["\u{1d462}","u"],["\u{1d463}","v"],["\u{1d464}","w"],["\u{1d465}","x"],["\u{1d466}","y"],["\u{1d467}","z"],["\u{1d468}","A"],["\u{1d469}","B"],["\u{1d46a}","C"],["\u{1d46b}","D"],["\u{1d46c}","E"],["\u{1d46d}","F"],["\u{1d46e}","G"],["\u{1d46f}","H"],["\u{1d470}","I"],["\u{1d471}","J"],["\u{1d472}","K"],["\u{1d473}","L"],["\u{1d474}","M"],["\u{1d475}","N"],["\u{1d476}","O"],["\u{1d477}","P"],["\u{1d478}","Q"],["\u{1d479}","R"],["\u{1d47a}","S"],["\u{1d47b}","T"],["\u{1d47c}","U"],["\u{1d47d}","V"],["\u{1d47e}","W"],["\u{1d47f}","X"],["\u{1d480}","Y"],["\u{1d481}","Z"],["\u{1d482}","a"],["\u{1d483}","b"],["\u{1d484}","c"],["\u{1d485}","d"],["\u{1d486}","e"],["\u{1d487}","f"],["\u{1d488}","g"],["\u{1d489}","h"],["\u{1d48a}","i"],["\u{1d48b}","j"],["\u{1d48c}","k"],["\u{1d48d}","l"],["\u{1d48e}","m"],["\u{1d48f}","n"],["\u{1d490}","o"],["\u{1d491}","p"],["\u{1d492}","q"],["\u{1d493}","r"],["\u{1d494}","s"],["\u{1d495}","t"],["\u{1d496}","u"],["\u{1d497}","v"],["\u{1d498}","w"],["\u{1d499}","x"],["\u{1d49a}","y"],["\u{1d49b}","z"],["\u{1d49c}","A"],["\u{1d49e}","C"],["\u{1d49f}","D"],["\u{1d4a2}","g"],["\u{1d4a5}","J"],["\u{1d4a6}","K"],["\u{1d4a9}","N"],["\u{1d4aa}","O"],["\u{1d4ab}","P"],["\u{1d4ac}","Q"],["\u{1d4ae}","S"],["\u{1d4af}","T"],["\u{1d4b0}","U"],["\u{1d4b1}","V"],["\u{1d4b2}","W"],["\u{1d4b3}","X"],["\u{1d4b4}","Y"],["\u{1d4b5}","Z"],["\u{1d4b6}","a"],["\u{1d4b7}","b"],["\u{1d4b8}","c"],["\u{1d4b9}","d"],["\u{1d4bb}","f"],["\u{1d4bd}","h"],["\u{1d4be}","i"],["\u{1d4bf}","j"],["\u{1d4c0}","h"],["\u{1d4c1}","l"],["\u{1d4c2}","m"],["\u{1d4c3}","n"],["\u{1d4c5}","p"],["\u{1d4c6}","q"],["\u{1d4c7}","r"],["\u{1d4c8}","s"],["\u{1d4c9}","t"],["\u{1d4ca}","u"],["\u{1d4cb}","v"],["\u{1d4cc}","w"],["\u{1d4cd}","x"],["\u{1d4ce}","y"],["\u{1d4cf}","z"],["\u{1d4d0}","A"],["\u{1d4d1}","B"],["\u{1d4d2}","C"],["\u{1d4d3}","D"],["\u{1d4d4}","E"],["\u{1d4d5}","F"],["\u{1d4d6}","G"],["\u{1d4d7}","H"],["\u{1d4d8}","I"],["\u{1d4d9}","J"],["\u{1d4da}","K"],["\u{1d4db}","L"],["\u{1d4dc}","M"],["\u{1d4dd}","N"],["\u{1d4de}","O"],["\u{1d4df}","P"],["\u{1d4e0}","Q"],["\u{1d4e1}","R"],["\u{1d4e2}","S"],["\u{1d4e3}","T"],["\u{1d4e4}","U"],["\u{1d4e5}","V"],["\u{1d4e6}","W"],["\u{1d4e7}","X"],["\u{1d4e8}","Y"],["\u{1d4e9}","Z"],["\u{1d4ea}","a"],["\u{1d4eb}","b"],["\u{1d4ec}","c"],["\u{1d4ed}","d"],["\u{1d4ee}","e"],["\u{1d4ef}","f"],["\u{1d4f0}","g"],["\u{1d4f1}","h"],["\u{1d4f2}","i"],["\u{1d4f3}","j"],["\u{1d4f4}","k"],["\u{1d4f5}","l"],["\u{1d4f6}","m"],["\u{1d4f7}","n"],["\u{1d4f8}","o"],["\u{1d4f9}","p"],["\u{1d4fa}","q"],["\u{1d4fb}","r"],["\u{1d4fc}","s"],["\u{1d4fd}","t"],["\u{1d4fe}","u"],["\u{1d4ff}","v"],["\u{1d500}","w"],["\u{1d501}","x"],["\u{1d502}","y"],["\u{1d503}","z"],["\u{1d504}","A"],["\u{1d505}","B"],["\u{1d507}","D"],["\u{1d508}","E"],["\u{1d509}","F"],["\u{1d50a}","G"],["\u{1d50d}","J"],["\u{1d50e}","K"],["\u{1d50f}","L"],["\u{1d510}","M"],["\u{1d511}","N"],["\u{1d512}","O"],["\u{1d513}","P"],["\u{1d514}","Q"],["\u{1d516}","S"],["\u{1d517}","T"],["\u{1d518}","U"],["\u{1d519}","V"],["\u{1d51a}","W"],["\u{1d51b}","X"],["\u{1d51c}","Y"],["\u{1d51e}","a"],["\u{1d51f}","b"],["\u{1d520}","c"],["\u{1d521}","d"],["\u{1d522}","e"],["\u{1d523}","f"],["\u{1d524}","g"],["\u{1d525}","h"],["\u{1d526}","i"],["\u{1d527}","j"],["\u{1d528}","k"],["\u{1d529}","l"],["\u{1d52a}","m"],["\u{1d52b}","n"],["\u{1d52c}","o"],["\u{1d52d}","p"],["\u{1d52e}","q"],["\u{1d52f}","r"],["\u{1d530}","s"],["\u{1d531}","t"],["\u{1d532}","u"],["\u{1d533}","v"],["\u{1d534}","w"],["\u{1d535}","x"],["\u{1d536}","y"],["\u{1d537}","z"],["\u{1d538}","A"],["\u{1d539}","B"],["\u{1d53b}","D"],["\u{1d53c}","E"],["\u{1d53d}","F"],["\u{1d53e}","G"],["\u{1d540}","I"],["\u{1d541}","J"],["\u{1d542}","K"],["\u{1d543}","L"],["\u{1d544}","M"],["\u{1d546}","N"],["\u{1d54a}","S"],["\u{1d54b}","T"],["\u{1d54c}","U"],["\u{1d54d}","V"],["\u{1d54e}","W"],["\u{1d54f}","X"],["\u{1d550}","Y"],["\u{1d552}","a"],["\u{1d553}","b"],["\u{1d554}","c"],["\u{1d555}","d"],["\u{1d556}","e"],["\u{1d557}","f"],["\u{1d558}","g"],["\u{1d559}","h"],["\u{1d55a}","i"],["\u{1d55b}","j"],["\u{1d55c}","k"],["\u{1d55d}","l"],["\u{1d55e}","m"],["\u{1d55f}","n"],["\u{1d560}","o"],["\u{1d561}","p"],["\u{1d562}","q"],["\u{1d563}","r"],["\u{1d564}","s"],["\u{1d565}","t"],["\u{1d566}","u"],["\u{1d567}","v"],["\u{1d568}","w"],["\u{1d569}","x"],["\u{1d56a}","y"],["\u{1d56b}","z"],["\u{1d56c}","A"],["\u{1d56d}","B"],["\u{1d56e}","C"],["\u{1d56f}","D"],["\u{1d570}","E"],["\u{1d571}","F"],["\u{1d572}","G"],["\u{1d573}","H"],["\u{1d574}","I"],["\u{1d575}","J"],["\u{1d576}","K"],["\u{1d577}","L"],["\u{1d578}","M"],["\u{1d579}","N"],["\u{1d57a}","O"],["\u{1d57b}","P"],["\u{1d57c}","Q"],["\u{1d57d}","R"],["\u{1d57e}","S"],["\u{1d57f}","T"],["\u{1d580}","U"],["\u{1d581}","V"],["\u{1d582}","W"],["\u{1d583}","X"],["\u{1d584}","Y"],["\u{1d585}","Z"],["\u{1d586}","a"],["\u{1d587}","b"],["\u{1d588}","c"],["\u{1d589}","d"],["\u{1d58a}","e"],["\u{1d58b}","f"],["\u{1d58c}","g"],["\u{1d58d}","h"],["\u{1d58e}","i"],["\u{1d58f}","j"],["\u{1d590}","k"],["\u{1d591}","l"],["\u{1d592}","m"],["\u{1d593}","n"],["\u{1d594}","o"],["\u{1d595}","p"],["\u{1d596}","q"],["\u{1d597}","r"],["\u{1d598}","s"],["\u{1d599}","t"],["\u{1d59a}","u"],["\u{1d59b}","v"],["\u{1d59c}","w"],["\u{1d59d}","x"],["\u{1d59e}","y"],["\u{1d59f}","z"],["\u{1d5a0}","A"],["\u{1d5a1}","B"],["\u{1d5a2}","C"],["\u{1d5a3}","D"],["\u{1d5a4}","E"],["\u{1d5a5}","F"],["\u{1d5a6}","G"],["\u{1d5a7}","H"],["\u{1d5a8}","I"],["\u{1d5a9}","J"],["\u{1d5aa}","K"],["\u{1d5ab}","L"],["\u{1d5ac}","M"],["\u{1d5ad}","N"],["\u{1d5ae}","O"],["\u{1d5af}","P"],["\u{1d5b0}","Q"],["\u{1d5b1}","R"],["\u{1d5b2}","S"],["\u{1d5b3}","T"],["\u{1d5b4}","U"],["\u{1d5b5}","V"],["\u{1d5b6}","W"],["\u{1d5b7}","X"],["\u{1d5b8}","Y"],["\u{1d5b9}","Z"],["\u{1d5ba}","a"],["\u{1d5bb}","b"],["\u{1d5bc}","c"],["\u{1d5bd}","d"],["\u{1d5be}","e"],["\u{1d5bf}","f"],["\u{1d5c0}","g"],["\u{1d5c1}","h"],["\u{1d5c2}","i"],["\u{1d5c3}","j"],["\u{1d5c4}","k"],["\u{1d5c5}","l"],["\u{1d5c6}","m"],["\u{1d5c7}","n"],["\u{1d5c8}","o"],["\u{1d5c9}","p"],["\u{1d5ca}","q"],["\u{1d5cb}","r"],["\u{1d5cc}","s"],["\u{1d5cd}","t"],["\u{1d5ce}","u"],["\u{1d5cf}","v"],["\u{1d5d0}","w"],["\u{1d5d1}","x"],["\u{1d5d2}","y"],["\u{1d5d3}","z"],["\u{1d5d4}","A"],["\u{1d5d5}","B"],["\u{1d5d6}","C"],["\u{1d5d7}","D"],["\u{1d5d8}","E"],["\u{1d5d9}","F"],["\u{1d5da}","G"],["\u{1d5db}","H"],["\u{1d5dc}","I"],["\u{1d5dd}","J"],["\u{1d5de}","K"],["\u{1d5df}","L"],["\u{1d5e0}","M"],["\u{1d5e1}","N"],["\u{1d5e2}","O"],["\u{1d5e3}","P"],["\u{1d5e4}","Q"],["\u{1d5e5}","R"],["\u{1d5e6}","S"],["\u{1d5e7}","T"],["\u{1d5e8}","U"],["\u{1d5e9}","V"],["\u{1d5ea}","W"],["\u{1d5eb}","X"],["\u{1d5ec}","Y"],["\u{1d5ed}","Z"],["\u{1d5ee}","a"],["\u{1d5ef}","b"],["\u{1d5f0}","c"],["\u{1d5f1}","d"],["\u{1d5f2}","e"],["\u{1d5f3}","f"],["\u{1d5f4}","g"],["\u{1d5f5}","h"],["\u{1d5f6}","i"],["\u{1d5f7}","j"],["\u{1d5f8}","k"],["\u{1d5f9}","l"],["\u{1d5fa}","m"],["\u{1d5fb}","n"],["\u{1d5fc}","o"],["\u{1d5fd}","p"],["\u{1d5fe}","q"],["\u{1d5ff}","r"],["\u{1d600}","s"],["\u{1d601}","t"],["\u{1d602}","u"],["\u{1d603}","v"],["\u{1d604}","w"],["\u{1d605}","x"],["\u{1d606}","y"],["\u{1d607}","z"],["\u{1d608}","A"],["\u{1d609}","B"],["\u{1d60a}","C"],["\u{1d60b}","D"],["\u{1d60c}","E"],["\u{1d60d}","F"],["\u{1d60e}","G"],["\u{1d60f}","H"],["\u{1d610}","I"],["\u{1d611}","J"],["\u{1d612}","K"],["\u{1d613}","L"],["\u{1d614}","M"],["\u{1d615}","N"],["\u{1d616}","O"],["\u{1d617}","P"],["\u{1d618}","Q"],["\u{1d619}","R"],["\u{1d61a}","S"],["\u{1d61b}","T"],["\u{1d61c}","U"],["\u{1d61d}","V"],["\u{1d61e}","W"],["\u{1d61f}","X"],["\u{1d620}","Y"],["\u{1d621}","Z"],["\u{1d622}","a"],["\u{1d623}","b"],["\u{1d624}","c"],["\u{1d625}","d"],["\u{1d626}","e"],["\u{1d627}","f"],["\u{1d628}","g"],["\u{1d629}","h"],["\u{1d62a}","i"],["\u{1d62b}","j"],["\u{1d62c}","k"],["\u{1d62d}","l"],["\u{1d62e}","m"],["\u{1d62f}","n"],["\u{1d630}","o"],["\u{1d631}","p"],["\u{1d632}","q"],["\u{1d633}","r"],["\u{1d634}","s"],["\u{1d635}","t"],["\u{1d636}","u"],["\u{1d637}","v"],["\u{1d638}","w"],["\u{1d639}","x"],["\u{1d63a}","y"],["\u{1d63b}","z"],["\u{1d63c}","A"],["\u{1d63d}","B"],["\u{1d63e}","C"],["\u{1d63f}","D"],["\u{1d640}","E"],["\u{1d641}","F"],["\u{1d642}","G"],["\u{1d643}","H"],["\u{1d644}","I"],["\u{1d645}","J"],["\u{1d646}","K"],["\u{1d647}","L"],["\u{1d648}","M"],["\u{1d649}","N"],["\u{1d64a}","O"],["\u{1d64b}","P"],["\u{1d64c}","Q"],["\u{1d64d}","R"],["\u{1d64e}","S"],["\u{1d64f}","T"],["\u{1d650}","U"],["\u{1d651}","V"],["\u{1d652}","W"],["\u{1d653}","X"],["\u{1d654}","Y"],["\u{1d655}","Z"],["\u{1d656}","a"],["\u{1d657}","b"],["\u{1d658}","c"],["\u{1d659}","d"],["\u{1d65a}","e"],["\u{1d65b}","f"],["\u{1d65c}","g"],["\u{1d65d}","h"],["\u{1d65e}","i"],["\u{1d65f}","j"],["\u{1d660}","k"],["\u{1d661}","l"],["\u{1d662}","m"],["\u{1d663}","n"],["\u{1d664}","o"],["\u{1d665}","p"],["\u{1d666}","q"],["\u{1d667}","r"],["\u{1d668}","s"],["\u{1d669}","t"],["\u{1d66a}","u"],["\u{1d66b}","v"],["\u{1d66c}","w"],["\u{1d66d}","x"],["\u{1d66e}","y"],["\u{1d66f}","z"],["\u{1d670}","A"],["\u{1d671}","B"],["\u{1d672}","C"],["\u{1d673}","D"],["\u{1d674}","E"],["\u{1d675}","F"],["\u{1d676}","G"],["\u{1d677}","H"],["\u{1d678}","I"],["\u{1d679}","J"],["\u{1d67a}","K"],["\u{1d67b}","L"],["\u{1d67c}","M"],["\u{1d67d}","N"],["\u{1d67e}","O"],["\u{1d67f}","P"],["\u{1d680}","Q"],["\u{1d681}","R"],["\u{1d682}","S"],["\u{1d683}","T"],["\u{1d684}","U"],["\u{1d685}","V"],["\u{1d686}","W"],["\u{1d687}","X"],["\u{1d688}","Y"],["\u{1d689}","Z"],["\u{1d68a}","a"],["\u{1d68b}","b"],["\u{1d68c}","c"],["\u{1d68d}","d"],["\u{1d68e}","e"],["\u{1d68f}","f"],["\u{1d690}","g"],["\u{1d691}","h"],["\u{1d692}","i"],["\u{1d693}","j"],["\u{1d694}","k"],["\u{1d695}","l"],["\u{1d696}","m"],["\u{1d697}","n"],["\u{1d698}","o"],["\u{1d699}","p"],["\u{1d69a}","q"],["\u{1d69b}","r"],["\u{1d69c}","s"],["\u{1d69d}","t"],["\u{1d69e}","u"],["\u{1d69f}","v"],["\u{1d6a0}","w"],["\u{1d6a1}","x"],["\u{1d6a2}","y"],["\u{1d6a3}","z"],["\u{1d6a4}","l"],["\u{1d6a5}","j"],["\u{1d6e2}","A"],["\u{1d6e3}","B"],["\u{1d6e4}","G"],["\u{1d6e5}","D"],["\u{1d6e6}","E"],["\u{1d6e7}","Z"],["\u{1d6e8}","I"],["\u{1d6e9}","TH"],["\u{1d6ea}","I"],["\u{1d6eb}","K"],["\u{1d6ec}","L"],["\u{1d6ed}","M"],["\u{1d6ee}","N"],["\u{1d6ef}","KS"],["\u{1d6f0}","O"],["\u{1d6f1}","P"],["\u{1d6f2}","R"],["\u{1d6f3}","TH"],["\u{1d6f4}","S"],["\u{1d6f5}","T"],["\u{1d6f6}","Y"],["\u{1d6f7}","F"],["\u{1d6f8}","x"],["\u{1d6f9}","PS"],["\u{1d6fa}","O"],["\u{1d6fb}","D"],["\u{1d6fc}","a"],["\u{1d6fd}","b"],["\u{1d6fe}","g"],["\u{1d6ff}","d"],["\u{1d700}","e"],["\u{1d701}","z"],["\u{1d702}","i"],["\u{1d703}","th"],["\u{1d704}","i"],["\u{1d705}","k"],["\u{1d706}","l"],["\u{1d707}","m"],["\u{1d708}","n"],["\u{1d709}","ks"],["\u{1d70a}","o"],["\u{1d70b}","p"],["\u{1d70c}","r"],["\u{1d70d}","s"],["\u{1d70e}","s"],["\u{1d70f}","t"],["\u{1d710}","y"],["\u{1d711}","f"],["\u{1d712}","x"],["\u{1d713}","ps"],["\u{1d714}","o"],["\u{1d715}","d"],["\u{1d716}","E"],["\u{1d717}","TH"],["\u{1d718}","K"],["\u{1d719}","f"],["\u{1d71a}","r"],["\u{1d71b}","p"],["\u{1d71c}","A"],["\u{1d71d}","V"],["\u{1d71e}","G"],["\u{1d71f}","D"],["\u{1d720}","E"],["\u{1d721}","Z"],["\u{1d722}","I"],["\u{1d723}","TH"],["\u{1d724}","I"],["\u{1d725}","K"],["\u{1d726}","L"],["\u{1d727}","M"],["\u{1d728}","N"],["\u{1d729}","KS"],["\u{1d72a}","O"],["\u{1d72b}","P"],["\u{1d72c}","S"],["\u{1d72d}","TH"],["\u{1d72e}","S"],["\u{1d72f}","T"],["\u{1d730}","Y"],["\u{1d731}","F"],["\u{1d732}","X"],["\u{1d733}","PS"],["\u{1d734}","O"],["\u{1d735}","D"],["\u{1d736}","a"],["\u{1d737}","v"],["\u{1d738}","g"],["\u{1d739}","d"],["\u{1d73a}","e"],["\u{1d73b}","z"],["\u{1d73c}","i"],["\u{1d73d}","th"],["\u{1d73e}","i"],["\u{1d73f}","k"],["\u{1d740}","l"],["\u{1d741}","m"],["\u{1d742}","n"],["\u{1d743}","ks"],["\u{1d744}","o"],["\u{1d745}","p"],["\u{1d746}","r"],["\u{1d747}","s"],["\u{1d748}","s"],["\u{1d749}","t"],["\u{1d74a}","y"],["\u{1d74b}","f"],["\u{1d74c}","x"],["\u{1d74d}","ps"],["\u{1d74e}","o"],["\u{1d74f}","a"],["\u{1d750}","e"],["\u{1d751}","i"],["\u{1d752}","k"],["\u{1d753}","f"],["\u{1d754}","r"],["\u{1d755}","p"],["\u{1d756}","A"],["\u{1d757}","B"],["\u{1d758}","G"],["\u{1d759}","D"],["\u{1d75a}","E"],["\u{1d75b}","Z"],["\u{1d75c}","I"],["\u{1d75d}","TH"],["\u{1d75e}","I"],["\u{1d75f}","K"],["\u{1d760}","L"],["\u{1d761}","M"],["\u{1d762}","N"],["\u{1d763}","KS"],["\u{1d764}","O"],["\u{1d765}","P"],["\u{1d766}","R"],["\u{1d767}","TH"],["\u{1d768}","S"],["\u{1d769}","T"],["\u{1d76a}","Y"],["\u{1d76b}","F"],["\u{1d76c}","X"],["\u{1d76d}","PS"],["\u{1d76e}","O"],["\u{1d76f}","D"],["\u{1d770}","a"],["\u{1d771}","v"],["\u{1d772}","g"],["\u{1d773}","d"],["\u{1d774}","e"],["\u{1d775}","z"],["\u{1d776}","i"],["\u{1d777}","th"],["\u{1d778}","i"],["\u{1d779}","k"],["\u{1d77a}","l"],["\u{1d77b}","m"],["\u{1d77c}","n"],["\u{1d77d}","ks"],["\u{1d77e}","o"],["\u{1d77f}","p"],["\u{1d780}","r"],["\u{1d781}","s"],["\u{1d782}","s"],["\u{1d783}","t"],["\u{1d784}","y"],["\u{1d785}","f"],["\u{1d786}","x"],["\u{1d787}","ps"],["\u{1d788}","o"],["\u{1d789}","a"],["\u{1d78a}","e"],["\u{1d78b}","i"],["\u{1d78c}","k"],["\u{1d78d}","f"],["\u{1d78e}","r"],["\u{1d78f}","p"],["\u{1d790}","A"],["\u{1d791}","V"],["\u{1d792}","G"],["\u{1d793}","D"],["\u{1d794}","E"],["\u{1d795}","Z"],["\u{1d796}","I"],["\u{1d797}","TH"],["\u{1d798}","I"],["\u{1d799}","K"],["\u{1d79a}","L"],["\u{1d79b}","M"],["\u{1d79c}","N"],["\u{1d79d}","KS"],["\u{1d79e}","O"],["\u{1d79f}","P"],["\u{1d7a0}","S"],["\u{1d7a1}","TH"],["\u{1d7a2}","S"],["\u{1d7a3}","T"],["\u{1d7a4}","Y"],["\u{1d7a5}","F"],["\u{1d7a6}","X"],["\u{1d7a7}","PS"],["\u{1d7a8}","O"],["\u{1d7a9}","D"],["\u{1d7aa}","av"],["\u{1d7ab}","g"],["\u{1d7ac}","d"],["\u{1d7ad}","e"],["\u{1d7ae}","z"],["\u{1d7af}","i"],["\u{1d7b0}","i"],["\u{1d7b1}","th"],["\u{1d7b2}","i"],["\u{1d7b3}","k"],["\u{1d7b4}","l"],["\u{1d7b5}","m"],["\u{1d7b6}","n"],["\u{1d7b7}","ks"],["\u{1d7b8}","o"],["\u{1d7b9}","p"],["\u{1d7ba}","r"],["\u{1d7bb}","s"],["\u{1d7bc}","s"],["\u{1d7bd}","t"],["\u{1d7be}","y"],["\u{1d7bf}","f"],["\u{1d7c0}","x"],["\u{1d7c1}","ps"],["\u{1d7c2}","o"],["\u{1d7c3}","a"],["\u{1d7c4}","e"],["\u{1d7c5}","i"],["\u{1d7c6}","k"],["\u{1d7c7}","f"],["\u{1d7c8}","r"],["\u{1d7c9}","p"],["\u{1d7ca}","F"],["\u{1d7cb}","f"],["\u249c","(a)"],["\u249d","(b)"],["\u249e","(c)"],["\u249f","(d)"],["\u24a0","(e)"],["\u24a1","(f)"],["\u24a2","(g)"],["\u24a3","(h)"],["\u24a4","(i)"],["\u24a5","(j)"],["\u24a6","(k)"],["\u24a7","(l)"],["\u24a8","(m)"],["\u24a9","(n)"],["\u24aa","(o)"],["\u24ab","(p)"],["\u24ac","(q)"],["\u24ad","(r)"],["\u24ae","(s)"],["\u24af","(t)"],["\u24b0","(u)"],["\u24b1","(v)"],["\u24b2","(w)"],["\u24b3","(x)"],["\u24b4","(y)"],["\u24b5","(z)"],["\u24b6","(A)"],["\u24b7","(B)"],["\u24b8","(C)"],["\u24b9","(D)"],["\u24ba","(E)"],["\u24bb","(F)"],["\u24bc","(G)"],["\u24bd","(H)"],["\u24be","(I)"],["\u24bf","(J)"],["\u24c0","(K)"],["\u24c1","(L)"],["\u24c3","(N)"],["\u24c4","(O)"],["\u24c5","(P)"],["\u24c6","(Q)"],["\u24c7","(R)"],["\u24c8","(S)"],["\u24c9","(T)"],["\u24ca","(U)"],["\u24cb","(V)"],["\u24cc","(W)"],["\u24cd","(X)"],["\u24ce","(Y)"],["\u24cf","(Z)"],["\u24d0","(a)"],["\u24d1","(b)"],["\u24d2","(b)"],["\u24d3","(c)"],["\u24d4","(e)"],["\u24d5","(f)"],["\u24d6","(g)"],["\u24d7","(h)"],["\u24d8","(i)"],["\u24d9","(j)"],["\u24da","(k)"],["\u24db","(l)"],["\u24dc","(m)"],["\u24dd","(n)"],["\u24de","(o)"],["\u24df","(p)"],["\u24e0","(q)"],["\u24e1","(r)"],["\u24e2","(s)"],["\u24e3","(t)"],["\u24e4","(u)"],["\u24e5","(v)"],["\u24e6","(w)"],["\u24e7","(x)"],["\u24e8","(y)"],["\u24e9","(z)"],["\u010a","C"],["\u010b","c"],["\u0120","G"],["\u0121","g"],["\u0126","H"],["\u0127","h"],["\u017b","Z"],["\u017c","z"],["\u{1d7ce}","0"],["\u{1d7cf}","1"],["\u{1d7d0}","2"],["\u{1d7d1}","3"],["\u{1d7d2}","4"],["\u{1d7d3}","5"],["\u{1d7d4}","6"],["\u{1d7d5}","7"],["\u{1d7d6}","8"],["\u{1d7d7}","9"],["\u{1d7d8}","0"],["\u{1d7d9}","1"],["\u{1d7da}","2"],["\u{1d7db}","3"],["\u{1d7dc}","4"],["\u{1d7dd}","5"],["\u{1d7de}","6"],["\u{1d7df}","7"],["\u{1d7e0}","8"],["\u{1d7e1}","9"],["\u{1d7e2}","0"],["\u{1d7e3}","1"],["\u{1d7e4}","2"],["\u{1d7e5}","3"],["\u{1d7e6}","4"],["\u{1d7e7}","5"],["\u{1d7e8}","6"],["\u{1d7e9}","7"],["\u{1d7ea}","8"],["\u{1d7eb}","9"],["\u{1d7ec}","0"],["\u{1d7ed}","1"],["\u{1d7ee}","2"],["\u{1d7ef}","3"],["\u{1d7f0}","4"],["\u{1d7f1}","5"],["\u{1d7f2}","6"],["\u{1d7f3}","7"],["\u{1d7f4}","8"],["\u{1d7f5}","9"],["\u{1d7f6}","0"],["\u{1d7f7}","1"],["\u{1d7f8}","2"],["\u{1d7f9}","3"],["\u{1d7fa}","4"],["\u{1d7fb}","5"],["\u{1d7fc}","6"],["\u{1d7fd}","7"],["\u{1d7fe}","8"],["\u{1d7ff}","9"],["\u2460","1"],["\u2461","2"],["\u2462","3"],["\u2463","4"],["\u2464","5"],["\u2465","6"],["\u2466","7"],["\u2467","8"],["\u2468","9"],["\u2469","10"],["\u246a","11"],["\u246b","12"],["\u246c","13"],["\u246d","14"],["\u246e","15"],["\u246f","16"],["\u2470","17"],["\u2471","18"],["\u2472","19"],["\u2473","20"],["\u2474","1"],["\u2475","2"],["\u2476","3"],["\u2477","4"],["\u2478","5"],["\u2479","6"],["\u247a","7"],["\u247b","8"],["\u247c","9"],["\u247d","10"],["\u247e","11"],["\u247f","12"],["\u2480","13"],["\u2481","14"],["\u2482","15"],["\u2483","16"],["\u2484","17"],["\u2485","18"],["\u2486","19"],["\u2487","20"],["\u2488","1."],["\u2489","2."],["\u248a","3."],["\u248b","4."],["\u248c","5."],["\u248d","6."],["\u248e","7."],["\u248f","8."],["\u2490","9."],["\u2491","10."],["\u2492","11."],["\u2493","12."],["\u2494","13."],["\u2495","14."],["\u2496","15."],["\u2497","16."],["\u2498","17."],["\u2499","18."],["\u249a","19."],["\u249b","20."],["\u24ea","0"],["\u24eb","11"],["\u24ec","12"],["\u24ed","13"],["\u24ee","14"],["\u24ef","15"],["\u24f0","16"],["\u24f1","17"],["\u24f2","18"],["\u24f3","19"],["\u24f4","20"],["\u24f5","1"],["\u24f6","2"],["\u24f7","3"],["\u24f8","4"],["\u24f9","5"],["\u24fa","6"],["\u24fb","7"],["\u24fc","8"],["\u24fd","9"],["\u24fe","10"],["\u24ff","0"],["\u{1f670}","&"],["\u{1f671}","&"],["\u{1f672}","&"],["\u{1f673}","&"],["\u{1f674}","&"],["\u{1f675}","&"],["\u{1f676}",'"'],["\u{1f677}",'"'],["\u{1f678}",'"'],["\u203d","?!"],["\u{1f679}","?!"],["\u{1f67a}","?!"],["\u{1f67b}","?!"],["\u{1f67c}","/"],["\u{1f67d}","\\"],["\u{1f707}","AR"],["\u{1f708}","V"],["\u{1f709}","V"],["\u{1f706}","VR"],["\u{1f705}","VF"],["\u{1f729}","2"],["\u{1f72a}","5"],["\u{1f761}","f"],["\u{1f762}","W"],["\u{1f763}","U"],["\u{1f767}","V"],["\u{1f768}","T"],["\u{1f76a}","V"],["\u{1f76b}","MB"],["\u{1f76c}","VB"],["\u{1f772}","3B"],["\u{1f773}","3B"],["\u{1f4af}","100"],["\u{1f519}","BACK"],["\u{1f51a}","END"],["\u{1f51b}","ON!"],["\u{1f51c}","SOON"],["\u{1f51d}","TOP"],["\u{1f51e}","18"],["\u{1f524}","abc"],["\u{1f520}","ABCD"],["\u{1f521}","abcd"],["\u{1f522}","1234"],["\u{1f523}","T&@%"],["#\ufe0f\u20e3","#"],["*\ufe0f\u20e3","*"],["0\ufe0f\u20e3","0"],["1\ufe0f\u20e3","1"],["2\ufe0f\u20e3","2"],["3\ufe0f\u20e3","3"],["4\ufe0f\u20e3","4"],["5\ufe0f\u20e3","5"],["6\ufe0f\u20e3","6"],["7\ufe0f\u20e3","7"],["8\ufe0f\u20e3","8"],["9\ufe0f\u20e3","9"],["\u{1f51f}","10"],["\u{1f170}\ufe0f","A"],["\u{1f171}\ufe0f","B"],["\u{1f18e}","AB"],["\u{1f191}","CL"],["\u{1f17e}\ufe0f","O"],["\u{1f17f}","P"],["\u{1f198}","SOS"],["\u{1f172}","C"],["\u{1f173}","D"],["\u{1f174}","E"],["\u{1f175}","F"],["\u{1f176}","G"],["\u{1f177}","H"],["\u{1f178}","I"],["\u{1f179}","J"],["\u{1f17a}","K"],["\u{1f17b}","L"],["\u{1f17c}","M"],["\u{1f17d}","N"],["\u{1f180}","Q"],["\u{1f181}","R"],["\u{1f182}","S"],["\u{1f183}","T"],["\u{1f184}","U"],["\u{1f185}","V"],["\u{1f186}","W"],["\u{1f187}","X"],["\u{1f188}","Y"],["\u{1f189}","Z"]],to=["list"],no=["defaultItemTemplate"];function io(i,a){if(1&i&&t._uU(0),2&i){const e=a.item,n=t.oxw();t.hij(" ",e[n.labelKey]," ")}}function so(i,a){}const ao=function(i){return{item:i}};function ro(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"a",4),t.NdJ("mousedown",function(s){const o=t.CHM(e).index,l=t.oxw();return l.activeIndex=o,l.itemClick.emit(),t.KtG(s.preventDefault())}),t.YNc(2,so,0,0,"ng-template",5),t.qZA()()}if(2&i){const e=a.$implicit,n=a.index,s=t.oxw();t.ekj("active",s.activeIndex==n)("mention-active",!s.styleOff&&s.activeIndex==n),t.xp6(1),t.ekj("mention-item",!s.styleOff),t.xp6(1),t.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",t.VKq(8,ao,e))}}function Ui(i){return Yt(i)?i.value:i.textContent}function En(i,a,e,n,s,r=!1){if(function lo(i){return null!=i&&("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName||"#text"==i.nodeName)}(i)){let u=Ui(i);(function oo(i,a){Yt(i)?i.value=a:i.textContent=a})(i,u.substring(0,a)+n+u.substring(e,u.length)),Ri(i,a+n.length,s)}else if(!r){let u=Xt(s);if(u&&u.rangeCount>0){var l=u.getRangeAt(0).startOffset;En(u.anchorNode,l-(e-a),l,n,s,!0)}}}function Yt(i){return null!=i&&("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName)}function Ri(i,a,e=null){if(Yt(i)&&i.selectionStart)i.focus(),i.setSelectionRange(a,a);else{let n=On(e).createRange();n.setStart(i,a),n.collapse(!0);let s=Xt(e);s.removeAllRanges(),s.addRange(n)}}function Bi(i,a=null){if(Yt(i))return i.value.slice(0,i.selectionStart).length;var n=Xt(a);if(n.rangeCount>0){var s=n.getRangeAt(0),r=s.cloneRange();return r.selectNodeContents(i),r.setEnd(s.endContainer,s.endOffset),r.toString().length}}function On(i){return i?i.contentWindow.document:document}function Xt(i){return i?i.contentWindow.getSelection():window.getSelection()}function Pi(i){let e="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),n=On(i?i.iframe:null),s=Xt(i?i.iframe:null),r=s.getRangeAt(0),o=n.createRange();o.setStart(s.anchorNode,r.startOffset),o.setEnd(s.anchorNode,r.startOffset),o.collapse(!1);let l=n.createElement("span");l.id=e,l.appendChild(n.createTextNode("\ufeff")),o.insertNode(l),s.removeAllRanges(),s.addRange(r);let c={left:0,top:l.offsetHeight};return function co(i,a,e){let n=a,s=i?i.iframe:null;for(;n&&(null==i.parent||i.parent!=n);)e.left+=n.offsetLeft+n.clientLeft,e.top+=n.offsetTop+n.clientTop,n=n.offsetParent,!n&&s&&(n=s,s=null);for(n=a,s=i?i.iframe:null;n!==On(null).body&&null!=n&&(null==i.parent||i.parent!=n);)n.scrollTop&&n.scrollTop>0&&(e.top-=n.scrollTop),n.scrollLeft&&n.scrollLeft>0&&(e.left-=n.scrollLeft),n=n.parentNode,!n&&s&&(n=s,s=null)}(i,l,c),l.parentNode.removeChild(l),c}var uo=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],Ni=typeof window<"u",ho=Ni&&null!=window.mozInnerScreenX;let go=(()=>{class i{constructor(e){this.element=e,this.labelKey="label",this.itemClick=new t.vpe,this.items=[],this.activeIndex=0,this.hidden=!1,this.dropUp=!1,this.styleOff=!1,this.coords={top:0,left:0},this.offset=0}ngAfterContentChecked(){this.itemTemplate||(this.itemTemplate=this.defaultItemTemplate)}position(e,n=null){if(Yt(e))this.coords=function po(i,a,e){if(!Ni)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var n=e&&e.debug||!1;if(n){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var r=document.createElement("div");r.id="input-textarea-caret-position-mirror-div",document.body.appendChild(r);var o=r.style,l=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,c="INPUT"===i.nodeName;o.whiteSpace="pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",n||(o.visibility="hidden"),uo.forEach(function(m){if(c&&"lineHeight"===m)if("border-box"===l.boxSizing){var f=parseInt(l.height),v=parseInt(l.paddingTop)+parseInt(l.paddingBottom)+parseInt(l.borderTopWidth)+parseInt(l.borderBottomWidth),y=v+parseInt(l.lineHeight);o.lineHeight=f>y?f-v+"px":f===y?l.lineHeight:"0"}else o.lineHeight=l.height;else o[m]=l[m]}),ho?i.scrollHeight>parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",r.textContent=i.value.substring(0,a),c&&(r.textContent=r.textContent.replace(/\s/g,"\xa0"));var u=document.createElement("span");u.textContent=i.value.substring(a)||".",r.appendChild(u);var h={top:u.offsetTop+parseInt(l.borderTopWidth),left:u.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return n?u.style.backgroundColor="#aaa":document.body.removeChild(r),h}(e,e.selectionStart,null),this.coords.top=e.offsetTop+this.coords.top-e.scrollTop,this.coords.left=e.offsetLeft+this.coords.left-e.scrollLeft,this.offset=this.getBlockCursorDimensions(e).height;else if(n)this.coords=Pi({iframe:n,parent:n.offsetParent});else{let s=document.documentElement,r=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),o=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),l=Pi({iframe:n}),c=e.getBoundingClientRect();this.coords.top=l.top-c.top+e.offsetTop-o,this.coords.left=l.left-c.left+e.offsetLeft-r}this.positionElement()}get activeItem(){return this.items[this.activeIndex]}activateNextItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.nextSibling;if(s&&"LI"==s.nodeName){let r=s.getBoundingClientRect();r.bottom>e.getBoundingClientRect().bottom&&(e.scrollTop=s.offsetTop+r.height-e.clientHeight)}}this.activeIndex=Math.max(Math.min(this.activeIndex+1,this.items.length-1),0)}activatePreviousItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.previousSibling;s&&"LI"==s.nodeName&&s.getBoundingClientRect().top<e.getBoundingClientRect().top&&(e.scrollTop=s.offsetTop)}this.activeIndex=Math.max(Math.min(this.activeIndex-1,this.items.length-1),0)}reset(){this.list.nativeElement.scrollTop=0,this.checkBounds()}checkBounds(){let e=this.coords.left,n=this.coords.top,s=this.dropUp;const r=this.list.nativeElement.getBoundingClientRect();r.left+r.width>window.innerWidth&&(e-=r.left+r.width-window.innerWidth+10),r.top<0&&(s=!1),this.positionElement(e,n,s)}positionElement(e=this.coords.left,n=this.coords.top,s=this.dropUp){const r=this.element.nativeElement;n+=s?0:this.offset,r.className=s?"dropup":null,r.style.position="absolute",r.style.left=e+"px",r.style.top=n+"px"}getBlockCursorDimensions(e){const n=window.getComputedStyle(e);return{height:parseFloat(n.lineHeight),width:parseFloat(n.fontSize)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mention-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(to,7),t.Gf(no,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.list=s.first),t.iGM(s=t.CRH())&&(n.defaultItemTemplate=s.first)}},inputs:{labelKey:"labelKey",itemTemplate:"itemTemplate"},outputs:{itemClick:"itemClick"},decls:5,vars:6,consts:[["defaultItemTemplate",""],[1,"dropdown-menu","scrollable-menu",3,"hidden"],["list",""],[3,"active","mention-active",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t.YNc(0,io,1,1,"ng-template",null,0,t.W1O),t.TgZ(2,"ul",1,2),t.YNc(4,ro,3,10,"li",3),t.qZA()),2&e&&(t.xp6(2),t.ekj("mention-menu",!n.styleOff)("mention-dropdown",!n.styleOff&&n.dropUp),t.Q6J("hidden",n.hidden),t.xp6(2),t.Q6J("ngForOf",n.items))},dependencies:[Z.sg,Z.tP],styles:[".mention-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:11em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25em}.mention-item[_ngcontent-%COMP%]{display:block;padding:.2em 1.5em;line-height:1.5em;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.scrollable-menu[_ngcontent-%COMP%]{display:block;height:auto;max-height:292px;overflow:auto}[hidden][_ngcontent-%COMP%]{display:none}.mention-dropdown[_ngcontent-%COMP%]{bottom:100%;top:auto;margin-bottom:2px}"]}),i})(),yo=(()=>{class i{constructor(e,n,s){this._element=e,this._componentResolver=n,this._viewContainerRef=s,this.mentionConfig={items:[]},this.DEFAULT_CONFIG={items:[],triggerChar:"@",labelKey:"label",maxItems:-1,allowSpace:!1,returnTrigger:!1,mentionSelect:(r,o)=>this.activeConfig.triggerChar+r[this.activeConfig.labelKey],mentionFilter:(r,o)=>{const l=r.toLowerCase();return o.filter(c=>c[this.activeConfig.labelKey].toLowerCase().startsWith(l))}},this.searchTerm=new t.vpe,this.itemSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.triggerChars={}}set mention(e){this.mentionItems=e}ngOnChanges(e){(e.mention||e.mentionConfig)&&this.updateConfig()}updateConfig(){let e=this.mentionConfig;this.triggerChars={},this.mentionItems&&(e.items=this.mentionItems),this.addConfig(e),e.mentions&&e.mentions.forEach(n=>this.addConfig(n))}addConfig(e){let n=Object.assign({},this.DEFAULT_CONFIG),s=(e=Object.assign(n,e)).items;s&&s.length>0&&("string"==typeof s[0]&&(s=s.map(r=>{let o={};return o[e.labelKey]=r,o})),e.labelKey&&(s=s.filter(r=>r[e.labelKey]),e.disableSort||s.sort((r,o)=>r[e.labelKey].localeCompare(o[e.labelKey])))),e.items=s,this.triggerChars[e.triggerChar]=e,this.activeConfig&&this.activeConfig.triggerChar==e.triggerChar&&(this.activeConfig=e,this.updateSearchList())}setIframe(e){this.iframe=e}stopEvent(e){e.wasClick||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}blurHandler(e){this.stopEvent(e),this.stopSearch()}inputHandler(e,n=this._element.nativeElement){if(229===this.lastKeyCode&&e.data){let s=e.data.charCodeAt(0);this.keyHandler({keyCode:s,inputEvent:!0},n)}}keyHandler(e,n=this._element.nativeElement){if(this.lastKeyCode=e.keyCode,e.isComposing||229===e.keyCode)return;let s=Ui(n),r=Bi(n,this.iframe),o=e.key;if(!o){let c=e.which||e.keyCode;o=String.fromCharCode(!e.shiftKey&&c>=65&&c<=90?c+32:e.which||e.keyCode)}13==e.keyCode&&e.wasClick&&r<this.startPos&&(r=this.startNode.length,Ri(this.startNode,r,this.iframe));let l=this.triggerChars[o];if(l)this.activeConfig=l,this.startPos=e.inputEvent?r-1:r,this.startNode=(this.iframe?this.iframe.contentWindow.getSelection():window.getSelection()).anchorNode,this.searching=!0,this.searchString=null,this.showSearchList(n),this.updateSearchList(),l.returnTrigger&&this.searchTerm.emit(l.triggerChar);else if(this.startPos>=0&&this.searching)if(r<=this.startPos)this.searchList.hidden=!0;else if(16!==e.keyCode&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&r>this.startPos){if(this.activeConfig.allowSpace||32!==e.keyCode){if(8===e.keyCode&&r>0)r--,r==this.startPos&&this.stopSearch();else if(this.searchList.hidden){if(9===e.keyCode||13===e.keyCode)return void this.stopSearch()}else if(!this.searchList.hidden){if(9===e.keyCode||13===e.keyCode){this.stopEvent(e),this.itemSelected.emit(this.searchList.activeItem);const c=this.activeConfig.mentionSelect(this.searchList.activeItem,this.activeConfig.triggerChar);if(En(n,this.startPos,r,c,this.iframe),"createEvent"in document){let u=document.createEvent("HTMLEvents");u.initEvent(this.iframe?"change":"input",!0,!1),this._element.nativeElement.dispatchEvent(u)}return this.startPos=-1,this.stopSearch(),!1}if(27===e.keyCode)return this.stopEvent(e),this.stopSearch(),!1;if(40===e.keyCode)return this.stopEvent(e),this.searchList.activateNextItem(),!1;if(38===e.keyCode)return this.stopEvent(e),this.searchList.activatePreviousItem(),!1}}else this.startPos=-1;if(1!=o.length&&8!=e.keyCode)return this.stopEvent(e),!1;if(this.searching){let c=s.substring(this.startPos+1,r);if(8!==e.keyCode&&!e.inputEvent&&(c+=o),this.searchString=c,this.activeConfig.returnTrigger){const u=this.searchString||8===e.keyCode?s.substring(this.startPos,this.startPos+1):"";this.searchTerm.emit(u+this.searchString)}else this.searchTerm.emit(this.searchString);this.updateSearchList()}}}startSearch(e,n=this._element.nativeElement){e=e||this.mentionConfig.triggerChar||this.DEFAULT_CONFIG.triggerChar;const s=Bi(n,this.iframe);En(n,s,s,e,this.iframe),this.keyHandler({key:e,inputEvent:!0},n)}stopSearch(){this.searchList&&!this.searchList.hidden&&(this.searchList.hidden=!0,this.closed.emit()),this.activeConfig=null,this.searching=!1}updateSearchList(){let e=[];if(this.activeConfig&&this.activeConfig.items){let n=this.activeConfig.items;!this.activeConfig.disableSearch&&this.searchString&&this.activeConfig.labelKey&&this.activeConfig.mentionFilter&&(n=this.activeConfig.mentionFilter(this.searchString,n)),e=n,this.activeConfig.maxItems>0&&(e=e.slice(0,this.activeConfig.maxItems))}this.searchList&&(this.searchList.items=e,this.searchList.hidden=0==e.length)}showSearchList(e){if(this.opened.emit(),null==this.searchList){let n=this._componentResolver.resolveComponentFactory(go),s=this._viewContainerRef.createComponent(n);this.searchList=s.instance,this.searchList.itemTemplate=this.mentionListTemplate,s.instance.itemClick.subscribe(()=>{e.focus(),this.keyHandler({key:"Enter",keyCode:13,wasClick:!0},e)})}this.searchList.labelKey=this.activeConfig.labelKey,this.searchList.dropUp=this.activeConfig.dropUp,this.searchList.styleOff=this.mentionConfig.disableStyle,this.searchList.activeIndex=0,this.searchList.position(e,this.iframe),window.requestAnimationFrame(()=>this.searchList.reset())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t._Vd),t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","mention",""],["","mentionConfig",""]],hostAttrs:["autocomplete","off"],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(r){return n.keyHandler(r)})("input",function(r){return n.inputHandler(r)})("blur",function(r){return n.blurHandler(r)})},inputs:{mention:"mention",mentionConfig:"mentionConfig",mentionListTemplate:"mentionListTemplate"},outputs:{searchTerm:"searchTerm",itemSelected:"itemSelected",opened:"opened",closed:"closed"},features:[t.TTD]}),i})(),bo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.ez]}),i})();const Do=function(i,a,e){return{flexBasis:i,height:a,objectFit:"cover",width:e}};function wo(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("load",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isLoaded=!0)})("error",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isError=!0)}),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.kEZ(7,Do,"calc(var(--str-chat__spacing-px, 1px) * "+e.size+")","calc(var(--str-chat__spacing-px, 1px) * "+e.size+")","calc(var(--str-chat__spacing-px, 1px) * "+e.size+")")),t.Gre("str-chat__avatar-image str-chat__avatar-image",e.isLoaded?" str-chat__avatar-image--loaded":"",""),t.s9C("src",e.imageUrl||e.fallbackChannelImage,t.LSH),t.s9C("alt",e.initials)}}function To(i,a){if(1&i&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.initials," ")}}function xo(i,a){1&i&&t._UZ(0,"div",6)}const Mo=function(i,a,e,n,s){return{flexBasis:i,fontSize:a,height:e,lineHeight:n,width:s}};function So(i,a){if(1&i&&t._UZ(0,"stream-avatar",2),2&i){const n=a.imageUrl,s=a.size,r=a.type,o=a.channel,l=a.user,c=a.location;t.Q6J("name",a.name)("imageUrl",n)("size",s)("type",r)("channel",o)("user",l)("location",c)}}function ko(i,a){1&i&&t.GkF(0)}function Ao(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",22),t._UZ(1,"path",23),t.qZA())}function Fo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",24),t._UZ(1,"path",25),t.qZA())}function Eo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",26)(1,"g",27),t._UZ(2,"path",28)(3,"path",29),t.qZA()())}function Oo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",30)(1,"title"),t._uU(2,"Combined Shape"),t.qZA(),t.TgZ(3,"desc"),t._uU(4,"Created with Sketch."),t.qZA(),t.TgZ(5,"g",31)(6,"g",32)(7,"g",33),t._UZ(8,"path",34),t.qZA()()()())}function Io(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",35)(1,"title",36),t._uU(2,"streamChat.Send"),t.qZA(),t._UZ(3,"path",37),t.qZA())}function Lo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",38)(1,"title",36),t._uU(2,"streamChat.Attach files"),t.qZA(),t._UZ(3,"path",39),t.qZA())}function Zo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",40),t._UZ(1,"path",41),t.qZA())}function Uo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",42),t._UZ(1,"rect",43)(2,"circle",44)(3,"path",45),t.qZA())}function Ro(i,a){if(1&i&&(t.O4$(),t.TgZ(0,"svg",46),t._UZ(1,"path",47),t.qZA()),2&i){const e=t.oxw();t.uIk("height",e.size||20)("width",e.size||20)}}function Bo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",48),t._UZ(1,"path",49)(2,"path",50)(3,"path",51)(4,"path",52)(5,"path",53),t.TgZ(6,"defs")(7,"linearGradient",54),t._UZ(8,"stop",55)(9,"stop",56),t.qZA()()())}function Po(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",57),t._UZ(1,"path",58),t.qZA())}function No(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",59),t._UZ(1,"path",60),t.qZA())}function jo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",61),t._UZ(1,"path",62),t.qZA())}function $o(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",63),t._UZ(1,"path",64),t.qZA())}function Ho(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",65),t._UZ(1,"path",66),t.qZA())}function qo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",67),t._UZ(1,"path",68),t.qZA())}function Yo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",69),t._UZ(1,"path",70),t.qZA())}function Jo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",71),t._UZ(1,"path",72),t.qZA())}function Qo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",73),t._UZ(1,"path",74),t.qZA())}function Vo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",75)(1,"g",76),t._UZ(2,"path",77),t.qZA(),t.TgZ(3,"defs")(4,"clipPath",78),t._UZ(5,"rect",79),t.qZA()()())}function Go(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",80),t._UZ(1,"path",81),t.qZA())}function zo(i,a){1&i&&(t.O4$(),t.TgZ(0,"svg",82),t._UZ(1,"path",83)(2,"path",84),t.qZA())}function Wo(i,a){if(1&i&&t._UZ(0,"stream-icon",2),2&i){const n=a.size;t.Q6J("icon",a.icon)("size",n)}}function Ko(i,a){1&i&&t.GkF(0)}const Xo=function(i){return{stopColor:i}};function el(i,a){if(1&i&&t._UZ(0,"stream-loading-indicator",2),2&i){const n=a.color;t.Q6J("size",a.size)("color",n)}}function tl(i,a){1&i&&t.GkF(0)}const nl=["modalInner"];function il(i,a){1&i&&t.GkF(0)}function sl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,il,1,0,"ng-container",7),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function al(i,a){1&i&&t.Hsn(0)}const In=["*"],Hi=["modalContent"],nn=function(i,a){return{height:i,width:a}};function rl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"img",13,14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openImageModal([s]))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openImageModal([s]))}),t.qZA()}if(2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(2);t.Udp("--original-height",s.getImageAttachmentConfiguration(n,"single",e).originalHeight)("--original-width",s.getImageAttachmentConfiguration(n,"single",e).originalWidth),t.Q6J("src",s.getImageAttachmentConfiguration(n,"single",e).url,t.LSH)("alt",null==n?null:n.fallback)("ngStyle",t.WLB(7,nn,s.getImageAttachmentConfiguration(n,"single",e).height,s.getImageAttachmentConfiguration(n,"single",e).width))}}function ol(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))}),t._UZ(1,"img",19,14),t.qZA()}if(2&i){const e=t.MAs(2),n=t.oxw().$implicit,s=t.oxw(4);t.ekj("str-chat__message-attachment--svg-image",s.isSvg(n)),t.xp6(1),t.Udp("--original-height",s.getImageAttachmentConfiguration(n,"gallery",e).originalHeight)("--original-width",s.getImageAttachmentConfiguration(n,"gallery",e).originalWidth),t.Q6J("src",s.getImageAttachmentConfiguration(n,"gallery",e).url,t.LSH)("alt",n.fallback)("ngStyle",t.WLB(9,nn,s.getImageAttachmentConfiguration(n,"gallery",e).height,s.getImageAttachmentConfiguration(n,"gallery",e).width))}}const ll=function(i,a,e){return{"background-image":i,height:a,width:e}},cl=function(i){return{imageCount:i}};function ul(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",20,21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().index,r=t.oxw(2).$implicit,o=t.oxw(2);return t.KtG(o.openImageModal(r.images,s))}),t._UZ(2,"p",22),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(2).$implicit,r=t.oxw(2);t.Udp("--original-height",r.getImageAttachmentConfiguration(n,"gallery",e).originalHeight)("--original-width",r.getImageAttachmentConfiguration(n,"gallery",e).originalWidth),t.ekj("str-chat__message-attachment--svg-image",r.isSvg(n)),t.Q6J("ngStyle",t.kEZ(11,ll,"url("+r.getImageAttachmentConfiguration(n,"gallery",e).url+")",r.getImageAttachmentConfiguration(n,"gallery",e).height,r.getImageAttachmentConfiguration(n,"gallery",e).width)),t.xp6(2),t.Q6J("innerHTML",t.xi3(3,8,"streamChat.{{ imageCount }} more",t.VKq(15,cl,s.images.length-4)),t.oJD)}}function dl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ol,3,12,"button",16),t.YNc(2,ul,4,17,"button",17),t.BQk()),2&i){const e=a.index,n=a.last;t.xp6(1),t.Q6J("ngIf",e<3||3===e&&n),t.xp6(1),t.Q6J("ngIf",3===e&&!n)}}function hl(i,a){if(1&i&&(t.TgZ(0,"div",15),t.YNc(1,dl,3,2,"ng-container",4),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.ekj("str-chat__gallery--square",(null==e?null:e.images.length)>3)("str-chat__gallery-two-rows",(null==e?null:e.images.length)>2),t.xp6(1),t.Q6J("ngForOf",e.images)("ngForTrackBy",n.trackByImageUrl)}}function pl(i,a){if(1&i&&(t.TgZ(0,"div",23),t._UZ(1,"video",24,25),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw().$implicit,s=t.oxw(2);t.Udp("--original-height",s.getVideoAttachmentConfiguration(n,e).originalHeight)("--original-width",s.getVideoAttachmentConfiguration(n,e).originalWidth),t.Q6J("ngStyle",t.WLB(7,nn,s.getVideoAttachmentConfiguration(n,e).height,s.getVideoAttachmentConfiguration(n,e).width)),t.xp6(1),t.Q6J("src",s.getVideoAttachmentConfiguration(n,e).url,t.LSH)("poster",s.getVideoAttachmentConfiguration(n,e).thumbUrl,t.LSH)}}function gl(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",33),2&i&&t.Q6J("size",30)}function ml(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",34),2&i&&t.Q6J("size",30)}function fl(i,a){if(1&i&&(t.TgZ(0,"span",35),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.getFileSize(e))}}function _l(i,a){if(1&i&&(t.TgZ(0,"a",26),t.YNc(1,gl,1,1,"stream-icon-placeholder",27),t.YNc(2,ml,1,1,"stream-icon-placeholder",28),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t._uU(6),t.qZA()(),t.YNc(7,fl,2,1,"span",32),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("href",e.asset_url,t.LSH),t.xp6(1),t.Q6J("ngIf","1"===n.themeVersion),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion),t.xp6(4),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",n.hasFileSize(e))}}function vl(i,a){if(1&i&&(t.TgZ(0,"div",42),t._UZ(1,"img",43),t.qZA()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.s9C("alt",e.url),t.s9C("src",e.url,t.LSH),t.Q6J("ngStyle",t.WLB(3,nn,e.height,e.width))}}function Cl(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function yl(i,a){if(1&i&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function bl(i,a){if(1&i&&(t.TgZ(0,"a",46),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.s9C("href",e.title_link||e.og_scrape_url,t.LSH),t.xp6(1),t.hij(" ",n.trimUrl(e.title_link||e.og_scrape_url)," ")}}function Dl(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,vl,2,6,"div",36),t.TgZ(2,"div",37)(3,"div",38),t.YNc(4,Cl,2,1,"div",39),t.YNc(5,yl,2,1,"div",40),t.YNc(6,bl,2,2,"a",41),t.qZA()()()),2&i){const e=a.ngIf,n=t.oxw().$implicit;t.Gre("str-chat__message-attachment-card str-chat__message-attachment-card--",n.type,""),t.xp6(1),t.Q6J("ngIf",e.url),t.xp6(3),t.Q6J("ngIf",n.title),t.xp6(1),t.Q6J("ngIf",n.text),t.xp6(1),t.Q6J("ngIf",n.title_link||n.og_scrape_url)}}function wl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(4);return t.KtG(o.sendAction(r))})("keyup.enter",function(){const r=t.CHM(e).$implicit,o=t.oxw(4);return t.KtG(o.sendAction(r))}),t._uU(1),t.qZA()}if(2&i){const e=a.$implicit;t.Gre("str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--",e.style,""),t.xp6(1),t.hij(" ",e.text," ")}}function Tl(i,a){if(1&i&&(t.TgZ(0,"div",47)(1,"div",48),t.YNc(2,wl,2,4,"button",49),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.actions)("ngForTrackBy",n.trackByActionValue)}}function xl(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6),t.YNc(2,rl,2,10,"img",7),t.YNc(3,hl,2,6,"div",8),t.YNc(4,pl,3,10,"div",9),t.YNc(5,_l,8,5,"a",10),t.YNc(6,Dl,7,7,"div",11),t.YNc(7,Tl,3,2,"div",12),t.qZA(),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.Gre("str-chat__message-attachment str-chat__message-attachment--",e.type," str-chat__message-attachment-dynamic-size"),t.ekj("str-chat__message-attachment--card",n.isCard(e))("str-chat-angular__message-attachment-file-single",n.isFile(e))("str-chat__message-attachment-with-actions",e.actions&&e.actions.length>0)("str-chat__message-attachment--svg-image",n.isSvg(e)),t.xp6(1),t.Q6J("ngIf",n.isImage(e)),t.xp6(1),t.Q6J("ngIf",n.isGallery(e)),t.xp6(1),t.Q6J("ngIf",n.isVideo(e)),t.xp6(1),t.Q6J("ngIf",n.isFile(e)),t.xp6(1),t.Q6J("ngIf",n.isCard(e)&&n.getCardAttachmentConfiguration(e)),t.xp6(1),t.Q6J("ngIf",e.actions&&e.actions.length>0)}}function Ml(i,a){1&i&&t.GkF(0)}function Sl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ml,1,0,"ng-container",51),t.ALo(2,"async"),t.BQk()),2&i){const e=t.oxw(2),n=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",t.lcZ(2,2,e.customTemplatesService.modalTemplate$)||n)("ngTemplateOutletContext",e.getModalContext())}}function kl(i,a){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,xl,8,17,"ng-container",4),t.YNc(2,Sl,3,4,"ng-container",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.orderedAttachments)("ngForTrackBy",e.trackByUrl),t.xp6(1),t.Q6J("ngIf",e.imagesToView&&e.imagesToView.length>0)}}function Al(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-modal",52),t.NdJ("isOpenChange",function(s){const o=t.CHM(e).isOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.content;t.Q6J("isOpen",a.isOpen)("content",n)}}const qi=function(i){return{visibility:i}},Fl=function(i,a){return{width:i,height:a}};function El(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",54),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(-1))})("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(-1))}),t._UZ(2,"stream-icon-placeholder",55),t.qZA(),t._UZ(3,"img",56,14),t.TgZ(5,"button",57),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(1))})("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.stepImages(1))}),t._UZ(6,"stream-icon-placeholder",58),t.qZA()()}if(2&i){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(9,qi,n.isImageModalPrevButtonVisible?"visible":"hidden")),t.xp6(2),t.Udp("--original-height",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).originalHeight)("--original-width",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).originalWidth),t.Q6J("src",n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).url,t.LSH)("alt",n.imagesToView[n.imagesToViewCurrentIndex].fallback)("ngStyle",t.WLB(11,Fl,n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).width,n.getCarouselImageAttachmentConfiguration(n.imagesToView[n.imagesToViewCurrentIndex],e).height)),t.xp6(2),t.Q6J("ngStyle",t.VKq(14,qi,n.isImageModalNextButtonVisible?"visible":"hidden"))}}function Ol(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._UZ(1,"stream-icon-placeholder",17),t.qZA()}}function Il(i,a){if(1&i&&t._UZ(0,"img",18),2&i){const e=t.oxw(2).$implicit;t.s9C("src",e.url?e.url:e.previewUri,t.LSH),t.s9C("alt",e.file.name)}}function Ll(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder",19)}function Zl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,Ol,2,0,"div",9),t.TgZ(2,"div",10)(3,"div",11)(4,"div",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))}),t._UZ(5,"stream-icon-placeholder",13),t.qZA()(),t.YNc(6,Il,1,2,"img",14),t.qZA(),t.YNc(7,Ll,1,0,"stream-loading-indicator-placeholder",15),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.ekj("rfu-image-previewer__image--loaded","success"===e.state),t.xp6(1),t.Q6J("ngIf","error"===e.state),t.xp6(5),t.Q6J("ngIf",e.url||e.previewUri),t.xp6(1),t.Q6J("ngIf","uploading"===e.state)}}function Ul(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._uU(2," streamChat.failed "),t.qZA(),t.TgZ(3,"div",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.attachmentUploadRetried(s.file))}),t._uU(4," streamChat.retry "),t.qZA(),t.BQk()}}function Rl(i,a){1&i&&(t.TgZ(0,"div",29),t._UZ(1,"stream-loading-indicator-placeholder"),t.qZA())}function Bl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",20)(1,"ol")(2,"li",21),t._UZ(3,"stream-icon-placeholder",22),t.TgZ(4,"a",23),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.url?null:s.preventDefault())})("keyup.enter",function(s){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.url?null:s.preventDefault())}),t._uU(5),t.YNc(6,Ul,5,0,"ng-container",24),t.qZA(),t.TgZ(7,"span",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.attachmentDeleted(s))}),t._UZ(8,"stream-icon-placeholder",13),t.qZA(),t.YNc(9,Rl,2,0,"div",26),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(2),t.ekj("rfu-file-previewer__file--uploading","uploading"===e.state)("rfu-file-previewer__file--failed","error"===e.state),t.xp6(2),t.s9C("href",e.url,t.LSH),t.xp6(1),t.hij(" ",e.file.name," "),t.xp6(1),t.Q6J("ngIf","error"===e.state),t.xp6(3),t.Q6J("ngIf","uploading"===e.state)}}function Pl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Zl,8,5,"div",6),t.YNc(2,Bl,10,8,"div",7),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","image"===e.type),t.xp6(1),t.Q6J("ngIf","file"===e.type||"video"===e.type)}}function Nl(i,a){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,Pl,3,2,"ng-container",5),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,e.attachmentUploads$))("ngForTrackBy",e.trackByFile)}}function jl(i,a){1&i&&t.GkF(0)}function $l(i,a){1&i&&(t.TgZ(0,"div",38),t._UZ(1,"stream-loading-indicator-placeholder",39),t.qZA()),2&i&&(t.xp6(1),t.Q6J("size",18))}function Hl(i,a){1&i&&t.GkF(0)}function ql(i,a){if(1&i&&t._UZ(0,"img",40),2&i){const e=t.oxw(2).$implicit;t.s9C("src",e.url?e.url:e.previewUri,t.LSH),t.s9C("alt",e.file.name)}}const sn=function(i){return{attachmentUpload:i}};function Yl(i,a){if(1&i&&(t.TgZ(0,"div",34),t.YNc(1,jl,1,0,"ng-container",35),t.YNc(2,$l,2,1,"div",36),t.YNc(3,Hl,1,0,"ng-container",35),t.YNc(4,ql,1,2,"img",37),t.qZA()),2&i){const e=t.oxw().$implicit;t.oxw(2);const n=t.MAs(5),s=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(6,sn,e)),t.xp6(1),t.Q6J("ngIf","uploading"===e.state),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(8,sn,e)),t.xp6(1),t.Q6J("ngIf",e.url||e.previewUri)}}function Jl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r.url?null:s.preventDefault())})("keyup.enter",function(s){t.CHM(e);const r=t.oxw(2).$implicit;return t.KtG(r.url?null:s.preventDefault())}),t._UZ(1,"stream-icon-placeholder",48),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.s9C("href",e.url,t.LSH)}}function Ql(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder",39),2&i&&t.Q6J("size",18)}function Vl(i,a){1&i&&t.GkF(0)}function Gl(i,a){1&i&&t.GkF(0)}function zl(i,a){if(1&i&&(t.TgZ(0,"div",41),t._UZ(1,"stream-icon-placeholder",42),t.TgZ(2,"div",43)(3,"div",44),t._uU(4),t.qZA(),t.YNc(5,Jl,2,1,"a",45),t.YNc(6,Ql,1,1,"stream-loading-indicator-placeholder",46),t.qZA(),t.YNc(7,Vl,1,0,"ng-container",35),t.YNc(8,Gl,1,0,"ng-container",35),t.qZA()),2&i){const e=t.oxw().$implicit;t.oxw(2);const n=t.MAs(5),s=t.MAs(7);t.xp6(4),t.hij(" ",e.file.name," "),t.xp6(1),t.Q6J("ngIf","success"===e.state),t.xp6(1),t.Q6J("ngIf","uploading"===e.state),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(7,sn,e)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(9,sn,e))}}function Wl(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Yl,5,10,"div",32),t.YNc(2,zl,9,11,"div",33),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","image"===e.type),t.xp6(1),t.Q6J("ngIf","file"===e.type||"video"===e.type)}}function Kl(i,a){if(1&i&&(t.TgZ(0,"div",30)(1,"div",31),t.YNc(2,Wl,3,2,"ng-container",5),t.ALo(3,"async"),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,e.attachmentUploads$))("ngForTrackBy",e.trackByFile)}}function Xl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",49),t.NdJ("click",function(){const r=t.CHM(e).attachmentUpload,o=t.oxw();return t.KtG(o.attachmentDeleted(r))})("keyup.enter",function(){const r=t.CHM(e).attachmentUpload,o=t.oxw();return t.KtG(o.attachmentDeleted(r))}),t._UZ(1,"stream-icon-placeholder",13),t.qZA()}}function ec(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().attachmentUpload,r=t.oxw();return t.KtG(r.attachmentUploadRetried(s.file))})("keyup.enter",function(){t.CHM(e);const s=t.oxw().attachmentUpload,r=t.oxw();return t.KtG(r.attachmentUploadRetried(s.file))}),t._UZ(1,"stream-icon-placeholder",17),t.qZA()}if(2&i){const e=t.oxw().attachmentUpload;t.Gre("str-chat__attachment-preview-error str-chat__attachment-preview-error-","image"===e.type?"image":"file","")}}function tc(i,a){1&i&&t.YNc(0,ec,2,3,"div",50),2&i&&t.Q6J("ngIf","error"===a.attachmentUpload.state)}const nc=["fileInput"];function ic(i,a){if(1&i&&t._UZ(0,"stream-attachment-list",22),2&i){const e=t.oxw(3);t.Q6J("attachments",e.quotedMessageAttachments)("messageId",null==e.quotedMessage?null:e.quotedMessage.id)}}function sc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())}),t._UZ(6,"stream-icon-placeholder",16),t.qZA()(),t.TgZ(7,"div",17),t._UZ(8,"stream-avatar-placeholder",18),t.TgZ(9,"div",19),t.YNc(10,ic,1,2,"stream-attachment-list",20),t._UZ(11,"div",21),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,7,"streamChat.Reply to Message")),t.xp6(5),t.Q6J("imageUrl",null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.image)("name",(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.name)||(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.id))("size",20)("user",(null==e.quotedMessage?null:e.quotedMessage.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.quotedMessage?null:e.quotedMessage.attachments)&&(null==e.quotedMessage||null==e.quotedMessage.attachments?null:e.quotedMessage.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.translation)||(null==e.quotedMessage?null:e.quotedMessage.html)||(null==e.quotedMessage?null:e.quotedMessage.text),t.oJD)}}function ac(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-preview-list",23),t.NdJ("retryAttachmentUpload",function(s){const o=t.CHM(e).retryUploadHandler;return t.KtG(o(s))})("deleteAttachment",function(s){const o=t.CHM(e).deleteUploadHandler;return t.KtG(o(s))}),t.qZA()}2&i&&t.Q6J("attachmentUploads$",a.attachmentUploads$)}function rc(i,a){1&i&&t.GkF(0)}function oc(i,a){1&i&&t.GkF(0)}function lc(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"div",25),t.YNc(2,oc,1,0,"ng-container",5),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngTemplateOutlet",e.emojiPickerTemplate)("ngTemplateOutletContext",e.getEmojiPickerContext())}}function cc(i,a){if(1&i){const e=t.EpF();t.ynx(0)(1,26),t.NdJ("valueChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.textareaValue=s)})("valueChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.typingStart$.next())})("send",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("userMentions",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.mentionedUsers=s)}),t.BQk()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("value",e.textareaValue)("componentRef",e.textareaRef)("areMentionsEnabled",e.areMentionsEnabled)("mentionScope",e.mentionScope)("placeholder",e.textareaPlaceholder)("inputMode",e.inputMode)}}function uc(i,a){if(1&i&&(t._UZ(0,"textarea",27),t.ALo(1,"translate")),2&i){const e=t.oxw(2);t.Q6J("value",t.lcZ(1,1,e.disabledTextareaText))}}function dc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",30)(5,"label")(6,"input",31,32),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(7),r=t.oxw(2);return t.KtG(r.filesSelected(s.files))}),t.qZA(),t.TgZ(8,"span",33),t._UZ(9,"stream-icon-placeholder",34),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"streamChat.Attach files")," "),t.xp6(4),t.Q6J("multiple",e.isMultipleFileUploadEnabled)}}function hc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())}),t._UZ(1,"stream-icon-placeholder",36),t.qZA()}}function pc(i,a){if(1&i&&(t.TgZ(0,"div",37)(1,"div",38),t._uU(2),t.ALo(3,"async"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,1,e.cooldown$)," ")}}function gc(i,a){if(1&i&&(t.TgZ(0,"div"),t.ALo(1,"async"),t.YNc(2,sc,12,9,"div",2),t.TgZ(3,"div",3)(4,"div"),t.YNc(5,ac,1,1,"ng-template",null,4,t.W1O),t.YNc(7,rc,1,0,"ng-container",5),t.TgZ(8,"div",6),t.YNc(9,lc,3,2,"ng-container",7),t.YNc(10,cc,2,6,"ng-container",8),t.YNc(11,uc,2,3,"ng-template",null,9,t.W1O),t.qZA(),t.YNc(13,dc,10,4,"div",10),t.qZA(),t.YNc(14,hc,2,0,"button",11),t.YNc(15,pc,4,3,"div",12),t.qZA()()),2&i){const e=t.MAs(6),n=t.MAs(12),s=t.oxw();t.Tol("main"===s.mode?"str-chat__input-flat":"str-chat__small-message-input"),t.ekj("str-chat__input-flat-has-attachments",t.lcZ(1,19,s.attachmentUploads$).length>0)("str-chat__input-flat-quoted",!!s.quotedMessage),t.xp6(2),t.Q6J("ngIf",s.quotedMessage),t.xp6(2),t.Tol("main"===s.mode?"str-chat__input-flat--textarea-wrapper":"str-chat__small-message-input--textarea-wrapper"),t.xp6(3),t.Q6J("ngTemplateOutlet",s.attachmentPreviewListTemplate||e)("ngTemplateOutletContext",s.getAttachmentPreviewListContext()),t.xp6(2),t.Q6J("ngIf",s.emojiPickerTemplate),t.xp6(1),t.Q6J("ngIf",s.canSendMessages)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",s.isFileUploadEnabled&&s.isFileUploadAuthorized&&s.canSendMessages),t.xp6(1),t.Q6J("ngIf",s.canSendMessages&&!s.isCooldownInProgress),t.xp6(1),t.Q6J("ngIf",s.isCooldownInProgress)}}function mc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deselectMessageToQuote())}),t._UZ(5,"stream-icon-placeholder",45),t.qZA()()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"streamChat.Reply to Message")," "))}function fc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",55)(1,"input",56,32),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(2),r=t.oxw(3);return t.KtG(r.filesSelected(s.files))}),t.qZA(),t.TgZ(3,"label",57),t._UZ(4,"stream-icon-placeholder",58),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.s9C("id",e.fileInputId),t.Q6J("multiple",e.isMultipleFileUploadEnabled),t.xp6(2),t.s9C("for",e.fileInputId)}}function _c(i,a){if(1&i&&t._UZ(0,"stream-attachment-list",22),2&i){const e=t.oxw(4);t.Q6J("attachments",e.quotedMessageAttachments)("messageId",null==e.quotedMessage?null:e.quotedMessage.id)}}function vc(i,a){if(1&i&&(t.TgZ(0,"div",59),t._UZ(1,"stream-avatar-placeholder",60),t.TgZ(2,"div",61),t.YNc(3,_c,1,2,"stream-attachment-list",20),t._UZ(4,"div",62),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("imageUrl",null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.image)("name",(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.name)||(null==e.quotedMessage||null==e.quotedMessage.user?null:e.quotedMessage.user.id))("size",20)("user",(null==e.quotedMessage?null:e.quotedMessage.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.quotedMessage?null:e.quotedMessage.attachments)&&(null==e.quotedMessage||null==e.quotedMessage.attachments?null:e.quotedMessage.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.quotedMessage?null:e.quotedMessage.translation)||(null==e.quotedMessage?null:e.quotedMessage.html)||(null==e.quotedMessage?null:e.quotedMessage.text),t.oJD)}}function Cc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-preview-list",63),t.NdJ("retryAttachmentUpload",function(s){const o=t.CHM(e).retryUploadHandler;return t.KtG(o(s))})("deleteAttachment",function(s){const o=t.CHM(e).deleteUploadHandler;return t.KtG(o(s))}),t.qZA()}2&i&&t.Q6J("attachmentUploads$",a.attachmentUploads$)}function yc(i,a){1&i&&t.GkF(0)}function bc(i,a){1&i&&t.GkF(0)}function Dc(i,a){if(1&i&&(t.ynx(0,24),t.YNc(1,bc,1,0,"ng-container",5),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngTemplateOutlet",e.emojiPickerTemplate)("ngTemplateOutletContext",e.getEmojiPickerContext())}}function wc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.messageSent())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.messageSent())}),t.ALo(1,"async"),t.ALo(2,"async"),t._UZ(3,"stream-icon-placeholder",65),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",t.lcZ(1,1,e.attachmentUploadInProgressCounter$)>0||!e.textareaValue&&0===t.lcZ(2,3,e.attachmentUploads$).length)}}function Tc(i,a){if(1&i&&(t.TgZ(0,"div",66),t._uU(1),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.cooldown$)," ")}}function xc(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",46),t.YNc(2,fc,5,3,"div",47),t.TgZ(3,"div",48),t.YNc(4,vc,5,6,"div",49),t.YNc(5,Cc,1,1,"ng-template",null,4,t.W1O),t.YNc(7,yc,1,0,"ng-container",5),t.TgZ(8,"div",50),t.ynx(9,51),t.NdJ("valueChange",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.textareaValue=s)})("valueChange",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.typingStart$.next())})("send",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.messageSent())})("userMentions",function(s){t.CHM(e);const r=t.oxw(2);return t.KtG(r.mentionedUsers=s)}),t.BQk(),t.TgZ(10,"div",52),t.YNc(11,Dc,2,2,"ng-container",7),t.qZA()()(),t.YNc(12,wc,4,5,"button",53),t.YNc(13,Tc,3,3,"div",54),t.qZA(),t.BQk()}if(2&i){const e=t.MAs(6),n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.isFileUploadEnabled&&n.isFileUploadAuthorized&&n.canSendMessages),t.xp6(2),t.Q6J("ngIf",n.quotedMessage),t.xp6(3),t.Q6J("ngTemplateOutlet",n.attachmentPreviewListTemplate||e)("ngTemplateOutletContext",n.getAttachmentPreviewListContext()),t.xp6(2),t.Q6J("value",n.textareaValue)("componentRef",n.textareaRef)("areMentionsEnabled",n.areMentionsEnabled)("mentionScope",n.mentionScope)("inputMode",n.inputMode)("placeholder",n.textareaPlaceholder),t.xp6(2),t.Q6J("ngIf",n.emojiPickerTemplate),t.xp6(1),t.Q6J("ngIf",n.canSendMessages&&!n.isCooldownInProgress&&!n.message),t.xp6(1),t.Q6J("ngIf",n.isCooldownInProgress)}}function Mc(i,a){if(1&i&&(t.TgZ(0,"div",67),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.disabledTextareaText)," ")}}function Sc(i,a){if(1&i&&(t.TgZ(0,"div",39),t.YNc(1,mc,6,3,"div",40),t.YNc(2,xc,14,13,"ng-container",8),t.YNc(3,Mc,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.quotedMessage),t.xp6(1),t.Q6J("ngIf",n.canSendMessages)("ngIfElse",e)}}function kc(i,a){1&i&&t.GkF(0)}function Ac(i,a){if(1&i&&(t.ynx(0),t.YNc(1,kc,1,0,"ng-container",3),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function Fc(i,a){1&i&&t.Hsn(0)}function Ec(i,a){if(1&i&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.text,e.translateParams)," ")}}function Oc(i,a){1&i&&t.GkF(0)}function Ic(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Oc,1,0,"ng-container",4),t.BQk()),2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.getNotificationContentContext(e))}}function Lc(i,a){if(1&i&&(t.YNc(0,Ec,3,4,"div",5),t.YNc(1,Ic,2,2,"ng-container",6)),2&i){const e=t.oxw().$implicit;t.Q6J("ngIf",void 0!==e.text),t.xp6(1),t.Q6J("ngIf",void 0!==e.template)}}function Zc(i,a){1&i&&t.GkF(0)}const Uc=function(i,a){return{type:i,content:a}};function Rc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Lc,2,2,"ng-template",null,3,t.W1O),t.YNc(3,Zc,1,0,"ng-container",4),t.ALo(4,"async"),t.BQk()),2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(),r=t.MAs(5);t.xp6(3),t.Q6J("ngTemplateOutlet",t.lcZ(4,2,s.customTemplatesService.notificationTemplate$)||r)("ngTemplateOutletContext",t.WLB(4,Uc,e.type,n))}}function Bc(i,a){if(1&i&&t._UZ(0,"stream-notification",8),2&i){const n=a.content;t.Q6J("type",a.type)("content",n)}}function Pc(i,a){1&i&&t.GkF(0)}function Nc(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Pc,1,0,"ng-container",5),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(),s=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n.messageActionItemTemplate||s)("ngTemplateOutletContext",e)}}function jc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){const r=t.CHM(e).actionHandler,o=t.oxw();return t.KtG(r(o.message,o.isMine))}),t.TgZ(1,"li",9),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=a.actionName,n=a.actionLabelOrTranslationKey,s=t.oxw();t.uIk("data-testid",e+"-action"),t.xp6(2),t.hij(" ",t.lcZ(3,2,s.getActionLabel(n))," ")}}function $c(i,a){1&i&&t.GkF(0)}function Hc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-modal",10),t.NdJ("isOpenChange",function(s){const o=t.CHM(e).isOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.content;t.Q6J("isOpen",a.isOpen)("content",n)}}function qc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-input",18),t.NdJ("messageUpdate",function(){const r=t.CHM(e).messageUpdateHandler;return t.KtG(r())}),t.qZA()}if(2&i){const n=a.sendMessage$;t.Q6J("message",a.message)("sendMessage$",n)}}function Yc(i,a){1&i&&t.GkF(0)}function Jc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",12),t.YNc(1,qc,1,2,"ng-template",null,13,t.W1O),t.YNc(3,Yc,1,0,"ng-container",5),t._UZ(4,"stream-notification-list"),t.TgZ(5,"div",14)(6,"div",15)(7,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.modalClosed())}),t._uU(8," streamChat.Cancel "),t.qZA(),t.TgZ(9,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendClicked())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.sendClicked())}),t._uU(10," streamChat.Send "),t.qZA()()()()}if(2&i){const e=t.MAs(2),n=t.oxw(2);t.xp6(3),t.Q6J("ngTemplateOutlet",n.messageInputTemplate||e)("ngTemplateOutletContext",n.getMessageInputContext())}}function Qc(i,a){if(1&i&&t.YNc(0,Jc,11,2,"div",11),2&i){const e=t.oxw();t.Q6J("ngIf",e.isEditModalOpen)}}function Vc(i,a){1&i&&t.Hsn(0,1,["*ngIf","isActiveThread$ | async"])}function Gc(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3),t.Hsn(2),t.qZA(),t.YNc(3,Vc,1,0,"ng-content",4),t.ALo(4,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,e.isActiveThread$))}}function zc(i,a){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"stream-icon",8),t.TgZ(2,"p",9),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",10),t._UZ(6,"stream-notification-list"),t.qZA()()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"streamChat.No chats here yet\u2026")," "))}function Wc(i,a){1&i&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"div",13),t.TgZ(3,"div",14),t._UZ(4,"div",15)(5,"div",16),t.qZA()(),t.TgZ(6,"div",17)(7,"div",18),t._UZ(8,"div",19),t.TgZ(9,"div",20),t._UZ(10,"div",21),t.TgZ(11,"div",22),t._UZ(12,"div",23)(13,"div",24),t.qZA()()(),t.TgZ(14,"div",18),t._UZ(15,"div",19),t.TgZ(16,"div",20),t._UZ(17,"div",21),t.TgZ(18,"div",22),t._UZ(19,"div",23)(20,"div",24),t.qZA()()(),t.TgZ(21,"div",18),t._UZ(22,"div",19),t.TgZ(23,"div",20),t._UZ(24,"div",21),t.TgZ(25,"div",22),t._UZ(26,"div",23)(27,"div",24),t.qZA()()()(),t.TgZ(28,"div",25),t._UZ(29,"div",26)(30,"div",27),t.qZA()())}function Kc(i,a){if(1&i&&(t.YNc(0,zc,7,3,"div",5),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,Wc,31,0,"div",6),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",!1===t.lcZ(1,2,e.isInitializing$)&&(!0===t.lcZ(2,4,e.isError$)||!1===t.lcZ(3,6,e.isActiveChannel$))),t.xp6(4),t.Q6J("ngIf",!0===t.lcZ(5,8,e.isInitializing$)&&!1===t.lcZ(6,10,e.isError$)&&!1===t.lcZ(7,12,e.isActiveChannel$))}}const Xc=["*",[["","name","thread"]]],eu=["*",'[name="thread"]'];function tu(i,a){1&i&&t.GkF(0)}function nu(i,a){if(1&i&&(t.TgZ(0,"p",9),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.xi3(2,2,"streamChat.{{ memberCount }} members",e.memberCountParam)," ",e.canReceiveConnectEvents?t.xi3(3,5,"streamChat.{{ watcherCount }} online",e.watcherCountParam):""," ")}}function iu(i,a){1&i&&t.GkF(0)}function su(i,a){if(1&i&&(t.ynx(0),t.YNc(1,iu,1,0,"ng-container",6),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.channelActionsTemplate)("ngTemplateOutletContext",e.getChannelActionsContext())}}function au(i,a){if(1&i&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.unreadCount," ")}}const Yi=["container"];function ru(i,a){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"stream-icon",14),t.TgZ(2,"p",15),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"streamChat.You have no channels currently")," "))}function ou(i,a){1&i&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"streamChat.You have no channels currently")," "))}function lu(i,a){1&i&&t._UZ(0,"stream-channel-preview",20),2&i&&t.Q6J("channel",a.channel)}function cu(i,a){1&i&&t.GkF(0)}function uu(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.YNc(1,lu,1,1,"ng-template",null,17,t.W1O),t.TgZ(3,"div",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.channelSelected())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.channelSelected())}),t.YNc(4,cu,1,0,"ng-container",19),t.qZA(),t.BQk()}if(2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(2);t.xp6(4),t.Q6J("ngTemplateOutlet",s.customChannelPreviewTemplate||n)("ngTemplateOutletContext",s.getChannelPreviewContext(e))}}function du(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Load more")))}function hu(i,a){1&i&&t._UZ(0,"stream-loading-indicator-placeholder")}function pu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreChannels())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreChannels())}),t.TgZ(1,"button",22),t.YNc(2,du,3,3,"span",23),t.YNc(3,hu,1,0,"ng-template",null,24,t.W1O),t.qZA()()}if(2&i){const e=t.MAs(4),n=t.oxw(2);t.xp6(1),t.Q6J("disabled",n.isLoadingMoreChannels),t.xp6(1),t.Q6J("ngIf",!n.isLoadingMoreChannels)("ngIfElse",e)}}function gu(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,ru,5,3,"div",9),t.ALo(3,"async"),t.YNc(4,ou,3,3,"p",10),t.ALo(5,"async"),t.Hsn(6),t.YNc(7,uu,5,2,"ng-container",11),t.ALo(8,"async"),t.YNc(9,pu,5,3,"div",12),t.ALo(10,"async"),t.Hsn(11,1),t.qZA()()),2&i){const e=t.oxw();let n,s;t.xp6(2),t.Q6J("ngIf",!(null!=(n=t.lcZ(3,5,e.channels$))&&n.length)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=t.lcZ(5,7,e.channels$))&&s.length)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(8,9,e.channels$))("ngForTrackBy",e.trackByChannelId),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,11,e.hasMoreChannels$))}}function mu(i,a){1&i&&t.GkF(0)}function fu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,mu,1,0,"ng-container",26),t.BQk()),2&i){t.oxw(2);const e=t.MAs(10);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function _u(i,a){1&i&&t.GkF(0)}function vu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,_u,1,0,"ng-container",26),t.BQk()),2&i){t.oxw(2);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Cu(i,a){if(1&i&&(t.YNc(0,fu,2,1,"ng-container",25),t.ALo(1,"async"),t.YNc(2,vu,2,1,"ng-container",25),t.ALo(3,"async")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,e.isError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,e.isInitializing$))}}function yu(i,a){1&i&&t.GkF(0)}function bu(i,a){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,yu,1,0,"ng-container",26),t.TgZ(2,"div",28),t._UZ(3,"stream-icon-placeholder",29),t.TgZ(4,"h1"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()),2&i){t.oxw();const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(4),t.Oqu(t.lcZ(6,3,"streamChat.Connection error")),t.xp6(3),t.hij(" ",t.lcZ(9,5,"streamChat.Error connecting to chat, refresh the page to try again.")," ")}}function Du(i,a){1&i&&t.GkF(0)}function wu(i,a){1&i&&t.GkF(0)}function Tu(i,a){1&i&&t.GkF(0)}function xu(i,a){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,Du,1,0,"ng-container",26),t.YNc(2,wu,1,0,"ng-container",26),t.YNc(3,Tu,1,0,"ng-container",26),t.qZA()),2&i){t.oxw();const e=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Mu(i,a){1&i&&(t.TgZ(0,"div",31),t._UZ(1,"div",32),t.TgZ(2,"div",33),t._UZ(3,"div",34)(4,"div",35),t.qZA()())}const Su=[[["","channel-list-top",""]],[["","channel-list-bottom",""]]],ku=["[channel-list-top]","[channel-list-bottom]"],Au=["selectorContainer"],Fu=["selectorTooltip"];function Eu(i,a){if(1&i&&(t.TgZ(0,"li",6),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,7)(3,"div",8)(4,"span"),t._uU(5),t.qZA()()(),t.TgZ(6,"span",9),t._uU(7),t.qZA(),t.TgZ(8,"span",10),t._uU(9),t.qZA()()),2&i){const e=a.$implicit,n=t.MAs(2),s=t.oxw(2);t.ekj("str-chat__message-reaction-own",s.isOwnReaction(e)),t.Q6J("popper",n)("popperTrigger",s.popperTriggerHover)("popperPlacement",s.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(5),t.hij(" ",s.getUsersByReaction(e)," "),t.xp6(2),t.hij(" ",s.getEmojiByReaction(e),"\xa0 "),t.xp6(2),t.hij(" ",s.messageReactionCounts[e]," ")}}function Ou(i,a){if(1&i&&(t.TgZ(0,"div",2)(1,"ul",3),t.YNc(2,Eu,10,10,"li",4),t.TgZ(3,"li")(4,"span",5),t._uU(5),t.qZA()()()()),2&i){const e=t.oxw();t.ekj("str-chat__reaction-list--reverse",!0)("str-chat__reaction-list-hidden",e.isSelectorOpen),t.xp6(2),t.Q6J("ngForOf",e.existingReactions)("ngForTrackBy",e.trackByMessageReaction),t.xp6(3),t.Oqu(e.reactionsCount)}}const Iu=function(i,a){return{left:i,visibility:a}},Lu=function(i){return{left:i}};function Zu(i,a){if(1&i&&(t.TgZ(0,"div",16,17),t._UZ(2,"div",18),t.TgZ(3,"span",19),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.Q6J("ngStyle",t.WLB(3,Iu,(null==e.tooltipPositions?null:e.tooltipPositions.tooltip)+"px",e.tooltipPositions?"visible":"hidden")),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,Lu,(null==e.tooltipPositions?null:e.tooltipPositions.arrow)+"px")),t.xp6(2),t.hij(" ",e.tooltipText," ")}}function Uu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())})("mouseenter",function(s){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.showTooltip(s,r))})("mouseleave",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.hideTooltip())}),t._UZ(1,"stream-avatar-placeholder",25),t.qZA()}if(2&i){const e=a.ngIf,n=t.oxw().$implicit;t.Q2q("data-testid","",n,"-last-user"),t.xp6(1),t.Q2q("data-testid","",n,"-avatar"),t.Q6J("imageUrl",e.image)("name",e.name||e.id)("size",20)}}function Ru(i,a){if(1&i&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q2q("data-testid","",e,"-reaction-count"),t.xp6(1),t.hij(" ",n.messageReactionCounts[e]," ")}}function Bu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"li",20),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.react(r))})("keyup.enter",function(){const r=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.react(r))}),t.YNc(1,Uu,2,5,"div",21),t.TgZ(2,"span",22),t._uU(3),t.qZA(),t.YNc(4,Ru,2,2,"span",23),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.ekj("str-chat__message-reactions-option-selected",n.isOwnReaction(e)),t.xp6(1),t.Q6J("ngIf",n.getLatestUserByReaction(e)),t.xp6(2),t.hij(" ",n.getEmojiByReaction(e)," "),t.xp6(1),t.Q6J("ngIf",n.messageReactionCounts[e]&&n.messageReactionCounts[e]>0)}}function Pu(i,a){if(1&i&&(t.TgZ(0,"div",11,12),t.YNc(2,Zu,5,8,"div",13),t.TgZ(3,"ul",14),t.YNc(4,Bu,5,5,"li",15),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.tooltipText),t.xp6(2),t.Q6J("ngForOf",e.reactionOptions)("ngForTrackBy",e.trackByMessageReaction)}}function Nu(i,a){1&i&&t.GkF(0)}function ju(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Nu,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function $u(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-actions-box",29),t.NdJ("displayedActionsCount",function(s){const o=t.CHM(e).displayedActionsCountChaneHanler;return t.KtG(o(s))})("isEditing",function(s){const o=t.CHM(e).isEditingChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.isMine,s=a.enabledActions,r=a.message;t.Q6J("isOpen",a.isOpen)("isMine",n)("enabledActions",s)("message",r)}}function Hu(i,a){1&i&&t.GkF(0)}function qu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isActionBoxOpen=!s.isActionBoxOpen)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isActionBoxOpen=!s.isActionBoxOpen)}),t._UZ(1,"stream-icon-placeholder",31),t.qZA()}}function Yu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setAsActiveParentMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setAsActiveParentMessage())}),t._UZ(1,"stream-icon-placeholder",33),t.qZA()}}function Ju(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isReactionSelectorOpen=!s.isReactionSelectorOpen)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isReactionSelectorOpen=!s.isReactionSelectorOpen)}),t._UZ(1,"stream-icon-placeholder",35),t.qZA()}}function Qu(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22,23)(3,"popper-content",null,24),t.YNc(5,$u,1,4,"ng-template",null,25,t.W1O),t.YNc(7,Hu,1,0,"ng-container",16),t.qZA(),t.YNc(8,qu,2,0,"div",26),t.qZA(),t.YNc(9,Yu,2,0,"div",27),t.YNc(10,Ju,2,0,"div",28),t.qZA()),2&i){const e=t.MAs(4),n=t.MAs(6),s=t.oxw(3);t.ekj("str-chat__message-edit-in-progress",s.isEditing),t.xp6(1),t.ekj("str-chat-angular__message-simple__actions__action--options--editing",s.isEditing),t.Q6J("popper",e)("popperTrigger",s.popperTriggerClick)("popperPlacement",s.popperPlacementAuto)("popperHideOnScroll",!0)("popperHideOnClickOutside",!0)("popperHideOnMouseLeave",!1),t.xp6(6),t.Q6J("ngTemplateOutlet",s.messageActionsBoxTemplate||n)("ngTemplateOutletContext",s.getMessageActionsBoxContext()),t.xp6(1),t.Q6J("ngIf",s.visibleMessageActionsCount>0),t.xp6(1),t.Q6J("ngIf",-1!==s.enabledMessageActions.indexOf("send-reply")&&"main"===s.mode),t.xp6(1),t.Q6J("ngIf",s.canReactToMessage)}}function Vu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-message-reactions",36),t.NdJ("isSelectorOpenChange",function(s){const o=t.CHM(e).isSelectorOpenChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.latestReactions,s=a.isSelectorOpen,r=a.messageId,o=a.ownReactions;t.Q6J("messageReactionCounts",a.messageReactionCounts)("latestReactions",n)("isSelectorOpen",s)("messageId",r)("ownReactions",o)}}function Gu(i,a){1&i&&t.GkF(0)}function zu(i,a){1&i&&t.GkF(0)}function Wu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,zu,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Ku(i,a){1&i&&t.GkF(0)}function Xu(i,a){1&i&&t.GkF(0)}function ed(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Xu,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(4);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function td(i,a){1&i&&(t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"streamChat.Error \xb7 Unsent")," "))}function nd(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,1,403===(null==e.message?null:e.message.errorStatusCode)?"streamChat.Message Failed \xb7 Unauthorized":"streamChat.Message Failed \xb7 Click to try again")," ")}}function id(i,a){if(1&i&&t._UZ(0,"span",47),2&i){const e=t.oxw().$implicit;t.Q6J("innerHTML",e.content,t.oJD)}}function sd(i,a){if(1&i&&(t.TgZ(0,"span",49),t._uU(1),t.qZA()),2&i){const e=a.content;t.xp6(1),t.Oqu(e)}}function ad(i,a){1&i&&t.GkF(0)}function rd(i,a){if(1&i&&(t.YNc(0,sd,2,1,"ng-template",null,48,t.W1O),t.YNc(2,ad,1,0,"ng-container",16)),2&i){const e=t.MAs(1),n=t.oxw().$implicit,s=t.oxw(4);t.xp6(2),t.Q6J("ngTemplateOutlet",s.mentionTemplate||e)("ngTemplateOutletContext",s.getMentionContext(n))}}function od(i,a){if(1&i&&(t.ynx(0),t.YNc(1,id,1,1,"span",45),t.YNc(2,rd,3,2,"ng-template",null,46,t.W1O),t.BQk()),2&i){const e=a.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf","text"===e.type)("ngIfElse",n)}}function ld(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",37)(1,"div",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG("failed"===(null==s.message?null:s.message.status)&&403!==(null==s.message?null:s.message.errorStatusCode)?s.resendMessage():void 0)})("keyup.enter",function(){t.CHM(e);const s=t.oxw(3);return t.KtG("failed"===(null==s.message?null:s.message.status)&&403!==(null==s.message?null:s.message.errorStatusCode)?s.resendMessage():void 0)}),t.YNc(2,Ku,1,0,"ng-container",20),t.YNc(3,ed,2,1,"ng-container",10),t.YNc(4,td,3,3,"div",39),t.YNc(5,nd,3,3,"div",40),t.TgZ(6,"div",41)(7,"p"),t.YNc(8,od,4,2,"ng-container",42),t.qZA()()()()}if(2&i){const e=t.oxw(3),n=t.MAs(8);t.xp6(1),t.ekj("str-chat__message-light-text-inner--has-attachment",e.hasAttachment),t.xp6(1),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("ngIf",e.hasAttachment&&(null==e.message?null:e.message.quoted_message)),t.xp6(1),t.Q6J("ngIf","error"===(null==e.message?null:e.message.type)),t.xp6(1),t.Q6J("ngIf","failed"===(null==e.message?null:e.message.status)),t.xp6(3),t.Q6J("ngForOf",e.messageTextParts)}}function cd(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",50)}function ud(i,a){1&i&&t.GkF(0)}function dd(i,a){1&i&&t.GkF(0)}function hd(i,a){1&i&&t.GkF(0)}function pd(i,a){1&i&&t.GkF(0)}const Ji=function(){return{position:"inside-message-bubble"}},gd=function(i){return{position:"outside-message-bubble",message:i}},md=function(){return{position:"outside-message-bubble"}};function fd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,ju,2,1,"ng-container",10),t._UZ(2,"stream-avatar-placeholder",11),t.TgZ(3,"div",12),t.YNc(4,Qu,11,15,"div",13),t.TgZ(5,"div",14),t.YNc(6,Vu,1,5,"ng-template",null,15,t.W1O),t.YNc(8,Gu,1,0,"ng-container",16),t.qZA(),t.TgZ(9,"div",17),t.YNc(10,Wu,2,1,"ng-container",10),t.YNc(11,ld,9,7,"div",18),t.YNc(12,cd,1,0,"stream-icon-placeholder",19),t.qZA(),t.YNc(13,ud,1,0,"ng-container",16),t.YNc(14,dd,1,0,"ng-container",16),t.qZA(),t.YNc(15,hd,1,0,"ng-container",16),t.YNc(16,pd,1,0,"ng-container",16),t.BQk()),2&i){const e=t.MAs(7),n=t.oxw(2),s=t.MAs(14),r=t.MAs(10);t.xp6(1),t.Q6J("ngIf","1"===n.themeVersion),t.xp6(1),t.Q6J("imageUrl",null==n.message||null==n.message.user?null:n.message.user.image)("name",(null==n.message||null==n.message.user?null:n.message.user.name)||(null==n.message||null==n.message.user?null:n.message.user.id))("user",(null==n.message?null:n.message.user)||void 0),t.xp6(2),t.Q6J("ngIf",n.areOptionsVisible),t.xp6(4),t.Q6J("ngTemplateOutlet",n.messageReactionsTemplate||e)("ngTemplateOutletContext",n.getMessageReactionsContext()),t.xp6(1),t.Jzz("transform: ","opened"===n.imageAttachmentModalState?"none":"translate3d(0, 0, 0)",""),t.xp6(1),t.Q6J("ngIf",n.hasAttachment&&!(null!=n.message&&n.message.quoted_message)),t.xp6(1),t.Q6J("ngIf",(null==n.message?null:n.message.text)||(null==n.message?null:n.message.quoted_message)&&n.hasAttachment),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.DdM(21,Ji)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(22,Ji)),t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(23,gd,n.message)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(25,md))}}function _d(i,a){if(1&i&&(t.ynx(0),t.YNc(1,fd,17,26,"ng-container",2),t.BQk()),2&i){const e=t.oxw(),n=t.MAs(6);t.xp6(1),t.Q6J("ngIf","system"!==(null==e.message?null:e.message.type))("ngIfElse",n)}}function vd(i,a){1&i&&(t.TgZ(0,"div",51)(1,"div",52),t._uU(2," streamChat.This message was deleted... "),t.qZA()())}function Cd(i,a){if(1&i&&(t.TgZ(0,"div",53)(1,"div",54),t._UZ(2,"div",55),t.TgZ(3,"p"),t._uU(4),t.qZA(),t._UZ(5,"div",55),t.qZA(),t.TgZ(6,"div",56),t._uU(7),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(null==e.message?null:e.message.text),t.xp6(3),t.hij(" ",e.parsedDate," ")}}function yd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-list",63),t.NdJ("imageModalStateChange",function(s){const o=t.CHM(e).imageModalStateChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.attachments,s=a.parentMessageId;t.Q6J("messageId",a.messageId)("attachments",n)("parentMessageId",s)}}function bd(i,a){1&i&&t.GkF(0)}function Dd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,yd,1,3,"ng-template",null,62,t.W1O),t.YNc(3,bd,1,0,"ng-container",16),t.BQk()),2&i){const e=t.MAs(2),n=t.oxw(3);t.xp6(3),t.Q6J("ngTemplateOutlet",n.attachmentListTemplate||e)("ngTemplateOutletContext",n.getQuotedMessageAttachmentListContext())}}function wd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",58),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.jumpToMessage(null==s.message?null:s.message.quoted_message.id,null==s.message||null==s.message.quoted_message?null:s.message.quoted_message.parent_id))})("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.jumpToMessage(null==s.message?null:s.message.quoted_message.id,null==s.message||null==s.message.quoted_message?null:s.message.quoted_message.parent_id))}),t._UZ(1,"stream-avatar-placeholder",59),t.TgZ(2,"div",60),t.YNc(3,Dd,4,2,"ng-container",10),t._UZ(4,"div",61),t.qZA()()}if(2&i){const e=t.oxw(2);t.ekj("mine",e.isSentByCurrentUser),t.xp6(1),t.Q6J("imageUrl",null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.image)("name",(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.name)||(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.user?null:e.message.quoted_message.user.id))("size",20)("user",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.user)||void 0),t.xp6(2),t.Q6J("ngIf",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.attachments)&&(null==e.message||null==e.message.quoted_message||null==e.message.quoted_message.attachments?null:e.message.quoted_message.attachments.length)),t.xp6(1),t.Q6J("innerHTML",(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.translation)||(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.html)||(null==e.message||null==e.message.quoted_message?null:e.message.quoted_message.text),t.oJD)}}function Td(i,a){if(1&i&&t.YNc(0,wd,5,8,"div",57),2&i){const e=t.oxw();t.Q6J("ngIf",null==e.message?null:e.message.quoted_message)}}function xd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayOriginalMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayOriginalMessage())}),t._uU(1," streamChat.See original (automatically translated) "),t.qZA()}}function Md(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayTranslatedMessage())})("keyup.enter",function(){t.CHM(e);const s=t.oxw(4);return t.KtG(s.displayTranslatedMessage())}),t._uU(1," streamChat.See translation "),t.qZA()}}function Sd(i,a){if(1&i&&(t.TgZ(0,"div",68),t.YNc(1,xd,2,0,"button",69),t.YNc(2,Md,2,0,"button",70),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","translation"===e.displayedMessageTextContent),t.xp6(1),t.Q6J("ngIf","original"===e.displayedMessageTextContent)}}function kd(i,a){1&i&&t.GkF(0)}function Ad(i,a){if(1&i&&(t.ynx(0),t.YNc(1,kd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(3);const e=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Fd(i,a){if(1&i&&(t.TgZ(0,"span",73),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",null!=e.message&&null!=e.message.user&&e.message.user.name?null==e.message||null==e.message.user?null:e.message.user.name:null==e.message||null==e.message.user?null:e.message.user.id," ")}}function Ed(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Sd,3,2,"div",64),t.TgZ(2,"div",65),t.YNc(3,Ad,2,1,"ng-container",10),t.YNc(4,Fd,2,1,"span",66),t.TgZ(5,"span",67),t._uU(6),t.qZA()(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shouldDisplayTranslationNotice),t.xp6(2),t.Q6J("ngIf","2"===e.themeVersion),t.xp6(1),t.Q6J("ngIf",!e.isSentByCurrentUser),t.xp6(2),t.hij(" ",e.parsedDate," ")}}function Od(i,a){if(1&i&&t.YNc(0,Ed,7,4,"ng-container",10),2&i){const e=a.position,n=t.oxw();t.Q6J("ngIf","inside-message-bubble"===e&&"1"===n.themeVersion||"outside-message-bubble"===e&&"2"===n.themeVersion)}}function Id(i,a){1&i&&t.GkF(0)}function Ld(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Id,1,0,"ng-container",20),t.BQk()),2&i){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Zd(i,a){1&i&&t.GkF(0)}function Ud(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Zd,1,0,"ng-container",20),t.BQk()),2&i){t.oxw(2);const e=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Rd(i,a){if(1&i&&t.YNc(0,Ud,2,1,"ng-container",2),2&i){t.oxw();const e=t.MAs(5),n=t.oxw(2);t.Q6J("ngIf","main"===n.mode&&n.isMessageDeliveredAndRead&&n.canDisplayReadStatus)("ngIfElse",e)}}function Bd(i,a){1&i&&t.GkF(0)}function Pd(i,a){if(1&i&&t.YNc(0,Bd,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(7),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customDeliveredStatusTemplate||e)("ngTemplateOutletContext",n.getDeliveredStatusContext())}}function Nd(i,a){if(1&i&&(t.TgZ(0,"span",82),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",83),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"stream-icon-placeholder",84),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(4);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",t.lcZ(5,6,"streamChat.Delivered")," ")}}function jd(i,a){if(1&i&&t.YNc(0,Nd,7,8,"span",81),2&i){const e=t.oxw(3);t.Q6J("ngIf","main"===e.mode)}}function $d(i,a){1&i&&t.GkF(0)}function Hd(i,a){if(1&i&&t.YNc(0,$d,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(11),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customSendingStatusTemplate||e)("ngTemplateOutletContext",n.getSendingStatusContext())}}function qd(i,a){if(1&i&&(t.TgZ(0,"span",85),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",83),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"stream-loading-indicator-placeholder",86),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",t.lcZ(5,6,"streamChat.Sending...")," ")}}function Yd(i,a){1&i&&t.GkF(0)}function Jd(i,a){if(1&i&&t.YNc(0,Yd,1,0,"ng-container",16),2&i){t.oxw();const e=t.MAs(15),n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.customReadStatusTemplate||e)("ngTemplateOutletContext",n.getReadStatusContext())}}function Qd(i,a){if(1&i&&(t.TgZ(0,"span",91),t._uU(1),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",null==e.message?null:e.message.readBy.length," ")}}function Vd(i,a){if(1&i&&(t.TgZ(0,"span",87),t.NdJ("hover",function(n){return n.stopPropagation()}),t.TgZ(1,"popper-content",null,24)(3,"div",88),t._uU(4),t.qZA()(),t._UZ(5,"stream-avatar-placeholder",89),t.YNc(6,Qd,2,1,"span",90),t.qZA()),2&i){const e=t.MAs(2),n=t.oxw(3);t.Q6J("popper",e)("popperTrigger",n.popperTriggerHover)("popperPlacement",n.popperPlacementAuto)("popperHideOnScroll",!1)("popperHideOnClickOutside",!1),t.xp6(4),t.hij(" ",n.readByText," "),t.xp6(1),t.Q6J("size",15)("imageUrl",null==n.lastReadUser?null:n.lastReadUser.image)("name",(null==n.lastReadUser?null:n.lastReadUser.name)||(null==n.lastReadUser?null:n.lastReadUser.id))("user",n.lastReadUser),t.xp6(1),t.Q6J("ngIf",n.isReadByMultipleUsers)}}function Gd(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ld,2,1,"ng-container",2),t.YNc(2,Rd,1,2,"ng-template",null,74,t.W1O),t.YNc(4,Pd,1,2,"ng-template",null,75,t.W1O),t.YNc(6,jd,1,1,"ng-template",null,76,t.W1O),t.YNc(8,Hd,1,2,"ng-template",null,77,t.W1O),t.YNc(10,qd,7,8,"ng-template",null,78,t.W1O),t.YNc(12,Jd,1,2,"ng-template",null,79,t.W1O),t.YNc(14,Vd,7,11,"ng-template",null,80,t.W1O),t.BQk()),2&i){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf","sending"===(null==n.message?null:n.message.status))("ngIfElse",e)}}function zd(i,a){if(1&i&&t.YNc(0,Gd,16,2,"ng-container",10),2&i){const e=t.oxw();t.Q6J("ngIf",e.isSentByCurrentUser&&(e.isLastSentMessage&&"received"===(null==e.message?null:e.message.status)||"sending"===(null==e.message?null:e.message.status)))}}function Wd(i,a){1&i&&t._UZ(0,"stream-icon-placeholder",97)}function Kd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",95),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.setAsActiveParentMessage())}),t.YNc(1,Wd,1,0,"stream-icon-placeholder",96),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","1"===e.themeVersion),t.xp6(1),t.hij(" ",1===(null==e.message?null:e.message.reply_count)?t.lcZ(3,2,"streamChat.1 reply"):t.xi3(4,4,"streamChat.{{ replyCount }} replies",e.replyCountParam)," ")}}function Xd(i,a){if(1&i&&(t.TgZ(0,"div",93),t.YNc(1,Kd,5,7,"button",94),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shouldDisplayThreadLink)}}function eh(i,a){if(1&i&&t.YNc(0,Xd,2,1,"div",92),2&i){const e=a.position,n=t.oxw();t.Q6J("ngIf","inside-message-bubble"===e&&"1"===n.themeVersion||"outside-message-bubble"===e&&"2"===n.themeVersion)}}function th(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"stream-attachment-list",63),t.NdJ("imageModalStateChange",function(s){const o=t.CHM(e).imageModalStateChangeHandler;return t.KtG(o(s))}),t.qZA()}if(2&i){const n=a.attachments,s=a.parentMessageId;t.Q6J("messageId",a.messageId)("attachments",n)("parentMessageId",s)}}function nh(i,a){1&i&&t.GkF(0)}function ih(i,a){if(1&i&&(t.YNc(0,th,1,3,"ng-template",null,62,t.W1O),t.YNc(2,nh,1,0,"ng-container",16)),2&i){const e=t.MAs(1),n=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",n.attachmentListTemplate||e)("ngTemplateOutletContext",n.getAttachmentListContext())}}const sh=["input"];function ah(i,a){1&i&&t.GkF(0)}const Qi=function(i){return{item:i}};function rh(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,ah,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw().item,n=t.oxw(),s=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",n.mentionAutocompleteItemTemplate||s)("ngTemplateOutletContext",t.VKq(2,Qi,e))}}function oh(i,a){1&i&&t.GkF(0)}function lh(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,oh,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw().item,n=t.oxw(),s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",n.commandAutocompleteItemTemplate||s)("ngTemplateOutletContext",t.VKq(2,Qi,e))}}function ch(i,a){1&i&&(t.TgZ(0,"div",5),t.YNc(1,rh,2,4,"div",6),t.YNc(2,lh,2,4,"div",6),t.qZA()),2&i&&(t.Q6J("ngSwitch",a.item.type),t.xp6(1),t.Q6J("ngSwitchCase","mention"),t.xp6(1),t.Q6J("ngSwitchCase","command"))}function uh(i,a){if(1&i&&(t.TgZ(0,"div",9)(1,"span",10)(2,"strong",11),t._uU(3),t.qZA(),t.TgZ(4,"span",12),t._uU(5),t.qZA()(),t._UZ(6,"br"),t.qZA()),2&i){const e=a.item;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.AsE("/",e.name," ",e.args,"")}}function dh(i,a){1&i&&(t.TgZ(0,"div",17),t._uU(1,"@"),t.qZA())}function hh(i,a){if(1&i&&(t.TgZ(0,"div",13),t._UZ(1,"stream-avatar-placeholder",14),t.TgZ(2,"span",15),t._uU(3),t.qZA(),t.YNc(4,dh,2,0,"div",16),t.qZA()),2&i){const e=a.item,n=t.oxw();t.xp6(1),t.Akn("height: "+n.themeVersion=="2"?56:"20px"),t.Q6J("size","2"===n.themeVersion?56:20)("imageUrl",e.image||(null==e.user?null:e.user.image))("name",e.autocompleteLabel)("user",e.user||e),t.xp6(2),t.Oqu(e.autocompleteLabel),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion)}}const ph=["scrollContainer"],gh=["parentMessageElement"];function mh(i,a){1&i&&t.GkF(0)}const Vi=function(i){return{message:i}};function fh(i,a){if(1&i&&(t.TgZ(0,"li",13,14),t.YNc(2,mh,1,0,"ng-container",9),t.TgZ(3,"div",15),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA()()),2&i){const e=t.oxw(),n=t.MAs(15);t.xp6(2),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(8,Vi,e.parentMessage)),t.xp6(2),t.hij(" ",1===(null==e.parentMessage?null:e.parentMessage.reply_count)?t.lcZ(5,3,"streamChat.1 reply"):t.xi3(6,5,"streamChat.{{ replyCount }} replies",e.replyCountParam)," ")}}function _h(i,a){1&i&&t._UZ(0,"stream-loading-indicator",16)}function vh(i,a){1&i&&t.GkF(0)}function Ch(i,a){if(1&i&&(t.TgZ(0,"li",17),t.YNc(1,vh,1,0,"ng-container",9),t.qZA()),2&i){const e=a.$implicit,n=a.index,s=t.oxw(),r=t.MAs(15);t.Gre("str-chat__li str-chat__li--",s.groupStyles[n],""),t.s9C("id",e.id),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(6,Vi,e))}}function yh(i,a){1&i&&t._UZ(0,"stream-loading-indicator",18)}const bh=function(i){return{user:i}},Dh=function(i){return{users:i}};function wh(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23)(3,"span",23)(4,"span",23),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()()),2&i){const e=t.oxw().ngIf,n=t.oxw(2);t.xp6(6),t.hij(" ",1===e.length?t.xi3(7,1,"streamChat.user is typing",t.VKq(7,bh,n.getTypingIndicatorText(e))):t.xi3(8,4,"streamChat.users are typing",t.VKq(9,Dh,n.getTypingIndicatorText(e)))," ")}}function Th(i,a){if(1&i&&(t.ynx(0),t.YNc(1,wh,9,11,"div",20),t.BQk()),2&i){const e=a.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function xh(i,a){1&i&&(t.YNc(0,Th,2,1,"ng-container",19),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.usersTyping$))}function Mh(i,a){1&i&&t.GkF(0)}function Sh(i,a){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessageCount," ")}}function kh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.jumpToLatestMessage())})("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.jumpToLatestMessage())}),t._UZ(1,"stream-icon",26),t.YNc(2,Sh,2,1,"div",27),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon","bottom-to-top"===e.direction?"arrow-down":"arrow-up"),t.xp6(1),t.Q6J("ngIf",e.unreadMessageCount>0)}}function Ah(i,a){if(1&i&&t._UZ(0,"stream-message",30),2&i){const n=a.isLastSentMessage,s=a.enabledMessageActions,r=a.mode,o=a.isHighlighted;t.Q6J("message",a.message)("isLastSentMessage",n)("enabledMessageActions",s)("mode",r)("isHighlighted",o)}}function Fh(i,a){1&i&&t.GkF(0)}function Eh(i,a){if(1&i&&(t.YNc(0,Ah,1,5,"ng-template",null,29,t.W1O),t.YNc(2,Fh,1,0,"ng-container",9)),2&i){const e=a.message,n=t.MAs(1),s=t.oxw();t.xp6(2),t.Q6J("ngTemplateOutlet",s.messageTemplate||n)("ngTemplateOutletContext",s.getMessageContext(e))}}let Mt=(()=>{class i{constructor(){this.notificationsSubject=new C.X([]),this.notifications$=this.notificationsSubject.asObservable()}addTemporaryNotification(e,n="error",s=5e3,r,o){const l=this.createNotification(e,n,r,o),c=setTimeout(()=>this.removeNotification(l.id),s);return l.dismissFn=()=>{clearTimeout(c),this.removeNotification(l.id)},this.notificationsSubject.next([...this.notificationsSubject.getValue(),l]),l.dismissFn}addPermanentNotification(e,n="error",s,r){const o=this.createNotification(e,n,s,r);return this.notificationsSubject.next([...this.notificationsSubject.getValue(),o]),o.dismissFn}createNotification(e,n,s,r){const o=(new Date).getTime().toString()+Math.random().toString();return{id:o,["string"==typeof e?"text":"template"]:e,type:n,translateParams:s,templateContext:r,dismissFn:()=>this.removeNotification(o)}}removeNotification(e){const n=this.notificationsSubject.getValue(),s=n.findIndex(r=>r.id===e);-1!==s&&(n.splice(s,1),this.notificationsSubject.next([...n]))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),We=(()=>{class i{constructor(e,n){this.ngZone=e,this.notificationService=n,this.notificationSubject=new O.t(1),this.connectionStateSubject=new O.t(1),this.appSettingsSubject=new C.X(void 0),this.pendingInvitesSubject=new C.X([]),this.userSubject=new O.t(1),this.subscriptions=[],this.events$=this.notificationSubject.asObservable(),this.connectionState$=this.connectionStateSubject.asObservable(),this.appSettings$=this.appSettingsSubject.asObservable(),this.pendingInvites$=this.pendingInvitesSubject.asObservable(),this.user$=this.userSubject.asObservable()}init(e,n,s){var r;return(0,D.mG)(this,void 0,void 0,function*(){let o;this.chatClient=ci.getInstance(e),yield this.ngZone.runOutsideAngular(()=>(0,D.mG)(this,void 0,void 0,function*(){const u="string"==typeof n?{id:n}:n;try{o="guest"===s?yield this.chatClient.setGuestUser(u):yield this.chatClient.connectUser(u,s)}catch(m){throw this.notificationService.addPermanentNotification("streamChat.Error connecting to chat, refresh the page to try again.","error"),m}this.userSubject.next(this.chatClient.user);const h="stream-chat-angular";this.chatClient.getUserAgent().includes(h)||this.chatClient.setUserAgent(`${h}-4.17.0-test.1-${this.chatClient.getUserAgent()}`)}));const l=yield this.chatClient.queryChannels({invite:"pending"},{},{user_id:null===(r=this.chatClient.user)||void 0===r?void 0:r.id});let c;return this.pendingInvitesSubject.next(l),this.appSettingsSubject.next(void 0),this.subscriptions.push(this.chatClient.on(u=>{this.updatePendingInvites(u),this.notificationSubject.next({eventType:u.type,event:u})})),this.subscriptions.push(this.chatClient.on("connection.changed",u=>{this.ngZone.run(()=>{const h=u.online;h?c&&c():c=this.notificationService.addPermanentNotification("streamChat.Connection failure, reconnecting now..."),this.connectionStateSubject.next(h?"online":"offline")})})),o})}disconnectUser(){return(0,D.mG)(this,void 0,void 0,function*(){this.pendingInvitesSubject.next([]),yield this.chatClient.disconnectUser(),this.userSubject.next(void 0),this.subscriptions.forEach(e=>e.unsubscribe())})}getAppSettings(){return(0,D.mG)(this,void 0,void 0,function*(){if(this.appSettingsSubject.getValue())return;const e=yield this.chatClient.getAppSettings();this.appSettingsSubject.next(e.app||{})})}flagMessage(e){return(0,D.mG)(this,void 0,void 0,function*(){yield this.chatClient.flagMessage(e)})}autocompleteUsers(e){return(0,D.mG)(this,void 0,void 0,function*(){return e?(yield this.chatClient.queryUsers({$or:[{id:{$autocomplete:e}},{name:{$autocomplete:e}}],id:{$ne:this.chatClient.userID}})).users:[]})}updatePendingInvites(e){var n,s,r;if((null===(s=null===(n=e.member)||void 0===n?void 0:n.user)||void 0===s?void 0:s.id)===(null===(r=this.chatClient.user)||void 0===r?void 0:r.id)&&e.channel){const o=this.pendingInvitesSubject.getValue();if("notification.invited"===e.type)this.pendingInvitesSubject.next([...o,e.channel]);else if("notification.invite_accepted"===e.type||"notification.invite_rejected"===e.type){const l=o.findIndex(c=>{var u;return c?.cid===(null===(u=e.channel)||void 0===u?void 0:u.cid)});-1!==l&&(o.splice(l,1),this.pendingInvitesSubject.next([...o]))}}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.R0b),t.LFG(Mt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const it=(i,a,e)=>{var n,s;const r=e?.language||(null===(n=a?.data)||void 0===n?void 0:n.auto_translation_language);if(r&&i?.i18n&&(null===(s=i?.user)||void 0===s?void 0:s.id)!==e?.id)return i.i18n[`${r}_text`]},an=(i,a)=>{const e=[];return Object.keys(a.state.read).forEach(n=>{var s;a.state.read[n].last_read.getTime()>=i.created_at.getTime()&&(null===(s=i.user)||void 0===s?void 0:s.id)!==n&&e.push(a.state.read[n].user)}),e};let Be=(()=>{class i{constructor(e,n,s){this.chatClientService=e,this.ngZone=n,this.notificationService=s,this.channelsSubject=new C.X(void 0),this.activeChannelSubject=new C.X(void 0),this.activeChannelMessagesSubject=new C.X([]),this.activeChannelPinnedMessagesSubject=new C.X([]),this.hasMoreChannelsSubject=new O.t(1),this.activeChannelSubscriptions=[],this.activeParentMessageIdSubject=new C.X(void 0),this.activeThreadMessagesSubject=new C.X([]),this.jumpToMessageSubject=new C.X({id:void 0,parentId:void 0}),this.latestMessageDateByUserByChannelsSubject=new C.X({}),this.messagePageSize=25,this.messageToQuoteSubject=new C.X(void 0),this.usersTypingInChannelSubject=new C.X([]),this.usersTypingInThreadSubject=new C.X([]),this._shouldMarkActiveChannelAsRead=!0,this.isStateRecoveryInProgress=!1,this.channelListSetter=r=>{const o=this.channelsSubject.getValue()||[],l=r.filter(u=>!o.find(h=>h.cid===u.cid)),c=o.filter(u=>!r?.find(h=>h.cid===u.cid));this.addChannelsFromNotification(l),this.removeChannelsFromChannelList(c.map(u=>u.cid))},this.messageListSetter=r=>{this.activeChannelMessagesSubject.next(r)},this.threadListSetter=r=>{this.activeThreadMessagesSubject.next(r)},this.parentMessageSetter=r=>{this.activeParentMessageIdSubject.next(r?.id)},this.channels$=this.channelsSubject.asObservable(),this.activeChannel$=this.activeChannelSubject.asObservable(),this.activeChannelMessages$=this.activeChannelMessagesSubject.pipe((0,b.U)(r=>{const o=this.activeChannelSubject.getValue();return r.map(l=>this.transformToStreamMessage(l,o))})),this.hasMoreChannels$=this.hasMoreChannelsSubject.asObservable(),this.activeParentMessageId$=this.activeParentMessageIdSubject.asObservable(),this.activeThreadMessages$=this.activeThreadMessagesSubject.pipe((0,b.U)(r=>{const o=this.activeChannelSubject.getValue();return r.map(l=>this.transformToStreamMessage(l,o))})),this.activeParentMessage$=(0,x.a)([this.activeChannelMessages$,this.activeParentMessageId$]).pipe((0,b.U)(([r,o])=>{if(o){return r.find(c=>c.id===o)||void this.setAsActiveParentMessage(void 0)}}),(0,wa.d)()),this.messageToQuote$=this.messageToQuoteSubject.asObservable(),this.jumpToMessage$=this.jumpToMessageSubject.asObservable(),this.usersTypingInChannel$=this.usersTypingInChannelSubject.asObservable(),this.usersTypingInThread$=this.usersTypingInThreadSubject.asObservable(),this.latestMessageDateByUserByChannels$=this.latestMessageDateByUserByChannelsSubject.asObservable(),this.activeChannelPinnedMessages$=this.activeChannelPinnedMessagesSubject.asObservable()}get shouldMarkActiveChannelAsRead(){return this._shouldMarkActiveChannelAsRead}set shouldMarkActiveChannelAsRead(e){var n;!this._shouldMarkActiveChannelAsRead&&e&&(null===(n=this.activeChannelSubject.getValue())||void 0===n||n.markRead()),this._shouldMarkActiveChannelAsRead=e}setAsActiveChannel(e){const n=this.activeChannelSubject.getValue();this.stopWatchForActiveChannelEvents(n),this.watchForActiveChannelEvents(e),this.activeChannelSubject.next(e),e.state.messages.forEach(s=>{s.readBy=an(s,e),s.translation=it(s,e,this.chatClientService.chatClient.user),s.quoted_message&&(s.quoted_message.translation=it(s.quoted_message,e,this.chatClientService.chatClient.user))}),this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&e.markRead(),this.activeChannelMessagesSubject.next([...e.state.messages]),this.activeChannelPinnedMessagesSubject.next([...e.state.pinnedMessages]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.messageToQuoteSubject.next(void 0)}deselectActiveChannel(){const e=this.activeChannelSubject.getValue();e&&(this.stopWatchForActiveChannelEvents(e),this.activeChannelMessagesSubject.next([]),this.activeChannelSubject.next(void 0),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]),this.latestMessageDateByUserByChannelsSubject.next({}),this.selectMessageToQuote(void 0),this.jumpToMessageSubject.next({id:void 0,parentId:void 0}),this.activeChannelPinnedMessagesSubject.next([]))}setAsActiveParentMessage(e,n="request"){var s;return(0,D.mG)(this,void 0,void 0,function*(){const r=this.messageToQuoteSubject.getValue();if(r&&r.parent_id&&this.messageToQuoteSubject.next(void 0),e){this.activeParentMessageIdSubject.next(e.id);const o=this.activeChannelSubject.getValue();if("request"===n){const l=yield o?.getReplies(e.id,{limit:null===(s=this.options)||void 0===s?void 0:s.message_limit});this.activeThreadMessagesSubject.next(l?.messages||[])}else this.activeThreadMessagesSubject.next(o?.state.threads[e.id]||[])}else{this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([]);const o=this.jumpToMessageSubject.getValue();o&&o.parentId&&this.jumpToMessageSubject.next({id:void 0,parentId:void 0})}})}loadMoreMessages(e="older"){var n,s,r,o,l,c,u;return(0,D.mG)(this,void 0,void 0,function*(){const h=this.activeChannelSubject.getValue(),m=this.activeChannelMessagesSubject.getValue(),f=null===(n=m["older"===e?0:m.length-1])||void 0===n?void 0:n.id;"newer"===e&&(null===(s=h?.state)||void 0===s?void 0:s.latestMessages)===(null===(r=h?.state)||void 0===r?void 0:r.messages)||(yield h?.query({messages:{limit:null===(o=this.options)||void 0===o?void 0:o.message_limit,["older"===e?"id_lt":"id_gt"]:f},members:{limit:0},watchers:{limit:0}}),(null===(l=h?.data)||void 0===l?void 0:l.id)===(null===(u=null===(c=this.activeChannelSubject.getValue())||void 0===c?void 0:c.data)||void 0===u?void 0:u.id)&&this.activeChannelMessagesSubject.next([...h.state.messages]))})}loadMoreThreadReplies(e="older"){var n,s;return(0,D.mG)(this,void 0,void 0,function*(){if("newer"===e)return;const r=this.activeChannelSubject.getValue(),o=this.activeParentMessageIdSubject.getValue();if(!o)return;const l=this.activeThreadMessagesSubject.getValue(),c=null===(n=l["older"===e?0:l.length-1])||void 0===n?void 0:n.id;yield r?.getReplies(o,{limit:null===(s=this.options)||void 0===s?void 0:s.message_limit,["older"===e?"id_lt":"id_gt"]:c}),this.activeThreadMessagesSubject.next(r?.state.threads[o]||[])})}init(e,n,s,r=!0){return(0,D.mG)(this,void 0,void 0,function*(){this.filters=e,this.options=s||{offset:0,limit:25,state:!0,presence:!0,watch:!0,message_limit:this.messagePageSize},this.sort=n||{last_message_at:-1,updated_at:-1},this.shouldSetActiveChannel=r;try{const o=yield this.queryChannels(this.shouldSetActiveChannel);return this.clientEventsSubscription=this.chatClientService.events$.subscribe(l=>{this.handleNotification(l)}),o}catch(o){throw this.notificationService.addPermanentNotification("streamChat.Error loading channels","error"),o}})}reset(){var e;this.deselectActiveChannel(),this.channelsSubject.next(void 0),null===(e=this.clientEventsSubscription)||void 0===e||e.unsubscribe()}loadMoreChannels(){return(0,D.mG)(this,void 0,void 0,function*(){this.options.offset=this.channels.length,yield this.queryChannels(!1)})}addReaction(e,n,s){var r;return(0,D.mG)(this,void 0,void 0,function*(){yield null===(r=this.activeChannelSubject.getValue())||void 0===r?void 0:r.sendReaction(e,Object.assign({type:n},s))})}removeReaction(e,n){var s;return(0,D.mG)(this,void 0,void 0,function*(){yield null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.deleteReaction(e,n)})}sendMessage(e,n=[],s=[],r,o,l){return(0,D.mG)(this,void 0,void 0,function*(){const c=((i,a,e=[],n=[],s,r,o)=>{const l=`${i.id}-${vn()}`;return Object.assign({__html:a,created_at:new Date,html:a,id:l,reactions:[],status:"sending",text:a,type:"regular",user:i,attachments:e,mentioned_users:n,parent_id:s,quoted_message_id:r},o)})(this.chatClientService.chatClient.user,e,n,s,r,o,l),u=this.activeChannelSubject.getValue();c.readBy=[],u.state.addMessageSorted(c,!0),yield this.sendMessageRequest(c,l)})}resendMessage(e){return(0,D.mG)(this,void 0,void 0,function*(){this.activeChannelSubject.getValue().state.addMessageSorted(Object.assign(Object.assign({},e),{errorStatusCode:void 0,status:"sending"}),!0),yield this.sendMessageRequest(e)})}updateMessage(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=Object.assign({},e);delete n.i18n,yield this.chatClientService.chatClient.updateMessage(n)})}deleteMessage(e){return(0,D.mG)(this,void 0,void 0,function*(){yield this.chatClientService.chatClient.deleteMessage(e.id)})}uploadAttachments(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=[],s=this.activeChannelSubject.getValue();return(yield Promise.allSettled(e.map(o=>"image"===o.type?this.customImageUploadRequest?this.customImageUploadRequest(o.file,s):s.sendImage(o.file,o.file.name,o.file.type):this.customFileUploadRequest?this.customFileUploadRequest(o.file,s):s.sendFile(o.file,o.file.name,o.file.type)))).forEach((o,l)=>{const c=e[l].file,u=e[l].type;n.push("fulfilled"===o.status?{file:c,type:u,state:"success",url:o.value.file,thumb_url:o.value.thumb_url}:{file:c,type:u,state:"error"})}),n})}deleteAttachment(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield"image"===e.type?this.customImageDeleteRequest?this.customImageDeleteRequest(e.url,n):n.deleteImage(e.url):this.customFileDeleteRequest?this.customFileDeleteRequest(e.url,n):n.deleteFile(e.url)})}autocompleteMembers(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();if(!n)return[];if(Object.keys(n.state.members).length<=100)return Object.values(n.state.members).filter(s=>{var r;return(null===(r=s.user)||void 0===r?void 0:r.id)!==this.chatClientService.chatClient.userID});{if(!e)return[];const s=yield n.queryMembers({name:{$autocomplete:e},id:{$ne:this.chatClientService.chatClient.userID}});return Object.values(s.members)}})}sendAction(e,n,s){return(0,D.mG)(this,void 0,void 0,function*(){const r=this.activeChannelSubject.getValue(),o=yield r.sendAction(e,n);o?.message?(r.state.addMessageSorted(Object.assign(Object.assign({},o.message),{status:"received"})),o.message.parent_id?this.activeThreadMessagesSubject.next([...r.state.threads[o.message.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages])):(r.state.removeMessage({id:e,parent_id:s}),s?this.activeThreadMessagesSubject.next(r.state.threads[this.activeParentMessageIdSubject.getValue()]):this.activeChannelMessagesSubject.next([...r.state.messages]))})}selectMessageToQuote(e){this.messageToQuoteSubject.next(e)}sendMessageRequest(e,n){var s;return(0,D.mG)(this,void 0,void 0,function*(){const r=this.activeChannelSubject.getValue(),o=!!e.parent_id;o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages]);try{const l=yield r.sendMessage(Object.assign({id:e.id,text:e.text,attachments:e.attachments,mentioned_users:null===(s=e.mentioned_users)||void 0===s?void 0:s.map(c=>c.id),parent_id:e.parent_id,quoted_message_id:e.quoted_message_id},n));l?.message&&(r.state.addMessageSorted(Object.assign(Object.assign({},l.message),{status:"received"}),!0),o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages]))}catch(l){const c=JSON.stringify(l),u=c?JSON.parse(c):{};r.state.addMessageSorted(Object.assign(Object.assign({},e),{errorStatusCode:u.status||void 0,status:"failed"}),!0),o?this.activeThreadMessagesSubject.next([...r.state.threads[e.parent_id]]):this.activeChannelMessagesSubject.next([...r.state.messages])}})}jumpToMessage(e,n){return(0,D.mG)(this,void 0,void 0,function*(){const s=this.activeChannelSubject.getValue();try{yield s?.state.loadMessageIntoState(e,n);const r=s?.state.messages||[];if(this.activeChannelMessagesSubject.next([...r]),n){const o=r.find(l=>l.id===n);this.setAsActiveParentMessage(o,"state")}this.jumpToMessageSubject.next({id:e,parentId:n})}catch(r){throw this.notificationService.addTemporaryNotification("Message not found"),r}})}pinMessage(e){var n;return(0,D.mG)(this,void 0,void 0,function*(){try{yield null===(n=this.chatClientService.chatClient)||void 0===n?void 0:n.pinMessage(e),this.notificationService.addTemporaryNotification("Message pinned","success")}catch(s){throw this.notificationService.addTemporaryNotification("Error pinning message"),s}})}unpinMessage(e){var n;return(0,D.mG)(this,void 0,void 0,function*(){try{yield null===(n=this.chatClientService.chatClient)||void 0===n?void 0:n.unpinMessage(e),this.notificationService.addTemporaryNotification("Message unpinned","success")}catch(s){throw this.notificationService.addTemporaryNotification("Error removing message pin"),s}})}handleNotification(e){switch(e.eventType){case"connection.recovered":this.ngZone.run(()=>(0,D.mG)(this,void 0,void 0,function*(){if(!this.isStateRecoveryInProgress){this.isStateRecoveryInProgress=!0;try{this.options&&(this.options.offset=0),yield this.queryChannels(!1,!0),this.setAsActiveParentMessage(void 0),this.isStateRecoveryInProgress=!1}catch{this.isStateRecoveryInProgress=!1}}}));break;case"notification.message_new":this.ngZone.run(()=>{this.customNewMessageNotificationHandler?this.customNewMessageNotificationHandler(e,this.channelListSetter):this.handleNewMessageNotification(e)});break;case"notification.added_to_channel":this.ngZone.run(()=>{this.customAddedToChannelNotificationHandler?this.customAddedToChannelNotificationHandler(e,this.channelListSetter):this.handleAddedToChannelNotification(e)});break;case"notification.removed_from_channel":this.ngZone.run(()=>{this.customRemovedFromChannelNotificationHandler?this.customRemovedFromChannelNotificationHandler(e,this.channelListSetter):this.handleRemovedFromChannelNotification(e)})}}handleRemovedFromChannelNotification(e){this.removeChannelsFromChannelList([e.event.channel.cid])}handleNewMessageNotification(e){e.event.channel&&this.addChannelsFromNotification([e.event.channel])}handleAddedToChannelNotification(e){e.event.channel&&this.addChannelsFromNotification([e.event.channel])}addChannelsFromNotification(e){return(0,D.mG)(this,void 0,void 0,function*(){let n=[];const s=[];e.forEach(o=>{const l=this.chatClientService.chatClient.channel(o.type,o.id);s.push(l.watch()),n.push(l)}),yield Promise.all(s);const r=this.channelsSubject.getValue()||[];n=n.filter(o=>!r.find(l=>l.cid===o.cid)),n.length>0&&(n.forEach(o=>this.watchForChannelEvents(o)),this.channelsSubject.next([...n,...r]))})}removeChannelsFromChannelList(e){var n;const s=this.channels.filter(r=>!e.includes(r.cid||""));e.forEach(r=>{var o;null===(o=this.chatClientService.chatClient.activeChannels[r])||void 0===o||o.stopWatching()}),s.length<this.channels.length&&(this.channelsSubject.next(s),e.includes((null===(n=this.activeChannelSubject.getValue())||void 0===n?void 0:n.cid)||"")&&(s.length>0?this.setAsActiveChannel(s[0]):this.activeChannelSubject.next(void 0)))}watchForActiveChannelEvents(e){this.activeChannelSubscriptions.push(e.on("message.new",n=>{this.ngZone.run(()=>{n.message&&n.message.parent_id?this.activeThreadMessagesSubject.next([...e.state.threads[n.message.parent_id]]):this.activeChannelMessagesSubject.next([...e.state.messages]),this.activeChannel$.pipe((0,bt.P)()).subscribe(s=>{this.canSendReadEvents&&this.shouldMarkActiveChannelAsRead&&s?.markRead()}),this.updateLatestMessages(n)})})),this.activeChannelSubscriptions.push(e.on("message.updated",n=>this.messageUpdated(n))),this.activeChannelSubscriptions.push(e.on("message.deleted",n=>this.messageUpdated(n))),this.activeChannelSubscriptions.push(e.on("reaction.new",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("reaction.deleted",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("reaction.updated",n=>this.messageReactionEventReceived(n))),this.activeChannelSubscriptions.push(e.on("message.read",n=>{this.ngZone.run(()=>{let s;this.activeChannelMessages$.pipe((0,bt.P)()).subscribe(r=>{s=r[r.length-1]}),s&&n.user&&(s.readBy=an(s,e),this.activeChannelMessagesSubject.next(this.activeChannelMessagesSubject.getValue()))})})),this.activeChannelSubscriptions.push(e.on("typing.start",n=>this.ngZone.run(()=>this.handleTypingStartEvent(n)))),this.activeChannelSubscriptions.push(e.on("typing.stop",n=>this.ngZone.run(()=>this.handleTypingStopEvent(n))))}typingStarted(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield n?.keystroke(e)})}typingStopped(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=this.activeChannelSubject.getValue();yield n?.stopTyping(e)})}messageUpdated(e){this.ngZone.run(()=>{var n;const s=e.message&&e.message.parent_id,r=this.activeChannelSubject.getValue();if(!r)return;const o=s?r.state.threads[(null===(n=e?.message)||void 0===n?void 0:n.parent_id)||""]:r.state.messages;o&&-1!==o.findIndex(c=>{var u;return c.id===(null===(u=e?.message)||void 0===u?void 0:u.id)})&&(s?this.activeThreadMessagesSubject.next([...o]):this.activeChannelMessagesSubject.next([...o]),this.activeChannelPinnedMessagesSubject.next([...r.state.pinnedMessages]))})}messageReactionEventReceived(e){this.ngZone.run(()=>{var n,s,r,o;const l=e.message&&e.message.parent_id;let c;(l?this.activeThreadMessages$:this.activeChannelMessages$).pipe((0,bt.P)()).subscribe(h=>c=h);const u=c.find(h=>{var m;return h.id===(null===(m=e?.message)||void 0===m?void 0:m.id)});u&&(u.reaction_counts=Object.assign({},null===(n=e.message)||void 0===n?void 0:n.reaction_counts),u.reaction_scores=Object.assign({},null===(s=e.message)||void 0===s?void 0:s.reaction_scores),u.latest_reactions=[...(null===(r=e.message)||void 0===r?void 0:r.latest_reactions)||[]],u.own_reactions=[...(null===(o=e.message)||void 0===o?void 0:o.own_reactions)||[]],l?this.activeThreadMessagesSubject.next([...c]):this.activeChannelMessagesSubject.next([...c]))})}formatMessage(e){return Object.assign(Object.assign({},e),{pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"})}isStreamMessage(e){return!!e.readBy}isFormatMessageResponse(e){return e.created_at instanceof Date}stopWatchForActiveChannelEvents(e){e&&(this.activeChannelSubscriptions.forEach(n=>n.unsubscribe()),this.activeChannelSubscriptions=[])}queryChannels(e,n=!1){return(0,D.mG)(this,void 0,void 0,function*(){try{const s=yield this.chatClientService.chatClient.queryChannels(this.filters,this.sort||{},this.options);s.forEach(l=>this.watchForChannelEvents(l));const r=n?[]:this.channelsSubject.getValue()||[];this.channelsSubject.next([...r,...s]);const o=this.activeChannelSubject.getValue();return s.length>0&&!o&&e&&this.setAsActiveChannel(s[0]),n&&!s.find(l=>l.cid===o?.cid)&&this.deselectActiveChannel(),this.hasMoreChannelsSubject.next(s.length>=this.options.limit),s}catch(s){throw this.channelsSubject.error(s),s}})}watchForChannelEvents(e){e.on(n=>{switch(n.type){case"message.new":this.ngZone.run(()=>{this.customNewMessageHandler?this.customNewMessageHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleNewMessage(n,e)});break;case"channel.hidden":this.ngZone.run(()=>{this.customChannelHiddenHandler?this.customChannelHiddenHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelHidden(n)});break;case"channel.deleted":this.ngZone.run(()=>{this.customChannelDeletedHandler?this.customChannelDeletedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelDeleted(n)});break;case"channel.visible":this.ngZone.run(()=>{this.customChannelVisibleHandler?this.customChannelVisibleHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelVisible(n,e)});break;case"channel.updated":this.ngZone.run(()=>{this.customChannelUpdatedHandler?this.customChannelUpdatedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelUpdate(n)});break;case"channel.truncated":this.ngZone.run(()=>{this.customChannelTruncatedHandler?this.customChannelTruncatedHandler(n,e,this.channelListSetter,this.messageListSetter,this.threadListSetter,this.parentMessageSetter):this.handleChannelTruncate(n)})}})}handleNewMessage(e,n){const s=this.channels.findIndex(r=>r.cid===n.cid);this.channels.splice(s,1),this.channelsSubject.next([n,...this.channels])}handleChannelHidden(e){this.removeChannelsFromChannelList([e.channel.cid])}handleChannelDeleted(e){this.removeChannelsFromChannelList([e.channel.cid])}handleChannelVisible(e,n){this.channels.find(s=>s.cid===e.cid)||this.ngZone.run(()=>this.channelsSubject.next([...this.channels,n]))}handleChannelUpdate(e){var n,s;const r=this.channels.findIndex(o=>o.cid===e.channel.cid);if(-1!==r&&(this.channels[r].data=e.channel,this.channelsSubject.next([...this.channels]),(null===(n=e.channel)||void 0===n?void 0:n.cid)===(null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.cid))){const o=this.activeChannelSubject.getValue();o.data=e.channel,this.activeChannelSubject.next(o)}}handleChannelTruncate(e){var n,s;const r=this.channels.findIndex(o=>o.cid===e.channel.cid);if(-1!==r&&(this.channels[r].state.messages=[],this.channelsSubject.next([...this.channels]),(null===(n=e.channel)||void 0===n?void 0:n.cid)===(null===(s=this.activeChannelSubject.getValue())||void 0===s?void 0:s.cid))){const o=this.activeChannelSubject.getValue();o.state.messages=[],this.activeChannelSubject.next(o),this.activeChannelMessagesSubject.next([]),this.activeParentMessageIdSubject.next(void 0),this.activeThreadMessagesSubject.next([])}}get channels(){return this.channelsSubject.getValue()||[]}get canSendReadEvents(){var e;const n=this.activeChannelSubject.getValue();return!!n&&-1!==(null===(e=n.data)||void 0===e?void 0:e.own_capabilities).indexOf("read-events")}transformToStreamMessage(e,n){const s=!!e.parent_id;if(this.isStreamMessage(e)&&this.isFormatMessageResponse(e))return e.quoted_message&&(e.quoted_message.translation=it(e.quoted_message,n,this.chatClientService.chatClient.user)),e.translation=it(e,n,this.chatClientService.chatClient.user),e;if(e.quoted_message&&(e.quoted_message=Object.assign(Object.assign({},e.quoted_message),{translation:it(e.quoted_message,n,this.chatClientService.chatClient.user)})),this.isFormatMessageResponse(e))return Object.assign(Object.assign({},e),{readBy:s?[]:an(e,n),translation:it(e,n,this.chatClientService.chatClient.user)});{const r=this.formatMessage(e);return Object.assign(Object.assign({},r),{readBy:s?[]:an(r,n),translation:it(e,n,this.chatClientService.chatClient.user)})}}handleTypingStartEvent(e){var n,s;if((null===(n=e.user)||void 0===n?void 0:n.id)===(null===(s=this.chatClientService.chatClient.user)||void 0===s?void 0:s.id))return;const r=!!e.parent_id;if(r&&e.parent_id!==this.activeParentMessageIdSubject.getValue())return;const o=r?this.usersTypingInThreadSubject:this.usersTypingInChannelSubject,l=o.getValue(),c=e.user;c&&!l.find(u=>u.id===c.id)&&(l.push(c),o.next([...l]))}handleTypingStopEvent(e){const n=this.usersTypingInChannelSubject.getValue(),s=this.usersTypingInThreadSubject.getValue(),r=e.user;return r&&n.find(o=>o.id===r.id)?(n.splice(n.findIndex(o=>o.id===r.id),1),void this.usersTypingInChannelSubject.next([...n])):r&&s.find(o=>o.id===r.id)?(s.splice(s.findIndex(o=>o.id===r.id),1),void this.usersTypingInThreadSubject.next([...s])):void 0}updateLatestMessages(e){var n,s,r,o,l,c,u;if((null===(s=null===(n=e.message)||void 0===n?void 0:n.user)||void 0===s?void 0:s.id)!==(null===(o=null===(r=this.chatClientService)||void 0===r?void 0:r.chatClient.user)||void 0===o?void 0:o.id))return;const h=this.latestMessageDateByUserByChannelsSubject.getValue();if(null===(l=e.message)||void 0===l||!l.created_at)return;const m=null===(c=e?.message)||void 0===c?void 0:c.cid;if(!m)return;const f=new Date(e.message.created_at);(!h[m]||(null===(u=h[m])||void 0===u?void 0:u.getTime())<f.getTime())&&(h[m]=f,this.latestMessageDateByUserByChannelsSubject.next(Object.assign({},h)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(We),t.LFG(t.R0b),t.LFG(Mt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),st=(()=>{class i{constructor(){this.theme$=new C.X("light"),this.defaultDarkModeVariables={"--bg-gradient-end":"#101214","--bg-gradient-start":"#070a0d","--black":"#ffffff","--blue-alice":"#00193d","--border":"#141924","--button-background":"#ffffff","--button-text":"#005fff","--grey":"#7a7a7a","--grey-gainsboro":"#2d2f2f","--grey-whisper":"#1c1e22","--modal-shadow":"#000000","--overlay":"#00000066","--overlay-dark":"#ffffffcc","--shadow-icon":"#00000080","--targetedMessageBackground":"#302d22","--transparent":"transparent","--white":"#101418","--white-smoke":"#13151b","--white-snow":"#070a0d"},this.variablesToDelete=[],this.theme$.subscribe(e=>{const n=this.customDarkThemeVariables?Object.assign(Object.assign({},this.defaultDarkModeVariables),this.customDarkThemeVariables):this.defaultDarkModeVariables,s=this.customLightThemeVariables?this.customLightThemeVariables:{};this.variablesToDelete.forEach(r=>this.deleteVariables(r)),"dark"===e?(this.deleteVariables(s),this.setVariables(n)):(this.deleteVariables(n),this.setVariables(s))}),this.themeVersion=getComputedStyle(document.documentElement).getPropertyValue("--str-chat__theme-version").replace(" ","")||"1"}get customLightThemeVariables(){return this._customLightThemeVariables}set customLightThemeVariables(e){const n=this.customLightThemeVariables;n&&this.variablesToDelete.push(n),this._customLightThemeVariables=e,"light"===this.theme$.getValue()&&this.theme$.next("light")}get customDarkThemeVariables(){return this._customDarkThemeVariables}set customDarkThemeVariables(e){const n=this.customDarkThemeVariables;n&&this.variablesToDelete.push(n),this._customDarkThemeVariables=e,"dark"===this.theme$.getValue()&&this.theme$.next("dark")}deleteVariables(e){e&&Object.keys(e).forEach(n=>document.documentElement.style.setProperty(n,null))}setVariables(e){e&&Object.keys(e).forEach(n=>document.documentElement.style.setProperty(n,e[n]))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Gi=i=>i.type.startsWith("image/")&&!i.type.endsWith(".photoshop"),zi=i=>"image"===i.type&&!i.title_link&&!i.og_scrape_url;let Wi=(()=>{class i{constructor(e,n){this.channelService=e,this.notificationService=n,this.attachmentUploadInProgressCounterSubject=new C.X(0),this.attachmentUploadsSubject=new C.X([]),this.attachmentUploadInProgressCounter$=this.attachmentUploadInProgressCounterSubject.asObservable(),this.attachmentUploads$=this.attachmentUploadsSubject.asObservable()}resetAttachmentUploads(){this.attachmentUploadsSubject.next([])}filesSelected(e){return(0,D.mG)(this,void 0,void 0,function*(){if(!e)return;const n=[],s=[],r=[];Array.from(e).forEach(l=>{Gi(l)?n.push(l):l.type.startsWith("video/")?r.push(l):s.push(l)}),n.forEach(l=>this.createPreview(l));const o=[...n.map(l=>({file:l,state:"uploading",type:"image"})),...r.map(l=>({file:l,state:"uploading",type:"video"})),...s.map(l=>({file:l,state:"uploading",type:"file"}))];this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...o]),yield this.uploadAttachments(o)})}retryAttachmentUpload(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=this.attachmentUploadsSubject.getValue(),s=n.find(r=>r.file===e);s&&(s.state="uploading",this.attachmentUploadsSubject.next([...n]),yield this.uploadAttachments([s]))})}deleteAttachment(e){return(0,D.mG)(this,void 0,void 0,function*(){const n=this.attachmentUploadsSubject.getValue();let s;if("success"===e.state)try{yield this.channelService.deleteAttachment(e),s=[...n];const r=n.indexOf(e);s.splice(r,1)}catch{s=n,this.notificationService.addTemporaryNotification("streamChat.Error deleting attachment")}else{s=[...n];const r=n.indexOf(e);s.splice(r,1)}this.attachmentUploadsSubject.next([...s])})}mapToAttachments(){return this.attachmentUploadsSubject.getValue().filter(n=>"success"===n.state).map(n=>{var s,r,o;const l={type:n.type};return"image"===n.type?(l.fallback=null===(s=n.file)||void 0===s?void 0:s.name,l.image_url=n.url):(l.asset_url=n.url,l.title=null===(r=n.file)||void 0===r?void 0:r.name,l.file_size=null===(o=n.file)||void 0===o?void 0:o.size,l.thumb_url=n.thumb_url),l})}createFromAttachments(e){const n=[];e.forEach(s=>{zi(s)?n.push({url:s.img_url||s.thumb_url||s.image_url,state:"success",type:"image",file:{name:s.fallback}}):("file"===s.type||"video"===s.type)&&n.push({url:s.asset_url,state:"success",file:{name:s.title,size:s.file_size},type:s.type,thumb_url:s.thumb_url})}),n.length>0&&this.attachmentUploadsSubject.next([...this.attachmentUploadsSubject.getValue(),...n])}createPreview(e){const n=new FileReader;n.onload=s=>{var r;const o=this.attachmentUploadsSubject.getValue(),l=o.find(c=>c.file===e);l&&(l.previewUri=(null===(r=s.target)||void 0===r?void 0:r.result)||void 0,this.attachmentUploadsSubject.next([...o]))},n.readAsDataURL(e)}uploadAttachments(e){return(0,D.mG)(this,void 0,void 0,function*(){this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()+1);const n=yield this.channelService.uploadAttachments(e),s=this.attachmentUploadsSubject.getValue();n.forEach(r=>{const o=s.find(l=>l.file===r.file);o?(o.state=r.state,o.url=r.url,o.thumb_url=r.thumb_url,"error"===o.state&&this.notificationService.addTemporaryNotification("image"===o.type?"streamChat.Error uploading image":"streamChat.Error uploading file")):r.url&&this.channelService.deleteAttachment(r)}),this.attachmentUploadInProgressCounterSubject.next(this.attachmentUploadInProgressCounterSubject.getValue()-1),this.attachmentUploadsSubject.next([...s])})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Be),t.LFG(Mt))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Lh=(()=>{class i{constructor(){this.shouldGenerateVideoThumbnail=!0}getImageAttachmentConfiguration(e,n,s){if(this.customImageAttachmentConfigurationHandler)return this.customImageAttachmentConfigurationHandler(e,n,s);const r=new URL(e.img_url||e.thumb_url||e.image_url||""),o=Number(r.searchParams.get("oh"))>1?Number(r.searchParams.get("oh")):1e6,l=Number(r.searchParams.get("ow"))>1?Number(r.searchParams.get("ow")):1e6,u=this.getSizingRestrictions(r,s,"gallery"===n||"single"===n);return u&&(u.height*=2,u.width*=2,this.addResizingParamsToUrl(u,r)),{url:r.href,width:"",height:"",originalHeight:o,originalWidth:l}}getVideoAttachmentConfiguration(e,n){if(this.customVideoAttachmentConfigurationHandler)return this.customVideoAttachmentConfigurationHandler(e,n);let s,r=1e6,o=1e6;if(e.thumb_url&&this.shouldGenerateVideoThumbnail){const l=new URL(e.thumb_url);r=Number(l.searchParams.get("oh"))>1?Number(l.searchParams.get("oh")):r,o=Number(l.searchParams.get("ow"))>1?Number(l.searchParams.get("ow")):o;const u=this.getSizingRestrictions(l,n,!0);u&&(u.height*=2,u.width*=2,this.addResizingParamsToUrl(u,l)),s=l.href}return{url:e.asset_url||"",width:"",height:"",thumbUrl:s,originalHeight:r,originalWidth:o}}getGiphyAttachmentConfiguration(e){var n;if(this.customGiphyAttachmentConfigurationHandler)return this.customGiphyAttachmentConfigurationHandler(e);const s=null===(n=e.giphy)||void 0===n?void 0:n.fixed_height_downsampled;return{url:s?.url||e.image_url||e.thumb_url||"",height:s?.height?`${s?.height}px`:"300px",width:s?.width?`${s?.width}px`:""}}getScrapedImageAttachmentConfiguration(e){return this.customScrapedImageAttachmentConfigurationHandler?this.customScrapedImageAttachmentConfigurationHandler(e):{url:e.image_url||e.thumb_url||"",width:"",height:""}}addResizingParamsToUrl(e,n){n.searchParams.set("h",e.height.toString()),n.searchParams.set("w",e.width.toString())}getSizingRestrictions(e,n,s=!1){const r=e.searchParams,o=Number(r.get("oh"))||1,l=Number(r.get("ow"))||1,c=this.getCSSSizeRestriction(n);let u;return(c.maxHeight||c.height)&&c.maxWidth?u=this.getSizeRestrictions(o,l,c.maxHeight||c.height,c.maxWidth):(u=void 0,s&&console.warn("Invalid value set for height/max-height and/or max-width for HTML element, this can cause scrolling issues inside the message list, more info https://getstream.io/chat/docs/sdk/angular/components/AttachmentListComponent/#image-and-video-sizing")),u}getSizeRestrictions(e,n,s,r){return{height:Math.round(Math.max(s,r/n*e)),width:Math.round(Math.max(s,r/e*n))}}getCSSSizeRestriction(e){const n=getComputedStyle(e);return{height:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("height")),maxHeight:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("max-height")),maxWidth:this.getValueRepresentationOfCSSProperty(n.getPropertyValue("max-width"))}}getValueRepresentationOfCSSProperty(e){return Number(e.replace("px",""))||void 0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Zh_streamChat={"1 reply":"1 reply","Attach files":"Attach files",Cancel:"Cancel","Channel Missing":"Channel Missing",Close:"Close","Close emoji picker":"Close emoji picker","Commands matching":"Commands matching","Connection failure, reconnecting now...":"Connection failure, reconnecting now...",Delete:"Delete",Delivered:"Delivered","Edit Message":"Edit Message","Edit message request failed":"Edit message request failed","Emoji matching":"Emoji matching","Empty message...":"Empty message...","Error adding flag":"Error adding flag","Error connecting to chat, refresh the page to try again.":"Error connecting to chat, refresh the page to try again","Error deleting message":"Error deleting message","Error muting a user ...":"Error muting a user ...","Error pinning message":"Error pinning message","Error removing message pin":"Error removing message pin","Error unmuting a user ...":"Error unmuting a user ...","Error uploading file":"Error uploading file","Error uploading image":"Error uploading image","Error deleting attachment":"Error deleting attachment","Error \xb7 Unsent":"Message couldn't be sent","Error: {{ errorMessage }}":"Error: {{ errorMessage }}",Flag:"Flag","Message Failed":"Message Failed","Message Failed \xb7 Unauthorized":"Unauthorized to send message","Message Failed \xb7 Click to try again":"Message couldn't be sent, click to try again","Message deleted":"Message deleted","Message has been successfully flagged":"Message has been successfully flagged","Message pinned":"Message pinned","Message unpinned":"Message unpinned",Mute:"Mute",New:"New","New Messages!":"New Messages!","No results found":"No results found","Nothing yet...":"Nothing yet...","Only visible to you":"Only visible to you","Open emoji picker":"Open emoji picker","People matching":"People matching","Pick your emoji":"Pick your emoji",Pin:"Pin","Pinned by":"Pinned by",Reply:"Reply","Reply to Message":"Reply to Message",Search:"Search","Searching...":"Searching...",Send:"Send","Send message request failed":"Send message request failed","Sending...":"Sending...","Slow Mode ON":"Slow Mode ON","Start of a new thread":"Start of a new thread","This message was deleted...":"This message was deleted...",Thread:"Thread reply","Type your message":"Type your message",Unmute:"Unmute",Unpin:"Unpin","Wait until all attachments have uploaded":"Wait until all attachments have uploaded","You have no channels currently":"You have no channels currently","You've reached the maximum number of files":"You've reached the maximum number of files",live:"live","this content could not be displayed":"this content could not be displayed","{{ commaSeparatedUsers }} and {{ moreCount }} more":"{{ commaSeparatedUsers }} and {{ moreCount }} more","{{ commaSeparatedUsers }}, and {{ lastUser }}":"{{ commaSeparatedUsers }}, and {{ lastUser }}","{{ firstUser }} and {{ secondUser }}":"{{ firstUser }} and {{ secondUser }}","{{ imageCount }} more":"{{ imageCount }} more","{{ memberCount }} members":"{{ memberCount }} members","{{ replyCount }} replies":"{{ replyCount }} replies","{{ user }} has been muted":"{{ user }} has been muted","{{ user }} has been unmuted":"{{ user }} has been unmuted","{{ watcherCount }} online":"{{ watcherCount }} online","\u{1f3d9} Attachment...":"\u{1f3d9} Attachment...","Connection error":"Connection error","Load more":"Load more",failed:"failed",retry:"retry",test:"success","Sending links is not allowed in this conversation":"Sending links is not allowed in this conversation","You can't send messages in this channel":"You can't send messages in this channel","You can't send thread replies in this channel":"You can't send thread replies in this channel","Unsupported file type: {{type}}":"Unsupported file type: {{type}}","Message not found":"Message not found","No chats here yet\u2026":"No chats here yet\u2026","user is typing":"{{ user }} is typing","users are typing":"{{ users }} are typing","Error loading channels":"Error loading channels","See original (automatically translated)":"See original (automatically translated)","See translation":"See translation"};let Uh=(()=>{class i{constructor(e){this.translteService=e}setTranslation(e="en",n){this.translteService.defaultLang||(this.translteService.defaultLang=e),this.translteService.setTranslation(e,{streamChat:Object.assign(Object.assign({},Zh_streamChat),n)},!0)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(we.sK))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Rh=(()=>{class i{constructor(e,n){this.chatClientService=e,this.ngZone=n,this.size=32,this.showOnlineIndicator=!0,this.isLoaded=!1,this.isError=!1,this.isOnline=!1}ngOnChanges(e){var n,s,r;return(0,D.mG)(this,void 0,void 0,function*(){if(e.channel)if(this.channel){const o=this.getOtherMemberIfOneToOneChannel();if(o){this.isOnlineSubscription=this.chatClientService.events$.pipe((0,Ut.h)(l=>"user.presence.changed"===l.eventType)).subscribe(l=>{var c;(null===(c=l.event.user)||void 0===c?void 0:c.id)===o.id&&this.ngZone.run(()=>{var u;this.isOnline=(null===(u=l.event.user)||void 0===u?void 0:u.online)||!1})});try{const l=yield this.chatClientService.chatClient.queryUsers({id:{$eq:o.id}});this.isOnline=(null===(n=l.users[0])||void 0===n?void 0:n.online)||!1}catch{this.isOnline=o.online||!1}}else null===(s=this.isOnlineSubscription)||void 0===s||s.unsubscribe()}else this.isOnline=!1,null===(r=this.isOnlineSubscription)||void 0===r||r.unsubscribe()})}get initials(){var e,n,s,r,o;let l="";if("user"===this.type)l=(null===(e=this.name)||void 0===e?void 0:e.toString())||"";else if("channel"===this.type)if(null!==(s=null===(n=this.channel)||void 0===n?void 0:n.data)&&void 0!==s&&s.name)l=null===(o=null===(r=this.channel)||void 0===r?void 0:r.data)||void 0===o?void 0:o.name;else{const c=this.getOtherMemberIfOneToOneChannel();l=c?c.name||c.id||"":"#"}return l.charAt(0)||""}get fallbackChannelImage(){if("channel"===this.type){const e=this.getOtherMemberIfOneToOneChannel();return e?e.image:void 0}}getOtherMemberIfOneToOneChannel(){var e,n;const s=Object.values((null===(n=null===(e=this.channel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.members)||{}).filter(r=>{var o;return r.user_id!==(null===(o=this.chatClientService.chatClient.user)||void 0===o?void 0:o.id)});if(1===s.length)return s[0].user}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(We),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-avatar"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type",showOnlineIndicator:"showOnlineIndicator"},features:[t.TTD],decls:5,vars:15,consts:[[3,"title"],["data-testid","avatar-img",3,"class","src","alt","style","load","error",4,"ngIf","ngIfElse"],["fallback",""],["data-testid","online-indicator","class","str-chat__avatar--online-indicator",4,"ngIf"],["data-testid","avatar-img",3,"src","alt","load","error"],["data-testid","fallback-img",1,"str-chat__avatar-fallback"],["data-testid","online-indicator",1,"str-chat__avatar--online-indicator"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,wo,1,11,"img",1),t.YNc(2,To,2,1,"ng-template",null,2,t.W1O),t.YNc(4,xo,1,0,"div",3),t.qZA()),2&e){const s=t.MAs(3);t.Akn(t.qbA(9,Mo,"calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size/2+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")","calc(var(--str-chat__spacing-px, 1px) * "+n.size+")")),t.Gre("str-chat__avatar str-chat__avatar--circle stream-chat__avatar--",n.location,""),t.s9C("title",n.name),t.xp6(1),t.Q6J("ngIf",(n.imageUrl||n.fallbackChannelImage)&&!n.isError)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",n.isOnline)}},dependencies:[Z.O5]}),i})(),qe=(()=>{class i{constructor(){this.mentionAutocompleteItemTemplate$=new C.X(void 0),this.commandAutocompleteItemTemplate$=new C.X(void 0),this.channelPreviewTemplate$=new C.X(void 0),this.messageInputTemplate$=new C.X(void 0),this.mentionTemplate$=new C.X(void 0),this.emojiPickerTemplate$=new C.X(void 0),this.typingIndicatorTemplate$=new C.X(void 0),this.messageTemplate$=new C.X(void 0),this.channelActionsTemplate$=new C.X(void 0),this.attachmentListTemplate$=new C.X(void 0),this.attachmentPreviewListTemplate$=new C.X(void 0),this.avatarTemplate$=new C.X(void 0),this.iconTemplate$=new C.X(void 0),this.loadingIndicatorTemplate$=new C.X(void 0),this.messageActionsBoxTemplate$=new C.X(void 0),this.messageActionsBoxItemTemplate$=new C.X(void 0),this.messageReactionsTemplate$=new C.X(void 0),this.modalTemplate$=new C.X(void 0),this.notificationTemplate$=new C.X(void 0),this.threadHeaderTemplate$=new C.X(void 0),this.deliveredStatusTemplate$=new C.X(void 0),this.sendingStatusTemplate$=new C.X(void 0),this.readStatusTemplate$=new C.X(void 0),this.channelHeaderInfoTemplate$=new C.X(void 0)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),St=(()=>{class i{constructor(e){this.customTemplatesService=e,this.size=32}getAvatarContext(){return{name:this.name,imageUrl:this.imageUrl,size:this.size,location:this.location,type:this.type,user:this.user,channel:this.channel}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-avatar-placeholder"]],inputs:{name:"name",imageUrl:"imageUrl",size:"size",location:"location",channel:"channel",user:"user",type:"type"},decls:4,vars:4,consts:[["defaultAvatar",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"name","imageUrl","size","type","channel","user","location"]],template:function(e,n){if(1&e&&(t.YNc(0,So,1,7,"ng-template",null,0,t.W1O),t.YNc(2,ko,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.avatarTemplate$)||s)("ngTemplateOutletContext",n.getAvatarContext())}},dependencies:[Rh,Z.tP,Z.Ov],encapsulation:2}),i})(),rn=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-icon"]],inputs:{icon:"icon",size:"size"},decls:22,vars:22,consts:[["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon",4,"ngIf"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",4,"ngIf"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread",4,"ngIf"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","error","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["data-testid","action-icon","height","4","viewBox","0 0 11 4","width","11","xmlns","http://www.w3.org/2000/svg"],["d","M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z","fillRule","nonzero"],["data-testid","delivered-icon","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M8.9999 16.2L4.7999 12L3.3999 13.4L8.9999 19L20.9999 6.99998L19.5999 5.59998L8.9999 16.2Z","fill","black"],["height","12","viewBox","0 0 12 12","width","12","xmlns","http://www.w3.org/2000/svg","data-testid","reaction-icon"],["clipRule","evenodd","fillRule","evenodd"],["d","M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z"],["d","M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z"],["data-testid","connection-error","width","78px","height","78px","viewBox","0 0 78 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Interactions","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","Connection-Error-_-Connectivity","transform","translate(-270.000000, -30.000000)","fill","#CF1F25"],["id","109-network-connection","transform","translate(270.000000, 30.000000)"],["d","M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z","id","Combined-Shape"],["data-testid","send","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["translate",""],["d","M4.00952 22L24 12L4.00952 2L4 9.77778L18.2857 12L4 14.2222L4.00952 22Z","fill","black"],["data-testid","file-upload","height","14","width","14","xmlns","http://www.w3.org/2000/svg"],["d","M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z","fillRule","nonzero"],["data-testid","retry","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M17.6449 6.35C16.1949 4.9 14.2049 4 11.9949 4C7.57488 4 4.00488 7.58 4.00488 12C4.00488 16.42 7.57488 20 11.9949 20C15.7249 20 18.8349 17.45 19.7249 14H17.6449C16.8249 16.33 14.6049 18 11.9949 18C8.68488 18 5.99488 15.31 5.99488 12C5.99488 8.69 8.68488 6 11.9949 6C13.6549 6 15.1349 6.69 16.2149 7.78L12.9949 11H19.9949V4L17.6449 6.35Z","fill","black"],["data-testid","close","width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","28","height","28","rx","14","fill","#72767E"],["cx","14","cy","14","r","12","fill","#72767E"],["fill-rule","evenodd","clip-rule","evenodd","d","M28 14C28 21.732 21.732 28 14 28C6.26801 28 0 21.732 0 14C0 6.26801 6.26801 0 14 0C21.732 0 28 6.26801 28 14ZM26 14C26 20.6274 20.6274 26 14 26C7.37258 26 2 20.6274 2 14C2 7.37258 7.37258 2 14 2C20.6274 2 26 7.37258 26 14ZM19.59 7L21 8.41L15.41 14L21 19.59L19.59 21L14 15.41L8.41 21L7 19.59L12.59 14L7 8.41L8.41 7L14 12.59L19.59 7Z","fill","white"],["data-testid","file","className","rfu-file-icon--small fa-file-fallback","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512"],["d","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z","fill","#414D54"],["data-testid","unspecified-filetype","width","34","height","40","viewBox","0 0 34 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 3C0 1.34315 1.34315 0 3 0H23L34 11V37C34 38.6569 32.6569 40 31 40H3C1.34315 40 0 38.6569 0 37V3Z","fill","url(#paint0_linear)"],["d","M34 11L26 11C24.3431 11 23 9.65685 23 8V0L34 11Z","fill","#DBDBDB"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 13H23V15H8V13Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 17H18V19H8V17Z","fill","#CFCFCF"],["fill-rule","evenodd","clip-rule","evenodd","d","M8 21H23V23H8V21Z","fill","#CFCFCF"],["id","paint0_linear","x1","0","y1","0","x2","0","y2","40","gradientUnits","userSpaceOnUse"],["stop-color","white"],["offset","1","stop-color","#DBDBDB"],["data-testid","reply","height","15","width","18","xmlns","http://www.w3.org/2000/svg"],["d","M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z","fillRule","nonzero"],["data-testid","close-no-outline","viewBox","0 0 24 24","width","24","height","24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z","fill","black"],["height","10","width","14","xmlns","http://www.w3.org/2000/svg","data-testid","reply-in-thread"],["d","M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z","fillRule","evenodd"],["data-testid","arrow-left","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.7049 7.41L14.2949 6L8.29492 12L14.2949 18L15.7049 16.59L11.1249 12L15.7049 7.41Z","fill","var(--black)"],["data-testid","arrow-right","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z","fill","var(--black)"],["data-testid","menu","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3 8V6H21V8H3ZM3 13H21V11H3V13ZM3 18H21V16H3V18Z","fill","black"],["data-testid","arrow-up","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M16.59 15.7051L12 11.1251L7.41 15.7051L6 14.2951L12 8.29508L18 14.2951L16.59 15.7051Z","fill","var(--primary-color)"],["data-testid","arrow-down","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.41 8.29504L12 12.875L16.59 8.29504L18 9.70504L12 15.705L6 9.70504L7.41 8.29504Z","fill","var(--primary-color)"],["data-testid","chat-bubble","viewBox","0 0 136 136","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M106 24.5H30C24.775 24.5 20.5 28.775 20.5 34V119.5L39.5 100.5H106C111.225 100.5 115.5 96.225 115.5 91V34C115.5 28.775 111.225 24.5 106 24.5ZM106 91H39.5L30 100.5V34H106V91Z","fill","#B4B7BB"],["data-testid","attach","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_10878_5)"],["d","M12.9997 6.99993L10.9997 6.99993L10.9997 10.9999L6.99972 10.9999L6.99972 12.9999L10.9997 12.9999L10.9997 16.9999L12.9997 16.9999L12.9997 12.9999L16.9997 12.9999L16.9997 10.9999L12.9997 10.9999L12.9997 6.99993ZM11.9997 1.99992C6.47972 1.99992 1.99972 6.47993 1.99972 11.9999C1.99972 17.5199 6.47972 21.9999 11.9997 21.9999C17.5197 21.9999 21.9997 17.5199 21.9997 11.9999C21.9997 6.47993 17.5197 1.99992 11.9997 1.99992ZM11.9997 19.9999C7.58972 19.9999 3.99972 16.4099 3.99972 11.9999C3.99972 7.58993 7.58972 3.99993 11.9997 3.99993C16.4097 3.99993 19.9997 7.58993 19.9997 11.9999C19.9997 16.4099 16.4097 19.9999 11.9997 19.9999Z","fill","black"],["id","clip0_10878_5"],["width","24","height","24","fill","white"],["data-testid","download","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM19 18H6C3.79 18 2 16.21 2 14C2 11.95 3.53 10.24 5.56 10.03L6.63 9.92L7.13 8.97C8.08 7.14 9.94 6 12 6C14.62 6 16.88 7.86 17.39 10.43L17.69 11.93L19.22 12.04C20.78 12.14 22 13.45 22 15C22 16.65 20.65 18 19 18ZM13.45 10H10.55V13H8L12 17L16 13H13.45V10Z","fill","black"],["data-testid","error","width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","background","d","M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z","fill","black"],["d","M13 17H11V15H13V17ZM13 13H11V7H13V13Z","fill","white"]],template:function(e,n){1&e&&(t.YNc(0,Ao,2,0,"svg",0),t.YNc(1,Fo,2,0,"svg",1),t.YNc(2,Eo,4,0,"svg",2),t.YNc(3,Oo,9,0,"svg",3),t.YNc(4,Io,4,0,"svg",4),t.YNc(5,Lo,4,0,"svg",5),t.YNc(6,Zo,2,0,"svg",6),t.YNc(7,Uo,4,0,"svg",7),t.YNc(8,Ro,2,2,"svg",8),t.YNc(9,Bo,10,0,"svg",9),t.YNc(10,Po,2,0,"svg",10),t.YNc(11,No,2,0,"svg",11),t.YNc(12,jo,2,0,"svg",12),t.YNc(13,$o,2,0,"svg",13),t.YNc(14,Ho,2,0,"svg",14),t.YNc(15,qo,2,0,"svg",15),t.YNc(16,Yo,2,0,"svg",16),t.YNc(17,Jo,2,0,"svg",17),t.YNc(18,Qo,2,0,"svg",18),t.YNc(19,Vo,6,0,"svg",19),t.YNc(20,Go,2,0,"svg",20),t.YNc(21,zo,3,0,"svg",21)),2&e&&(t.Q6J("ngIf","action-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","delivered-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","reaction-icon"===n.icon),t.xp6(1),t.Q6J("ngIf","connection-error"===n.icon),t.xp6(1),t.Q6J("ngIf","send"===n.icon),t.xp6(1),t.Q6J("ngIf","file-upload"===n.icon),t.xp6(1),t.Q6J("ngIf","retry"===n.icon),t.xp6(1),t.Q6J("ngIf","close"===n.icon),t.xp6(1),t.Q6J("ngIf","file"===n.icon),t.xp6(1),t.Q6J("ngIf","unspecified-filetype"===n.icon),t.xp6(1),t.Q6J("ngIf","reply"===n.icon),t.xp6(1),t.Q6J("ngIf","close-no-outline"===n.icon),t.xp6(1),t.Q6J("ngIf","reply-in-thread"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-left"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-right"===n.icon),t.xp6(1),t.Q6J("ngIf","menu"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-up"===n.icon),t.xp6(1),t.Q6J("ngIf","arrow-down"===n.icon),t.xp6(1),t.Q6J("ngIf","chat-bubble"===n.icon),t.xp6(1),t.Q6J("ngIf","attach"===n.icon),t.xp6(1),t.Q6J("ngIf","download"===n.icon),t.xp6(1),t.Q6J("ngIf","error"===n.icon))},dependencies:[Z.O5,we.Pi],encapsulation:2}),i})(),gt=(()=>{class i{constructor(e){this.customTemplatesService=e}getIconContext(){return{icon:this.icon,size:this.size}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-icon-placeholder"]],inputs:{icon:"icon",size:"size"},decls:4,vars:4,consts:[["defaultIcon",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"icon","size"]],template:function(e,n){if(1&e&&(t.YNc(0,Wo,1,2,"ng-template",null,0,t.W1O),t.YNc(2,Ko,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.iconTemplate$)||s)("ngTemplateOutletContext",n.getIconContext())}},dependencies:[rn,Z.tP,Z.Ov],encapsulation:2}),i})(),Ki=(()=>{class i{constructor(){this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))",this.linearGradientId=vn()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-loading-indicator"]],inputs:{size:"size",color:"color"},decls:7,vars:8,consts:[[1,"str-chat__loading-indicator"],["viewBox","0 0 30 30","data-testid","loading-indicator","xmlns","http://www.w3.org/2000/svg"],["x1","50%","x2","50%","y1","0%","y2","100%",3,"id"],["offset","0%","stop-color","#FFF","stop-opacity","0"],["data-testid","stop-color","offset","100%","stop-opacity","1",3,"ngStyle"],["d","M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z","fillRule","evenodd"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1)(2,"defs")(3,"linearGradient",2),t._UZ(4,"stop",3)(5,"stop",4),t.qZA()(),t._UZ(6,"path",5),t.qZA()()),2&e&&(t.xp6(1),t.uIk("height",n.size)("width",n.size),t.xp6(2),t.s9C("id",n.linearGradientId),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,Xo,n.color)),t.uIk("stop-color",n.color),t.xp6(1),t.uIk("fill","url(#"+n.linearGradientId+")"))},dependencies:[Z.PC],encapsulation:2}),i})(),Ln=(()=>{class i{constructor(e){this.customTemplatesService=e,this.size=15,this.color="var(--str-chat__loading-indicator-color, var(--str-chat__primary-color, '#006CFF'))"}getLoadingIndicatorContext(){return{size:this.size,color:this.color}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-loading-indicator-placeholder"]],inputs:{size:"size",color:"color"},decls:4,vars:4,consts:[["defaultLoadingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"size","color"]],template:function(e,n){if(1&e&&(t.YNc(0,el,1,2,"ng-template",null,0,t.W1O),t.YNc(2,tl,1,0,"ng-container",1),t.ALo(3,"async")),2&e){const s=t.MAs(1);t.xp6(2),t.Q6J("ngTemplateOutlet",t.lcZ(3,2,n.customTemplatesService.loadingIndicatorTemplate$)||s)("ngTemplateOutletContext",n.getLoadingIndicatorContext())}},dependencies:[Ki,Z.tP,Z.Ov],encapsulation:2}),i})(),Xi=(()=>{class i{constructor(){this.isOpen=!1,this.isOpenChange=new t.vpe,this.watchForEscPress=e=>{"Escape"===e.key&&this.close()},this.stopWatchForEscPress=()=>{window.removeEventListener("keyup",this.watchForEscPress)},this.watchForOutsideClicks=e=>{var n;null!==(n=this.innerContainer)&&void 0!==n&&n.nativeElement.contains(e.target)||this.close()}}ngOnChanges(e){e.isOpen&&(this.isOpen?(window.addEventListener("keyup",this.watchForEscPress),setTimeout(()=>window.addEventListener("click",this.watchForOutsideClicks),0)):(this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()))}close(){this.isOpen=!1,this.isOpenChange.emit(!1),this.stopWatchForOutsideClicks(),this.stopWatchForEscPress()}stopWatchForOutsideClicks(){window.removeEventListener("click",this.watchForOutsideClicks)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-modal"]],viewQuery:function(e,n){if(1&e&&t.Gf(nl,5),2&e){let s;t.iGM(s=t.CRH())&&(n.innerContainer=s.first)}},inputs:{isOpen:"isOpen",content:"content"},outputs:{isOpenChange:"isOpenChange"},features:[t.TTD],ngContentSelectors:In,decls:8,vars:5,consts:[["data-testid","modal"],["data-testid","close",1,"str-chat__modal__close-button",3,"click","keyup.enter"],["icon","close"],[1,"str-chat__modal__inner"],["modalInner",""],[4,"ngIf","ngIfElse"],["elseContent",""],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.close()})("keyup.enter",function(){return n.close()}),t._UZ(2,"stream-icon-placeholder",2),t.qZA(),t.TgZ(3,"div",3,4),t.YNc(5,sl,2,1,"ng-container",5),t.YNc(6,al,1,0,"ng-template",null,6,t.W1O),t.qZA()()),2&e){const s=t.MAs(7);t.Gre("str-chat__modal str-chat__modal--",n.isOpen?"open":"close",""),t.xp6(5),t.Q6J("ngIf",n.content)("ngIfElse",s)}},dependencies:[gt,Z.O5,Z.tP],encapsulation:2}),i})();const es=new t.OlP("textareaInjectionToken");let ts=(()=>{class i{constructor(e){this.viewContainerRef=e,this.value="",this.valueChange=new t.vpe,this.send=new t.vpe,this.userMentions=new t.vpe,this.subscriptions=[],this.unpropagatedChanges=[]}ngOnChanges(e){if(this.unpropagatedChanges.push(e),!this.componentRef)return;e.componentRef&&(this.subscriptions.forEach(s=>s.unsubscribe()),this.componentRef&&(this.subscriptions.push(this.componentRef.instance.valueChange.subscribe(s=>this.valueChange.next(s))),this.subscriptions.push(this.componentRef.instance.send.subscribe(s=>this.send.next(s))),this.componentRef.instance.userMentions&&this.subscriptions.push(this.componentRef.instance.userMentions.subscribe(s=>this.userMentions.next(s))),this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled,this.componentRef.instance.mentionScope=this.mentionScope,this.componentRef.instance.value=this.value,this.componentRef.instance.placeholder=this.placeholder,this.componentRef.instance.inputMode=this.inputMode)),e.areMentionsEnabled&&(this.componentRef.instance.areMentionsEnabled=this.areMentionsEnabled),e.mentionScope&&(this.componentRef.instance.mentionScope=this.mentionScope),e.value&&(this.componentRef.instance.value=this.value),e.placeholder&&(this.componentRef.instance.placeholder=this.placeholder),e.inputMode&&(this.componentRef.instance.inputMode=this.inputMode);let n={};this.unpropagatedChanges.forEach(s=>n=Object.assign(Object.assign({},n),s)),this.componentRef.instance.ngOnChanges(n),this.unpropagatedChanges=[]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","streamTextarea",""]],inputs:{componentRef:"componentRef",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",inputMode:"inputMode",value:"value",placeholder:"placeholder"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[t.TTD]}),i})(),Zn=(()=>{class i{constructor(){this.emojiInput$=new K.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Bh=(()=>{class i{constructor(){this.isFileUploadEnabled=!0,this.areMentionsEnabled=!0,this.isMultipleFileUploadEnabled=!0,this.mentionScope="channel",this.inputMode="desktop"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ns=(()=>{class i{constructor(e,n,s,r){this.customTemplatesService=e,this.channelService=n,this.attachmentConfigurationService=s,this.attachments=[],this.imageModalStateChange=new t.vpe,this.class="str-chat__attachment-list-angular-host",this.orderedAttachments=[],this.imagesToView=[],this.imagesToViewCurrentIndex=0,this.attachmentConfigurations=new Map,this.themeVersion=r.themeVersion}ngOnChanges(e){if(e.attachments){const n=this.attachments.filter(this.isImage);this.orderedAttachments=[...n.length>=2?this.createGallery(n):n,...this.attachments.filter(r=>this.isVideo(r)),...this.attachments.filter(r=>this.isFile(r))],this.attachmentConfigurations=new Map,0===this.orderedAttachments.length&&this.orderedAttachments.push(...this.attachments.filter(r=>this.isCard(r)))}}trackByUrl(e,n){return n.image_url||n.img_url||n.asset_url||n.thumb_url}isImage(e){return zi(e)}isSvg(e){return!!(e.fallback||"").toLowerCase().endsWith(".svg")}isFile(e){return"file"===e.type}isGallery(e){return"gallery"===e.type}isVideo(e){return"video"===e.type&&e.asset_url&&!e.og_scrape_url}isCard(e){return!e.type||"image"===e.type&&!this.isImage(e)||"giphy"===e.type}hasFileSize(e){return e.file_size&&Number.isFinite(Number(e.file_size))}getFileSize(e){return Za()(Number(e.file_size))}getModalContext(){return{isOpen:this.imagesToView&&this.imagesToView.length>0,isOpenChangeHandler:e=>e?null:this.closeImageModal(),content:this.modalContent}}trimUrl(e){if(null!=e){const[n]=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/");return n}return null}sendAction(e){this.channelService.sendAction(this.messageId,{[e.name]:e.value},this.parentMessageId)}trackByActionValue(e,n){return n.value}openImageModal(e,n=0){this.imageModalStateChange.next("opened"),this.imagesToView=e,this.imagesToViewCurrentIndex=n}stepImages(e){this.imagesToViewCurrentIndex+=1*e}trackByImageUrl(e,n){return n.image_url||n.img_url||n.thumb_url}getImageAttachmentConfiguration(e,n,s){const r=this.attachmentConfigurations.get(e);if(r)return r;const o=this.attachmentConfigurationService.getImageAttachmentConfiguration(e,n,s);return this.attachmentConfigurations.set(e,o),o}getCarouselImageAttachmentConfiguration(e,n){return this.attachmentConfigurationService.getImageAttachmentConfiguration(e,"carousel",n)}getVideoAttachmentConfiguration(e,n){const s=this.attachmentConfigurations.get(e);if(s)return s;const r=this.attachmentConfigurationService.getVideoAttachmentConfiguration(e,n);return this.attachmentConfigurations.set(e,r),r}getCardAttachmentConfiguration(e){const n=this.attachmentConfigurations.get(e);if(n)return n;if("giphy"===e.type)return this.attachmentConfigurationService.getGiphyAttachmentConfiguration(e);{const s=this.attachmentConfigurationService.getScrapedImageAttachmentConfiguration(e);return this.attachmentConfigurations.set(e,s),s}}get isImageModalPrevButtonVisible(){return 0!==this.imagesToViewCurrentIndex}get isImageModalNextButtonVisible(){return this.imagesToViewCurrentIndex!==this.imagesToView.length-1}createGallery(e){return[{type:"gallery",images:e}]}closeImageModal(){this.imageModalStateChange.next("closed"),this.imagesToView=[]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(qe),t.Y36(Be),t.Y36(Lh),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-attachment-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(Hi,7),2&e){let s;t.iGM(s=t.CRH())&&(n.modalContent=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{messageId:"messageId",parentMessageId:"parentMessageId",attachments:"attachments"},outputs:{imageModalStateChange:"imageModalStateChange"},features:[t.TTD],decls:5,vars:1,consts:[["class","str-chat__attachment-list",4,"ngIf"],["defaultModal",""],["modalContent",""],[1,"str-chat__attachment-list"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["data-testclass","attachment-container"],["class","str-chat__message-attachment--img","data-testclass","image",3,"src","alt","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery","data-testid","image-gallery",3,"str-chat__gallery--square","str-chat__gallery-two-rows",4,"ngIf"],["class","str-chat__player-wrapper","data-testclass","video-attachment-parent",3,"--original-height","--original-width","ngStyle",4,"ngIf"],["class","\n          str-chat__message-attachment-file--item\n          str-chat-angular__message-attachment-file-single\n        ","style","cursor: pointer; text-decoration: none","data-testclass","file-link","target","_blank",3,"href",4,"ngIf"],[3,"class",4,"ngIf"],["class","str-chat__message-attachment-actions",4,"ngIf"],["data-testclass","image",1,"str-chat__message-attachment--img",3,"src","alt","ngStyle","click","keyup.enter"],["imgElement",""],["data-testid","image-gallery",1,"str-chat__gallery"],["class","str-chat__gallery-image","data-testclass","gallery-image",3,"str-chat__message-attachment--svg-image","click","keyup.enter",4,"ngIf"],["class","str-chat__gallery-placeholder","data-testclass","gallery-image","data-testid","more-image-button",3,"str-chat__message-attachment--svg-image","--original-height","--original-width","ngStyle","click","keyup.enter",4,"ngIf"],["data-testclass","gallery-image",1,"str-chat__gallery-image",3,"click","keyup.enter"],[3,"src","alt","ngStyle"],["data-testclass","gallery-image","data-testid","more-image-button",1,"str-chat__gallery-placeholder",3,"ngStyle","click","keyup.enter"],["element",""],[3,"innerHTML"],["data-testclass","video-attachment-parent",1,"str-chat__player-wrapper",3,"ngStyle"],["controls","","data-testclass","video-attachment",1,"str-chat__video-angular",3,"src","poster"],["videoElement",""],["data-testclass","file-link","target","_blank",1,"str-chat__message-attachment-file--item","str-chat-angular__message-attachment-file-single",2,"cursor","pointer","text-decoration","none",3,"href"],["icon","file",3,"size",4,"ngIf"],["icon","unspecified-filetype",3,"size",4,"ngIf"],[1,"str-chat__message-attachment-file--item-text"],[1,"str-chat__message-attachment-file--item-first-row"],["data-testclass","file-title",1,"str-chat__message-attachment-file--item-name"],["class","str-chat__message-attachment-file--item-size","data-testclass","size",4,"ngIf"],["icon","file",3,"size"],["icon","unspecified-filetype",3,"size"],["data-testclass","size",1,"str-chat__message-attachment-file--item-size"],["class","str-chat__message-attachment-card--header",4,"ngIf"],[1,"str-chat__message-attachment-card--content"],[1,"str-chat__message-attachment-card--flex"],["data-testclass","card-title","class","str-chat__message-attachment-card--title",4,"ngIf"],["class","str-chat__message-attachment-card--text","data-testclass","card-text",4,"ngIf"],["class","str-chat__message-attachment-card--url","data-testclass","url-link","noopener","","noreferrer","","target","_blank",3,"href",4,"ngIf"],[1,"str-chat__message-attachment-card--header"],["data-testclass","card-img",3,"alt","src","ngStyle"],["data-testclass","card-title",1,"str-chat__message-attachment-card--title"],["data-testclass","card-text",1,"str-chat__message-attachment-card--text"],["data-testclass","url-link","noopener","","noreferrer","","target","_blank",1,"str-chat__message-attachment-card--url",3,"href"],[1,"str-chat__message-attachment-actions"],[1,"str-chat__message-attachment-actions-form"],["data-testclass","attachment-action",3,"class","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testclass","attachment-action",3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"stream-chat-angular__image-modal-host",3,"isOpen","content","isOpenChange"],[1,"stream-chat-angular__image-modal","str-chat__image-carousel"],["data-testid","image-modal-prev","type","button",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper",3,"ngStyle","click","keyup.enter"],["icon","arrow-left"],["data-testid","modal-image",1,"stream-chat-angular__image-modal-image","str-chat__image-carousel-image",3,"src","alt","ngStyle"],["type","button","data-testid","image-modal-next",1,"stream-chat-angular__image-modal-stepper","str-chat__image-carousel-stepper",3,"ngStyle","click","keyup.enter"],["icon","arrow-right"]],template:function(e,n){1&e&&(t.YNc(0,kl,3,3,"div",0),t.YNc(1,Al,1,2,"ng-template",null,1,t.W1O),t.YNc(3,El,7,16,"ng-template",null,2,t.W1O)),2&e&&t.Q6J("ngIf",n.orderedAttachments.length>0)},dependencies:[gt,Xi,Z.O5,Z.sg,Z.PC,Z.tP,we.X$,Z.Ov],encapsulation:2}),i})(),Ph=(()=>{class i{constructor(e){this.retryAttachmentUpload=new t.vpe,this.deleteAttachment=new t.vpe,this.themeVersion=e.themeVersion}attachmentUploadRetried(e){this.retryAttachmentUpload.emit(e)}attachmentDeleted(e){this.deleteAttachment.emit(e)}trackByFile(e,n){return n.file}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-attachment-preview-list"]],inputs:{attachmentUploads$:"attachmentUploads$"},outputs:{retryAttachmentUpload:"retryAttachmentUpload",deleteAttachment:"deleteAttachment"},decls:8,vars:6,consts:[["class","rfu-image-previewer",4,"ngIf"],["class","str-chat__attachment-preview-list",4,"ngIf"],["deleteButton",""],["retryButton",""],[1,"rfu-image-previewer"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","rfu-image-previewer__image","data-testclass","attachment-image-preview",3,"rfu-image-previewer__image--loaded",4,"ngIf"],["class","rfu-file-previewer","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"rfu-image-previewer__image"],["class","rfu-image-previewer__retry","data-testclass","upload-retry",3,"click","keyup.enter",4,"ngIf"],[1,"rfu-thumbnail__wrapper",2,"width","100","height","100"],[1,"rfu-thumbnail__overlay"],["data-testclass","file-delete","role","button",1,"rfu-icon-button",3,"click","keyup.enter"],["icon","close-no-outline"],["class","rfu-thumbnail__image","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)",4,"ngIf"],["data-testclass","upload-retry",1,"rfu-image-previewer__retry",3,"click","keyup.enter"],["icon","retry"],["data-testclass","attachment-image",1,"rfu-thumbnail__image",3,"src","alt"],["data-testclass","loading-indicator","color","rgba(255,255,255,0.7)"],["data-testclass","attachment-file-preview",1,"rfu-file-previewer"],[1,"rfu-file-previewer__file"],["icon","file"],["data-testclass","file-download-link","download","",3,"href","click","keyup.enter"],[4,"ngIf"],["data-testclass","file-delete",1,"rfu-file-previewer__close-button",3,"click","keyup.enter"],["class","rfu-file-previewer__loading-indicator",4,"ngIf"],["data-testclass","upload-retry","translate","",1,"rfu-file-previewer__failed",3,"click","keyup.enter"],["translate","",1,"rfu-file-previewer__retry",3,"click","keyup.enter"],[1,"rfu-file-previewer__loading-indicator"],[1,"str-chat__attachment-preview-list"],[1,"str-chat__attachment-list-scroll-container"],["class","str-chat__attachment-preview-image","data-testclass","attachment-image-preview",4,"ngIf"],["class","str-chat__attachment-preview-file","data-testclass","attachment-file-preview",4,"ngIf"],["data-testclass","attachment-image-preview",1,"str-chat__attachment-preview-image"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","str-chat__attachment-preview-image-loading",4,"ngIf"],["class","str-chat__attachment-preview-thumbnail","data-testclass","attachment-image",3,"src","alt",4,"ngIf"],[1,"str-chat__attachment-preview-image-loading"],["data-testclass","loading-indicator",3,"size"],["data-testclass","attachment-image",1,"str-chat__attachment-preview-thumbnail",3,"src","alt"],["data-testclass","attachment-file-preview",1,"str-chat__attachment-preview-file"],["icon","unspecified-filetype"],[1,"str-chat__attachment-preview-file-end"],[1,"str-chat__attachment-preview-file-name"],["class","str-chat__attachment-preview-file-download","data-testclass","file-download-link","download","",3,"href","click","keyup.enter",4,"ngIf"],["data-testclass","loading-indicator",3,"size",4,"ngIf"],["data-testclass","file-download-link","download","",1,"str-chat__attachment-preview-file-download",3,"href","click","keyup.enter"],["icon","download"],["data-testclass","file-delete","role","button",1,"str-chat__attachment-preview-delete",3,"click","keyup.enter"],["data-testclass","upload-retry",3,"class","click","keyup.enter",4,"ngIf"],["data-testclass","upload-retry",3,"click","keyup.enter"]],template:function(e,n){if(1&e&&(t.YNc(0,Nl,3,4,"div",0),t.ALo(1,"async"),t.YNc(2,Kl,4,4,"div",1),t.ALo(3,"async"),t.YNc(4,Xl,2,0,"ng-template",null,2,t.W1O),t.YNc(6,tc,1,1,"ng-template",null,3,t.W1O)),2&e){let s,r;t.Q6J("ngIf",(null==(s=t.lcZ(1,2,n.attachmentUploads$))?null:s.length)&&"1"===n.themeVersion),t.xp6(2),t.Q6J("ngIf",(null==(r=t.lcZ(3,4,n.attachmentUploads$))?null:r.length)&&"2"===n.themeVersion)}},dependencies:[gt,Ln,Z.O5,Z.sg,we.Pi,Z.tP,Z.Ov],encapsulation:2}),i})(),is=(()=>{class i{constructor(e,n,s,r,o,l,c,u,h,m,f){this.channelService=e,this.notificationService=n,this.attachmentService=s,this.configService=r,this.textareaType=o,this.componentFactoryResolver=l,this.cdRef=c,this.chatClient=u,this.emojiInputService=h,this.customTemplatesService=m,this.mode="main",this.messageUpdate=new t.vpe,this.class="str-chat__message-input-angular-host",this.textareaValue="",this.mentionedUsers=[],this.typingStart$=new K.x,this.isCooldownInProgress=!1,this.fileInputId=vn(),this.subscriptions=[],this.isViewInited=!1,this.defaultTextareaPlaceholder="streamChat.Type your message",this.slowModeTextareaPlaceholder="streamChat.Slow Mode ON",this.themeVersion=f.themeVersion,this.textareaPlaceholder=this.defaultTextareaPlaceholder,this.subscriptions.push(this.attachmentService.attachmentUploadInProgressCounter$.subscribe(v=>{0===v&&this.hideNotification&&(this.hideNotification(),this.hideNotification=void 0)})),this.subscriptions.push(this.channelService.activeChannel$.subscribe(v=>{var y;this.textareaValue="",this.attachmentService.resetAttachmentUploads();const B=null===(y=v?.data)||void 0===y?void 0:y.own_capabilities;B&&(this.isFileUploadAuthorized=-1!==B.indexOf("upload-file"),this.canSendLinks=-1!==B.indexOf("send-links"),this.channel=v,this.setCanSendMessages())})),this.subscriptions.push(this.chatClient.appSettings$.subscribe(v=>this.appSettings=v)),this.subscriptions.push(this.channelService.messageToQuote$.subscribe(v=>{const y=v&&v.parent_id;("thread"===this.mode&&y||"thread"===this.mode&&this.quotedMessage&&!v||"main"===this.mode&&!y)&&(this.quotedMessage=v)})),this.attachmentUploads$=this.attachmentService.attachmentUploads$,this.attachmentUploadInProgressCounter$=this.attachmentService.attachmentUploadInProgressCounter$,this.isFileUploadEnabled=this.configService.isFileUploadEnabled,this.isMultipleFileUploadEnabled=this.configService.isMultipleFileUploadEnabled,this.areMentionsEnabled=this.configService.areMentionsEnabled,this.mentionScope=this.configService.mentionScope,this.inputMode=this.configService.inputMode,this.subscriptions.push(this.typingStart$.subscribe(()=>{this.channelService.typingStarted(this.parentMessageId)})),this.subscriptions.push((0,x.a)([this.channelService.latestMessageDateByUserByChannels$,this.channelService.activeChannel$]).pipe((0,b.U)(([v,y])=>[v[y?.cid||""],y])).subscribe(([v,y])=>{var B,G,te;const U=(null===(B=y?.data)||void 0===B?void 0:B.cooldown)&&v&&Math.round((null===(G=y?.data)||void 0===G?void 0:G.cooldown)-((new Date).getTime()-v.getTime())/1e3);U&&U>0&&(null===(te=y?.data)||void 0===te?void 0:te.own_capabilities).includes("slow-mode")?this.startCooldown(U):this.isCooldownInProgress&&this.stopCooldown()}))}ngOnInit(){this.subscriptions.push(this.customTemplatesService.emojiPickerTemplate$.subscribe(e=>{this.emojiPickerTemplate=e,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.attachmentPreviewListTemplate$.subscribe(e=>{this.attachmentPreviewListTemplate=e,this.cdRef.detectChanges()}))}ngAfterViewInit(){this.isViewInited=!0,this.initTextarea()}ngOnChanges(e){e.message&&(this.attachmentService.resetAttachmentUploads(),this.isUpdate&&(this.attachmentService.createFromAttachments(this.message.attachments||[]),this.textareaValue=this.message.text||"")),e.isFileUploadEnabled&&(this.configService.isFileUploadEnabled=this.isFileUploadEnabled),e.isMultipleFileUploadEnabled&&(this.configService.isMultipleFileUploadEnabled=this.isMultipleFileUploadEnabled),e.areMentionsEnabled&&(this.configService.areMentionsEnabled=this.areMentionsEnabled),e.mentionScope&&(this.configService.mentionScope=this.mentionScope),e.mode&&this.setCanSendMessages(),e.inputMode&&(this.configService.inputMode=this.inputMode),e.sendMessage$&&(this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.sendMessage$&&(this.sendMessageSubcription=this.sendMessage$.subscribe(()=>{this.messageSent()})))}ngOnDestroy(){this.sendMessageSubcription&&this.sendMessageSubcription.unsubscribe(),this.subscriptions.forEach(e=>e.unsubscribe())}messageSent(){var e;return(0,D.mG)(this,void 0,void 0,function*(){if(this.isCooldownInProgress)return;let n;if(this.attachmentService.attachmentUploadInProgressCounter$.pipe((0,bt.P)()).subscribe(l=>n=l),n>0)return void(this.hideNotification||(this.hideNotification=this.notificationService.addPermanentNotification("streamChat.Wait until all attachments have uploaded")));const s=this.attachmentService.mapToAttachments();let r=this.textareaValue;const o=!r.replace(/ /g,"");if(r&&!o||s&&0!==s.length){if(o&&(r=""),this.containsLinks&&!this.canSendLinks)return void this.notificationService.addTemporaryNotification("streamChat.Sending links is not allowed in this conversation");this.isUpdate||(this.textareaValue="");try{yield this.isUpdate?this.channelService.updateMessage(Object.assign(Object.assign({},this.message),{text:r,attachments:s})):this.channelService.sendMessage(r,s,this.mentionedUsers,this.parentMessageId,null===(e=this.quotedMessage)||void 0===e?void 0:e.id),this.messageUpdate.emit(),this.isUpdate||this.attachmentService.resetAttachmentUploads()}catch{this.isUpdate&&this.notificationService.addTemporaryNotification("streamChat.Edit message request failed")}this.channelService.typingStopped(this.parentMessageId),this.quotedMessage&&this.deselectMessageToQuote()}})}get containsLinks(){return/(?:(?:https?|ftp):\/\/)?[\w/\-?=%.]+\.[\w/\-&?=%.]+/.test(this.textareaValue)}get quotedMessageAttachments(){var e;const n=null===(e=this.quotedMessage)||void 0===e?void 0:e.attachments;return n&&n.length?[n[0]]:[]}get disabledTextareaText(){return this.canSendMessages?"":"thread"===this.mode?"streamChat.You can't send thread replies in this channel":"streamChat.You can't send messages in this channel"}filesSelected(e){return(0,D.mG)(this,void 0,void 0,function*(){(yield this.areAttachemntsValid(e))&&(yield this.attachmentService.filesSelected(e),this.clearFileInput())})}deselectMessageToQuote(){this.channelService.selectMessageToQuote(void 0)}getEmojiPickerContext(){return{emojiInput$:this.emojiInputService.emojiInput$}}getAttachmentPreviewListContext(){return{attachmentUploads$:this.attachmentService.attachmentUploads$,deleteUploadHandler:this.deleteUpload.bind(this),retryUploadHandler:this.retryUpload.bind(this)}}deleteUpload(e){this.attachmentService.deleteAttachment(e)}retryUpload(e){this.attachmentService.retryAttachmentUpload(e)}clearFileInput(){this.fileInput.nativeElement.value=""}get isUpdate(){return!!this.message}initTextarea(){if(this.canSendMessages||(this.textareaRef=void 0),!this.canSendMessages||this.textareaRef||!this.textareaAnchor)return;const e=this.componentFactoryResolver.resolveComponentFactory(this.textareaType);this.textareaRef=this.textareaAnchor.viewContainerRef.createComponent(e),this.cdRef.detectChanges()}areAttachemntsValid(e){return(0,D.mG)(this,void 0,void 0,function*(){if(!e)return!0;this.appSettings||(yield this.chatClient.getAppSettings());let n=!0;return Array.from(e).forEach(s=>{var r,o,l,c,u,h,m,f,v,y,B,G,te,U,de,ae,se,ee,le,fe,_e,ve,he,De,Ce,Ae,Pe,Te,Ee,at,Je,rt,ft,et,ot,Ke;let Ye,tt,lt,Qe;Gi(s)?(Ye=!(null===(l=null===(o=null===(r=this.appSettings)||void 0===r?void 0:r.image_upload_config)||void 0===o?void 0:o.blocked_file_extensions)||void 0===l||!l.find(xe=>s.name.endsWith(xe))),tt=!(null===(h=null===(u=null===(c=this.appSettings)||void 0===c?void 0:c.image_upload_config)||void 0===u?void 0:u.blocked_mime_types)||void 0===h||!h.find(xe=>s.type===xe)),lt=!(null===(v=null===(f=null===(m=this.appSettings)||void 0===m?void 0:m.image_upload_config)||void 0===f?void 0:f.allowed_file_extensions)||void 0===v||!v.length||null!==(G=null===(B=null===(y=this.appSettings)||void 0===y?void 0:y.image_upload_config)||void 0===B?void 0:B.allowed_file_extensions)&&void 0!==G&&G.find(xe=>s.name.endsWith(xe))),Qe=!(null===(de=null===(U=null===(te=this.appSettings)||void 0===te?void 0:te.image_upload_config)||void 0===U?void 0:U.allowed_mime_types)||void 0===de||!de.length||null!==(ee=null===(se=null===(ae=this.appSettings)||void 0===ae?void 0:ae.image_upload_config)||void 0===se?void 0:se.allowed_mime_types)&&void 0!==ee&&ee.find(xe=>s.type===xe))):(Ye=!(null===(_e=null===(fe=null===(le=this.appSettings)||void 0===le?void 0:le.file_upload_config)||void 0===fe?void 0:fe.blocked_file_extensions)||void 0===_e||!_e.find(xe=>s.name.endsWith(xe))),tt=!(null===(De=null===(he=null===(ve=this.appSettings)||void 0===ve?void 0:ve.file_upload_config)||void 0===he?void 0:he.blocked_mime_types)||void 0===De||!De.find(xe=>s.type===xe)),lt=!(null===(Pe=null===(Ae=null===(Ce=this.appSettings)||void 0===Ce?void 0:Ce.file_upload_config)||void 0===Ae?void 0:Ae.allowed_file_extensions)||void 0===Pe||!Pe.length||null!==(at=null===(Ee=null===(Te=this.appSettings)||void 0===Te?void 0:Te.file_upload_config)||void 0===Ee?void 0:Ee.allowed_file_extensions)&&void 0!==at&&at.find(xe=>s.name.endsWith(xe))),Qe=!(null===(ft=null===(rt=null===(Je=this.appSettings)||void 0===Je?void 0:Je.file_upload_config)||void 0===rt?void 0:rt.allowed_mime_types)||void 0===ft||!ft.length||null!==(Ke=null===(ot=null===(et=this.appSettings)||void 0===et?void 0:et.file_upload_config)||void 0===ot?void 0:ot.allowed_mime_types)&&void 0!==Ke&&Ke.find(xe=>s.type===xe))),(Ye||tt||lt||Qe)&&(this.notificationService.addTemporaryNotification("streamChat.Unsupported file type: {{type}}",void 0,void 0,{type:s.type}),n=!1)}),n})}setCanSendMessages(){var e,n;const s=null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.own_capabilities;this.canSendMessages=!!s&&-1!==s.indexOf("main"===this.mode?"send-message":"send-reply"),this.isViewInited&&(this.cdRef.detectChanges(),this.initTextarea())}get parentMessageId(){let e;return"thread"===this.mode&&this.channelService.activeParentMessageId$.pipe((0,bt.P)()).subscribe(n=>e=n),e}startCooldown(e){this.textareaPlaceholder=this.slowModeTextareaPlaceholder,this.isCooldownInProgress=!0,this.cooldown$=(0,P.H)(0,1e3).pipe((0,Ta.q)(e+1),(0,b.U)(n=>e-n),(0,Rt.b)(n=>{0===n&&this.stopCooldown()}))}stopCooldown(){this.cooldown$=void 0,this.isCooldownInProgress=!1,this.textareaPlaceholder=this.defaultTextareaPlaceholder}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(Mt),t.Y36(Wi),t.Y36(Bh),t.Y36(es),t.Y36(t._Vd),t.Y36(t.sBO),t.Y36(We),t.Y36(Zn),t.Y36(qe),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-input"]],viewQuery:function(e,n){if(1&e&&(t.Gf(nc,5),t.Gf(ts,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.fileInput=s.first),t.iGM(s=t.CRH())&&(n.textareaAnchor=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{isFileUploadEnabled:"isFileUploadEnabled",areMentionsEnabled:"areMentionsEnabled",mentionScope:"mentionScope",mode:"mode",isMultipleFileUploadEnabled:"isMultipleFileUploadEnabled",message:"message",sendMessage$:"sendMessage$",inputMode:"inputMode"},outputs:{messageUpdate:"messageUpdate"},features:[t._Bn([Wi,Zn]),t.TTD],decls:2,vars:2,consts:[[3,"class","str-chat__input-flat-has-attachments","str-chat__input-flat-quoted",4,"ngIf"],["class","str-chat__message-input str-chat-angular__message-input",4,"ngIf"],["class","quoted-message-preview",4,"ngIf"],[1,"str-chat__input-flat-wrapper",2,"width","100%"],["defaultAttachmentsPreview",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rta","str-chat__textarea","str-chat-angular__textarea"],["data-testid","emoji-picker",4,"ngIf"],[4,"ngIf","ngIfElse"],["disabledTextarea",""],["class","str-chat__fileupload-wrapper","data-testid","file-upload-button",4,"ngIf"],["data-testid","send-button","class","str-chat__send-button",3,"click","keyup.enter",4,"ngIf"],["class","str-chat__input-flat-cooldown","data-testid","cooldown-timer",4,"ngIf"],[1,"quoted-message-preview"],[1,"quoted-message-preview-header"],["data-testid","remove-quote",1,"str-chat__square-button",3,"click","keyup.enter"],["icon","close-no-outline",2,"font-size","15px","line-height","15px","width","15px","height","15px"],[1,"quoted-message-preview-content"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner"],[3,"attachments","messageId",4,"ngIf"],["data-testid","quoted-message-text",3,"innerHTML"],[3,"attachments","messageId"],[1,"rfu-image-previewer-angular-host",3,"attachmentUploads$","retryAttachmentUpload","deleteAttachment"],["data-testid","emoji-picker"],[1,"str-chat__input-flat-emojiselect","str-chat-angular__emojiselect"],["streamTextarea","",3,"value","componentRef","areMentionsEnabled","mentionScope","placeholder","inputMode","valueChange","send","userMentions"],["disabled","","rows","1","data-testid","disabled-textarea",1,"rta__textarea","str-chat__textarea__textarea",3,"value"],["data-testid","file-upload-button",1,"str-chat__fileupload-wrapper"],[1,"str-chat__tooltip"],[1,"rfu-file-upload-button"],["type","file","data-testid","file-input",1,"rfu-file-input",3,"multiple","change"],["fileInput",""],[1,"str-chat__input-flat-fileupload"],["icon","file-upload"],["data-testid","send-button",1,"str-chat__send-button",3,"click","keyup.enter"],["icon","send",1,"str-chat__send-button-angular"],["data-testid","cooldown-timer",1,"str-chat__input-flat-cooldown"],[1,"str-chat__message-input-cooldown-text"],[1,"str-chat__message-input","str-chat-angular__message-input"],["class","str-chat__quoted-message-preview-header",4,"ngIf"],["notAllowed",""],[1,"str-chat__quoted-message-preview-header"],[1,"str-chat__quoted-message-reply-to-message"],["data-testid","remove-quote",1,"str-chat__quoted-message-remove",3,"click","keyup.enter"],["icon","close-no-outline"],[1,"str-chat__message-input-inner","str-chat-angular__message-input-inner"],["class","str-chat__file-input-container","data-testid","file-upload-button",4,"ngIf"],[1,"str-chat__message-textarea-container"],["data-testid","quoted-message-container","class","str-chat__quoted-message-preview",4,"ngIf"],[1,"str-chat__message-textarea-with-emoji-picker"],["streamTextarea","",3,"value","componentRef","areMentionsEnabled","mentionScope","inputMode","placeholder","valueChange","send","userMentions"],[1,"str-chat__message-textarea-emoji-picker"],["data-testid","send-button","class","str-chat__send-button",3,"disabled","click","keyup.enter",4,"ngIf"],["class","str-chat__message-input-cooldown","data-testid","cooldown-timer",4,"ngIf"],["data-testid","file-upload-button",1,"str-chat__file-input-container"],["type","file","data-testid","file-input",1,"str-chat__file-input",3,"multiple","id","change"],[1,"str-chat__file-input-label",3,"for"],["icon","attach"],["data-testid","quoted-message-container",1,"str-chat__quoted-message-preview"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-preview-content-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",1,"str-chat__quoted-message-text",3,"innerHTML"],[1,"str-chat__attachment-preview-list-angular-host",3,"attachmentUploads$","retryAttachmentUpload","deleteAttachment"],["data-testid","send-button",1,"str-chat__send-button",3,"disabled","click","keyup.enter"],["icon","send"],["data-testid","cooldown-timer",1,"str-chat__message-input-cooldown"],["data-testid","disabled-textarea",1,"str-chat__message-input-not-allowed"]],template:function(e,n){1&e&&(t.YNc(0,gc,16,21,"div",0),t.YNc(1,Sc,5,3,"div",1)),2&e&&(t.Q6J("ngIf","2"!==n.themeVersion),t.xp6(1),t.Q6J("ngIf","2"===n.themeVersion))},dependencies:[gt,St,ns,Ph,Z.O5,Z.tP,ts,Z.Ov,we.X$],encapsulation:2}),i})(),Nh=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-notification"]],inputs:{type:"type",content:"content"},ngContentSelectors:In,decls:4,vars:5,consts:[["data-testid","custom-notification"],[4,"ngIf","ngIfElse"],["elseContent",""],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,Ac,2,1,"ng-container",1),t.YNc(2,Fc,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const s=t.MAs(3);t.Gre("str-chat__custom-notification notification-",n.type," str-chat__notification"),t.xp6(1),t.Q6J("ngIf",n.content)("ngIfElse",s)}},dependencies:[Z.O5,Z.tP],encapsulation:2}),i})(),Un=(()=>{class i{constructor(e,n,s){this.customTemplatesService=e,this.notificationService=n,this.themeService=s,this.notifications$=this.notificationService.notifications$,this.theme$=this.themeService.theme$,this.themeVersion=this.themeService.themeVersion}trackById(e,n){return n.id}getNotificationContentContext(e){return Object.assign(Object.assign({},e.templateContext),{dismissFn:e.dismissFn})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(qe),t.Y36(Mt),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-notification-list"]],decls:6,vars:11,consts:[["data-testid","notification-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["defaultNotification",""],["notificationContent",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","notification-content",4,"ngIf"],[4,"ngIf"],["data-testclass","notification-content"],[3,"type","content"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.YNc(2,Rc,5,7,"ng-container",1),t.ALo(3,"async"),t.qZA(),t.YNc(4,Bc,1,2,"ng-template",null,2,t.W1O)),2&e&&(t.Gre("str-chat__theme-",t.lcZ(1,7,n.theme$)," str-chat__list-notifications"),t.ekj("str-chat","2"===n.themeVersion),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,9,n.notifications$))("ngForTrackBy",n.trackById))},dependencies:[Nh,Z.sg,Z.O5,Z.tP,Z.Ov,we.X$],encapsulation:2}),i})(),jh=(()=>{class i{constructor(e,n,s,r){this.chatClientService=e,this.notificationService=n,this.channelService=s,this.customTemplatesService=r,this.isOpen=!1,this.isMine=!1,this.enabledActions=[],this.displayedActionsCount=new t.vpe,this.isEditing=new t.vpe,this.isEditModalOpen=!1,this.subscriptions=[],this.visibleMessageActionItems=[],this.sendMessageSubject=new K.x,this.modalClosed=()=>{this.isEditModalOpen=!1,this.isEditing.emit(!1)},this.subscriptions.push(this.customTemplatesService.messageInputTemplate$.subscribe(o=>this.messageInputTemplate=o)),this.subscriptions.push(this.customTemplatesService.messageActionsBoxItemTemplate$.subscribe(o=>this.messageActionItemTemplate=o)),this.subscriptions.push(this.customTemplatesService.modalTemplate$.subscribe(o=>this.modalTemplate=o)),this.messageActionItems=[{actionName:"quote",actionLabelOrTranslationKey:"streamChat.Reply",actionHandler:o=>this.channelService.selectMessageToQuote(o),isVisible:o=>-1!==o.indexOf("quote-message")},{actionName:"pin",actionLabelOrTranslationKey:()=>{var o;return null!==(o=this.message)&&void 0!==o&&o.pinned?"streamChat.Unpin":"streamChat.Pin"},actionHandler:o=>o.pinned?this.channelService.unpinMessage(o):this.channelService.pinMessage(o),isVisible:o=>-1!==o.indexOf("pin-message")},{actionName:"flag",actionLabelOrTranslationKey:"streamChat.Flag",actionHandler:o=>(0,D.mG)(this,void 0,void 0,function*(){try{yield this.chatClientService.flagMessage(o.id),this.notificationService.addTemporaryNotification("streamChat.Message has been successfully flagged","success")}catch{this.notificationService.addTemporaryNotification("streamChat.Error adding flag")}}),isVisible:(o,l)=>-1!==o.indexOf("flag-message")&&!l},{actionName:"edit",actionLabelOrTranslationKey:"streamChat.Edit Message",actionHandler:()=>{this.isEditing.emit(!0),this.isEditModalOpen=!0},isVisible:(o,l)=>-1!==o.indexOf("update-own-message")&&l||-1!==o.indexOf("update-any-message")},{actionName:"delete",actionLabelOrTranslationKey:"streamChat.Delete",actionHandler:o=>(0,D.mG)(this,void 0,void 0,function*(){try{yield this.channelService.deleteMessage(o)}catch{this.notificationService.addTemporaryNotification("streamChat.Error deleting message")}}),isVisible:(o,l)=>(-1!==o.indexOf("delete")||-1!==o.indexOf("delete-own-message"))&&l||-1!==o.indexOf("delete-any")||-1!==o.indexOf("delete-any-message")}],this.sendMessage$=this.sendMessageSubject.asObservable()}ngOnChanges(e){(e.isMine||e.enabledActions||e.message)&&(this.visibleMessageActionItems=this.messageActionItems.filter(n=>n.isVisible(this.enabledActions,this.isMine,this.message)),this.displayedActionsCount.emit(this.visibleMessageActionItems.length))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getActionLabel(e){return"string"==typeof e?e:e()}sendClicked(){this.sendMessageSubject.next()}getMessageInputContext(){return{message:this.message,messageUpdateHandler:this.modalClosed,isFileUploadEnabled:void 0,areMentionsEnabled:void 0,isMultipleFileUploadEnabled:void 0,mentionScope:void 0,mode:void 0,sendMessage$:this.sendMessage$}}getEditModalContext(){return{isOpen:this.isEditModalOpen,isOpenChangeHandler:e=>{this.isEditModalOpen=e,this.isEditModalOpen||this.modalClosed()},content:this.modalContent}}trackByActionName(e,n){return n.actionName}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(We),t.Y36(Mt),t.Y36(Be),t.Y36(qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-actions-box"]],viewQuery:function(e,n){if(1&e&&t.Gf(Hi,7),2&e){let s;t.iGM(s=t.CRH())&&(n.modalContent=s.first)}},inputs:{isOpen:"isOpen",isMine:"isMine",message:"message",enabledActions:"enabledActions"},outputs:{displayedActionsCount:"displayedActionsCount",isEditing:"isEditing"},features:[t.TTD],decls:11,vars:6,consts:[["data-testid","action-box",1,"str-chat__message-actions-box","str-chat__message-actions-box-angular"],["actionBox",""],[1,"str-chat__message-actions-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["defaultMessageActionItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultModal",""],["modalContent",""],[1,"str-chat__message-actions-list-item-button",3,"click"],[1,"str-chat__message-actions-list-item"],[3,"isOpen","content","isOpenChange"],["class","str-chat__edit-message-form",4,"ngIf"],[1,"str-chat__edit-message-form"],["defaultInput",""],[1,"str-chat__message-team-form-footer","str-chat__message-team-form-footer-angular"],[1,"str-chat__edit-message-form-options"],["translate","","data-testid","cancel-button",1,"str-chat__edit-message-cancel",3,"click"],["type","submit","translate","","data-testid","send-button",1,"str-chat__edit-message-send",3,"click","keyup.enter"],[3,"message","sendMessage$","messageUpdate"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1)(2,"ul",2),t.YNc(3,Nc,2,2,"ng-container",3),t.qZA()(),t.YNc(4,jc,4,4,"ng-template",null,4,t.W1O),t.YNc(6,$c,1,0,"ng-container",5),t.YNc(7,Hc,1,2,"ng-template",null,6,t.W1O),t.YNc(9,Qc,1,1,"ng-template",null,7,t.W1O)),2&e){const s=t.MAs(8);t.ekj("str-chat__message-actions-box--open",!0),t.xp6(3),t.Q6J("ngForOf",n.visibleMessageActionItems)("ngForTrackBy",n.trackByActionName),t.xp6(3),t.Q6J("ngTemplateOutlet",n.modalTemplate||s)("ngTemplateOutletContext",n.getEditModalContext())}},dependencies:[Xi,is,Un,Z.sg,Z.tP,Z.O5,we.Pi,we.X$],encapsulation:2}),i})(),$h=(()=>{class i{constructor(e,n){this.channelService=e,this.themeService=n,this.subscriptions=[],this.isError$=this.channelService.channels$.pipe((0,b.U)(()=>!1),(0,w.K)(()=>(0,S.of)(!0)),(0,hi.O)(!1)),this.isInitializing$=this.channelService.channels$.pipe((0,b.U)(s=>!s),(0,w.K)(()=>(0,S.of)(!1))),this.isActiveThread$=this.channelService.activeParentMessageId$.pipe((0,b.U)(s=>!!s)),this.theme$=this.themeService.theme$,this.isActiveChannel$=this.channelService.activeChannel$.pipe((0,b.U)(s=>!!s))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel"]],ngContentSelectors:eu,decls:8,vars:13,consts:[["class","str-chat__container",4,"ngIf","ngIfElse"],["noChannel",""],[1,"str-chat__container"],[1,"str-chat__main-panel"],[4,"ngIf"],["class","str-chat__empty-channel",4,"ngIf"],["class","str-chat__loading-channel",4,"ngIf"],[1,"str-chat__empty-channel"],["icon","chat-bubble"],[1,"str-chat__empty-channel-text"],[1,"str-chat__empty-channel-notifications"],[1,"str-chat__loading-channel"],[1,"str-chat__loading-channel-header"],[1,"str-chat__loading-channel-header-avatar"],[1,"str-chat__loading-channel-header-end"],[1,"str-chat__loading-channel-header-name"],[1,"str-chat__loading-channel-header-info"],[1,"str-chat__loading-channel-message-list"],[1,"str-chat__loading-channel-message"],[1,"str-chat__loading-channel-message-avatar"],[1,"str-chat__loading-channel-message-end"],[1,"str-chat__loading-channel-message-sender"],[1,"str-chat__loading-channel-message-last-row"],[1,"str-chat__loading-channel-message-text"],[1,"str-chat__loading-channel-message-date"],[1,"str-chat__loading-channel-message-input-row"],[1,"str-chat__loading-channel-message-input"],[1,"str-chat__loading-channel-message-send"]],template:function(e,n){if(1&e&&(t.F$t(Xc),t.TgZ(0,"div"),t.ALo(1,"async"),t.YNc(2,Gc,5,3,"div",0),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.YNc(6,Kc,8,14,"ng-template",null,1,t.W1O),t.qZA()),2&e){const s=t.MAs(7);t.Gre("str-chat str-chat-channel messaging str-chat__channel str-chat__theme-",t.lcZ(1,5,n.theme$),""),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,7,n.isError$)&&!1===t.lcZ(4,9,n.isInitializing$)&&!0===t.lcZ(5,11,n.isActiveChannel$))("ngIfElse",s)}},dependencies:[rn,Un,Z.O5,Z.Ov,we.X$],encapsulation:2}),i})();const Rn=i=>{let a="";const e=i.map(r=>r.name||r.id).slice(0,5),n=i.length-e.length;return a=e.join(", "),n>0&&(a+=` +${n}`),a},ss=(i,a)=>{var e;if(null!==(e=i.data)&&void 0!==e&&e.name)return i.data.name;if(i.state.members&&Object.keys(i.state.members).length>0){const n=Object.values(i.state.members).map(s=>s.user||{id:s.user_id}).filter(s=>s.id!==a?.id);return Rn(n)}return i.id};let as=(()=>{class i{constructor(){this.isOpenSubject=new C.X(!1),this.isOpen$=this.isOpenSubject.asObservable().pipe((0,pi.x)()),this.isOpen$.pipe((0,Ut.h)(e=>e)).subscribe(()=>{this.watchForOutsideClicks()})}open(){this.isOpenSubject.next(!0)}close(){this.isOpenSubject.next(!1)}toggle(){this.isOpenSubject.getValue()?this.close():this.open()}setMenuElement(e){this.menuElement=e}channelSelected(){this.close()}watchForOutsideClicks(){if(!this.menuElement)return;const e=n=>{this.menuElement.contains(n.target)||(this.close(),window.removeEventListener("click",e))};window.addEventListener("click",e),this.isOpen$.pipe((0,Ut.h)(n=>!n),(0,bt.P)()).subscribe(()=>window.removeEventListener("click",e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Hh=(()=>{class i{constructor(e,n,s,r,o){this.channelService=e,this.channelListToggleService=n,this.customTemplatesService=s,this.cdRef=r,this.chatClientService=o,this.subscriptions=[],this.channelService.activeChannel$.subscribe(l=>{var c,u;this.activeChannel=l;const h=null===(u=null===(c=this.activeChannel)||void 0===c?void 0:c.data)||void 0===u?void 0:u.own_capabilities;h&&(this.canReceiveConnectEvents=-1!==h.indexOf("connect-events"))})}ngOnInit(){this.subscriptions.push(this.customTemplatesService.channelActionsTemplate$.subscribe(e=>{this.channelActionsTemplate=e,this.cdRef.detectChanges()})),this.subscriptions.push(this.customTemplatesService.channelHeaderInfoTemplate$.subscribe(e=>{this.channelHeaderInfoTemplate=e,this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}toggleMenu(e){e.stopPropagation(),this.channelListToggleService.toggle()}getChannelActionsContext(){return{channel:this.activeChannel}}getChannelInfoContext(){return{channel:this.activeChannel}}get memberCountParam(){var e,n;return{memberCount:(null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.member_count)||0}}get watcherCountParam(){var e,n;return{watcherCount:(null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.watcher_count)||0}}get displayText(){return this.activeChannel?ss(this.activeChannel,this.chatClientService.chatClient.user):""}get avatarName(){var e,n;return null===(n=null===(e=this.activeChannel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.name}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(as),t.Y36(qe),t.Y36(t.sBO),t.Y36(We))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-header"]],ngContentSelectors:In,decls:12,vars:8,consts:[[1,"str-chat__header-livestream","str-chat__channel-header"],[1,"str-chat__header-hamburger",3,"click","keyup.enter"],["icon","menu"],["type","channel","location","channel-header",3,"imageUrl","name","channel","size"],[1,"str-chat__header-livestream-left","str-chat__channel-header-end"],["data-testid","name",1,"str-chat__header-livestream-left--title","str-chat__channel-header-title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultChannelInfo",""],[4,"ngIf"],["data-testid","info",1,"str-chat__header-livestream-left--members","str-chat__channel-header-info"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(r){return n.toggleMenu(r)})("keyup.enter",function(r){return n.toggleMenu(r)}),t._UZ(2,"stream-icon-placeholder",2),t.qZA(),t.Hsn(3),t._UZ(4,"stream-avatar-placeholder",3),t.TgZ(5,"div",4)(6,"p",5),t._uU(7),t.qZA(),t.YNc(8,tu,1,0,"ng-container",6),t.YNc(9,nu,4,8,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(11,su,2,2,"ng-container",8),t.qZA()),2&e){const s=t.MAs(10);t.xp6(4),t.s9C("imageUrl",null==n.activeChannel||null==n.activeChannel.data?null:n.activeChannel.data.image),t.s9C("name",n.avatarName),t.Q6J("channel",n.activeChannel)("size",40),t.xp6(3),t.hij(" ",n.displayText," "),t.xp6(1),t.Q6J("ngTemplateOutlet",n.channelHeaderInfoTemplate||s)("ngTemplateOutletContext",n.getChannelInfoContext()),t.xp6(3),t.Q6J("ngIf",n.channelActionsTemplate)}},dependencies:[gt,St,Z.tP,Z.O5,we.X$],encapsulation:2}),i})(),qh=(()=>{class i{constructor(e,n,s){this.channelService=e,this.ngZone=n,this.chatClientService=s,this.isActive=!1,this.isUnread=!1,this.latestMessage="streamChat.Nothing yet...",this.subscriptions=[],this.canSendReadEvents=!0}ngOnInit(){var e,n,s,r;this.subscriptions.push(this.channelService.activeChannel$.subscribe(c=>{var u;return this.isActive=c?.id===(null===(u=this.channel)||void 0===u?void 0:u.id)}));const o=null===(n=null===(e=this.channel)||void 0===e?void 0:e.state)||void 0===n?void 0:n.latestMessages;o&&o.length>0&&this.setLatestMessage(o[o.length-1]),this.updateUnreadState();const l=(null===(r=null===(s=this.channel)||void 0===s?void 0:s.data)||void 0===r?void 0:r.own_capabilities)||[];this.canSendReadEvents=-1!==l.indexOf("read-events"),this.subscriptions.push(this.channel.on("message.new",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.updated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.deleted",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("channel.truncated",this.handleMessageEvent.bind(this))),this.subscriptions.push(this.channel.on("message.read",()=>this.ngZone.run(()=>{this.updateUnreadState()})))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get avatarImage(){var e,n;return null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.image}get avatarName(){var e,n;return null===(n=null===(e=this.channel)||void 0===e?void 0:e.data)||void 0===n?void 0:n.name}get title(){return this.channel?ss(this.channel,this.chatClientService.chatClient.user):""}setAsActiveChannel(){this.channelService.setAsActiveChannel(this.channel)}handleMessageEvent(e){this.ngZone.run(()=>{var n,s,r;0!==(null===(n=this.channel)||void 0===n?void 0:n.state.latestMessages.length)?!e.message||(null===(s=this.channel)||void 0===s?void 0:s.state.latestMessages[(null===(r=this.channel)||void 0===r?void 0:r.state.latestMessages.length)-1].id)!==e.message.id||(this.setLatestMessage(e.message),this.updateUnreadState()):this.latestMessage="streamChat.Nothing yet..."})}setLatestMessage(e){e?.deleted_at?this.latestMessage="streamChat.Message deleted":e?.text?this.latestMessage=it(e,this.channel,this.chatClientService.chatClient.user)||e.text:e?.attachments&&e.attachments.length&&(this.latestMessage="streamChat.\u{1f3d9} Attachment...")}updateUnreadState(){if(this.isActive||!this.canSendReadEvents)return this.unreadCount=0,void(this.isUnread=!1);this.unreadCount=this.channel.countUnread(),this.isUnread=!!this.unreadCount}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(t.R0b),t.Y36(We))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-preview"]],inputs:{channel:"channel"},decls:12,vars:15,consts:[["data-testid","channel-preview-container",1,"str-chat__channel-preview-messenger","str-chat__channel-preview",3,"click"],[1,"str-chat__channel-preview-messenger--left"],["type","channel","location","channel-preview",3,"name","imageUrl","channel","size"],[1,"str-chat__channel-preview-messenger--right","str-chat__channel-preview-end"],[1,"str-chat__channel-preview-end-first-row"],[1,"str-chat__channel-preview-messenger--name"],["data-testid","channel-preview-title"],["data-testid","unread-badge","class","str-chat__channel-preview-unread-badge",4,"ngIf"],["data-testid","latest-message",1,"str-chat__channel-preview-messenger--last-message"],["data-testid","unread-badge",1,"str-chat__channel-preview-unread-badge"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.setAsActiveChannel()}),t.TgZ(1,"div",1),t._UZ(2,"stream-avatar-placeholder",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),t._uU(7),t.qZA()(),t.YNc(8,au,2,1,"div",7),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&e&&(t.ekj("str-chat__channel-preview-messenger--active",n.isActive)("str-chat__channel-preview--active",n.isActive)("str-chat__channel-preview-messenger--unread",n.isUnread),t.xp6(2),t.s9C("name",n.avatarName),t.s9C("imageUrl",n.avatarImage),t.Q6J("channel",n.channel)("size",49),t.xp6(5),t.Oqu(n.title),t.xp6(1),t.Q6J("ngIf",n.unreadCount),t.xp6(2),t.hij(" ",t.lcZ(11,13,n.latestMessage)," "))},dependencies:[St,Z.O5,we.X$],encapsulation:2}),i})(),Yh=(()=>{class i{constructor(e,n,s,r){this.channelService=e,this.channelListToggleService=n,this.customTemplatesService=s,this.themeService=r,this.isLoadingMoreChannels=!1,this.subscriptions=[],this.theme$=this.themeService.theme$,this.isOpen$=this.channelListToggleService.isOpen$,this.channels$=this.channelService.channels$,this.hasMoreChannels$=this.channelService.hasMoreChannels$,this.isError$=this.channels$.pipe((0,b.U)(()=>!1),(0,w.K)(()=>(0,S.of)(!0)),(0,hi.O)(!1)),this.isInitializing$=this.channels$.pipe((0,b.U)(o=>!o),(0,w.K)(()=>(0,S.of)(!1))),this.subscriptions.push(this.customTemplatesService.channelPreviewTemplate$.subscribe(o=>this.customChannelPreviewTemplate=o))}ngAfterViewInit(){this.channelListToggleService.setMenuElement(this.container.nativeElement)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadMoreChannels(){return(0,D.mG)(this,void 0,void 0,function*(){this.isLoadingMoreChannels=!0,yield this.channelService.loadMoreChannels(),this.isLoadingMoreChannels=!1})}trackByChannelId(e,n){return n.cid}channelSelected(){this.channelListToggleService.channelSelected()}getChannelPreviewContext(e){return{channel:e}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(as),t.Y36(qe),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-channel-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(Yi,5),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first)}},ngContentSelectors:ku,decls:15,vars:15,consts:[["data-testid","channel-list-container",2,"max-width","unset"],["container",""],["class","str-chat__channel-list-messenger",4,"ngIf","ngIfElse"],["statusIndicator",""],["chatDown",""],["loadingChannels",""],["loadingChannel",""],[1,"str-chat__channel-list-messenger"],[1,"str-chat__channel-list-messenger__main"],["class","str-chat__channel-list-empty",4,"ngIf"],["class","str-chat__channel-list-empty-v1","data-testid","empty-channel-list-indicator",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","str-chat__load-more-button","data-testid","load-more",3,"click","keyup.enter",4,"ngIf"],[1,"str-chat__channel-list-empty"],["icon","chat-bubble"],["data-testid","empty-channel-list-indicator"],["data-testid","empty-channel-list-indicator",1,"str-chat__channel-list-empty-v1"],["defaultTemplate",""],[3,"click","keyup.enter"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-testclass","channel-preview",3,"channel"],["data-testid","load-more",1,"str-chat__load-more-button",3,"click","keyup.enter"],["data-testid","load-more-button",1,"str-chat__load-more-button__button","str-chat__cta-button",3,"disabled"],[4,"ngIf","ngIfElse"],["loadingIndicator",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","chatdown-container",1,"str-chat__down"],[1,"str-chat__down-main"],["icon","connection-error"],["data-testid","loading-indicator",1,"str-chat__loading-channels"],[1,"str-chat__loading-channels-item","str-chat__channel-preview-loading"],[1,"str-chat__loading-channels-avatar"],[1,"str-chat__loading-channels-meta","str-chat__channel-preview-end-loading"],[1,"str-chat__loading-channels-username"],[1,"str-chat__loading-channels-status"]],template:function(e,n){if(1&e&&(t.F$t(Su),t.TgZ(0,"div",0,1),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,gu,12,13,"div",2),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA(),t.YNc(7,Cu,4,6,"ng-template",null,3,t.W1O),t.YNc(9,bu,10,7,"ng-template",null,4,t.W1O),t.YNc(11,xu,4,3,"ng-template",null,5,t.W1O),t.YNc(13,Mu,5,0,"ng-template",null,6,t.W1O)),2&e){const s=t.MAs(8);t.Gre("str-chat str-chat__channel-list str-chat-channel-list messaging str-chat__theme-",t.lcZ(2,7,n.theme$),""),t.ekj("str-chat-channel-list--open",!0===t.lcZ(3,9,n.isOpen$)),t.xp6(4),t.Q6J("ngIf",!1===t.lcZ(5,11,n.isError$)&&!1===t.lcZ(6,13,n.isInitializing$))("ngIfElse",s)}},dependencies:[rn,qh,Ln,gt,Z.O5,Z.sg,Z.tP,Z.Ov,we.X$],encapsulation:2}),i})();gi().extend(Ba());const Qh={like:"\u{1f44d}",angry:"\u{1f620}",love:"\u2764\ufe0f",haha:"\u{1f602}",wow:"\u{1f62e}",sad:"\u{1f61e}"};let Vh=(()=>{class i{constructor(e,n){this.cdRef=e,this.channelService=n,this.messageReactionCounts={},this.isSelectorOpen=!1,this.latestReactions=[],this.ownReactions=[],this.isSelectorOpenChange=new t.vpe,this.popperTriggerHover=Re.hover,this.popperPlacementAuto=pt.AUTO,this.eventHandler=s=>{var r;null!==(r=this.selectorContainer)&&void 0!==r&&r.nativeElement.contains(s.target)||this.isSelectorOpenChange.emit(!1)}}ngOnChanges(e){e.isSelectorOpen&&(this.isSelectorOpen?setTimeout(()=>this.watchForOutsideClicks()):this.stopWatchForOutsideClicks())}ngAfterViewChecked(){this.tooltipText&&!this.tooltipPositions&&(this.setTooltipPosition(),this.cdRef.detectChanges())}get existingReactions(){return Object.keys(this.messageReactionCounts).filter(e=>this.messageReactionCounts[e]>0)}get reactionsCount(){return Object.values(this.messageReactionCounts).reduce((e,n)=>e+n,0)}get reactionOptions(){return["like","love","haha","wow","sad","angry"]}getLatestUserByReaction(e){var n;return null===(n=this.latestReactions.find(s=>s.type===e&&s.user))||void 0===n?void 0:n.user}getEmojiByReaction(e){return Qh[e]}getUsersByReaction(e){return this.latestReactions.filter(n=>n.type===e).map(n=>{var s,r;return(null===(s=n.user)||void 0===s?void 0:s.name)||(null===(r=n.user)||void 0===r?void 0:r.id)}).filter(n=>!!n).join(", ")}showTooltip(e,n){this.currentTooltipTarget=e.target,this.tooltipText=this.getUsersByReaction(n)}hideTooltip(){this.tooltipText=void 0,this.currentTooltipTarget=void 0,this.tooltipPositions=void 0}trackByMessageReaction(e,n){return n}react(e){this.ownReactions.find(n=>n.type===e)?this.channelService.removeReaction(this.messageId,e):this.channelService.addReaction(this.messageId,e)}isOwnReaction(e){return!!this.ownReactions.find(n=>n.type===e)}watchForOutsideClicks(){window.addEventListener("click",this.eventHandler)}stopWatchForOutsideClicks(){window.removeEventListener("click",this.eventHandler)}setTooltipPosition(){var e,n,s;const r=null===(e=this.selectorTooltip)||void 0===e?void 0:e.nativeElement.getBoundingClientRect(),o=null===(n=this.currentTooltipTarget)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(s=this.selectorContainer)||void 0===s?void 0:s.nativeElement.getBoundingClientRect();if(!r||!o||!l)return;const c=r.width===l.width||r.x<l.x?0:o.left+o.width/2-l.left-r.width/2;this.tooltipPositions={tooltip:c,arrow:o.x-r.x+o.width/2-c}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(Be))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-reactions"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Au,5),t.Gf(Fu,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.selectorContainer=s.first),t.iGM(s=t.CRH())&&(n.selectorTooltip=s.first)}},inputs:{messageId:"messageId",messageReactionCounts:"messageReactionCounts",isSelectorOpen:"isSelectorOpen",latestReactions:"latestReactions",ownReactions:"ownReactions"},outputs:{isSelectorOpenChange:"isSelectorOpenChange"},features:[t.TTD],decls:2,vars:2,consts:[["class","str-chat__reaction-list str-chat__message-reactions-container","data-testid","reaction-list",3,"str-chat__reaction-list--reverse","str-chat__reaction-list-hidden",4,"ngIf"],["class","str-chat__reaction-selector str-chat__message-reaction-selector","data-testid","reaction-selector",4,"ngIf"],["data-testid","reaction-list",1,"str-chat__reaction-list","str-chat__message-reactions-container"],[1,"str-chat__message-reactions"],["class","str-chat__message-reaction","data-testclass","emoji",3,"str-chat__message-reaction-own","popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","reactions-count",1,"str-chat__reaction-list--counter"],["data-testclass","emoji",1,"str-chat__message-reaction",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["popperContent",""],["data-testclass","tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],[1,"emoji","str-chat__message-reaction-emoji"],["data-testclass","reaction-list-reaction-count",1,"str-chat__message-reaction-count"],["data-testid","reaction-selector",1,"str-chat__reaction-selector","str-chat__message-reaction-selector"],["selectorContainer",""],["data-testid","tooltip","class","str-chat__reaction-selector-tooltip",3,"ngStyle",4,"ngIf"],[1,"str-chat__message-reactions-list","str-chat__message-reactions-options"],["class","\n        str-chat__message-reactions-option\n        str-chat__message-reactions-list-item\n        str-chat__emoji\n      ","data-testclass","emoji-option",3,"str-chat__message-reactions-option-selected","click","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","tooltip",1,"str-chat__reaction-selector-tooltip",3,"ngStyle"],["selectorTooltip",""],[1,"arrow",3,"ngStyle"],[1,"latest-user-username"],["data-testclass","emoji-option",1,"str-chat__message-reactions-option","str-chat__message-reactions-list-item","str-chat__emoji",3,"click","keyup.enter"],["class","latest-user str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave",4,"ngIf"],[1,"emoji","str-chat__emoji-selector-emoji-angular","str-chat__message-reaction-emoji"],["class","str-chat__message-reactions-list-item__count",4,"ngIf"],[1,"latest-user","str-chat__message-reactions-last-user",3,"click","keyup.enter","mouseenter","mouseleave"],[3,"imageUrl","name","size"],[1,"str-chat__message-reactions-list-item__count"]],template:function(e,n){1&e&&(t.YNc(0,Ou,6,7,"div",0),t.YNc(1,Pu,5,3,"div",1)),2&e&&(t.Q6J("ngIf",n.existingReactions.length>0),t.xp6(1),t.Q6J("ngIf",n.isSelectorOpen))},dependencies:[An,St,Z.O5,Z.sg,ke,Z.PC],styles:[".emoji[_ngcontent-%COMP%] {position: relative; display: inline-block; }"]}),i})(),Gh=(()=>{class i{constructor(e,n,s,r,o){this.chatClientService=e,this.channelService=n,this.customTemplatesService=s,this.cdRef=r,this.enabledMessageActions=[],this.mode="main",this.isHighlighted=!1,this.isActionBoxOpen=!1,this.isReactionSelectorOpen=!1,this.visibleMessageActionsCount=0,this.messageTextParts=[],this.popperTriggerClick=Re.click,this.popperTriggerHover=Re.hover,this.popperPlacementAuto=pt.AUTO,this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.imageAttachmentModalState="closed",this.subscriptions=[],this.themeVersion=o.themeVersion}ngOnInit(){this.subscriptions.push(this.chatClientService.user$.subscribe(e=>{this.user=e})),this.subscriptions.push(this.customTemplatesService.mentionTemplate$.subscribe(e=>this.mentionTemplate=e)),this.subscriptions.push(this.customTemplatesService.attachmentListTemplate$.subscribe(e=>this.attachmentListTemplate=e)),this.subscriptions.push(this.customTemplatesService.messageActionsBoxTemplate$.subscribe(e=>this.messageActionsBoxTemplate=e)),this.subscriptions.push(this.customTemplatesService.messageReactionsTemplate$.subscribe(e=>this.messageReactionsTemplate=e)),this.subscriptions.push(this.customTemplatesService.deliveredStatusTemplate$.subscribe(e=>this.customDeliveredStatusTemplate=e)),this.subscriptions.push(this.customTemplatesService.sendingStatusTemplate$.subscribe(e=>this.customSendingStatusTemplate=e)),this.subscriptions.push(this.customTemplatesService.readStatusTemplate$.subscribe(e=>this.customReadStatusTemplate=e))}ngOnChanges(e){var n,s;if(e.message){this.shouldDisplayTranslationNotice=!1,this.displayedMessageTextContent="original",this.createMessageParts();const r=null===(s=null===(n=this.message)||void 0===n?void 0:n.quoted_message)||void 0===s?void 0:s.attachments;this.quotedMessageAttachments=r&&r.length?[r[0]]:[]}e.enabledMessageActions&&(this.canReactToMessage=-1!==this.enabledMessageActions.indexOf("send-reaction"),this.canReceiveReadEvents=-1!==this.enabledMessageActions.indexOf("read-events"))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get shouldDisplayThreadLink(){var e;return!(null===(e=this.message)||void 0===e||!e.reply_count)&&"thread"!==this.mode&&-1!==this.enabledMessageActions.indexOf("send-reply")}get isSentByCurrentUser(){var e,n,s;return(null===(n=null===(e=this.message)||void 0===e?void 0:e.user)||void 0===n?void 0:n.id)===(null===(s=this.user)||void 0===s?void 0:s.id)}get readByText(){return Rn(this.message.readBy)}get lastReadUser(){var e;return null===(e=this.message)||void 0===e?void 0:e.readBy.filter(n=>{var s;return n.id!==(null===(s=this.user)||void 0===s?void 0:s.id)})[0]}get isOnlyReadByMe(){return this.message&&0===this.message.readBy.length}get isReadByMultipleUsers(){return this.message&&this.message.readBy.length>1}get isMessageDeliveredAndRead(){return this.message&&this.message.readBy&&"received"===this.message.status&&this.message.readBy.length>0}get parsedDate(){var e;if(this.message&&null!==(e=this.message)&&void 0!==e&&e.created_at)return(i=>gi()(i).calendar())(this.message.created_at)}get areOptionsVisible(){return!!this.message&&!(!this.message.type||"error"===this.message.type||"system"===this.message.type||"ephemeral"===this.message.type||"failed"===this.message.status||"sending"===this.message.status||"thread"===this.mode&&!this.message.parent_id)}get hasAttachment(){var e;return!(null===(e=this.message)||void 0===e||!e.attachments||!this.message.attachments.length)}get hasReactions(){var e;return!(null===(e=this.message)||void 0===e||!e.reaction_counts)&&Object.keys(this.message.reaction_counts).length>0}get replyCountParam(){var e;return{replyCount:null===(e=this.message)||void 0===e?void 0:e.reply_count}}get canDisplayReadStatus(){return!1!==this.canReceiveReadEvents&&-1!==this.enabledMessageActions.indexOf("read-events")}getAttachmentListContext(){var e,n,s;return{messageId:(null===(e=this.message)||void 0===e?void 0:e.id)||"",attachments:(null===(n=this.message)||void 0===n?void 0:n.attachments)||[],parentMessageId:null===(s=this.message)||void 0===s?void 0:s.parent_id,imageModalStateChangeHandler:r=>this.imageAttachmentModalState=r}}getQuotedMessageAttachmentListContext(){var e,n,s,r;return{messageId:(null===(n=null===(e=this.message)||void 0===e?void 0:e.quoted_message)||void 0===n?void 0:n.id)||"",attachments:this.quotedMessageAttachments,parentMessageId:null===(r=null===(s=null==this?void 0:this.message)||void 0===s?void 0:s.quoted_message)||void 0===r?void 0:r.parent_id}}getMessageReactionsContext(){var e,n,s,r;return{messageReactionCounts:(null===(e=this.message)||void 0===e?void 0:e.reaction_counts)||{},latestReactions:(null===(n=this.message)||void 0===n?void 0:n.latest_reactions)||[],isSelectorOpen:this.isReactionSelectorOpen,isSelectorOpenChangeHandler:o=>this.isReactionSelectorOpen=o,messageId:null===(s=this.message)||void 0===s?void 0:s.id,ownReactions:(null===(r=this.message)||void 0===r?void 0:r.own_reactions)||[]}}resendMessage(){this.channelService.resendMessage(this.message)}setAsActiveParentMessage(){this.channelService.setAsActiveParentMessage(this.message)}getMentionContext(e){return{content:e.content,user:e.user}}getMessageActionsBoxContext(){return{isOpen:this.isActionBoxOpen,isMine:this.isSentByCurrentUser,enabledActions:this.enabledMessageActions,message:this.message,displayedActionsCountChaneHanler:e=>{this.visibleMessageActionsCount=e,this.cdRef.detectChanges()},isEditingChangeHandler:e=>{this.isEditing=e,this.isActionBoxOpen=!this.isEditing}}}getDeliveredStatusContext(){return{message:this.message}}getSendingStatusContext(){return{message:this.message}}getReadStatusContext(){return{message:this.message,readByText:this.readByText}}jumpToMessage(e,n){this.channelService.jumpToMessage(e,n)}displayTranslatedMessage(){this.createMessageParts(!0)}displayOriginalMessage(){this.createMessageParts(!1)}createMessageParts(e=!0){let n=this.getMessageContent(e);if(n){let s=!1;if(n.startsWith("<p>")&&(n=n.replace("<p>",""),s=!0),n.endsWith("</p>\n")&&(n=n.replace("</p>\n",""),s=!0),this.message.mentioned_users&&0!==this.message.mentioned_users.length){this.messageTextParts=[];let r=n;this.message.mentioned_users.forEach(o=>{const l=`@${o.name||o.id}`;let c=r.substring(0,r.indexOf(l));c=this.fixEmojiDisplay(c),s||(c=this.wrapLinskWithAnchorTag(c)),this.messageTextParts.push({content:c,type:"text"}),this.messageTextParts.push({content:l,type:"mention",user:o}),r=r.replace(c+l,"")}),r&&(r=this.fixEmojiDisplay(r),s||(r=this.wrapLinskWithAnchorTag(r)),this.messageTextParts.push({content:r,type:"text"}))}else n=this.fixEmojiDisplay(n),s||(n=this.wrapLinskWithAnchorTag(n)),this.messageTextParts=[{content:n,type:"text"}]}else this.messageTextParts=[]}getMessageContent(e){var n,s,r;const o=(null===(n=this.message)||void 0===n?void 0:n.html)||(null===(s=this.message)||void 0===s?void 0:s.text);if(e){const l=null===(r=this.message)||void 0===r?void 0:r.translation;return l&&(this.shouldDisplayTranslationNotice=!0,this.displayedMessageTextContent="translation"),l||o}return this.displayedMessageTextContent="original",o}fixEmojiDisplay(e){const n=new RegExp(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,"g"),s=!!window.chrome&&typeof window.opr>"u";return e.replace(n,r=>`<span ${s?'class="str-chat__emoji-display-fix"':""}>${r}</span>`)}wrapLinskWithAnchorTag(e){return e.replace(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[A-Z0-9+&@#/%=~_|$])/gim,s=>`<a href="${s}" rel="nofollow">${s}</a>`)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(We),t.Y36(Be),t.Y36(qe),t.Y36(t.sBO),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message"]],viewQuery:function(e,n){if(1&e&&t.Gf(Yi,5),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first)}},inputs:{message:"message",enabledMessageActions:"enabledMessageActions",isLastSentMessage:"isLastSentMessage",mode:"mode",isHighlighted:"isHighlighted"},features:[t.TTD],decls:17,vars:23,consts:[["data-testid","message-container",3,"mouseleave"],["container",""],[4,"ngIf","ngIfElse"],["deletedMessage",""],["systemMessage",""],["quotedMessage",""],["messageDateAndSender",""],["messageStatus",""],["replyCountButton",""],["attachmentsTemplate",""],[4,"ngIf"],["data-testid","avatar","type","user","location","message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","user"],[1,"str-chat__message-inner"],["class","str-chat__message-simple__actions str-chat__message-options","data-testid","message-options",3,"str-chat__message-edit-in-progress",4,"ngIf"],[1,"str-chat__message-reactions-host"],["defaultMessageReactions",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__message-bubble"],["class","str-chat__message-text","tabindex","0",4,"ngIf"],["class","str-chat__message-error-icon","icon","error",4,"ngIf"],[4,"ngTemplateOutlet"],["data-testid","message-options",1,"str-chat__message-simple__actions","str-chat__message-options"],["data-testid","message-actions-container",1,"str-chat__message-actions-container","str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--options",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","popperHideOnMouseLeave"],["messageActionsToggle",""],["popperContent",""],["defaultMessageActionsBox",""],["class","str-chat__message-actions-box-button","data-testid","action-icon",3,"click","keyup.enter",4,"ngIf"],["class","\n              str-chat__message-simple__actions__action\n              str-chat__message-simple__actions__action--thread\n              str-chat__message-reply-in-thread-button\n            ","data-testid","reply-in-thread",3,"click","keyup.enter",4,"ngIf"],["class","\n              str-chat__message-simple__actions__action\n              str-chat__message-simple__actions__action--reactions\n              str-chat__message-reactions-button\n            ","data-testid","reaction-icon",3,"click","keyup.enter",4,"ngIf"],[3,"isOpen","isMine","enabledActions","message","displayedActionsCount","isEditing"],["data-testid","action-icon",1,"str-chat__message-actions-box-button",3,"click","keyup.enter"],["icon","action-icon",1,"str-chat__message-action-icon"],["data-testid","reply-in-thread",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--thread","str-chat__message-reply-in-thread-button",3,"click","keyup.enter"],["icon","reply-in-thread",1,"str-chat__message-action-icon"],["data-testid","reaction-icon",1,"str-chat__message-simple__actions__action","str-chat__message-simple__actions__action--reactions","str-chat__message-reactions-button",3,"click","keyup.enter"],["icon","reaction-icon",1,"str-chat__message-action-icon"],[3,"messageReactionCounts","latestReactions","isSelectorOpen","messageId","ownReactions","isSelectorOpenChange"],["tabindex","0",1,"str-chat__message-text"],["data-testid","inner-message",1,"str-chat__message-text-inner","str-chat__message-simple-text-inner",3,"click","keyup.enter"],["data-testid","client-error-message","class","\n                  str-chat__simple-message--error-message\n                  str-chat__message--error-message\n                ",4,"ngIf"],["data-testid","error-message","class","\n                  str-chat__simple-message--error-message\n                  str-chat__message--error-message\n                ",4,"ngIf"],["data-testid","text"],[4,"ngFor","ngForOf"],["data-testid","client-error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],["data-testid","error-message",1,"str-chat__simple-message--error-message","str-chat__message--error-message"],[3,"innerHTML",4,"ngIf","ngIfElse"],["mention",""],[3,"innerHTML"],["defaultMention",""],[1,"str-chat__message-mention"],["icon","error",1,"str-chat__message-error-icon"],["data-testid","message-deleted-component"],["translate","",1,"str-chat__message--deleted-inner"],["data-testid","system-message",1,"str-chat__message--system"],[1,"str-chat__message--system__text"],[1,"str-chat__message--system__line"],[1,"str-chat__message--system__date"],["class","quoted-message str-chat__quoted-message-preview","data-testid","quoted-message-container",3,"mine","click","keyup.enter",4,"ngIf"],["data-testid","quoted-message-container",1,"quoted-message","str-chat__quoted-message-preview",3,"click","keyup.enter"],["data-testid","qouted-message-avatar","type","user","location","quoted-message-sender",1,"str-chat-angular__avatar-host","str-chat__message-sender-avatar",3,"imageUrl","name","size","user"],[1,"quoted-message-inner","str-chat__quoted-message-bubble"],["data-testid","quoted-message-text",3,"innerHTML"],["defaultAttachments",""],[3,"messageId","attachments","parentMessageId","imageModalStateChange"],["class","str-chat__translation-notice","data-testid","translation-notice",4,"ngIf"],[1,"str-chat__message-data","str-chat__message-simple-data","str-chat__message-metadata"],["data-testid","sender","class","str-chat__message-simple-name str-chat__message-sender-name",4,"ngIf"],["data-testid","date",1,"str-chat__message-simple-timestamp"],["data-testid","translation-notice",1,"str-chat__translation-notice"],["data-testid","see-original","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-translation","translate","",3,"click","keyup.enter",4,"ngIf"],["data-testid","see-original","translate","",3,"click","keyup.enter"],["data-testid","see-translation","translate","",3,"click","keyup.enter"],["data-testid","sender",1,"str-chat__message-simple-name","str-chat__message-sender-name"],["sentStatus",""],["deliveredStatus",""],["defaultDeliveredStatus",""],["sendingStatus",""],["defaultSendingStatus",""],["readStatus",""],["defaultReadStatus",""],["class","\n          str-chat__message-simple-status\n          str-chat__message-simple-status-angular\n          str-chat__message-status\n        ","data-testid","delivered-indicator","tabindex","0",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover",4,"ngIf"],["data-testid","delivered-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],[1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-testid","delivered-icon","icon","delivered-icon"],["data-testid","sending-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["data-testid","loading-indicator"],["data-testid","read-indicator","tabindex","0",1,"str-chat__message-simple-status","str-chat__message-simple-status-angular","str-chat__message-status",3,"popper","popperTrigger","popperPlacement","popperHideOnScroll","popperHideOnClickOutside","hover"],["data-testid","read-by-tooltip",1,"str-chat__tooltip","str-chat__tooltip-angular"],["data-test-id","last-read-user-avatar","type","user","location","message-reader",1,"str-chat-angular__avatar-host",3,"size","imageUrl","name","user"],["data-test-id","read-by-length","class","str-chat__message-simple-status-number",4,"ngIf"],["data-test-id","read-by-length",1,"str-chat__message-simple-status-number"],["class","\n      str-chat__message-simple-reply-button\n      str-chat__message-replies-count-button-wrapper\n    ",4,"ngIf"],[1,"str-chat__message-simple-reply-button","str-chat__message-replies-count-button-wrapper"],["class","str-chat__message-replies-count-button","data-testid","reply-count-button",3,"click",4,"ngIf"],["data-testid","reply-count-button",1,"str-chat__message-replies-count-button",3,"click"],["stream-icon-placeholder","","icon","reply",4,"ngIf"],["stream-icon-placeholder","","icon","reply"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1),t.NdJ("mouseleave",function(){return n.isActionBoxOpen=!1}),t.YNc(2,_d,2,2,"ng-container",2),t.qZA(),t.YNc(3,vd,3,0,"ng-template",null,3,t.W1O),t.YNc(5,Cd,8,2,"ng-template",null,4,t.W1O),t.YNc(7,Td,1,1,"ng-template",null,5,t.W1O),t.YNc(9,Od,1,1,"ng-template",null,6,t.W1O),t.YNc(11,zd,1,1,"ng-template",null,7,t.W1O),t.YNc(13,eh,1,1,"ng-template",null,8,t.W1O),t.YNc(15,ih,3,2,"ng-template",null,9,t.W1O)),2&e){const s=t.MAs(4);t.IyS("str-chat__message-simple str-chat__message str-chat__message--",null==n.message?null:n.message.type," str-chat__message--",null==n.message?null:n.message.status," ",null!=n.message&&n.message.text?"str-chat__message--has-text":"has-no-text",""),t.ekj("str-chat__message--me",n.isSentByCurrentUser)("str-chat__message--other",!n.isSentByCurrentUser)("str-chat__message-simple--me",n.isSentByCurrentUser)("str-chat__message--has-attachment",n.hasAttachment)("str-chat__message--with-reactions",n.hasReactions)("str-chat__message--highlighted",n.isHighlighted)("str-chat__message-with-thread-link",n.shouldDisplayThreadLink)("str-chat__message-send-can-be-retried","failed"===(null==n.message?null:n.message.status)&&403!==(null==n.message?null:n.message.errorStatusCode)),t.xp6(2),t.Q6J("ngIf",!(null!=n.message&&n.message.deleted_at))("ngIfElse",s)}},dependencies:[St,An,jh,gt,Vh,ns,Ln,Z.O5,Z.tP,ke,Z.sg,we.Pi,we.X$],encapsulation:2}),i})(),zh=(()=>{class i{constructor(){}transliterate(e){return function eo(i,a){if("string"!=typeof i)throw new TypeError(`Expected a string, got \`${typeof i}\``);a=Fn({customReplacements:[]},a);const e=new Map([...Xr,...a.customReplacements]);return i=((n,s)=>{for(const[r,o]of s)n=n.replace(new RegExp(Kr(r),"g"),o);return n})(i=i.normalize(),e),zr(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wh=(()=>{class i{constructor(e,n,s,r,o,l){this.channelService=e,this.chatClientService=n,this.transliterationService=s,this.emojiInputService=r,this.customTemplatesService=o,this.themeService=l,this.class="str-chat__textarea str-chat__message-textarea-angular-host",this.value="",this.placeholder="",this.areMentionsEnabled=!0,this.mentionScope="channel",this.valueChange=new t.vpe,this.send=new t.vpe,this.userMentions=new t.vpe,this.autocompleteKey="autocompleteLabel",this.mentionTriggerChar="@",this.commandTriggerChar="/",this.autocompleteConfig={mentions:[]},this.subscriptions=[],this.mentionedUsers=[],this.userMentionConfig={triggerChar:this.mentionTriggerChar,dropUp:!0,labelKey:this.autocompleteKey,returnTrigger:!0,mentionFilter:(c,u)=>this.filter(c,u),mentionSelect:(c,u)=>this.itemSelectedFromAutocompleteList(c,u)},this.slashCommandConfig={triggerChar:this.commandTriggerChar,dropUp:!0,labelKey:"name",returnTrigger:!0,mentionFilter:(c,u)=>this.filter(c,u),mentionSelect:(c,u)=>this.itemSelectedFromAutocompleteList(c,u)},this.searchTerm$=new C.X(""),this.searchTerm$.pipe((0,xa.b)(300),(0,pi.x)()).subscribe(c=>{c.startsWith(this.mentionTriggerChar)&&this.updateMentionOptions(c)}),this.subscriptions.push(this.channelService.activeChannel$.subscribe(c=>{var u;const h=(null===(u=c?.getConfig())||void 0===u?void 0:u.commands)||[];this.slashCommandConfig.items=h.map(m=>Object.assign(Object.assign({},m),{[this.autocompleteKey]:m.name,type:"command"})),this.mentionedUsers=[],this.userMentions.next([...this.mentionedUsers]),this.updateMentionOptions(this.searchTerm$.getValue())})),this.subscriptions.push(this.emojiInputService.emojiInput$.subscribe(c=>{this.messageInput.nativeElement.focus();const{selectionStart:u}=this.messageInput.nativeElement;this.messageInput.nativeElement.setRangeText(c),this.messageInput.nativeElement.selectionStart=u+c.length,this.messageInput.nativeElement.selectionEnd=u+c.length,this.inputChanged()})),this.subscriptions.push(this.customTemplatesService.mentionAutocompleteItemTemplate$.subscribe(c=>this.mentionAutocompleteItemTemplate=c)),this.subscriptions.push(this.customTemplatesService.commandAutocompleteItemTemplate$.subscribe(c=>this.commandAutocompleteItemTemplate=c)),this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.themeVersion=this.themeService.themeVersion}ngOnChanges(e){e.areMentionsEnabled&&(this.areMentionsEnabled?(this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)):(this.autocompleteConfig.mentions=[this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig))),e.mentionScope&&this.updateMentionOptions(this.searchTerm$.getValue()),e.value&&!this.value&&this.messageInput&&(this.messageInput.nativeElement.style.height="auto")}ngAfterViewInit(){this.messageInput.nativeElement.scrollHeight>0&&this.adjustTextareaHeight()}filter(e,n){return n.filter(s=>this.transliterate(s.autocompleteLabel.toLowerCase()).includes(this.transliterate(e.toLowerCase())))}itemSelectedFromAutocompleteList(e,n=""){return n===this.mentionTriggerChar&&(this.mentionedUsers.push(e.user?e.user:e),this.userMentions.next([...this.mentionedUsers])),n+e.autocompleteLabel+(n===this.commandTriggerChar?" ":"")}autcompleteSearchTermChanged(e){e===this.mentionTriggerChar?this.updateMentionOptions():this.searchTerm$.next(e)}inputChanged(){this.valueChange.emit(this.messageInput.nativeElement.value),this.adjustTextareaHeight()}inputLeft(){this.updateMentionedUsersFromText()}enterHit(e){"desktop"===this.inputMode&&(e.preventDefault(),this.updateMentionedUsersFromText(),this.send.next())}adjustTextareaHeight(){"2"===this.themeVersion&&(this.messageInput.nativeElement.style.height="",this.messageInput.nativeElement.style.height=`${this.messageInput.nativeElement.scrollHeight}px`)}transliterate(e){return this.transliterationService?this.transliterationService.transliterate(e):e}updateMentionOptions(e){return(0,D.mG)(this,void 0,void 0,function*(){if(!this.areMentionsEnabled)return;e=e?.replace(this.mentionTriggerChar,"");const s=yield("application"===this.mentionScope?o=>this.chatClientService.autocompleteUsers(o):o=>this.channelService.autocompleteMembers(o))(e||""),r=this.filter(e||"",s.map(o=>{const l=o.user?o.user:o;return Object.assign(Object.assign({},o),{autocompleteLabel:l.name||l.id,type:"mention"})}));this.userMentionConfig.items=r,this.autocompleteConfig.mentions=[this.userMentionConfig,this.slashCommandConfig],this.autocompleteConfig=Object.assign({},this.autocompleteConfig)})}updateMentionedUsersFromText(){const e=[];this.mentionedUsers.forEach(n=>{this.value.includes(`${this.mentionTriggerChar}${n.name||n.id}`)&&e.push(n)}),e.length!==this.mentionedUsers.length&&(this.userMentions.next([...e]),this.mentionedUsers=e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(We),t.Y36(zh),t.Y36(Zn),t.Y36(qe),t.Y36(st))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-autocomplete-textarea"]],viewQuery:function(e,n){if(1&e&&t.Gf(sh,5),2&e){let s;t.iGM(s=t.CRH())&&(n.messageInput=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{value:"value",placeholder:"placeholder",areMentionsEnabled:"areMentionsEnabled",inputMode:"inputMode",mentionScope:"mentionScope"},outputs:{valueChange:"valueChange",send:"send",userMentions:"userMentions"},features:[t.TTD],decls:9,vars:6,consts:[["autofocus","","data-testid","textarea","rows","1",1,"rta__textarea","str-chat__textarea__textarea","str-chat__angular-textarea","str-chat__message-textarea",3,"value","placeholder","mentionConfig","mentionListTemplate","input","keydown.enter","searchTerm","blur"],["input",""],["autocompleteItem",""],["defaultCommandTemplate",""],["defaultMentionTemplate",""],[1,"rta","rta__item","str-chat__emojisearch__item",3,"ngSwitch"],["class","rta__entity",4,"ngSwitchCase"],[1,"rta__entity"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__slash-command"],[1,"str-chat__slash-command-header"],["data-testclass","command-name",1,"str-chat__slash-command-name"],[1,"str-chat__slash-command-args"],[1,"str-chat__user-item"],["data-testclass","avatar","type","user","location","autocomplete-item",1,"str-chat__avatar","str-chat__avatar--circle",3,"size","imageUrl","name","user"],["data-testclass","username",1,"str-chat__user-item--name"],["class","str-chat__user-item-at",4,"ngIf"],[1,"str-chat__user-item-at"]],template:function(e,n){if(1&e&&(t.TgZ(0,"textarea",0,1),t.NdJ("input",function(){return n.inputChanged()})("keydown.enter",function(r){return n.enterHit(r)})("searchTerm",function(r){return n.autcompleteSearchTermChanged(r)})("blur",function(){return n.inputLeft()}),t.ALo(2,"translate"),t.qZA(),t.YNc(3,ch,3,3,"ng-template",null,2,t.W1O),t.YNc(5,uh,7,3,"ng-template",null,3,t.W1O),t.YNc(7,hh,5,8,"ng-template",null,4,t.W1O)),2&e){const s=t.MAs(4);t.s9C("placeholder",t.lcZ(2,4,n.placeholder)),t.Q6J("value",n.value||"")("mentionConfig",n.autocompleteConfig)("mentionListTemplate",s)}},dependencies:[St,yo,Z.RF,Z.n9,Z.tP,Z.O5,we.X$],encapsulation:2}),i})();const rs=(i,a)=>i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()&&i.getDate()===a.getDate();let Xh=(()=>{class i{constructor(e,n,s){this.channelService=e,this.chatClientService=n,this.customTemplatesService=s,this.mode="main",this.direction="bottom-to-top",this.messageOptionsTrigger="message-row",this.enabledMessageActions=[],this.class="str-chat-angular__main-panel-inner str-chat-angular__message-list-host str-chat__main-panel-inner",this.unreadMessageCount=0,this.groupStyles=[],this.isLoading=!1,this.subscriptions=[],this.isLatestMessageInList=!0,this.subscriptions.push(this.channelService.activeChannel$.subscribe(r=>{var o,l;this.resetScrollState();const c=null===(o=r?.data)||void 0===o?void 0:o.own_capabilities;c&&(this.enabledMessageActions=c),null===(l=this.newMessageSubscription)||void 0===l||l.unsubscribe(),r&&(this.newMessageSubscription=r.on("message.new",u=>{!u.message||r.state.messages===r.state.latestMessages||"thread"===this.mode||this.newMessageReceived({id:u.message.id,user:u.message.user,created_at:new Date(u.message.created_at||"")})}))})),this.subscriptions.push(this.channelService.activeParentMessage$.subscribe(r=>{r&&this.parentMessage&&r.id!==this.parentMessage.id&&"thread"===this.mode&&this.resetScrollState(),this.parentMessage=r})),this.subscriptions.push(this.customTemplatesService.messageTemplate$.subscribe(r=>this.messageTemplate=r)),this.subscriptions.push(this.customTemplatesService.typingIndicatorTemplate$.subscribe(r=>this.typingIndicatorTemplate=r)),this.usersTypingInChannel$=this.channelService.usersTypingInChannel$,this.usersTypingInThread$=this.channelService.usersTypingInThread$}ngOnInit(){this.setMessages$()}ngOnChanges(e){var n;(e.mode||e.direction)&&this.setMessages$(),e.direction&&null!==(n=this.scrollContainer)&&void 0!==n&&n.nativeElement&&this.jumpToLatestMessage()}ngAfterViewInit(){this.subscriptions.push(this.channelService.jumpToMessage$.pipe((0,Ut.h)(e=>!!e.id)).subscribe(e=>{let n;"main"===this.mode?n=e.parentId||e.id:e.parentId&&(n=e.id),n&&("latest"===n?this.scrollToLatestMessage():(this.scrollMessageIntoView(n),this.highlightedMessageId=n))}))}ngAfterViewChecked(){this.highlightedMessageId&&(this.hasNewMessages=!1,this.olderMassagesLoaded=!1),"top-to-bottom"===this.direction?this.hasNewMessages&&(this.isNewMessageSentByUser||!this.isUserScrolled)&&(this.isLatestMessageInList?this.scrollToTop():this.jumpToLatestMessage(),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.hasNewMessages?((!this.isUserScrolled||this.isNewMessageSentByUser)&&(this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage()),this.hasNewMessages=!1,this.containerHeight=this.scrollContainer.nativeElement.scrollHeight):this.olderMassagesLoaded?(this.preserveScrollbarPosition(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,this.olderMassagesLoaded=!1):"bottom"!==this.getScrollPosition()&&!this.isUserScrolled&&!this.highlightedMessageId&&(this.isLatestMessageInList?this.scrollToBottom():this.jumpToLatestMessage(),this.containerHeight=this.scrollContainer.nativeElement.scrollHeight)}ngOnDestroy(){var e;this.subscriptions.forEach(n=>n.unsubscribe()),null===(e=this.newMessageSubscription)||void 0===e||e.unsubscribe()}trackByMessageId(e,n){return n.id}trackByUserId(e,n){return n.id}jumpToLatestMessage(){var e;this.channelService.jumpToMessage("latest","thread"===this.mode?null===(e=this.parentMessage)||void 0===e?void 0:e.id:void 0)}scrollToBottom(){this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}scrollToTop(){this.scrollContainer.nativeElement.scrollTop=0}scrolled(){if(this.scrollContainer.nativeElement.scrollHeight===this.scrollContainer.nativeElement.clientHeight)return;const e=this.getScrollPosition();if(this.isUserScrolled=("bottom-to-top"===this.direction?"bottom"!==e:"top"!==e)||!this.isLatestMessageInList,this.isUserScrolled||(this.unreadMessageCount=0),this.shouldLoadMoreMessages(e)){let n;this.containerHeight=this.scrollContainer.nativeElement.scrollHeight,n="top-to-bottom"===this.direction?"top"===e?"newer":"older":"top"===e?"older":"newer","main"===this.mode?this.channelService.loadMoreMessages(n):this.channelService.loadMoreThreadReplies(n),this.isLoading=!0}this.prevScrollTop=this.scrollContainer.nativeElement.scrollTop}getTypingIndicatorContext(){return{usersTyping$:this.usersTyping$}}getMessageContext(e){return{message:e,isLastSentMessage:!(!this.lastSentMessageId||e?.id!==this.lastSentMessageId),enabledMessageActions:this.enabledMessageActions,mode:this.mode,isHighlighted:e?.id===this.highlightedMessageId}}getTypingIndicatorText(e){return Rn(e)}get replyCountParam(){var e;return{replyCount:null===(e=this.parentMessage)||void 0===e?void 0:e.reply_count}}preserveScrollbarPosition(){this.scrollContainer.nativeElement.scrollTop=(this.prevScrollTop||0)+(this.scrollContainer.nativeElement.scrollHeight-this.containerHeight)}getScrollPosition(){var e,n;let s="middle";return Math.floor(this.scrollContainer.nativeElement.scrollTop)<=((null===(e=this.parentMessageElement)||void 0===e?void 0:e.nativeElement.clientHeight)||0)&&(void 0===this.prevScrollTop||this.prevScrollTop>((null===(n=this.parentMessageElement)||void 0===n?void 0:n.nativeElement.clientHeight)||0))?s="top":Math.ceil(this.scrollContainer.nativeElement.scrollTop)+this.scrollContainer.nativeElement.clientHeight>=this.scrollContainer.nativeElement.scrollHeight&&(s="bottom"),s}shouldLoadMoreMessages(e){return"middle"!==e&&!this.highlightedMessageId}setMessages$(){this.messages$=("main"===this.mode?this.channelService.activeChannelMessages$:this.channelService.activeThreadMessages$).pipe((0,Rt.b)(e=>{if(this.isLoading=!1,0===e.length)return;this.newMessageReceived(e[e.length-1]);const s=e[0];this.oldestMessage&&e.find(r=>r.id===this.oldestMessage.id)?this.oldestMessage.created_at.getTime()>s.created_at.getTime()&&(this.oldestMessage=s,this.olderMassagesLoaded=!0):this.oldestMessage=s}),(0,Rt.b)(e=>{var n;return this.lastSentMessageId=null===(n=[...e].reverse().find(s=>{var r,o,l;return(null===(r=s.user)||void 0===r?void 0:r.id)===(null===(l=null===(o=this.chatClientService.chatClient)||void 0===o?void 0:o.user)||void 0===l?void 0:l.id)&&"sending"!==s.status}))||void 0===n?void 0:n.id}),(0,Rt.b)(e=>{this.isLatestMessageInList=!this.latestMessage||0===e.length||e[e.length-1].id===this.latestMessage.id,this.isLatestMessageInList||(this.isUserScrolled=!0)}),(0,b.U)(e=>"bottom-to-top"===this.direction?e:[...e].reverse()),(0,Rt.b)(e=>{this.groupStyles=e.map((n,s)=>((i,a,e,n=!1)=>{var s,r,o,l,c,u;if(n||i.attachments&&0!==i.attachments.length)return"single";const h=!a||!rs(a.created_at,i.created_at)||"system"===a.type||a.attachments&&0!==(null===(s=a.attachments)||void 0===s?void 0:s.length)||(null===(r=i.user)||void 0===r?void 0:r.id)!==(null===(o=a.user)||void 0===o?void 0:o.id)||"error"===a.type||a.deleted_at||i.reaction_counts&&Object.keys(i.reaction_counts).length>0,m=!e||!rs(i.created_at,e.created_at)||"system"===e.type||e.attachments&&0!==(null===(l=e.attachments)||void 0===l?void 0:l.length)||(null===(c=i.user)||void 0===c?void 0:c.id)!==(null===(u=e.user)||void 0===u?void 0:u.id)||"error"===e.type||e.deleted_at||e.reaction_counts&&Object.keys(e.reaction_counts).length>0;return h||m?m?h||i.deleted_at||"error"===i.type?"single":"bottom":h?"top":"":i.deleted_at||"error"===i.type?"single":"middle"})(n,e[s-1],e[s+1]))}))}resetScrollState(){this.latestMessage=void 0,this.hasNewMessages=!0,this.isUserScrolled=!1,this.containerHeight=void 0,this.olderMassagesLoaded=!1,this.oldestMessage=void 0,this.unreadMessageCount=0,this.prevScrollTop=void 0,this.isNewMessageSentByUser=void 0,this.isLatestMessageInList=!0}get usersTyping$(){return"thread"===this.mode?this.usersTypingInThread$:this.usersTypingInChannel$}scrollMessageIntoView(e,n=!0){const s=document.getElementById(e);!s&&n?setTimeout(()=>this.scrollMessageIntoView(e,!1)):s&&(s.scrollIntoView({block:"center"}),setTimeout(()=>{this.highlightedMessageId=void 0},1e3))}scrollToLatestMessage(e=!0){document.getElementById(this.latestMessage.id)?"bottom-to-top"===this.direction?this.scrollToBottom():this.scrollToTop():e&&setTimeout(()=>this.scrollToLatestMessage(!1),0)}newMessageReceived(e){var n,s,r,o;(!this.latestMessage||(null===(n=this.latestMessage.created_at)||void 0===n?void 0:n.getTime())<e.created_at.getTime())&&(this.latestMessage=e,this.hasNewMessages=!0,this.isNewMessageSentByUser=(null===(s=e.user)||void 0===s?void 0:s.id)===(null===(o=null===(r=this.chatClientService.chatClient)||void 0===r?void 0:r.user)||void 0===o?void 0:o.id),this.isUserScrolled&&this.unreadMessageCount++)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Be),t.Y36(We),t.Y36(qe))},i.\u0275cmp=t.Xpm({type:i,selectors:[["stream-message-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ph,5),t.Gf(gh,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.scrollContainer=s.first),t.iGM(s=t.CRH())&&(n.parentMessageElement=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},inputs:{mode:"mode",direction:"direction",messageOptionsTrigger:"messageOptionsTrigger"},features:[t.TTD],decls:16,vars:12,consts:[["data-testid","scroll-container",1,"str-chat__list",3,"scroll"],["scrollContainer",""],[1,"str-chat__reverse-infinite-scroll","str-chat__message-list-scroll"],[1,"str-chat__ul"],["data-testid","parent-message","class","str-chat__parent-message-li",4,"ngIf"],["data-testid","top-loading-indicator",4,"ngIf"],["tabindex","0","data-testclass","message",3,"class","id",4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","bottom-loading-indicator",4,"ngIf"],["defaultTypingIndicator",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"str-chat__jump-to-latest-message"],["data-testid","scroll-to-latest","class","\n      str-chat__message-notification-scroll-to-latest\n      str-chat__message-notification-scroll-to-latest-right\n      str-chat__circle-fab\n    ",3,"keyup.enter","click",4,"ngIf"],["messageTemplateContainer",""],["data-testid","parent-message",1,"str-chat__parent-message-li"],["parentMessageElement",""],["data-testid","reply-count",1,"str-chat__thread-start"],["data-testid","top-loading-indicator"],["tabindex","0","data-testclass","message",3,"id"],["data-testid","bottom-loading-indicator"],[4,"ngIf"],["data-testid","typing-indicator","class","str-chat__typing-indicator str-chat__typing-indicator--typing",4,"ngIf"],["data-testid","typing-indicator",1,"str-chat__typing-indicator","str-chat__typing-indicator--typing"],[1,"str-chat__typing-indicator__dots"],[1,"str-chat__typing-indicator__dot"],["data-testid","typing-users",1,"str-chat__typing-indicator__users"],["data-testid","scroll-to-latest",1,"str-chat__message-notification-scroll-to-latest","str-chat__message-notification-scroll-to-latest-right","str-chat__circle-fab",3,"keyup.enter","click"],[1,"str-chat__jump-to-latest-icon","str-chat__circle-fab-icon",3,"icon"],["class","\n        str-chat__message-notification\n        str-chat__message-notification-scroll-to-latest-unread-count\n        str-chat__jump-to-latest-unread-count\n      ",4,"ngIf"],[1,"str-chat__message-notification","str-chat__message-notification-scroll-to-latest-unread-count","str-chat__jump-to-latest-unread-count"],["defaultMessageTemplate",""],[3,"message","isLastSentMessage","enabledMessageActions","mode","isHighlighted"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0,1),t.NdJ("scroll",function(){return n.scrolled()}),t.TgZ(2,"div",2)(3,"ul",3),t.YNc(4,fh,7,10,"li",4),t.YNc(5,_h,1,0,"stream-loading-indicator",5),t.YNc(6,Ch,2,8,"li",6),t.ALo(7,"async"),t.YNc(8,yh,1,0,"stream-loading-indicator",7),t.qZA(),t.YNc(9,xh,2,3,"ng-template",null,8,t.W1O),t.YNc(11,Mh,1,0,"ng-container",9),t.qZA()(),t.TgZ(12,"div",10),t.YNc(13,kh,3,2,"button",11),t.qZA(),t.YNc(14,Eh,3,2,"ng-template",null,12,t.W1O)),2&e){const s=t.MAs(10);t.xp6(3),t.ekj("str-chat__message-options-in-bubble","message-bubble"===n.messageOptionsTrigger),t.xp6(1),t.Q6J("ngIf","thread"===n.mode),t.xp6(1),t.Q6J("ngIf",n.isLoading&&"bottom-to-top"===n.direction),t.xp6(1),t.Q6J("ngForOf",t.lcZ(7,10,n.messages$))("ngForTrackBy",n.trackByMessageId),t.xp6(2),t.Q6J("ngIf",n.isLoading&&"top-to-bottom"===n.direction),t.xp6(3),t.Q6J("ngTemplateOutlet",n.typingIndicatorTemplate||s)("ngTemplateOutletContext",n.getTypingIndicatorContext()),t.xp6(2),t.Q6J("ngIf",n.isUserScrolled)}},dependencies:[Ki,rn,Gh,Z.O5,Z.tP,Z.sg,we.X$,Z.Ov],encapsulation:2}),i})(),Bn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.ez,we.aw]]}),i})(),ep=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.ez,we.aw,Bn,Gr],Bn]}),i})(),tp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:es,useValue:Wh}],imports:[[Z.ez,we.aw,bo,Bn]]}),i})();var Pn=_(6851),on=_(5593);let np=(()=>{class i{constructor(){this.strokeWidth="2",this.fill="none",this.animationDuration="2s"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration"},decls:3,vars:6,consts:[["role","alert","aria-busy","true",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"circle",2),t.qZA()()),2&e&&(t.Q6J("ngStyle",n.style)("ngClass",n.styleClass),t.xp6(1),t.Udp("animation-duration",n.animationDuration),t.xp6(1),t.uIk("fill",n.fill)("stroke-width",n.strokeWidth))},dependencies:[Z.mk,Z.PC],styles:['.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;inset:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}\n'],encapsulation:2,changeDetection:0}),i})(),ip=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.ez]}),i})();var kt=function sp(){let i=[];const s=r=>r&&parseInt(r.style.zIndex,10)||0;return{get:s,set:(r,o,l)=>{o&&(o.style.zIndex=String(((r,o)=>{let l=i.length>0?i[i.length-1]:{key:r,value:o},c=l.value+(l.key===r?0:o)+1;return i.push({key:r,value:c}),c})(r,l)))},clear:r=>{r&&((r=>{i=i.filter(o=>o.value!==r)})(s(r)),r.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}(),At=_(805),mt=_(371),cs=_(1795),pe=_(9592);let ap=(()=>{class i{constructor(e,n,s,r,o,l){this.platformId=e,this.el=n,this.zone=s,this.config=r,this.renderer=o,this.changeDetector=l,this.escape=!0,this.autoHide=!0,this.fitContent=!0,this.hideOnEscape=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0,autoHide:!0,hideOnEscape:!1}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){(0,Z.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){(this.isAutoHide()||!(pe.p.hasClass(e.toElement,"p-tooltip")||pe.p.hasClass(e.toElement,"p-tooltip-arrow")||pe.p.hasClass(e.toElement,"p-tooltip-text")||pe.p.hasClass(e.relatedTarget,"p-tooltip")))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?pe.p.appendChild(this.container,this.el.nativeElement):pe.p.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",n=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),pe.p.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?kt.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&kt.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+pe.p.getWindowScrollLeft(),top:e.top+pe.p.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+pe.p.getOuterWidth(this.el.nativeElement),s=e.top+(pe.p.getOuterHeight(this.el.nativeElement)-pe.p.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-pe.p.getOuterWidth(this.container),s=e.top+(pe.p.getOuterHeight(this.el.nativeElement)-pe.p.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(pe.p.getOuterWidth(this.el.nativeElement)-pe.p.getOuterWidth(this.container))/2,s=e.top-pe.p.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(pe.p.getOuterWidth(this.el.nativeElement)-pe.p.getOuterWidth(this.container))/2,s=e.top+pe.p.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return pe.p.hasClass(e,"p-inputwrapper")?pe.p.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,s=e.left,r=pe.p.getOuterWidth(this.container),o=pe.p.getOuterHeight(this.container),l=pe.p.getViewport();return s+r>l.width||s<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new pe.V(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):pe.p.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&kt.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(At.b4),t.Y36(t.Qsj),t.Y36(t.sBO))},i.\u0275dir=t.lG2({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&t.NdJ("keydown.escape",function(r){return n.onPressEscape(r)},!1,t.evT)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[t.TTD]}),i})(),us=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.ez]}),i})();var rp=_(4482),op=_(5032),ds=_(5403),lp=_(8421),up=_(4986);const hp=function(i){return{"p-hidden":i}};function pp(i,a){if(1&i&&t._UZ(0,"li",4),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,hp,!1===e.visible))}}function gp(i,a){if(1&i&&t._UZ(0,"span",16),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.icon)("ngStyle",e.iconStyle)}}function mp(i,a){if(1&i&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Oqu(e.label)}}function fp(i,a){if(1&i&&t._UZ(0,"span",18),2&i){const e=t.oxw(3).$implicit;t.Q6J("innerHTML",e.label,t.oJD)}}function _p(i,a){if(1&i&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.badgeStyleClass),t.xp6(1),t.Oqu(e.badge)}}const hs=function(i,a){return{"pi-angle-down":i,"pi-angle-right":a}};function vp(i,a){if(1&i&&t._UZ(0,"span",20),2&i){const e=t.oxw(4);t.Q6J("ngClass",t.WLB(1,hs,e.root,!e.root))}}const ps=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function Cp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",10),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemClick(s,r))})("mouseenter",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseEnter(s,r))})("mouseleave",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseLeave(s,r))}),t.YNc(1,gp,1,2,"span",11),t.YNc(2,mp,2,1,"span",12),t.YNc(3,fp,1,1,"ng-template",null,13,t.W1O),t.YNc(5,_p,2,2,"span",14),t.YNc(6,vp,1,4,"span",15),t.qZA()}if(2&i){const e=t.MAs(4),n=t.oxw(2).$implicit,s=t.oxw();t.Q6J("target",n.target)("ngClass",t.VKq(14,ps,n.disabled)),t.uIk("href",n.url,t.LSH)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=s.item.items)("aria-expanded",s.item===s.activeItem),t.xp6(1),t.Q6J("ngIf",n.icon),t.xp6(1),t.Q6J("ngIf",!1!==n.escape)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n.badge),t.xp6(1),t.Q6J("ngIf",n.items)}}function yp(i,a){if(1&i&&t._UZ(0,"span",16),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.icon)("ngStyle",e.iconStyle)}}function bp(i,a){if(1&i&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Oqu(e.label)}}function Dp(i,a){if(1&i&&t._UZ(0,"span",18),2&i){const e=t.oxw(3).$implicit;t.Q6J("innerHTML",e.label,t.oJD)}}function wp(i,a){if(1&i&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.badgeStyleClass),t.xp6(1),t.Oqu(e.badge)}}function Tp(i,a){if(1&i&&t._UZ(0,"span",20),2&i){const e=t.oxw(4);t.Q6J("ngClass",t.WLB(1,hs,e.root,!e.root))}}const xp=function(){return{exact:!1}};function Mp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",21),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemClick(s,r))})("mouseenter",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseEnter(s,r))})("mouseleave",function(s){t.CHM(e);const r=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onItemMouseLeave(s,r))}),t.YNc(1,yp,1,2,"span",11),t.YNc(2,bp,2,1,"span",12),t.YNc(3,Dp,1,1,"ng-template",null,22,t.W1O),t.YNc(5,wp,2,2,"span",14),t.YNc(6,Tp,1,4,"span",15),t.qZA()}if(2&i){const e=t.MAs(4),n=t.oxw(2).$implicit;t.Q6J("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||t.DdM(21,xp))("target",n.target)("ngClass",t.VKq(22,ps,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),t.uIk("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),t.xp6(1),t.Q6J("ngIf",n.icon),t.xp6(1),t.Q6J("ngIf",!1!==n.escape)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",n.badge),t.xp6(1),t.Q6J("ngIf",n.items)}}function Sp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-menubarSub",23),t.NdJ("leafClick",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onLeafClick())}),t.qZA()}if(2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const kp=function(i,a){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":a}};function Ap(i,a){if(1&i&&(t.TgZ(0,"li",5,6),t.YNc(2,Cp,7,16,"a",7),t.YNc(3,Mp,7,24,"a",8),t.YNc(4,Sp,1,4,"p-menubarSub",9),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Tol(e.styleClass),t.Q6J("ngClass",t.WLB(8,kp,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),t.xp6(2),t.Q6J("ngIf",!e.routerLink),t.xp6(1),t.Q6J("ngIf",e.routerLink),t.xp6(1),t.Q6J("ngIf",e.items)}}function Fp(i,a){if(1&i&&(t.YNc(0,pp,1,3,"li",2),t.YNc(1,Ap,5,11,"li",3)),2&i){const e=a.$implicit;t.Q6J("ngIf",e.separator),t.xp6(1),t.Q6J("ngIf",!e.separator)}}const Ep=function(i,a){return{"p-submenu-list":i,"p-menubar-root-list":a}},Op=["menubutton"],Ip=["rootmenu"];function Lp(i,a){1&i&&t.GkF(0)}function Zp(i,a){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,Lp,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.startTemplate)}}function Up(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",9,10),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.toggle(s))}),t._UZ(2,"i",11),t.qZA()}}function Rp(i,a){1&i&&t.GkF(0)}function Bp(i,a){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,Rp,1,0,"ng-container",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.endTemplate)}}function Pp(i,a){1&i&&(t.TgZ(0,"div",12),t.Hsn(1),t.qZA())}const Np=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},jp=["*"];let Nn=(()=>{class i{constructor(){this.mouseLeaves=new K.x,this.mouseLeft$=this.mouseLeaves.pipe(function cp(i){return(0,rp.e)((a,e)=>{let n=!1,s=null,r=null;const o=()=>{if(r?.unsubscribe(),r=null,n){n=!1;const l=s;s=null,e.next(l)}};a.subscribe((0,ds.x)(e,l=>{r?.unsubscribe(),n=!0,s=l,r=(0,ds.x)(e,o,op.Z),(0,lp.Xf)(i(l)).subscribe(r)},()=>{o(),e.complete()},void 0,()=>{s=r=null}))})}(()=>function dp(i=0,a=up.z){return i<0&&(i=0),(0,P.H)(i,i,a)}(this.autoHideDelay)),(0,Ut.h)(e=>this.autoHide&&e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),$p=(()=>{class i{constructor(e,n,s,r,o,l){this.document=e,this.platformId=n,this.el=s,this.renderer=r,this.cd=o,this.menubarService=l,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new t.vpe,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}ngOnInit(){this.mouseLeaveSubscriber=this.menubarService.mouseLeft$.subscribe(()=>{this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener()})}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseLeave(e,n){this.menubarService.mouseLeaves.next(!0)}onItemMouseEnter(e,n){this.menubarService.mouseLeaves.next(!1),n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){(0,Z.NF)(this.platformId)&&(this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())})))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}ngOnDestroy(){this.mouseLeaveSubscriber.unsubscribe(),this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.K0),t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(Nn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter","mouseleave",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter","mouseleave",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter","mouseleave"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter","mouseleave"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(t.TgZ(0,"ul",0),t.YNc(1,Fp,2,2,"ng-template",1),t.qZA()),2&e&&(t.Q6J("ngClass",t.WLB(3,Ep,!n.root,n.root)),t.uIk("role",n.root?"menubar":"menu"),t.xp6(1),t.Q6J("ngForOf",n.root?n.item:n.item.items))},dependencies:[Z.mk,Z.sg,Z.O5,Z.PC,mt.rH,mt.Od,cs.H,ap,i],encapsulation:2}),i})(),Hp=(()=>{class i{constructor(e,n,s,r,o,l,c){this.document=e,this.platformId=n,this.el=s,this.renderer=r,this.cd=o,this.config=l,this.menubarService=c,this.autoZIndex=!0,this.baseZIndex=0,this.autoHideDelay=100}ngOnInit(){this.menubarService.autoHide=this.autoHide,this.menubarService.autoHideDelay=this.autoHideDelay,this.mouseLeaveSubscriber=this.menubarService.mouseLeft$.subscribe(()=>this.unbindOutsideClickListener())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),kt.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,kt.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){(0,Z.NF)(this.platformId)&&(this.outsideClickListener||(this.outsideClickListener=this.renderer.listen(this.document,"click",e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()})))}hide(){this.mobileActive=!1,this.cd.markForCheck(),kt.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(this.outsideClickListener(),this.outsideClickListener=null)}ngOnDestroy(){this.mouseLeaveSubscriber.unsubscribe(),this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.K0),t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(At.b4),t.Y36(Nn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,At.jx,4),2&e){let r;t.iGM(r=t.CRH())&&(n.templates=r)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Op,5),t.Gf(Ip,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.menubutton=s.first),t.iGM(s=t.CRH())&&(n.rootmenu=s.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay",autoHide:"autoHide",autoHideDelay:"autoHideDelay"},features:[t._Bn([Nn])],ngContentSelectors:jp,decls:8,vars:15,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0","class","p-menubar-button",3,"click",4,"ngIf"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,Zp,2,1,"div",1),t.YNc(2,Up,3,0,"a",2),t.TgZ(3,"p-menubarSub",3,4),t.NdJ("leafClick",function(){return n.onLeafClick()}),t.qZA(),t.YNc(5,Bp,2,1,"div",5),t.YNc(6,Pp,2,0,"ng-template",null,6,t.W1O),t.qZA()),2&e){const s=t.MAs(7);t.Tol(n.styleClass),t.Q6J("ngClass",t.VKq(13,Np,n.mobileActive))("ngStyle",n.style),t.xp6(1),t.Q6J("ngIf",n.startTemplate),t.xp6(1),t.Q6J("ngIf",n.model&&n.model.length>0),t.xp6(1),t.Q6J("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),t.xp6(2),t.Q6J("ngIf",n.endTemplate)("ngIfElse",s)}},dependencies:[Z.mk,Z.O5,Z.tP,Z.PC,$p],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center;flex-wrap:wrap}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:2}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),qp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.ez,mt.Bz,cs.T,us,At.m8,mt.Bz,us,At.m8]}),i})();function Yp(i,a){1&i&&(t.TgZ(0,"span",4),t._uU(1,"Getstream Chat"),t.qZA())}function Jp(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-button",6),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.signOut())}),t._uU(2,"Sign out"),t.qZA(),t.BQk()}}function Qp(i,a){if(1&i&&(t.YNc(0,Jp,3,0,"ng-container",5),t.ALo(1,"async")),2&i){const e=t.oxw(),n=t.MAs(4);t.Q6J("ngIf",t.lcZ(1,2,e.auth.isLoggedIn$))("ngIfElse",n)}}function Vp(i,a){1&i&&(t.TgZ(0,"p-button",7),t._uU(1,"Sign in"),t.qZA(),t.TgZ(2,"p-button",8),t._uU(3,"Sign up"),t.qZA()),2&i&&t.Udp("margin-right","10px")}let Gp=(()=>{class i{constructor(e,n){(0,p.Z)(this,"_router",void 0),(0,p.Z)(this,"auth",void 0),this._router=e,this.auth=n}signOut(){this.auth.signOut().subscribe({next:()=>this._router.navigate(["signin"])})}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(mt.F0),t.Y36(Pn.e8))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-menubar"]],standalone:!0,features:[t.jDz],decls:5,vars:0,consts:[["styleClass","menubar"],["pTemplate","start"],["pTemplate","end"],["authButtons",""],[1,"logo-title"],[4,"ngIf","ngIfElse"],["styleClass","p-button-secondary",3,"onClick"],["routerLink","/signin","routerLinkActive","active-btn"],["routerLink","/signup","routerLinkActive","active-btn"]],template:function(e,n){1&e&&(t.TgZ(0,"p-menubar",0),t.YNc(1,Yp,2,0,"ng-template",1),t.YNc(2,Qp,2,4,"ng-template",2),t.qZA(),t.YNc(3,Vp,4,2,"ng-template",null,3,t.W1O))},dependencies:[Z.O5,Z.Ov,mt.rH,mt.Od,qp,Hp,At.jx,on.hJ,on.zx],styles:["[_nghost-%COMP%]     .menubar{background-color:var(--primary-color);color:#fff;border:none;border-radius:initial}[_nghost-%COMP%]     .active-btn .p-button, [_nghost-%COMP%]     .active-btn .p-button:hover{border:1px solid white}.logo-title[_ngcontent-%COMP%]{font-size:1.2rem}"],changeDetection:0})),i})();function zp(i,a){1&i&&(t.TgZ(0,"div",2)(1,"stream-channel-list"),t._UZ(2,"p-button",3),t.qZA(),t.TgZ(3,"stream-channel"),t._UZ(4,"stream-channel-header")(5,"stream-message-list")(6,"stream-notification-list")(7,"stream-message-input"),t.qZA()()),2&i&&t.Q6J("@fadeInOut",void 0)}function Wp(i,a){1&i&&(t.TgZ(0,"div",4),t._UZ(1,"p-progressSpinner",5),t.qZA()),2&i&&(t.xp6(1),t.Q6J("@fadeInOut",void 0))}let Kp=(()=>{class i{constructor(e,n,s,r){(0,p.Z)(this,"_chatService",void 0),(0,p.Z)(this,"_channelService",void 0),(0,p.Z)(this,"_streamI18nService",void 0),(0,p.Z)(this,"_auth",void 0),(0,p.Z)(this,"chatIsReady$",void 0),this._chatService=e,this._channelService=n,this._streamI18nService=s,this._auth=r}ngOnInit(){this._streamI18nService.setTranslation(),this.chatIsReady$=this._auth.getUserToken().pipe((0,A.w)(e=>this._chatService.init(k.Z.streamApp.key,this._auth.currentUser.uid,e)),(0,A.w)(()=>this._channelService.init({type:"messaging",members:{$in:[this._auth.currentUser.uid]}})),(0,b.U)(()=>!0),(0,w.K)(()=>(0,S.of)(!1))),this._channelService.channels$.subscribe(e=>console.log(e))}ngOnDestroy(){var e=this;return(0,g.Z)(function*(){e._channelService.reset(),yield e._chatService.disconnectUser()})()}}return(0,p.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(We),t.Y36(Be),t.Y36(Uh),t.Y36(Pn.e8))}),(0,p.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-chat-page"]],standalone:!0,features:[t.jDz],decls:5,vars:4,consts:[["class","chat-container",4,"ngIf","ngIfElse"],["unavailable",""],[1,"chat-container"],["channel-list-bottom","","icon","pi pi-plus","styleClass","p-button-rounded p-button-lg",1,"create-channel-btn"],[1,"spinner-container"],["strokeWidth","4"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-menubar"),t.YNc(1,zp,8,1,"div",0),t.ALo(2,"async"),t.YNc(3,Wp,2,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.chatIsReady$))("ngIfElse",s)}},dependencies:[Z.O5,Z.Ov,ep,$h,Hh,Yh,is,Xh,Un,tp,on.hJ,on.zx,ip,np,Gp],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.chat-container[_ngcontent-%COMP%]{display:flex;flex:1}.chat-container[_ngcontent-%COMP%]   stream-channel-list[_ngcontent-%COMP%]{width:30%}.chat-container[_ngcontent-%COMP%]   stream-channel-list[_ngcontent-%COMP%]   .create-channel-btn[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px;z-index:100}.chat-container[_ngcontent-%COMP%]   stream-channel[_ngcontent-%COMP%]{width:100%}.chat-container[_ngcontent-%COMP%]   stream-thread[_ngcontent-%COMP%]{width:45%}.chat-container[_ngcontent-%COMP%]   stream-message-input[_ngcontent-%COMP%]{padding-bottom:12px}.chat-container[_ngcontent-%COMP%]     .str-chat__channel-list-messenger__main{position:relative}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;display:flex;justify-content:center;align-items:center}.spinner-container[_ngcontent-%COMP%]     .p-progress-spinner-circle{stroke:#f5b622!important}"],data:{animation:[Pn.Ic]},changeDetection:0})),i})()},3014:(I,z,_)=>{I.exports=_(7114)},7729:(I,z,_)=>{"use strict";var g=_(4701),p=_(858),A=_(5738),b=_(1625),w=_(5215),S=_(2099),k=_(6100),D=_(9252),t=_(3324),C=_(1413);I.exports=function(x){return new Promise(function(P,V){var ne,W=x.data,X=x.headers,oe=x.responseType;function re(){x.cancelToken&&x.cancelToken.unsubscribe(ne),x.signal&&x.signal.removeEventListener("abort",ne)}g.isFormData(W)&&delete X["Content-Type"];var j=new XMLHttpRequest;if(x.auth){var Y=x.auth.username||"",ie=x.auth.password?unescape(encodeURIComponent(x.auth.password)):"";X.Authorization="Basic "+btoa(Y+":"+ie)}var Ze=w(x.baseURL,x.url);function F(){if(j){var E="getAllResponseHeaders"in j?S(j.getAllResponseHeaders()):null;p(function(d){P(d),re()},function(d){V(d),re()},{data:oe&&"text"!==oe&&"json"!==oe?j.response:j.responseText,status:j.status,statusText:j.statusText,headers:E,config:x,request:j}),j=null}}if(j.open(x.method.toUpperCase(),b(Ze,x.params,x.paramsSerializer),!0),j.timeout=x.timeout,"onloadend"in j?j.onloadend=F:j.onreadystatechange=function(){!j||4!==j.readyState||0===j.status&&(!j.responseURL||0!==j.responseURL.indexOf("file:"))||setTimeout(F)},j.onabort=function(){j&&(V(D("Request aborted",x,"ECONNABORTED",j)),j=null)},j.onerror=function(){V(D("Network Error",x,null,j)),j=null},j.ontimeout=function(){var L="timeout of "+x.timeout+"ms exceeded";x.timeoutErrorMessage&&(L=x.timeoutErrorMessage),V(D(L,x,(x.transitional||t.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",j)),j=null},g.isStandardBrowserEnv()){var H=(x.withCredentials||k(Ze))&&x.xsrfCookieName?A.read(x.xsrfCookieName):void 0;H&&(X[x.xsrfHeaderName]=H)}"setRequestHeader"in j&&g.forEach(X,function(L,N){typeof W>"u"&&"content-type"===N.toLowerCase()?delete X[N]:j.setRequestHeader(N,L)}),g.isUndefined(x.withCredentials)||(j.withCredentials=!!x.withCredentials),oe&&"json"!==oe&&(j.responseType=x.responseType),"function"==typeof x.onDownloadProgress&&j.addEventListener("progress",x.onDownloadProgress),"function"==typeof x.onUploadProgress&&j.upload&&j.upload.addEventListener("progress",x.onUploadProgress),(x.cancelToken||x.signal)&&(ne=function(E){j&&(V(!E||E&&E.type?new C("canceled"):E),j.abort(),j=null)},x.cancelToken&&x.cancelToken.subscribe(ne),x.signal&&(x.signal.aborted?ne():x.signal.addEventListener("abort",ne))),W||(W=null),j.send(W)})}},7114:(I,z,_)=>{"use strict";var g=_(4701),p=_(2414),A=_(6490),b=_(2971),k=function S(D){var t=new A(D),C=p(A.prototype.request,t);return g.extend(C,A.prototype,t),g.extend(C,t),C.create=function(x){return S(b(D,x))},C}(_(3324));k.Axios=A,k.Cancel=_(1413),k.CancelToken=_(3056),k.isCancel=_(8827),k.VERSION=_(1773).version,k.all=function(t){return Promise.all(t)},k.spread=_(9211),k.isAxiosError=_(4603),I.exports=k,I.exports.default=k},1413:I=>{"use strict";function z(_){this.message=_}z.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},z.prototype.__CANCEL__=!0,I.exports=z},3056:(I,z,_)=>{"use strict";var g=_(1413);function p(A){if("function"!=typeof A)throw new TypeError("executor must be a function.");var b;this.promise=new Promise(function(k){b=k});var w=this;this.promise.then(function(S){if(w._listeners){var k,D=w._listeners.length;for(k=0;k<D;k++)w._listeners[k](S);w._listeners=null}}),this.promise.then=function(S){var k,D=new Promise(function(t){w.subscribe(t),k=t}).then(S);return D.cancel=function(){w.unsubscribe(k)},D},A(function(k){w.reason||(w.reason=new g(k),b(w.reason))})}p.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},p.prototype.subscribe=function(b){this.reason?b(this.reason):this._listeners?this._listeners.push(b):this._listeners=[b]},p.prototype.unsubscribe=function(b){if(this._listeners){var w=this._listeners.indexOf(b);-1!==w&&this._listeners.splice(w,1)}},p.source=function(){var b;return{token:new p(function(k){b=k}),cancel:b}},I.exports=p},8827:I=>{"use strict";I.exports=function(_){return!(!_||!_.__CANCEL__)}},6490:(I,z,_)=>{"use strict";var g=_(4701),p=_(1625),A=_(607),b=_(957),w=_(2971),S=_(4828),k=S.validators;function D(t){this.defaults=t,this.interceptors={request:new A,response:new A}}D.prototype.request=function(C){"string"==typeof C?(C=arguments[1]||{}).url=arguments[0]:C=C||{},(C=w(this.defaults,C)).method=C.method?C.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var O=C.transitional;void 0!==O&&S.assertOptions(O,{silentJSONParsing:k.transitional(k.boolean),forcedJSONParsing:k.transitional(k.boolean),clarifyTimeoutError:k.transitional(k.boolean)},!1);var x=[],K=!0;this.interceptors.request.forEach(function(j){"function"==typeof j.runWhen&&!1===j.runWhen(C)||(K=K&&j.synchronous,x.unshift(j.fulfilled,j.rejected))});var V,P=[];if(this.interceptors.response.forEach(function(j){P.push(j.fulfilled,j.rejected)}),!K){var W=[b,void 0];for(Array.prototype.unshift.apply(W,x),W=W.concat(P),V=Promise.resolve(C);W.length;)V=V.then(W.shift(),W.shift());return V}for(var X=C;x.length;){var oe=x.shift(),ne=x.shift();try{X=oe(X)}catch(re){ne(re);break}}try{V=b(X)}catch(re){return Promise.reject(re)}for(;P.length;)V=V.then(P.shift(),P.shift());return V},D.prototype.getUri=function(C){return C=w(this.defaults,C),p(C.url,C.params,C.paramsSerializer).replace(/^\?/,"")},g.forEach(["delete","get","head","options"],function(C){D.prototype[C]=function(O,x){return this.request(w(x||{},{method:C,url:O,data:(x||{}).data}))}}),g.forEach(["post","put","patch"],function(C){D.prototype[C]=function(O,x,K){return this.request(w(K||{},{method:C,url:O,data:x}))}}),I.exports=D},607:(I,z,_)=>{"use strict";var g=_(4701);function p(){this.handlers=[]}p.prototype.use=function(b,w,S){return this.handlers.push({fulfilled:b,rejected:w,synchronous:!!S&&S.synchronous,runWhen:S?S.runWhen:null}),this.handlers.length-1},p.prototype.eject=function(b){this.handlers[b]&&(this.handlers[b]=null)},p.prototype.forEach=function(b){g.forEach(this.handlers,function(S){null!==S&&b(S)})},I.exports=p},5215:(I,z,_)=>{"use strict";var g=_(8692),p=_(4554);I.exports=function(b,w){return b&&!g(w)?p(b,w):w}},9252:(I,z,_)=>{"use strict";var g=_(5124);I.exports=function(A,b,w,S,k){var D=new Error(A);return g(D,b,w,S,k)}},957:(I,z,_)=>{"use strict";var g=_(4701),p=_(5134),A=_(8827),b=_(3324),w=_(1413);function S(k){if(k.cancelToken&&k.cancelToken.throwIfRequested(),k.signal&&k.signal.aborted)throw new w("canceled")}I.exports=function(D){return S(D),D.headers=D.headers||{},D.data=p.call(D,D.data,D.headers,D.transformRequest),D.headers=g.merge(D.headers.common||{},D.headers[D.method]||{},D.headers),g.forEach(["delete","get","head","post","put","patch","common"],function(O){delete D.headers[O]}),(D.adapter||b.adapter)(D).then(function(O){return S(D),O.data=p.call(D,O.data,O.headers,D.transformResponse),O},function(O){return A(O)||(S(D),O&&O.response&&(O.response.data=p.call(D,O.response.data,O.response.headers,D.transformResponse))),Promise.reject(O)})}},5124:I=>{"use strict";I.exports=function(_,g,p,A,b){return _.config=g,p&&(_.code=p),_.request=A,_.response=b,_.isAxiosError=!0,_.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},_}},2971:(I,z,_)=>{"use strict";var g=_(4701);I.exports=function(A,b){b=b||{};var w={};function S(x,K){return g.isPlainObject(x)&&g.isPlainObject(K)?g.merge(x,K):g.isPlainObject(K)?g.merge({},K):g.isArray(K)?K.slice():K}function k(x){return g.isUndefined(b[x])?g.isUndefined(A[x])?void 0:S(void 0,A[x]):S(A[x],b[x])}function D(x){if(!g.isUndefined(b[x]))return S(void 0,b[x])}function t(x){return g.isUndefined(b[x])?g.isUndefined(A[x])?void 0:S(void 0,A[x]):S(void 0,b[x])}function C(x){return x in b?S(A[x],b[x]):x in A?S(void 0,A[x]):void 0}var O={url:D,method:D,data:D,baseURL:t,transformRequest:t,transformResponse:t,paramsSerializer:t,timeout:t,timeoutMessage:t,withCredentials:t,adapter:t,responseType:t,xsrfCookieName:t,xsrfHeaderName:t,onUploadProgress:t,onDownloadProgress:t,decompress:t,maxContentLength:t,maxBodyLength:t,transport:t,httpAgent:t,httpsAgent:t,cancelToken:t,socketPath:t,responseEncoding:t,validateStatus:C};return g.forEach(Object.keys(A).concat(Object.keys(b)),function(K){var P=O[K]||k,V=P(K);g.isUndefined(V)&&P!==C||(w[K]=V)}),w}},858:(I,z,_)=>{"use strict";var g=_(9252);I.exports=function(A,b,w){var S=w.config.validateStatus;w.status&&S&&!S(w.status)?b(g("Request failed with status code "+w.status,w.config,null,w.request,w)):A(w)}},5134:(I,z,_)=>{"use strict";var g=_(4701),p=_(3324);I.exports=function(b,w,S){var k=this||p;return g.forEach(S,function(t){b=t.call(k,b,w)}),b}},3324:(I,z,_)=>{"use strict";var g=_(4701),p=_(5620),A=_(5124),b={"Content-Type":"application/x-www-form-urlencoded"};function w(t,C){!g.isUndefined(t)&&g.isUndefined(t["Content-Type"])&&(t["Content-Type"]=C)}var D={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function S(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(t=_(7729)),t}(),transformRequest:[function(C,O){return p(O,"Accept"),p(O,"Content-Type"),g.isFormData(C)||g.isArrayBuffer(C)||g.isBuffer(C)||g.isStream(C)||g.isFile(C)||g.isBlob(C)?C:g.isArrayBufferView(C)?C.buffer:g.isURLSearchParams(C)?(w(O,"application/x-www-form-urlencoded;charset=utf-8"),C.toString()):g.isObject(C)||O&&"application/json"===O["Content-Type"]?(w(O,"application/json"),function k(t,C,O){if(g.isString(t))try{return(C||JSON.parse)(t),g.trim(t)}catch(x){if("SyntaxError"!==x.name)throw x}return(O||JSON.stringify)(t)}(C)):C}],transformResponse:[function(C){var O=this.transitional||D.transitional,P=!(O&&O.silentJSONParsing)&&"json"===this.responseType;if(P||O&&O.forcedJSONParsing&&g.isString(C)&&C.length)try{return JSON.parse(C)}catch(V){if(P)throw"SyntaxError"===V.name?A(V,this,"E_JSON_PARSE"):V}return C}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(C){return C>=200&&C<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};g.forEach(["delete","get","head"],function(C){D.headers[C]={}}),g.forEach(["post","put","patch"],function(C){D.headers[C]=g.merge(b)}),I.exports=D},1773:I=>{I.exports={version:"0.22.0"}},2414:I=>{"use strict";I.exports=function(_,g){return function(){for(var A=new Array(arguments.length),b=0;b<A.length;b++)A[b]=arguments[b];return _.apply(g,A)}}},1625:(I,z,_)=>{"use strict";var g=_(4701);function p(A){return encodeURIComponent(A).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}I.exports=function(b,w,S){if(!w)return b;var k;if(S)k=S(w);else if(g.isURLSearchParams(w))k=w.toString();else{var D=[];g.forEach(w,function(O,x){null===O||typeof O>"u"||(g.isArray(O)?x+="[]":O=[O],g.forEach(O,function(P){g.isDate(P)?P=P.toISOString():g.isObject(P)&&(P=JSON.stringify(P)),D.push(p(x)+"="+p(P))}))}),k=D.join("&")}if(k){var t=b.indexOf("#");-1!==t&&(b=b.slice(0,t)),b+=(-1===b.indexOf("?")?"?":"&")+k}return b}},4554:I=>{"use strict";I.exports=function(_,g){return g?_.replace(/\/+$/,"")+"/"+g.replace(/^\/+/,""):_}},5738:(I,z,_)=>{"use strict";var g=_(4701);I.exports=g.isStandardBrowserEnv()?{write:function(b,w,S,k,D,t){var C=[];C.push(b+"="+encodeURIComponent(w)),g.isNumber(S)&&C.push("expires="+new Date(S).toGMTString()),g.isString(k)&&C.push("path="+k),g.isString(D)&&C.push("domain="+D),!0===t&&C.push("secure"),document.cookie=C.join("; ")},read:function(b){var w=document.cookie.match(new RegExp("(^|;\\s*)("+b+")=([^;]*)"));return w?decodeURIComponent(w[3]):null},remove:function(b){this.write(b,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:I=>{"use strict";I.exports=function(_){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(_)}},4603:I=>{"use strict";I.exports=function(_){return"object"==typeof _&&!0===_.isAxiosError}},6100:(I,z,_)=>{"use strict";var g=_(4701);I.exports=g.isStandardBrowserEnv()?function(){var w,A=/(msie|trident)/i.test(navigator.userAgent),b=document.createElement("a");function S(k){var D=k;return A&&(b.setAttribute("href",D),D=b.href),b.setAttribute("href",D),{href:b.href,protocol:b.protocol?b.protocol.replace(/:$/,""):"",host:b.host,search:b.search?b.search.replace(/^\?/,""):"",hash:b.hash?b.hash.replace(/^#/,""):"",hostname:b.hostname,port:b.port,pathname:"/"===b.pathname.charAt(0)?b.pathname:"/"+b.pathname}}return w=S(window.location.href),function(D){var t=g.isString(D)?S(D):D;return t.protocol===w.protocol&&t.host===w.host}}():function(){return!0}},5620:(I,z,_)=>{"use strict";var g=_(4701);I.exports=function(A,b){g.forEach(A,function(S,k){k!==b&&k.toUpperCase()===b.toUpperCase()&&(A[b]=S,delete A[k])})}},2099:(I,z,_)=>{"use strict";var g=_(4701),p=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];I.exports=function(b){var S,k,D,w={};return b&&g.forEach(b.split("\n"),function(C){if(D=C.indexOf(":"),S=g.trim(C.substr(0,D)).toLowerCase(),k=g.trim(C.substr(D+1)),S){if(w[S]&&p.indexOf(S)>=0)return;w[S]="set-cookie"===S?(w[S]?w[S]:[]).concat([k]):w[S]?w[S]+", "+k:k}}),w}},9211:I=>{"use strict";I.exports=function(_){return function(p){return _.apply(null,p)}}},4828:(I,z,_)=>{"use strict";var g=_(1773).version,p={};["object","boolean","number","function","string","symbol"].forEach(function(w,S){p[w]=function(D){return typeof D===w||"a"+(S<1?"n ":" ")+w}});var A={};p.transitional=function(S,k,D){function t(C,O){return"[Axios v"+g+"] Transitional option '"+C+"'"+O+(D?". "+D:"")}return function(C,O,x){if(!1===S)throw new Error(t(O," has been removed"+(k?" in "+k:"")));return k&&!A[O]&&(A[O]=!0,console.warn(t(O," has been deprecated since v"+k+" and will be removed in the near future"))),!S||S(C,O,x)}},I.exports={assertOptions:function b(w,S,k){if("object"!=typeof w)throw new TypeError("options must be an object");for(var D=Object.keys(w),t=D.length;t-- >0;){var C=D[t],O=S[C];if(O){var x=w[C],K=void 0===x||O(x,C,w);if(!0!==K)throw new TypeError("option "+C+" must be "+K)}else if(!0!==k)throw Error("Unknown option "+C)}},validators:p}},4701:(I,z,_)=>{"use strict";var g=_(2414),p=Object.prototype.toString;function A(F){return"[object Array]"===p.call(F)}function b(F){return typeof F>"u"}function O(F){return null!==F&&"object"==typeof F}function x(F){if("[object Object]"!==p.call(F))return!1;var H=Object.getPrototypeOf(F);return null===H||H===Object.prototype}function W(F){return"[object Function]"===p.call(F)}function j(F,H){if(!(null===F||typeof F>"u"))if("object"!=typeof F&&(F=[F]),A(F))for(var E=0,L=F.length;E<L;E++)H.call(null,F[E],E,F);else for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&H.call(null,F[N],N,F)}I.exports={isArray:A,isArrayBuffer:function S(F){return"[object ArrayBuffer]"===p.call(F)},isBuffer:function w(F){return null!==F&&!b(F)&&null!==F.constructor&&!b(F.constructor)&&"function"==typeof F.constructor.isBuffer&&F.constructor.isBuffer(F)},isFormData:function k(F){return typeof FormData<"u"&&F instanceof FormData},isArrayBufferView:function D(F){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(F):F&&F.buffer&&F.buffer instanceof ArrayBuffer},isString:function t(F){return"string"==typeof F},isNumber:function C(F){return"number"==typeof F},isObject:O,isPlainObject:x,isUndefined:b,isDate:function K(F){return"[object Date]"===p.call(F)},isFile:function P(F){return"[object File]"===p.call(F)},isBlob:function V(F){return"[object Blob]"===p.call(F)},isFunction:W,isStream:function X(F){return O(F)&&W(F.pipe)},isURLSearchParams:function oe(F){return typeof URLSearchParams<"u"&&F instanceof URLSearchParams},isStandardBrowserEnv:function re(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:j,merge:function Y(){var F={};function H(N,R){F[R]=x(F[R])&&x(N)?Y(F[R],N):x(N)?Y({},N):A(N)?N.slice():N}for(var E=0,L=arguments.length;E<L;E++)j(arguments[E],H);return F},extend:function ie(F,H,E){return j(H,function(N,R){F[R]=E&&"function"==typeof N?g(N,E):N}),F},trim:function ne(F){return F.trim?F.trim():F.replace(/^\s+|\s+$/g,"")},stripBOM:function Ze(F){return 65279===F.charCodeAt(0)&&(F=F.slice(1)),F}}},5343:(I,z)=>{"use strict";z.JQ=function K(P){for(var V,W=P.length,X=W%3,oe=[],re=0,j=W-X;re<j;re+=16383)oe.push(x(P,re,re+16383>j?j:re+16383));return 1===X?oe.push(g[(V=P[W-1])>>2]+g[V<<4&63]+"=="):2===X&&oe.push(g[(V=(P[W-2]<<8)+P[W-1])>>10]+g[V>>4&63]+g[V<<2&63]+"="),oe.join("")};for(var g=[],p=[],b=(typeof Uint8Array<"u"&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),w=0,S=b.length;w<S;++w)g[w]=b[w],p[b.charCodeAt(w)]=w;function O(P){return g[P>>18&63]+g[P>>12&63]+g[P>>6&63]+g[63&P]}function x(P,V,W){for(var oe=[],ne=V;ne<W;ne+=3)oe.push(O((P[ne]<<16&16711680)+(P[ne+1]<<8&65280)+(255&P[ne+2])));return oe.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},1764:function(I){I.exports=function(){"use strict";var _=6e4,g=36e5,p="millisecond",A="second",b="minute",w="hour",S="day",k="week",D="month",t="quarter",C="year",O="date",x="Invalid Date",K=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,V={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var E=["th","st","nd","rd"],L=H%100;return"["+H+(E[(L-20)%10]||E[L]||E[0])+"]"}},W=function(H,E,L){var N=String(H);return!N||N.length>=E?H:""+Array(E+1-N.length).join(L)+H},X={s:W,z:function(H){var E=-H.utcOffset(),L=Math.abs(E),N=Math.floor(L/60),R=L%60;return(E<=0?"+":"-")+W(N,2,"0")+":"+W(R,2,"0")},m:function H(E,L){if(E.date()<L.date())return-H(L,E);var N=12*(L.year()-E.year())+(L.month()-E.month()),R=E.clone().add(N,D),d=L-R<0,T=E.clone().add(N+(d?-1:1),D);return+(-(N+(L-R)/(d?R-T:T-R))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:D,y:C,w:k,d:S,D:O,h:w,m:b,s:A,ms:p,Q:t}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return void 0===H}},oe="en",ne={};ne[oe]=V;var re=function(H){return H instanceof Ze},j=function H(E,L,N){var R;if(!E)return oe;if("string"==typeof E){var d=E.toLowerCase();ne[d]&&(R=d),L&&(ne[d]=L,R=d);var T=E.split("-");if(!R&&T.length>1)return H(T[0])}else{var M=E.name;ne[M]=E,R=M}return!N&&R&&(oe=R),R||!N&&oe},Y=function(H,E){if(re(H))return H.clone();var L="object"==typeof E?E:{};return L.date=H,L.args=arguments,new Ze(L)},ie=X;ie.l=j,ie.i=re,ie.w=function(H,E){return Y(H,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var Ze=function(){function H(L){this.$L=j(L.locale,null,!0),this.parse(L)}var E=H.prototype;return E.parse=function(L){this.$d=function(N){var R=N.date,d=N.utc;if(null===R)return new Date(NaN);if(ie.u(R))return new Date;if(R instanceof Date)return new Date(R);if("string"==typeof R&&!/Z$/i.test(R)){var T=R.match(K);if(T){var M=T[2]-1||0,q=(T[7]||"0").substring(0,3);return d?new Date(Date.UTC(T[1],M,T[3]||1,T[4]||0,T[5]||0,T[6]||0,q)):new Date(T[1],M,T[3]||1,T[4]||0,T[5]||0,T[6]||0,q)}}return new Date(R)}(L),this.$x=L.x||{},this.init()},E.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},E.$utils=function(){return ie},E.isValid=function(){return this.$d.toString()!==x},E.isSame=function(L,N){var R=Y(L);return this.startOf(N)<=R&&R<=this.endOf(N)},E.isAfter=function(L,N){return Y(L)<this.startOf(N)},E.isBefore=function(L,N){return this.endOf(N)<Y(L)},E.$g=function(L,N,R){return ie.u(L)?this[N]:this.set(R,L)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(L,N){var R=this,d=!!ie.u(N)||N,T=ie.p(L),M=function(Me,me){var Oe=ie.w(R.$u?Date.UTC(R.$y,me,Me):new Date(R.$y,me,Me),R);return d?Oe:Oe.endOf(S)},q=function(Me,me){return ie.w(R.toDate()[Me].apply(R.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(me)),R)},J=this.$W,Q=this.$M,ce=this.$D,ge="set"+(this.$u?"UTC":"");switch(T){case C:return d?M(1,0):M(31,11);case D:return d?M(1,Q):M(0,Q+1);case k:var ye=this.$locale().weekStart||0,Fe=(J<ye?J+7:J)-ye;return M(d?ce-Fe:ce+(6-Fe),Q);case S:case O:return q(ge+"Hours",0);case w:return q(ge+"Minutes",1);case b:return q(ge+"Seconds",2);case A:return q(ge+"Milliseconds",3);default:return this.clone()}},E.endOf=function(L){return this.startOf(L,!1)},E.$set=function(L,N){var R,d=ie.p(L),T="set"+(this.$u?"UTC":""),M=(R={},R[S]=T+"Date",R[O]=T+"Date",R[D]=T+"Month",R[C]=T+"FullYear",R[w]=T+"Hours",R[b]=T+"Minutes",R[A]=T+"Seconds",R[p]=T+"Milliseconds",R)[d],q=d===S?this.$D+(N-this.$W):N;if(d===D||d===C){var J=this.clone().set(O,1);J.$d[M](q),J.init(),this.$d=J.set(O,Math.min(this.$D,J.daysInMonth())).$d}else M&&this.$d[M](q);return this.init(),this},E.set=function(L,N){return this.clone().$set(L,N)},E.get=function(L){return this[ie.p(L)]()},E.add=function(L,N){var R,d=this;L=Number(L);var T=ie.p(N),M=function(Q){var ce=Y(d);return ie.w(ce.date(ce.date()+Math.round(Q*L)),d)};if(T===D)return this.set(D,this.$M+L);if(T===C)return this.set(C,this.$y+L);if(T===S)return M(1);if(T===k)return M(7);var q=(R={},R[b]=_,R[w]=g,R[A]=1e3,R)[T]||1,J=this.$d.getTime()+L*q;return ie.w(J,this)},E.subtract=function(L,N){return this.add(-1*L,N)},E.format=function(L){var N=this,R=this.$locale();if(!this.isValid())return R.invalidDate||x;var d=L||"YYYY-MM-DDTHH:mm:ssZ",T=ie.z(this),M=this.$H,q=this.$m,J=this.$M,Q=R.weekdays,ce=R.months,ge=function(me,Oe,Ft,vt){return me&&(me[Oe]||me(N,d))||Ft[Oe].slice(0,vt)},ye=function(me){return ie.s(M%12||12,me,"0")},Fe=R.meridiem||function(me,Oe,Ft){var vt=me<12?"AM":"PM";return Ft?vt.toLowerCase():vt},Me={YY:String(this.$y).slice(-2),YYYY:this.$y,M:J+1,MM:ie.s(J+1,2,"0"),MMM:ge(R.monthsShort,J,ce,3),MMMM:ge(ce,J),D:this.$D,DD:ie.s(this.$D,2,"0"),d:String(this.$W),dd:ge(R.weekdaysMin,this.$W,Q,2),ddd:ge(R.weekdaysShort,this.$W,Q,3),dddd:Q[this.$W],H:String(M),HH:ie.s(M,2,"0"),h:ye(1),hh:ye(2),a:Fe(M,q,!0),A:Fe(M,q,!1),m:String(q),mm:ie.s(q,2,"0"),s:String(this.$s),ss:ie.s(this.$s,2,"0"),SSS:ie.s(this.$ms,3,"0"),Z:T};return d.replace(P,function(me,Oe){return Oe||Me[me]||T.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(L,N,R){var d,T=ie.p(N),M=Y(L),q=(M.utcOffset()-this.utcOffset())*_,J=this-M,Q=ie.m(this,M);return Q=(d={},d[C]=Q/12,d[D]=Q,d[t]=Q/3,d[k]=(J-q)/6048e5,d[S]=(J-q)/864e5,d[w]=J/g,d[b]=J/_,d[A]=J/1e3,d)[T]||J,R?Q:ie.a(Q)},E.daysInMonth=function(){return this.endOf(D).$D},E.$locale=function(){return ne[this.$L]},E.locale=function(L,N){if(!L)return this.$L;var R=this.clone(),d=j(L,N,!0);return d&&(R.$L=d),R},E.clone=function(){return ie.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},H}(),F=Ze.prototype;return Y.prototype=F,[["$ms",p],["$s",A],["$m",b],["$H",w],["$W",S],["$M",D],["$y",C],["$D",O]].forEach(function(H){F[H[1]]=function(E){return this.$g(E,H[0],H[1])}}),Y.extend=function(H,E){return H.$i||(H(E,Ze,Y),H.$i=!0),Y},Y.locale=j,Y.isDayjs=re,Y.unix=function(H){return Y(1e3*H)},Y.en=ne[oe],Y.Ls=ne,Y.p={},Y}()},563:function(I){I.exports=function(){"use strict";return function(z,_,g){var p="h:mm A",A={lastDay:"[Yesterday at] "+p,sameDay:"[Today at] "+p,nextDay:"[Tomorrow at] "+p,nextWeek:"dddd [at] "+p,lastWeek:"[Last] dddd [at] "+p,sameElse:"MM/DD/YYYY"};_.prototype.calendar=function(b,w){var S=w||this.$locale().calendar||A,k=g(b||void 0).startOf("d"),D=this.diff(k,"d",!0),t="sameElse",C=D<-6?t:D<-1?"lastWeek":D<0?"lastDay":D<1?"sameDay":D<2?"nextDay":D<7?"nextWeek":t,O=S[C]||A[C];return"function"==typeof O?O.call(this,g()):this.format(O)}}}()},593:I=>{I.exports="object"==typeof self?self.FormData:window.FormData},9151:I=>{var z=null;typeof WebSocket<"u"?z=WebSocket:typeof MozWebSocket<"u"?z=MozWebSocket:typeof global<"u"?z=global.WebSocket||global.MozWebSocket:typeof window<"u"?z=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(z=self.WebSocket||self.MozWebSocket),I.exports=z},2711:I=>{var z=1/0,_="[object Symbol]",g=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,w=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),k="object"==typeof global&&global&&global.Object===Object&&global,D="object"==typeof self&&self&&self.Object===Object&&self,t=k||D||Function("return this")(),O=function C(Y){return function(ie){return Y?.[ie]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"ss"}),K=Object.prototype.toString,P=t.Symbol,V=P?P.prototype:void 0,W=V?V.toString:void 0;I.exports=function j(Y){return(Y=function re(Y){return null==Y?"":function X(Y){if("string"==typeof Y)return Y;if(function ne(Y){return"symbol"==typeof Y||function oe(Y){return!!Y&&"object"==typeof Y}(Y)&&K.call(Y)==_}(Y))return W?W.call(Y):"";var ie=Y+"";return"0"==ie&&1/Y==-z?"-0":ie}(Y)}(Y))&&Y.replace(g,O).replace(w,"")}},3431:I=>{"use strict";const z=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],_=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],g=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],p=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],A=(b,w,S)=>{let k=b;return"string"==typeof w||Array.isArray(w)?k=b.toLocaleString(w,S):(!0===w||void 0!==S)&&(k=b.toLocaleString(void 0,S)),k};I.exports=(b,w)=>{if(!Number.isFinite(b))throw new TypeError(`Expected a finite number, got ${typeof b}: ${b}`);const S=(w=Object.assign({bits:!1,binary:!1},w)).bits?w.binary?p:g:w.binary?_:z;if(w.signed&&0===b)return` 0 ${S[0]}`;const k=b<0,D=k?"-":w.signed?"+":"";let t;if(k&&(b=-b),void 0!==w.minimumFractionDigits&&(t={minimumFractionDigits:w.minimumFractionDigits}),void 0!==w.maximumFractionDigits&&(t=Object.assign({maximumFractionDigits:w.maximumFractionDigits},t)),b<1)return D+A(b,w.locale,t)+" "+S[0];const C=Math.min(Math.floor(w.binary?Math.log(b)/Math.log(1024):Math.log10(b)/3),S.length-1);return b/=Math.pow(w.binary?1024:1e3,C),t||(b=b.toPrecision(3)),D+A(Number(b),w.locale,t)+" "+S[C]}},7061:(I,z,_)=>{var g=_(8698).default;function p(){"use strict";I.exports=p=function(){return A},I.exports.__esModule=!0,I.exports.default=I.exports;var A={},b=Object.prototype,w=b.hasOwnProperty,S=Object.defineProperty||function(d,T,M){d[T]=M.value},k="function"==typeof Symbol?Symbol:{},D=k.iterator||"@@iterator",t=k.asyncIterator||"@@asyncIterator",C=k.toStringTag||"@@toStringTag";function O(d,T,M){return Object.defineProperty(d,T,{value:M,enumerable:!0,configurable:!0,writable:!0}),d[T]}try{O({},"")}catch{O=function(M,q,J){return M[q]=J}}function x(d,T,M,q){var Q=Object.create((T&&T.prototype instanceof V?T:V).prototype),ce=new L(q||[]);return S(Q,"_invoke",{value:Ze(d,M,ce)}),Q}function K(d,T,M){try{return{type:"normal",arg:d.call(T,M)}}catch(q){return{type:"throw",arg:q}}}A.wrap=x;var P={};function V(){}function W(){}function X(){}var oe={};O(oe,D,function(){return this});var ne=Object.getPrototypeOf,re=ne&&ne(ne(N([])));re&&re!==b&&w.call(re,D)&&(oe=re);var j=X.prototype=V.prototype=Object.create(oe);function Y(d){["next","throw","return"].forEach(function(T){O(d,T,function(M){return this._invoke(T,M)})})}function ie(d,T){function M(J,Q,ce,ge){var ye=K(d[J],d,Q);if("throw"!==ye.type){var Fe=ye.arg,Me=Fe.value;return Me&&"object"==g(Me)&&w.call(Me,"__await")?T.resolve(Me.__await).then(function(me){M("next",me,ce,ge)},function(me){M("throw",me,ce,ge)}):T.resolve(Me).then(function(me){Fe.value=me,ce(Fe)},function(me){return M("throw",me,ce,ge)})}ge(ye.arg)}var q;S(this,"_invoke",{value:function(Q,ce){function ge(){return new T(function(ye,Fe){M(Q,ce,ye,Fe)})}return q=q?q.then(ge,ge):ge()}})}function Ze(d,T,M){var q="suspendedStart";return function(J,Q){if("executing"===q)throw new Error("Generator is already running");if("completed"===q){if("throw"===J)throw Q;return{value:void 0,done:!0}}for(M.method=J,M.arg=Q;;){var ce=M.delegate;if(ce){var ge=F(ce,M);if(ge){if(ge===P)continue;return ge}}if("next"===M.method)M.sent=M._sent=M.arg;else if("throw"===M.method){if("suspendedStart"===q)throw q="completed",M.arg;M.dispatchException(M.arg)}else"return"===M.method&&M.abrupt("return",M.arg);q="executing";var ye=K(d,T,M);if("normal"===ye.type){if(q=M.done?"completed":"suspendedYield",ye.arg===P)continue;return{value:ye.arg,done:M.done}}"throw"===ye.type&&(q="completed",M.method="throw",M.arg=ye.arg)}}}function F(d,T){var M=T.method,q=d.iterator[M];if(void 0===q)return T.delegate=null,"throw"===M&&d.iterator.return&&(T.method="return",T.arg=void 0,F(d,T),"throw"===T.method)||"return"!==M&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+M+"' method")),P;var J=K(q,d.iterator,T.arg);if("throw"===J.type)return T.method="throw",T.arg=J.arg,T.delegate=null,P;var Q=J.arg;return Q?Q.done?(T[d.resultName]=Q.value,T.next=d.nextLoc,"return"!==T.method&&(T.method="next",T.arg=void 0),T.delegate=null,P):Q:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,P)}function H(d){var T={tryLoc:d[0]};1 in d&&(T.catchLoc=d[1]),2 in d&&(T.finallyLoc=d[2],T.afterLoc=d[3]),this.tryEntries.push(T)}function E(d){var T=d.completion||{};T.type="normal",delete T.arg,d.completion=T}function L(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(H,this),this.reset(!0)}function N(d){if(d){var T=d[D];if(T)return T.call(d);if("function"==typeof d.next)return d;if(!isNaN(d.length)){var M=-1,q=function J(){for(;++M<d.length;)if(w.call(d,M))return J.value=d[M],J.done=!1,J;return J.value=void 0,J.done=!0,J};return q.next=q}}return{next:R}}function R(){return{value:void 0,done:!0}}return W.prototype=X,S(j,"constructor",{value:X,configurable:!0}),S(X,"constructor",{value:W,configurable:!0}),W.displayName=O(X,C,"GeneratorFunction"),A.isGeneratorFunction=function(d){var T="function"==typeof d&&d.constructor;return!!T&&(T===W||"GeneratorFunction"===(T.displayName||T.name))},A.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,X):(d.__proto__=X,O(d,C,"GeneratorFunction")),d.prototype=Object.create(j),d},A.awrap=function(d){return{__await:d}},Y(ie.prototype),O(ie.prototype,t,function(){return this}),A.AsyncIterator=ie,A.async=function(d,T,M,q,J){void 0===J&&(J=Promise);var Q=new ie(x(d,T,M,q),J);return A.isGeneratorFunction(T)?Q:Q.next().then(function(ce){return ce.done?ce.value:Q.next()})},Y(j),O(j,C,"Generator"),O(j,D,function(){return this}),O(j,"toString",function(){return"[object Generator]"}),A.keys=function(d){var T=Object(d),M=[];for(var q in T)M.push(q);return M.reverse(),function J(){for(;M.length;){var Q=M.pop();if(Q in T)return J.value=Q,J.done=!1,J}return J.done=!0,J}},A.values=N,L.prototype={constructor:L,reset:function(T){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!T)for(var M in this)"t"===M.charAt(0)&&w.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=void 0)},stop:function(){this.done=!0;var T=this.tryEntries[0].completion;if("throw"===T.type)throw T.arg;return this.rval},dispatchException:function(T){if(this.done)throw T;var M=this;function q(Fe,Me){return ce.type="throw",ce.arg=T,M.next=Fe,Me&&(M.method="next",M.arg=void 0),!!Me}for(var J=this.tryEntries.length-1;J>=0;--J){var Q=this.tryEntries[J],ce=Q.completion;if("root"===Q.tryLoc)return q("end");if(Q.tryLoc<=this.prev){var ge=w.call(Q,"catchLoc"),ye=w.call(Q,"finallyLoc");if(ge&&ye){if(this.prev<Q.catchLoc)return q(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return q(Q.finallyLoc)}else if(ge){if(this.prev<Q.catchLoc)return q(Q.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return q(Q.finallyLoc)}}}},abrupt:function(T,M){for(var q=this.tryEntries.length-1;q>=0;--q){var J=this.tryEntries[q];if(J.tryLoc<=this.prev&&w.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var Q=J;break}}Q&&("break"===T||"continue"===T)&&Q.tryLoc<=M&&M<=Q.finallyLoc&&(Q=null);var ce=Q?Q.completion:{};return ce.type=T,ce.arg=M,Q?(this.method="next",this.next=Q.finallyLoc,P):this.complete(ce)},complete:function(T,M){if("throw"===T.type)throw T.arg;return"break"===T.type||"continue"===T.type?this.next=T.arg:"return"===T.type?(this.rval=this.arg=T.arg,this.method="return",this.next="end"):"normal"===T.type&&M&&(this.next=M),P},finish:function(T){for(var M=this.tryEntries.length-1;M>=0;--M){var q=this.tryEntries[M];if(q.finallyLoc===T)return this.complete(q.completion,q.afterLoc),E(q),P}},catch:function(T){for(var M=this.tryEntries.length-1;M>=0;--M){var q=this.tryEntries[M];if(q.tryLoc===T){var J=q.completion;if("throw"===J.type){var Q=J.arg;E(q)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(T,M,q){return this.delegate={iterator:N(T),resultName:M,nextLoc:q},"next"===this.method&&(this.arg=void 0),P}},A}I.exports=p,I.exports.__esModule=!0,I.exports.default=I.exports},8698:I=>{function z(_){return I.exports=z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},I.exports.__esModule=!0,I.exports.default=I.exports,z(_)}I.exports=z,I.exports.__esModule=!0,I.exports.default=I.exports},4687:(I,z,_)=>{var g=_(7061)();I.exports=g;try{regeneratorRuntime=g}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}}}]);